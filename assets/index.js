function PT(i,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(i,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var As=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fl(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function IT(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var s=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return i[n]}})}),r}var _p={exports:{}},bu={},mp={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function OT(){if(Lg)return Ct;Lg=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),f=Symbol.iterator;function p(j){return j===null||typeof j!="object"?null:(j=f&&j[f]||j["@@iterator"],typeof j=="function"?j:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,T={};function S(j,N,q){this.props=j,this.context=N,this.refs=T,this.updater=q||y}S.prototype.isReactComponent={},S.prototype.setState=function(j,N){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,N,"setState")},S.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function A(){}A.prototype=S.prototype;function R(j,N,q){this.props=j,this.context=N,this.refs=T,this.updater=q||y}var L=R.prototype=new A;L.constructor=R,b(L,S.prototype),L.isPureReactComponent=!0;var V=Array.isArray,M=Object.prototype.hasOwnProperty,H={current:null},g={key:!0,ref:!0,__self:!0,__source:!0};function ne(j,N,q){var oe,de={},Te=null,Ae=null;if(N!=null)for(oe in N.ref!==void 0&&(Ae=N.ref),N.key!==void 0&&(Te=""+N.key),N)M.call(N,oe)&&!g.hasOwnProperty(oe)&&(de[oe]=N[oe]);var Ie=arguments.length-2;if(Ie===1)de.children=q;else if(1<Ie){for(var ke=Array(Ie),Ce=0;Ce<Ie;Ce++)ke[Ce]=arguments[Ce+2];de.children=ke}if(j&&j.defaultProps)for(oe in Ie=j.defaultProps,Ie)de[oe]===void 0&&(de[oe]=Ie[oe]);return{$$typeof:i,type:j,key:Te,ref:Ae,props:de,_owner:H.current}}function B(j,N){return{$$typeof:i,type:j.type,key:N,ref:j.ref,props:j.props,_owner:j._owner}}function Y(j){return typeof j=="object"&&j!==null&&j.$$typeof===i}function se(j){var N={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(q){return N[q]})}var re=/\/+/g;function he(j,N){return typeof j=="object"&&j!==null&&j.key!=null?se(""+j.key):N.toString(36)}function xe(j,N,q,oe,de){var Te=typeof j;(Te==="undefined"||Te==="boolean")&&(j=null);var Ae=!1;if(j===null)Ae=!0;else switch(Te){case"string":case"number":Ae=!0;break;case"object":switch(j.$$typeof){case i:case e:Ae=!0}}if(Ae)return Ae=j,de=de(Ae),j=oe===""?"."+he(Ae,0):oe,V(de)?(q="",j!=null&&(q=j.replace(re,"$&/")+"/"),xe(de,N,q,"",function(Ce){return Ce})):de!=null&&(Y(de)&&(de=B(de,q+(!de.key||Ae&&Ae.key===de.key?"":(""+de.key).replace(re,"$&/")+"/")+j)),N.push(de)),1;if(Ae=0,oe=oe===""?".":oe+":",V(j))for(var Ie=0;Ie<j.length;Ie++){Te=j[Ie];var ke=oe+he(Te,Ie);Ae+=xe(Te,N,q,ke,de)}else if(ke=p(j),typeof ke=="function")for(j=ke.call(j),Ie=0;!(Te=j.next()).done;)Te=Te.value,ke=oe+he(Te,Ie++),Ae+=xe(Te,N,q,ke,de);else if(Te==="object")throw N=String(j),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return Ae}function Z(j,N,q){if(j==null)return j;var oe=[],de=0;return xe(j,oe,"","",function(Te){return N.call(q,Te,de++)}),oe}function U(j){if(j._status===-1){var N=j._result;N=N(),N.then(function(q){(j._status===0||j._status===-1)&&(j._status=1,j._result=q)},function(q){(j._status===0||j._status===-1)&&(j._status=2,j._result=q)}),j._status===-1&&(j._status=0,j._result=N)}if(j._status===1)return j._result.default;throw j._result}var W={current:null},z={transition:null},Q={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:z,ReactCurrentOwner:H};function $(){throw Error("act(...) is not supported in production builds of React.")}return Ct.Children={map:Z,forEach:function(j,N,q){Z(j,function(){N.apply(this,arguments)},q)},count:function(j){var N=0;return Z(j,function(){N++}),N},toArray:function(j){return Z(j,function(N){return N})||[]},only:function(j){if(!Y(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ct.Component=S,Ct.Fragment=r,Ct.Profiler=s,Ct.PureComponent=R,Ct.StrictMode=n,Ct.Suspense=h,Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Ct.act=$,Ct.cloneElement=function(j,N,q){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var oe=b({},j.props),de=j.key,Te=j.ref,Ae=j._owner;if(N!=null){if(N.ref!==void 0&&(Te=N.ref,Ae=H.current),N.key!==void 0&&(de=""+N.key),j.type&&j.type.defaultProps)var Ie=j.type.defaultProps;for(ke in N)M.call(N,ke)&&!g.hasOwnProperty(ke)&&(oe[ke]=N[ke]===void 0&&Ie!==void 0?Ie[ke]:N[ke])}var ke=arguments.length-2;if(ke===1)oe.children=q;else if(1<ke){Ie=Array(ke);for(var Ce=0;Ce<ke;Ce++)Ie[Ce]=arguments[Ce+2];oe.children=Ie}return{$$typeof:i,type:j.type,key:de,ref:Te,props:oe,_owner:Ae}},Ct.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:a,_context:j},j.Consumer=j},Ct.createElement=ne,Ct.createFactory=function(j){var N=ne.bind(null,j);return N.type=j,N},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(j){return{$$typeof:c,render:j}},Ct.isValidElement=Y,Ct.lazy=function(j){return{$$typeof:m,_payload:{_status:-1,_result:j},_init:U}},Ct.memo=function(j,N){return{$$typeof:_,type:j,compare:N===void 0?null:N}},Ct.startTransition=function(j){var N=z.transition;z.transition={};try{j()}finally{z.transition=N}},Ct.unstable_act=$,Ct.useCallback=function(j,N){return W.current.useCallback(j,N)},Ct.useContext=function(j){return W.current.useContext(j)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(j){return W.current.useDeferredValue(j)},Ct.useEffect=function(j,N){return W.current.useEffect(j,N)},Ct.useId=function(){return W.current.useId()},Ct.useImperativeHandle=function(j,N,q){return W.current.useImperativeHandle(j,N,q)},Ct.useInsertionEffect=function(j,N){return W.current.useInsertionEffect(j,N)},Ct.useLayoutEffect=function(j,N){return W.current.useLayoutEffect(j,N)},Ct.useMemo=function(j,N){return W.current.useMemo(j,N)},Ct.useReducer=function(j,N,q){return W.current.useReducer(j,N,q)},Ct.useRef=function(j){return W.current.useRef(j)},Ct.useState=function(j){return W.current.useState(j)},Ct.useSyncExternalStore=function(j,N,q){return W.current.useSyncExternalStore(j,N,q)},Ct.useTransition=function(){return W.current.useTransition()},Ct.version="18.3.1",Ct}var Bg;function hm(){return Bg||(Bg=1,mp.exports=OT()),mp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function RT(){if(jg)return bu;jg=1;var i=hm(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,_){var m,f={},p=null,y=null;_!==void 0&&(p=""+_),h.key!==void 0&&(p=""+h.key),h.ref!==void 0&&(y=h.ref);for(m in h)n.call(h,m)&&!a.hasOwnProperty(m)&&(f[m]=h[m]);if(c&&c.defaultProps)for(m in h=c.defaultProps,h)f[m]===void 0&&(f[m]=h[m]);return{$$typeof:e,type:c,key:p,ref:y,props:f,_owner:s.current}}return bu.Fragment=r,bu.jsx=l,bu.jsxs=l,bu}var Ug;function MT(){return Ug||(Ug=1,_p.exports=RT()),_p.exports}var F=MT(),kT=hm();const Ut=Fl(kT);var Ph={},yp={exports:{}},En={},gp={exports:{}},xp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg;function DT(){return Gg||(Gg=1,function(i){function e(z,Q){var $=z.length;z.push(Q);e:for(;0<$;){var j=$-1>>>1,N=z[j];if(0<s(N,Q))z[j]=Q,z[$]=N,$=j;else break e}}function r(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var Q=z[0],$=z.pop();if($!==Q){z[0]=$;e:for(var j=0,N=z.length,q=N>>>1;j<q;){var oe=2*(j+1)-1,de=z[oe],Te=oe+1,Ae=z[Te];if(0>s(de,$))Te<N&&0>s(Ae,de)?(z[j]=Ae,z[Te]=$,j=Te):(z[j]=de,z[oe]=$,j=oe);else if(Te<N&&0>s(Ae,$))z[j]=Ae,z[Te]=$,j=Te;else break e}}return Q}function s(z,Q){var $=z.sortIndex-Q.sortIndex;return $!==0?$:z.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();i.unstable_now=function(){return l.now()-c}}var h=[],_=[],m=1,f=null,p=3,y=!1,b=!1,T=!1,S=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(z){for(var Q=r(_);Q!==null;){if(Q.callback===null)n(_);else if(Q.startTime<=z)n(_),Q.sortIndex=Q.expirationTime,e(h,Q);else break;Q=r(_)}}function V(z){if(T=!1,L(z),!b)if(r(h)!==null)b=!0,U(M);else{var Q=r(_);Q!==null&&W(V,Q.startTime-z)}}function M(z,Q){b=!1,T&&(T=!1,A(ne),ne=-1),y=!0;var $=p;try{for(L(Q),f=r(h);f!==null&&(!(f.expirationTime>Q)||z&&!se());){var j=f.callback;if(typeof j=="function"){f.callback=null,p=f.priorityLevel;var N=j(f.expirationTime<=Q);Q=i.unstable_now(),typeof N=="function"?f.callback=N:f===r(h)&&n(h),L(Q)}else n(h);f=r(h)}if(f!==null)var q=!0;else{var oe=r(_);oe!==null&&W(V,oe.startTime-Q),q=!1}return q}finally{f=null,p=$,y=!1}}var H=!1,g=null,ne=-1,B=5,Y=-1;function se(){return!(i.unstable_now()-Y<B)}function re(){if(g!==null){var z=i.unstable_now();Y=z;var Q=!0;try{Q=g(!0,z)}finally{Q?he():(H=!1,g=null)}}else H=!1}var he;if(typeof R=="function")he=function(){R(re)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Z=xe.port2;xe.port1.onmessage=re,he=function(){Z.postMessage(null)}}else he=function(){S(re,0)};function U(z){g=z,H||(H=!0,he())}function W(z,Q){ne=S(function(){z(i.unstable_now())},Q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_continueExecution=function(){b||y||(b=!0,U(M))},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return p},i.unstable_getFirstCallbackNode=function(){return r(h)},i.unstable_next=function(z){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var $=p;p=Q;try{return z()}finally{p=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(z,Q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var $=p;p=z;try{return Q()}finally{p=$}},i.unstable_scheduleCallback=function(z,Q,$){var j=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?j+$:j):$=j,z){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=$+N,z={id:m++,callback:Q,priorityLevel:z,startTime:$,expirationTime:N,sortIndex:-1},$>j?(z.sortIndex=$,e(_,z),r(h)===null&&z===r(_)&&(T?(A(ne),ne=-1):T=!0,W(V,$-j))):(z.sortIndex=N,e(h,z),b||y||(b=!0,U(M))),z},i.unstable_shouldYield=se,i.unstable_wrapCallback=function(z){var Q=p;return function(){var $=p;p=Q;try{return z.apply(this,arguments)}finally{p=$}}}}(xp)),xp}var Hg;function NT(){return Hg||(Hg=1,gp.exports=DT()),gp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function FT(){if(zg)return En;zg=1;var i=hm(),e=NT();function r(o){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+o,d=1;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(o,u){l(o,u),l(o+"Capture",u)}function l(o,u){for(s[o]=u,o=0;o<u.length;o++)n.add(u[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},f={};function p(o){return h.call(f,o)?!0:h.call(m,o)?!1:_.test(o)?f[o]=!0:(m[o]=!0,!1)}function y(o,u,d,x){if(d!==null&&d.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return x?!1:d!==null?!d.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function b(o,u,d,x){if(u===null||typeof u>"u"||y(o,u,d,x))return!0;if(x)return!1;if(d!==null)switch(d.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function T(o,u,d,x,E,I,G){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=x,this.attributeNamespace=E,this.mustUseProperty=d,this.propertyName=o,this.type=u,this.sanitizeURL=I,this.removeEmptyString=G}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){S[o]=new T(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var u=o[0];S[u]=new T(u,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){S[o]=new T(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){S[o]=new T(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){S[o]=new T(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){S[o]=new T(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){S[o]=new T(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){S[o]=new T(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){S[o]=new T(o,5,!1,o.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function R(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var u=o.replace(A,R);S[u]=new T(u,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var u=o.replace(A,R);S[u]=new T(u,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var u=o.replace(A,R);S[u]=new T(u,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){S[o]=new T(o,1,!1,o.toLowerCase(),null,!1,!1)}),S.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){S[o]=new T(o,1,!1,o.toLowerCase(),null,!0,!0)});function L(o,u,d,x){var E=S.hasOwnProperty(u)?S[u]:null;(E!==null?E.type!==0:x||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(b(u,d,E,x)&&(d=null),x||E===null?p(u)&&(d===null?o.removeAttribute(u):o.setAttribute(u,""+d)):E.mustUseProperty?o[E.propertyName]=d===null?E.type===3?!1:"":d:(u=E.attributeName,x=E.attributeNamespace,d===null?o.removeAttribute(u):(E=E.type,d=E===3||E===4&&d===!0?"":""+d,x?o.setAttributeNS(x,u,d):o.setAttribute(u,d))))}var V=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),H=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),ne=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),se=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),z=Symbol.iterator;function Q(o){return o===null||typeof o!="object"?null:(o=z&&o[z]||o["@@iterator"],typeof o=="function"?o:null)}var $=Object.assign,j;function N(o){if(j===void 0)try{throw Error()}catch(d){var u=d.stack.trim().match(/\n( *(at )?)/);j=u&&u[1]||""}return`
`+j+o}var q=!1;function oe(o,u){if(!o||q)return"";q=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(ge){var x=ge}Reflect.construct(o,[],u)}else{try{u.call()}catch(ge){x=ge}o.call(u.prototype)}else{try{throw Error()}catch(ge){x=ge}o()}}catch(ge){if(ge&&x&&typeof ge.stack=="string"){for(var E=ge.stack.split(`
`),I=x.stack.split(`
`),G=E.length-1,ee=I.length-1;1<=G&&0<=ee&&E[G]!==I[ee];)ee--;for(;1<=G&&0<=ee;G--,ee--)if(E[G]!==I[ee]){if(G!==1||ee!==1)do if(G--,ee--,0>ee||E[G]!==I[ee]){var ie=`
`+E[G].replace(" at new "," at ");return o.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",o.displayName)),ie}while(1<=G&&0<=ee);break}}}finally{q=!1,Error.prepareStackTrace=d}return(o=o?o.displayName||o.name:"")?N(o):""}function de(o){switch(o.tag){case 5:return N(o.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return o=oe(o.type,!1),o;case 11:return o=oe(o.type.render,!1),o;case 1:return o=oe(o.type,!0),o;default:return""}}function Te(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case g:return"Fragment";case H:return"Portal";case B:return"Profiler";case ne:return"StrictMode";case he:return"Suspense";case xe:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case se:return(o.displayName||"Context")+".Consumer";case Y:return(o._context.displayName||"Context")+".Provider";case re:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Z:return u=o.displayName||null,u!==null?u:Te(o.type)||"Memo";case U:u=o._payload,o=o._init;try{return Te(o(u))}catch{}}return null}function Ae(o){var u=o.type;switch(o.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=u.render,o=o.displayName||o.name||"",u.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(u);case 8:return u===ne?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function Ie(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function ke(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Ce(o){var u=ke(o)?"checked":"value",d=Object.getOwnPropertyDescriptor(o.constructor.prototype,u),x=""+o[u];if(!o.hasOwnProperty(u)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var E=d.get,I=d.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return E.call(this)},set:function(G){x=""+G,I.call(this,G)}}),Object.defineProperty(o,u,{enumerable:d.enumerable}),{getValue:function(){return x},setValue:function(G){x=""+G},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function He(o){o._valueTracker||(o._valueTracker=Ce(o))}function Ge(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var d=u.getValue(),x="";return o&&(x=ke(o)?o.checked?"true":"false":o.value),o=x,o!==d?(u.setValue(o),!0):!1}function rt(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function qe(o,u){var d=u.checked;return $({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??o._wrapperState.initialChecked})}function Ve(o,u){var d=u.defaultValue==null?"":u.defaultValue,x=u.checked!=null?u.checked:u.defaultChecked;d=Ie(u.value!=null?u.value:d),o._wrapperState={initialChecked:x,initialValue:d,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function Ue(o,u){u=u.checked,u!=null&&L(o,"checked",u,!1)}function nt(o,u){Ue(o,u);var d=Ie(u.value),x=u.type;if(d!=null)x==="number"?(d===0&&o.value===""||o.value!=d)&&(o.value=""+d):o.value!==""+d&&(o.value=""+d);else if(x==="submit"||x==="reset"){o.removeAttribute("value");return}u.hasOwnProperty("value")?Er(o,u.type,d):u.hasOwnProperty("defaultValue")&&Er(o,u.type,Ie(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(o.defaultChecked=!!u.defaultChecked)}function Tt(o,u,d){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var x=u.type;if(!(x!=="submit"&&x!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+o._wrapperState.initialValue,d||u===o.value||(o.value=u),o.defaultValue=u}d=o.name,d!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,d!==""&&(o.name=d)}function Er(o,u,d){(u!=="number"||rt(o.ownerDocument)!==o)&&(d==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+d&&(o.defaultValue=""+d))}var hr=Array.isArray;function nr(o,u,d,x){if(o=o.options,u){u={};for(var E=0;E<d.length;E++)u["$"+d[E]]=!0;for(d=0;d<o.length;d++)E=u.hasOwnProperty("$"+o[d].value),o[d].selected!==E&&(o[d].selected=E),E&&x&&(o[d].defaultSelected=!0)}else{for(d=""+Ie(d),u=null,E=0;E<o.length;E++){if(o[E].value===d){o[E].selected=!0,x&&(o[E].defaultSelected=!0);return}u!==null||o[E].disabled||(u=o[E])}u!==null&&(u.selected=!0)}}function Yt(o,u){if(u.dangerouslySetInnerHTML!=null)throw Error(r(91));return $({},u,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Dr(o,u){var d=u.value;if(d==null){if(d=u.children,u=u.defaultValue,d!=null){if(u!=null)throw Error(r(92));if(hr(d)){if(1<d.length)throw Error(r(93));d=d[0]}u=d}u==null&&(u=""),d=u}o._wrapperState={initialValue:Ie(d)}}function Nr(o,u){var d=Ie(u.value),x=Ie(u.defaultValue);d!=null&&(d=""+d,d!==o.value&&(o.value=d),u.defaultValue==null&&o.defaultValue!==d&&(o.defaultValue=d)),x!=null&&(o.defaultValue=""+x)}function Je(o){var u=o.textContent;u===o._wrapperState.initialValue&&u!==""&&u!==null&&(o.value=u)}function Cr(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Us(o,u){return o==null||o==="http://www.w3.org/1999/xhtml"?Cr(u):o==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Gs,Pi=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,d,x,E){MSApp.execUnsafeLocalFunction(function(){return o(u,d,x,E)})}:o}(function(o,u){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=u;else{for(Gs=Gs||document.createElement("div"),Gs.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=Gs.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;u.firstChild;)o.appendChild(u.firstChild)}});function zn(o,u){if(u){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=u;return}}o.textContent=u}var ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ts=["Webkit","ms","Moz","O"];Object.keys(ni).forEach(function(o){ts.forEach(function(u){u=u+o.charAt(0).toUpperCase()+o.substring(1),ni[u]=ni[o]})});function dn(o,u,d){return u==null||typeof u=="boolean"||u===""?"":d||typeof u!="number"||u===0||ni.hasOwnProperty(o)&&ni[o]?(""+u).trim():u+"px"}function pn(o,u){o=o.style;for(var d in u)if(u.hasOwnProperty(d)){var x=d.indexOf("--")===0,E=dn(d,u[d],x);d==="float"&&(d="cssFloat"),x?o.setProperty(d,E):o[d]=E}}var Cn=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(o,u){if(u){if(Cn[o]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(r(137,o));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(r(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(r(61))}if(u.style!=null&&typeof u.style!="object")throw Error(r(62))}}function ye(o,u){if(o.indexOf("-")===-1)return typeof u.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var St=null;function Mt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Nt=null,at=null,fr=null;function An(o){if(o=au(o)){if(typeof Nt!="function")throw Error(r(280));var u=o.stateNode;u&&(u=zc(u),Nt(o.stateNode,o.type,u))}}function Ar(o){at?fr?fr.push(o):fr=[o]:at=o}function Kt(){if(at){var o=at,u=fr;if(fr=at=null,An(o),u)for(o=0;o<u.length;o++)An(u[o])}}function dr(o,u){return o(u)}function Pn(){}var Hr=!1;function Hs(o,u,d){if(Hr)return o(u,d);Hr=!0;try{return dr(o,u,d)}finally{Hr=!1,(at!==null||fr!==null)&&(Pn(),Kt())}}function ii(o,u){var d=o.stateNode;if(d===null)return null;var x=zc(d);if(x===null)return null;d=x[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(r(231,u,typeof d));return d}var In=!1;if(c)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){In=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{In=!1}function rs(o,u,d,x,E,I,G,ee,ie){var ge=Array.prototype.slice.call(arguments,3);try{u.apply(d,ge)}catch(Oe){this.onError(Oe)}}var sn=!1,Ii=null,Oi=!1,zs=null,Ia={onError:function(o){sn=!0,Ii=o}};function Oa(o,u,d,x,E,I,G,ee,ie){sn=!1,Ii=null,rs.apply(Ia,arguments)}function Mo(o,u,d,x,E,I,G,ee,ie){if(Oa.apply(this,arguments),sn){if(sn){var ge=Ii;sn=!1,Ii=null}else throw Error(r(198));Oi||(Oi=!0,zs=ge)}}function vn(o){var u=o,d=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(d=u.return),o=u.return;while(o)}return u.tag===3?d:null}function Ra(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function si(o){if(vn(o)!==o)throw Error(r(188))}function Xs(o){var u=o.alternate;if(!u){if(u=vn(o),u===null)throw Error(r(188));return u!==o?null:o}for(var d=o,x=u;;){var E=d.return;if(E===null)break;var I=E.alternate;if(I===null){if(x=E.return,x!==null){d=x;continue}break}if(E.child===I.child){for(I=E.child;I;){if(I===d)return si(E),o;if(I===x)return si(E),u;I=I.sibling}throw Error(r(188))}if(d.return!==x.return)d=E,x=I;else{for(var G=!1,ee=E.child;ee;){if(ee===d){G=!0,d=E,x=I;break}if(ee===x){G=!0,x=E,d=I;break}ee=ee.sibling}if(!G){for(ee=I.child;ee;){if(ee===d){G=!0,d=I,x=E;break}if(ee===x){G=!0,x=I,d=E;break}ee=ee.sibling}if(!G)throw Error(r(189))}}if(d.alternate!==x)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?o:u}function On(o){return o=Xs(o),o!==null?ai(o):null}function ai(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var u=ai(o);if(u!==null)return u;o=o.sibling}return null}var ns=e.unstable_scheduleCallback,Vs=e.unstable_cancelCallback,Zf=e.unstable_shouldYield,Ma=e.unstable_requestPaint,Qt=e.unstable_now,xc=e.unstable_getCurrentPriorityLevel,ko=e.unstable_ImmediatePriority,zl=e.unstable_UserBlockingPriority,Do=e.unstable_NormalPriority,Xl=e.unstable_LowPriority,bc=e.unstable_IdlePriority,No=null,Rn=null;function wc(o){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(No,o,void 0,(o.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:qs,Tc=Math.log,Kr=Math.LN2;function qs(o){return o>>>=0,o===0?32:31-(Tc(o)/Kr|0)|0}var is=64,Fo=4194304;function ka(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Ws(o,u){var d=o.pendingLanes;if(d===0)return 0;var x=0,E=o.suspendedLanes,I=o.pingedLanes,G=d&268435455;if(G!==0){var ee=G&~E;ee!==0?x=ka(ee):(I&=G,I!==0&&(x=ka(I)))}else G=d&~E,G!==0?x=ka(G):I!==0&&(x=ka(I));if(x===0)return 0;if(u!==0&&u!==x&&(u&E)===0&&(E=x&-x,I=u&-u,E>=I||E===16&&(I&4194240)!==0))return u;if((x&4)!==0&&(x|=d&16),u=o.entangledLanes,u!==0)for(o=o.entanglements,u&=x;0<u;)d=31-an(u),E=1<<d,x|=o[d],u&=~E;return x}function Sc(o,u){switch(o){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lo(o,u){for(var d=o.suspendedLanes,x=o.pingedLanes,E=o.expirationTimes,I=o.pendingLanes;0<I;){var G=31-an(I),ee=1<<G,ie=E[G];ie===-1?((ee&d)===0||(ee&x)!==0)&&(E[G]=Sc(ee,u)):ie<=u&&(o.expiredLanes|=ee),I&=~ee}}function Bo(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Ec(){var o=is;return is<<=1,(is&4194240)===0&&(is=64),o}function Vl(o){for(var u=[],d=0;31>d;d++)u.push(o);return u}function zr(o,u,d){o.pendingLanes|=u,u!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,u=31-an(u),o[u]=d}function Cc(o,u){var d=o.pendingLanes&~u;o.pendingLanes=u,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=u,o.mutableReadLanes&=u,o.entangledLanes&=u,u=o.entanglements;var x=o.eventTimes;for(o=o.expirationTimes;0<d;){var E=31-an(d),I=1<<E;u[E]=0,x[E]=-1,o[E]=-1,d&=~I}}function ss(o,u){var d=o.entangledLanes|=u;for(o=o.entanglements;d;){var x=31-an(d),E=1<<x;E&u|o[x]&u&&(o[x]|=u),d&=~E}}var Ft=0;function Ac(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Ri,oi,jo,Pc,$s,Uo=!1,Ys=[],li=null,ui=null,Mi=null,Ks=new Map,Da=new Map,ki=[],ql="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ic(o,u){switch(o){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":Ks.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Da.delete(u.pointerId)}}function Na(o,u,d,x,E,I){return o===null||o.nativeEvent!==I?(o={blockedOn:u,domEventName:d,eventSystemFlags:x,nativeEvent:I,targetContainers:[E]},u!==null&&(u=au(u),u!==null&&oi(u)),o):(o.eventSystemFlags|=x,u=o.targetContainers,E!==null&&u.indexOf(E)===-1&&u.push(E),o)}function Jf(o,u,d,x,E){switch(u){case"focusin":return li=Na(li,o,u,d,x,E),!0;case"dragenter":return ui=Na(ui,o,u,d,x,E),!0;case"mouseover":return Mi=Na(Mi,o,u,d,x,E),!0;case"pointerover":var I=E.pointerId;return Ks.set(I,Na(Ks.get(I)||null,o,u,d,x,E)),!0;case"gotpointercapture":return I=E.pointerId,Da.set(I,Na(Da.get(I)||null,o,u,d,x,E)),!0}return!1}function Oc(o){var u=Ga(o.target);if(u!==null){var d=vn(u);if(d!==null){if(u=d.tag,u===13){if(u=Ra(d),u!==null){o.blockedOn=u,$s(o.priority,function(){jo(d)});return}}else if(u===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Go(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var d=Wl(o.domEventName,o.eventSystemFlags,u[0],o.nativeEvent);if(d===null){d=o.nativeEvent;var x=new d.constructor(d.type,d);St=x,d.target.dispatchEvent(x),St=null}else return u=au(d),u!==null&&oi(u),o.blockedOn=d,!1;u.shift()}return!0}function Rc(o,u,d){Go(o)&&d.delete(u)}function ed(){Uo=!1,li!==null&&Go(li)&&(li=null),ui!==null&&Go(ui)&&(ui=null),Mi!==null&&Go(Mi)&&(Mi=null),Ks.forEach(Rc),Da.forEach(Rc)}function Qs(o,u){o.blockedOn===u&&(o.blockedOn=null,Uo||(Uo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ed)))}function as(o){function u(E){return Qs(E,o)}if(0<Ys.length){Qs(Ys[0],o);for(var d=1;d<Ys.length;d++){var x=Ys[d];x.blockedOn===o&&(x.blockedOn=null)}}for(li!==null&&Qs(li,o),ui!==null&&Qs(ui,o),Mi!==null&&Qs(Mi,o),Ks.forEach(u),Da.forEach(u),d=0;d<ki.length;d++)x=ki[d],x.blockedOn===o&&(x.blockedOn=null);for(;0<ki.length&&(d=ki[0],d.blockedOn===null);)Oc(d),d.blockedOn===null&&ki.shift()}var os=V.ReactCurrentBatchConfig,Zs=!0;function Mc(o,u,d,x){var E=Ft,I=os.transition;os.transition=null;try{Ft=1,Fa(o,u,d,x)}finally{Ft=E,os.transition=I}}function kc(o,u,d,x){var E=Ft,I=os.transition;os.transition=null;try{Ft=4,Fa(o,u,d,x)}finally{Ft=E,os.transition=I}}function Fa(o,u,d,x){if(Zs){var E=Wl(o,u,d,x);if(E===null)ad(o,u,x,Ho,d),Ic(o,x);else if(Jf(E,o,u,d,x))x.stopPropagation();else if(Ic(o,x),u&4&&-1<ql.indexOf(o)){for(;E!==null;){var I=au(E);if(I!==null&&Ri(I),I=Wl(o,u,d,x),I===null&&ad(o,u,x,Ho,d),I===E)break;E=I}E!==null&&x.stopPropagation()}else ad(o,u,x,null,d)}}var Ho=null;function Wl(o,u,d,x){if(Ho=null,o=Mt(x),o=Ga(o),o!==null)if(u=vn(o),u===null)o=null;else if(d=u.tag,d===13){if(o=Ra(u),o!==null)return o;o=null}else if(d===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null);return Ho=o,null}function Dc(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xc()){case ko:return 1;case zl:return 4;case Do:case Xl:return 16;case bc:return 536870912;default:return 16}default:return 16}}var _n=null,zo=null,Js=null;function Nc(){if(Js)return Js;var o,u=zo,d=u.length,x,E="value"in _n?_n.value:_n.textContent,I=E.length;for(o=0;o<d&&u[o]===E[o];o++);var G=d-o;for(x=1;x<=G&&u[d-x]===E[I-x];x++);return Js=E.slice(o,1<x?1-x:void 0)}function Xo(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Vo(){return!0}function v(){return!1}function w(o){function u(d,x,E,I,G){this._reactName=d,this._targetInst=E,this.type=x,this.nativeEvent=I,this.target=G,this.currentTarget=null;for(var ee in o)o.hasOwnProperty(ee)&&(d=o[ee],this[ee]=d?d(I):I[ee]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Vo:v,this.isPropagationStopped=v,this}return $(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Vo)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Vo)},persist:function(){},isPersistent:Vo}),u}var P={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},O=w(P),k=$({},P,{view:0,detail:0}),D=w(k),X,te,J,ue=$({},k,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:us,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==J&&(J&&o.type==="mousemove"?(X=o.screenX-J.screenX,te=o.screenY-J.screenY):te=X=0,J=o),X)},movementY:function(o){return"movementY"in o?o.movementY:te}}),we=w(ue),Ee=$({},ue,{dataTransfer:0}),me=w(Ee),Re=$({},k,{relatedTarget:0}),ft=w(Re),At=$({},P,{animationName:0,elapsedTime:0,pseudoElement:0}),gt=w(At),Pr=$({},P,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),pr=w(Pr),Xn=$({},P,{data:0}),Mn=w(Xn),Et={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ls={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},It={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zt(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=It[o])?!!u[o]:!1}function us(){return Zt}var $l=$({},k,{key:function(o){if(o.key){var u=Et[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Xo(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?ls[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:us,charCode:function(o){return o.type==="keypress"?Xo(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Xo(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Vn=w($l),La=$({},ue,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kn=w(La),Di=$({},k,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:us}),Ni=w(Di),mn=$({},P,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yl=w(mn),ci=$({},ue,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),hi=w(ci),td=[9,13,27,32],Kl=c&&"CompositionEvent"in window,Ba=null;c&&"documentMode"in document&&(Ba=document.documentMode);var Lt=c&&"TextEvent"in window&&!Ba,ja=c&&(!Kl||Ba&&8<Ba&&11>=Ba),yn=" ",cs=!1;function Fc(o,u){switch(o){case"keyup":return td.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lc(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var hs=!1;function fs(o,u){switch(o){case"compositionend":return Lc(u);case"keypress":return u.which!==32?null:(cs=!0,yn);case"textInput":return o=u.data,o===yn&&cs?null:o;default:return null}}function Ql(o,u){if(hs)return o==="compositionend"||!Kl&&Fc(o,u)?(o=Nc(),Js=zo=_n=null,hs=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return ja&&u.locale!=="ko"?null:u.data;default:return null}}var Fi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zl(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!Fi[o.type]:u==="textarea"}function ea(o,u,d,x){Ar(x),u=Uc(u,"onChange"),0<u.length&&(d=new O("onChange","change",null,d,x),o.push({event:d,listeners:u}))}var Li=null,Bi=null;function Jl(o){Jm(o,0)}function qo(o){var u=Jo(o);if(Ge(u))return o}function Wo(o,u){if(o==="change")return u}var $o=!1;if(c){var Ua;if(c){var eu="oninput"in document;if(!eu){var Yo=document.createElement("div");Yo.setAttribute("oninput","return;"),eu=typeof Yo.oninput=="function"}Ua=eu}else Ua=!1;$o=Ua&&(!document.documentMode||9<document.documentMode)}function tu(){Li&&(Li.detachEvent("onpropertychange",K),Bi=Li=null)}function K(o){if(o.propertyName==="value"&&qo(Bi)){var u=[];ea(u,Bi,o,Mt(o)),Hs(Jl,u)}}function ae(o,u,d){o==="focusin"?(tu(),Li=u,Bi=d,Li.attachEvent("onpropertychange",K)):o==="focusout"&&tu()}function pe(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return qo(Bi)}function be(o,u){if(o==="click")return qo(u)}function Se(o,u){if(o==="input"||o==="change")return qo(u)}function Fe(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Be=typeof Object.is=="function"?Object.is:Fe;function $e(o,u){if(Be(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var d=Object.keys(o),x=Object.keys(u);if(d.length!==x.length)return!1;for(x=0;x<d.length;x++){var E=d[x];if(!h.call(u,E)||!Be(o[E],u[E]))return!1}return!0}function je(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function wt(o,u){var d=je(o);o=0;for(var x;d;){if(d.nodeType===3){if(x=o+d.textContent.length,o<=u&&x>=u)return{node:d,offset:u-o};o=x}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=je(d)}}function ht(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?ht(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function dt(){for(var o=window,u=rt();u instanceof o.HTMLIFrameElement;){try{var d=typeof u.contentWindow.location.href=="string"}catch{d=!1}if(d)o=u.contentWindow;else break;u=rt(o.document)}return u}function xt(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}function st(o){var u=dt(),d=o.focusedElem,x=o.selectionRange;if(u!==d&&d&&d.ownerDocument&&ht(d.ownerDocument.documentElement,d)){if(x!==null&&xt(d)){if(u=x.start,o=x.end,o===void 0&&(o=u),"selectionStart"in d)d.selectionStart=u,d.selectionEnd=Math.min(o,d.value.length);else if(o=(u=d.ownerDocument||document)&&u.defaultView||window,o.getSelection){o=o.getSelection();var E=d.textContent.length,I=Math.min(x.start,E);x=x.end===void 0?I:Math.min(x.end,E),!o.extend&&I>x&&(E=x,x=I,I=E),E=wt(d,I);var G=wt(d,x);E&&G&&(o.rangeCount!==1||o.anchorNode!==E.node||o.anchorOffset!==E.offset||o.focusNode!==G.node||o.focusOffset!==G.offset)&&(u=u.createRange(),u.setStart(E.node,E.offset),o.removeAllRanges(),I>x?(o.addRange(u),o.extend(G.node,G.offset)):(u.setEnd(G.node,G.offset),o.addRange(u)))}}for(u=[],o=d;o=o.parentNode;)o.nodeType===1&&u.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<u.length;d++)o=u[d],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Gt=c&&"documentMode"in document&&11>=document.documentMode,vr=null,xr=null,Lr=null,gn=!1;function ds(o,u,d){var x=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;gn||vr==null||vr!==rt(x)||(x=vr,"selectionStart"in x&&xt(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Lr&&$e(Lr,x)||(Lr=x,x=Uc(xr,"onSelect"),0<x.length&&(u=new O("onSelect","select",null,u,d),o.push({event:u,listeners:x}),u.target=vr)))}function br(o,u){var d={};return d[o.toLowerCase()]=u.toLowerCase(),d["Webkit"+o]="webkit"+u,d["Moz"+o]="moz"+u,d}var Ko={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},rd={},Vm={};c&&(Vm=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function Bc(o){if(rd[o])return rd[o];if(!Ko[o])return o;var u=Ko[o],d;for(d in u)if(u.hasOwnProperty(d)&&d in Vm)return rd[o]=u[d];return o}var qm=Bc("animationend"),Wm=Bc("animationiteration"),$m=Bc("animationstart"),Ym=Bc("transitionend"),Km=new Map,Qm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ta(o,u){Km.set(o,u),a(u,[o])}for(var nd=0;nd<Qm.length;nd++){var id=Qm[nd],Lw=id.toLowerCase(),Bw=id[0].toUpperCase()+id.slice(1);ta(Lw,"on"+Bw)}ta(qm,"onAnimationEnd"),ta(Wm,"onAnimationIteration"),ta($m,"onAnimationStart"),ta("dblclick","onDoubleClick"),ta("focusin","onFocus"),ta("focusout","onBlur"),ta(Ym,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ru));function Zm(o,u,d){var x=o.type||"unknown-event";o.currentTarget=d,Mo(x,u,void 0,o),o.currentTarget=null}function Jm(o,u){u=(u&4)!==0;for(var d=0;d<o.length;d++){var x=o[d],E=x.event;x=x.listeners;e:{var I=void 0;if(u)for(var G=x.length-1;0<=G;G--){var ee=x[G],ie=ee.instance,ge=ee.currentTarget;if(ee=ee.listener,ie!==I&&E.isPropagationStopped())break e;Zm(E,ee,ge),I=ie}else for(G=0;G<x.length;G++){if(ee=x[G],ie=ee.instance,ge=ee.currentTarget,ee=ee.listener,ie!==I&&E.isPropagationStopped())break e;Zm(E,ee,ge),I=ie}}}if(Oi)throw o=zs,Oi=!1,zs=null,o}function qt(o,u){var d=u[fd];d===void 0&&(d=u[fd]=new Set);var x=o+"__bubble";d.has(x)||(ey(u,o,2,!1),d.add(x))}function sd(o,u,d){var x=0;u&&(x|=4),ey(d,o,x,u)}var jc="_reactListening"+Math.random().toString(36).slice(2);function nu(o){if(!o[jc]){o[jc]=!0,n.forEach(function(d){d!=="selectionchange"&&(jw.has(d)||sd(d,!1,o),sd(d,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[jc]||(u[jc]=!0,sd("selectionchange",!1,u))}}function ey(o,u,d,x){switch(Dc(u)){case 1:var E=Mc;break;case 4:E=kc;break;default:E=Fa}d=E.bind(null,u,d,o),E=void 0,!In||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(E=!0),x?E!==void 0?o.addEventListener(u,d,{capture:!0,passive:E}):o.addEventListener(u,d,!0):E!==void 0?o.addEventListener(u,d,{passive:E}):o.addEventListener(u,d,!1)}function ad(o,u,d,x,E){var I=x;if((u&1)===0&&(u&2)===0&&x!==null)e:for(;;){if(x===null)return;var G=x.tag;if(G===3||G===4){var ee=x.stateNode.containerInfo;if(ee===E||ee.nodeType===8&&ee.parentNode===E)break;if(G===4)for(G=x.return;G!==null;){var ie=G.tag;if((ie===3||ie===4)&&(ie=G.stateNode.containerInfo,ie===E||ie.nodeType===8&&ie.parentNode===E))return;G=G.return}for(;ee!==null;){if(G=Ga(ee),G===null)return;if(ie=G.tag,ie===5||ie===6){x=I=G;continue e}ee=ee.parentNode}}x=x.return}Hs(function(){var ge=I,Oe=Mt(d),Me=[];e:{var Pe=Km.get(o);if(Pe!==void 0){var ze=O,Ke=o;switch(o){case"keypress":if(Xo(d)===0)break e;case"keydown":case"keyup":ze=Vn;break;case"focusin":Ke="focus",ze=ft;break;case"focusout":Ke="blur",ze=ft;break;case"beforeblur":case"afterblur":ze=ft;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=we;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=me;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=Ni;break;case qm:case Wm:case $m:ze=gt;break;case Ym:ze=Yl;break;case"scroll":ze=D;break;case"wheel":ze=hi;break;case"copy":case"cut":case"paste":ze=pr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=kn}var et=(u&4)!==0,_r=!et&&o==="scroll",fe=et?Pe!==null?Pe+"Capture":null:Pe;et=[];for(var le=ge,_e;le!==null;){_e=le;var De=_e.stateNode;if(_e.tag===5&&De!==null&&(_e=De,fe!==null&&(De=ii(le,fe),De!=null&&et.push(iu(le,De,_e)))),_r)break;le=le.return}0<et.length&&(Pe=new ze(Pe,Ke,null,d,Oe),Me.push({event:Pe,listeners:et}))}}if((u&7)===0){e:{if(Pe=o==="mouseover"||o==="pointerover",ze=o==="mouseout"||o==="pointerout",Pe&&d!==St&&(Ke=d.relatedTarget||d.fromElement)&&(Ga(Ke)||Ke[ps]))break e;if((ze||Pe)&&(Pe=Oe.window===Oe?Oe:(Pe=Oe.ownerDocument)?Pe.defaultView||Pe.parentWindow:window,ze?(Ke=d.relatedTarget||d.toElement,ze=ge,Ke=Ke?Ga(Ke):null,Ke!==null&&(_r=vn(Ke),Ke!==_r||Ke.tag!==5&&Ke.tag!==6)&&(Ke=null)):(ze=null,Ke=ge),ze!==Ke)){if(et=we,De="onMouseLeave",fe="onMouseEnter",le="mouse",(o==="pointerout"||o==="pointerover")&&(et=kn,De="onPointerLeave",fe="onPointerEnter",le="pointer"),_r=ze==null?Pe:Jo(ze),_e=Ke==null?Pe:Jo(Ke),Pe=new et(De,le+"leave",ze,d,Oe),Pe.target=_r,Pe.relatedTarget=_e,De=null,Ga(Oe)===ge&&(et=new et(fe,le+"enter",Ke,d,Oe),et.target=_e,et.relatedTarget=_r,De=et),_r=De,ze&&Ke)t:{for(et=ze,fe=Ke,le=0,_e=et;_e;_e=Qo(_e))le++;for(_e=0,De=fe;De;De=Qo(De))_e++;for(;0<le-_e;)et=Qo(et),le--;for(;0<_e-le;)fe=Qo(fe),_e--;for(;le--;){if(et===fe||fe!==null&&et===fe.alternate)break t;et=Qo(et),fe=Qo(fe)}et=null}else et=null;ze!==null&&ty(Me,Pe,ze,et,!1),Ke!==null&&_r!==null&&ty(Me,_r,Ke,et,!0)}}e:{if(Pe=ge?Jo(ge):window,ze=Pe.nodeName&&Pe.nodeName.toLowerCase(),ze==="select"||ze==="input"&&Pe.type==="file")var tt=Wo;else if(Zl(Pe))if($o)tt=Se;else{tt=pe;var lt=ae}else(ze=Pe.nodeName)&&ze.toLowerCase()==="input"&&(Pe.type==="checkbox"||Pe.type==="radio")&&(tt=be);if(tt&&(tt=tt(o,ge))){ea(Me,tt,d,Oe);break e}lt&&lt(o,Pe,ge),o==="focusout"&&(lt=Pe._wrapperState)&&lt.controlled&&Pe.type==="number"&&Er(Pe,"number",Pe.value)}switch(lt=ge?Jo(ge):window,o){case"focusin":(Zl(lt)||lt.contentEditable==="true")&&(vr=lt,xr=ge,Lr=null);break;case"focusout":Lr=xr=vr=null;break;case"mousedown":gn=!0;break;case"contextmenu":case"mouseup":case"dragend":gn=!1,ds(Me,d,Oe);break;case"selectionchange":if(Gt)break;case"keydown":case"keyup":ds(Me,d,Oe)}var ut;if(Kl)e:{switch(o){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else hs?Fc(o,d)&&(vt="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(vt="onCompositionStart");vt&&(ja&&d.locale!=="ko"&&(hs||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&hs&&(ut=Nc()):(_n=Oe,zo="value"in _n?_n.value:_n.textContent,hs=!0)),lt=Uc(ge,vt),0<lt.length&&(vt=new Mn(vt,o,null,d,Oe),Me.push({event:vt,listeners:lt}),ut?vt.data=ut:(ut=Lc(d),ut!==null&&(vt.data=ut)))),(ut=Lt?fs(o,d):Ql(o,d))&&(ge=Uc(ge,"onBeforeInput"),0<ge.length&&(Oe=new Mn("onBeforeInput","beforeinput",null,d,Oe),Me.push({event:Oe,listeners:ge}),Oe.data=ut))}Jm(Me,u)})}function iu(o,u,d){return{instance:o,listener:u,currentTarget:d}}function Uc(o,u){for(var d=u+"Capture",x=[];o!==null;){var E=o,I=E.stateNode;E.tag===5&&I!==null&&(E=I,I=ii(o,d),I!=null&&x.unshift(iu(o,I,E)),I=ii(o,u),I!=null&&x.push(iu(o,I,E))),o=o.return}return x}function Qo(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function ty(o,u,d,x,E){for(var I=u._reactName,G=[];d!==null&&d!==x;){var ee=d,ie=ee.alternate,ge=ee.stateNode;if(ie!==null&&ie===x)break;ee.tag===5&&ge!==null&&(ee=ge,E?(ie=ii(d,I),ie!=null&&G.unshift(iu(d,ie,ee))):E||(ie=ii(d,I),ie!=null&&G.push(iu(d,ie,ee)))),d=d.return}G.length!==0&&o.push({event:u,listeners:G})}var Uw=/\r\n?/g,Gw=/\u0000|\uFFFD/g;function ry(o){return(typeof o=="string"?o:""+o).replace(Uw,`
`).replace(Gw,"")}function Gc(o,u,d){if(u=ry(u),ry(o)!==u&&d)throw Error(r(425))}function Hc(){}var od=null,ld=null;function ud(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var cd=typeof setTimeout=="function"?setTimeout:void 0,Hw=typeof clearTimeout=="function"?clearTimeout:void 0,ny=typeof Promise=="function"?Promise:void 0,zw=typeof queueMicrotask=="function"?queueMicrotask:typeof ny<"u"?function(o){return ny.resolve(null).then(o).catch(Xw)}:cd;function Xw(o){setTimeout(function(){throw o})}function hd(o,u){var d=u,x=0;do{var E=d.nextSibling;if(o.removeChild(d),E&&E.nodeType===8)if(d=E.data,d==="/$"){if(x===0){o.removeChild(E),as(u);return}x--}else d!=="$"&&d!=="$?"&&d!=="$!"||x++;d=E}while(d);as(u)}function ra(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return o}function iy(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"){if(u===0)return o;u--}else d==="/$"&&u++}o=o.previousSibling}return null}var Zo=Math.random().toString(36).slice(2),ji="__reactFiber$"+Zo,su="__reactProps$"+Zo,ps="__reactContainer$"+Zo,fd="__reactEvents$"+Zo,Vw="__reactListeners$"+Zo,qw="__reactHandles$"+Zo;function Ga(o){var u=o[ji];if(u)return u;for(var d=o.parentNode;d;){if(u=d[ps]||d[ji]){if(d=u.alternate,u.child!==null||d!==null&&d.child!==null)for(o=iy(o);o!==null;){if(d=o[ji])return d;o=iy(o)}return u}o=d,d=o.parentNode}return null}function au(o){return o=o[ji]||o[ps],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Jo(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(r(33))}function zc(o){return o[su]||null}var dd=[],el=-1;function na(o){return{current:o}}function Wt(o){0>el||(o.current=dd[el],dd[el]=null,el--)}function Xt(o,u){el++,dd[el]=o.current,o.current=u}var ia={},Qr=na(ia),xn=na(!1),Ha=ia;function tl(o,u){var d=o.type.contextTypes;if(!d)return ia;var x=o.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===u)return x.__reactInternalMemoizedMaskedChildContext;var E={},I;for(I in d)E[I]=u[I];return x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=u,o.__reactInternalMemoizedMaskedChildContext=E),E}function bn(o){return o=o.childContextTypes,o!=null}function Xc(){Wt(xn),Wt(Qr)}function sy(o,u,d){if(Qr.current!==ia)throw Error(r(168));Xt(Qr,u),Xt(xn,d)}function ay(o,u,d){var x=o.stateNode;if(u=u.childContextTypes,typeof x.getChildContext!="function")return d;x=x.getChildContext();for(var E in x)if(!(E in u))throw Error(r(108,Ae(o)||"Unknown",E));return $({},d,x)}function Vc(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||ia,Ha=Qr.current,Xt(Qr,o),Xt(xn,xn.current),!0}function oy(o,u,d){var x=o.stateNode;if(!x)throw Error(r(169));d?(o=ay(o,u,Ha),x.__reactInternalMemoizedMergedChildContext=o,Wt(xn),Wt(Qr),Xt(Qr,o)):Wt(xn),Xt(xn,d)}var vs=null,qc=!1,pd=!1;function ly(o){vs===null?vs=[o]:vs.push(o)}function Ww(o){qc=!0,ly(o)}function sa(){if(!pd&&vs!==null){pd=!0;var o=0,u=Ft;try{var d=vs;for(Ft=1;o<d.length;o++){var x=d[o];do x=x(!0);while(x!==null)}vs=null,qc=!1}catch(E){throw vs!==null&&(vs=vs.slice(o+1)),ns(ko,sa),E}finally{Ft=u,pd=!1}}return null}var rl=[],nl=0,Wc=null,$c=0,qn=[],Wn=0,za=null,_s=1,ms="";function Xa(o,u){rl[nl++]=$c,rl[nl++]=Wc,Wc=o,$c=u}function uy(o,u,d){qn[Wn++]=_s,qn[Wn++]=ms,qn[Wn++]=za,za=o;var x=_s;o=ms;var E=32-an(x)-1;x&=~(1<<E),d+=1;var I=32-an(u)+E;if(30<I){var G=E-E%5;I=(x&(1<<G)-1).toString(32),x>>=G,E-=G,_s=1<<32-an(u)+E|d<<E|x,ms=I+o}else _s=1<<I|d<<E|x,ms=o}function vd(o){o.return!==null&&(Xa(o,1),uy(o,1,0))}function _d(o){for(;o===Wc;)Wc=rl[--nl],rl[nl]=null,$c=rl[--nl],rl[nl]=null;for(;o===za;)za=qn[--Wn],qn[Wn]=null,ms=qn[--Wn],qn[Wn]=null,_s=qn[--Wn],qn[Wn]=null}var Dn=null,Nn=null,Jt=!1,fi=null;function cy(o,u){var d=Qn(5,null,null,0);d.elementType="DELETED",d.stateNode=u,d.return=o,u=o.deletions,u===null?(o.deletions=[d],o.flags|=16):u.push(d)}function hy(o,u){switch(o.tag){case 5:var d=o.type;return u=u.nodeType!==1||d.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(o.stateNode=u,Dn=o,Nn=ra(u.firstChild),!0):!1;case 6:return u=o.pendingProps===""||u.nodeType!==3?null:u,u!==null?(o.stateNode=u,Dn=o,Nn=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(d=za!==null?{id:_s,overflow:ms}:null,o.memoizedState={dehydrated:u,treeContext:d,retryLane:1073741824},d=Qn(18,null,null,0),d.stateNode=u,d.return=o,o.child=d,Dn=o,Nn=null,!0):!1;default:return!1}}function md(o){return(o.mode&1)!==0&&(o.flags&128)===0}function yd(o){if(Jt){var u=Nn;if(u){var d=u;if(!hy(o,u)){if(md(o))throw Error(r(418));u=ra(d.nextSibling);var x=Dn;u&&hy(o,u)?cy(x,d):(o.flags=o.flags&-4097|2,Jt=!1,Dn=o)}}else{if(md(o))throw Error(r(418));o.flags=o.flags&-4097|2,Jt=!1,Dn=o}}}function fy(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Dn=o}function Yc(o){if(o!==Dn)return!1;if(!Jt)return fy(o),Jt=!0,!1;var u;if((u=o.tag!==3)&&!(u=o.tag!==5)&&(u=o.type,u=u!=="head"&&u!=="body"&&!ud(o.type,o.memoizedProps)),u&&(u=Nn)){if(md(o))throw dy(),Error(r(418));for(;u;)cy(o,u),u=ra(u.nextSibling)}if(fy(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,u=0;o;){if(o.nodeType===8){var d=o.data;if(d==="/$"){if(u===0){Nn=ra(o.nextSibling);break e}u--}else d!=="$"&&d!=="$!"&&d!=="$?"||u++}o=o.nextSibling}Nn=null}}else Nn=Dn?ra(o.stateNode.nextSibling):null;return!0}function dy(){for(var o=Nn;o;)o=ra(o.nextSibling)}function il(){Nn=Dn=null,Jt=!1}function gd(o){fi===null?fi=[o]:fi.push(o)}var $w=V.ReactCurrentBatchConfig;function ou(o,u,d){if(o=d.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(r(309));var x=d.stateNode}if(!x)throw Error(r(147,o));var E=x,I=""+o;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===I?u.ref:(u=function(G){var ee=E.refs;G===null?delete ee[I]:ee[I]=G},u._stringRef=I,u)}if(typeof o!="string")throw Error(r(284));if(!d._owner)throw Error(r(290,o))}return o}function Kc(o,u){throw o=Object.prototype.toString.call(u),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o))}function py(o){var u=o._init;return u(o._payload)}function vy(o){function u(fe,le){if(o){var _e=fe.deletions;_e===null?(fe.deletions=[le],fe.flags|=16):_e.push(le)}}function d(fe,le){if(!o)return null;for(;le!==null;)u(fe,le),le=le.sibling;return null}function x(fe,le){for(fe=new Map;le!==null;)le.key!==null?fe.set(le.key,le):fe.set(le.index,le),le=le.sibling;return fe}function E(fe,le){return fe=da(fe,le),fe.index=0,fe.sibling=null,fe}function I(fe,le,_e){return fe.index=_e,o?(_e=fe.alternate,_e!==null?(_e=_e.index,_e<le?(fe.flags|=2,le):_e):(fe.flags|=2,le)):(fe.flags|=1048576,le)}function G(fe){return o&&fe.alternate===null&&(fe.flags|=2),fe}function ee(fe,le,_e,De){return le===null||le.tag!==6?(le=cp(_e,fe.mode,De),le.return=fe,le):(le=E(le,_e),le.return=fe,le)}function ie(fe,le,_e,De){var tt=_e.type;return tt===g?Oe(fe,le,_e.props.children,De,_e.key):le!==null&&(le.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===U&&py(tt)===le.type)?(De=E(le,_e.props),De.ref=ou(fe,le,_e),De.return=fe,De):(De=xh(_e.type,_e.key,_e.props,null,fe.mode,De),De.ref=ou(fe,le,_e),De.return=fe,De)}function ge(fe,le,_e,De){return le===null||le.tag!==4||le.stateNode.containerInfo!==_e.containerInfo||le.stateNode.implementation!==_e.implementation?(le=hp(_e,fe.mode,De),le.return=fe,le):(le=E(le,_e.children||[]),le.return=fe,le)}function Oe(fe,le,_e,De,tt){return le===null||le.tag!==7?(le=Za(_e,fe.mode,De,tt),le.return=fe,le):(le=E(le,_e),le.return=fe,le)}function Me(fe,le,_e){if(typeof le=="string"&&le!==""||typeof le=="number")return le=cp(""+le,fe.mode,_e),le.return=fe,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case M:return _e=xh(le.type,le.key,le.props,null,fe.mode,_e),_e.ref=ou(fe,null,le),_e.return=fe,_e;case H:return le=hp(le,fe.mode,_e),le.return=fe,le;case U:var De=le._init;return Me(fe,De(le._payload),_e)}if(hr(le)||Q(le))return le=Za(le,fe.mode,_e,null),le.return=fe,le;Kc(fe,le)}return null}function Pe(fe,le,_e,De){var tt=le!==null?le.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number")return tt!==null?null:ee(fe,le,""+_e,De);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case M:return _e.key===tt?ie(fe,le,_e,De):null;case H:return _e.key===tt?ge(fe,le,_e,De):null;case U:return tt=_e._init,Pe(fe,le,tt(_e._payload),De)}if(hr(_e)||Q(_e))return tt!==null?null:Oe(fe,le,_e,De,null);Kc(fe,_e)}return null}function ze(fe,le,_e,De,tt){if(typeof De=="string"&&De!==""||typeof De=="number")return fe=fe.get(_e)||null,ee(le,fe,""+De,tt);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case M:return fe=fe.get(De.key===null?_e:De.key)||null,ie(le,fe,De,tt);case H:return fe=fe.get(De.key===null?_e:De.key)||null,ge(le,fe,De,tt);case U:var lt=De._init;return ze(fe,le,_e,lt(De._payload),tt)}if(hr(De)||Q(De))return fe=fe.get(_e)||null,Oe(le,fe,De,tt,null);Kc(le,De)}return null}function Ke(fe,le,_e,De){for(var tt=null,lt=null,ut=le,vt=le=0,Ur=null;ut!==null&&vt<_e.length;vt++){ut.index>vt?(Ur=ut,ut=null):Ur=ut.sibling;var Dt=Pe(fe,ut,_e[vt],De);if(Dt===null){ut===null&&(ut=Ur);break}o&&ut&&Dt.alternate===null&&u(fe,ut),le=I(Dt,le,vt),lt===null?tt=Dt:lt.sibling=Dt,lt=Dt,ut=Ur}if(vt===_e.length)return d(fe,ut),Jt&&Xa(fe,vt),tt;if(ut===null){for(;vt<_e.length;vt++)ut=Me(fe,_e[vt],De),ut!==null&&(le=I(ut,le,vt),lt===null?tt=ut:lt.sibling=ut,lt=ut);return Jt&&Xa(fe,vt),tt}for(ut=x(fe,ut);vt<_e.length;vt++)Ur=ze(ut,fe,vt,_e[vt],De),Ur!==null&&(o&&Ur.alternate!==null&&ut.delete(Ur.key===null?vt:Ur.key),le=I(Ur,le,vt),lt===null?tt=Ur:lt.sibling=Ur,lt=Ur);return o&&ut.forEach(function(pa){return u(fe,pa)}),Jt&&Xa(fe,vt),tt}function et(fe,le,_e,De){var tt=Q(_e);if(typeof tt!="function")throw Error(r(150));if(_e=tt.call(_e),_e==null)throw Error(r(151));for(var lt=tt=null,ut=le,vt=le=0,Ur=null,Dt=_e.next();ut!==null&&!Dt.done;vt++,Dt=_e.next()){ut.index>vt?(Ur=ut,ut=null):Ur=ut.sibling;var pa=Pe(fe,ut,Dt.value,De);if(pa===null){ut===null&&(ut=Ur);break}o&&ut&&pa.alternate===null&&u(fe,ut),le=I(pa,le,vt),lt===null?tt=pa:lt.sibling=pa,lt=pa,ut=Ur}if(Dt.done)return d(fe,ut),Jt&&Xa(fe,vt),tt;if(ut===null){for(;!Dt.done;vt++,Dt=_e.next())Dt=Me(fe,Dt.value,De),Dt!==null&&(le=I(Dt,le,vt),lt===null?tt=Dt:lt.sibling=Dt,lt=Dt);return Jt&&Xa(fe,vt),tt}for(ut=x(fe,ut);!Dt.done;vt++,Dt=_e.next())Dt=ze(ut,fe,vt,Dt.value,De),Dt!==null&&(o&&Dt.alternate!==null&&ut.delete(Dt.key===null?vt:Dt.key),le=I(Dt,le,vt),lt===null?tt=Dt:lt.sibling=Dt,lt=Dt);return o&&ut.forEach(function(AT){return u(fe,AT)}),Jt&&Xa(fe,vt),tt}function _r(fe,le,_e,De){if(typeof _e=="object"&&_e!==null&&_e.type===g&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case M:e:{for(var tt=_e.key,lt=le;lt!==null;){if(lt.key===tt){if(tt=_e.type,tt===g){if(lt.tag===7){d(fe,lt.sibling),le=E(lt,_e.props.children),le.return=fe,fe=le;break e}}else if(lt.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===U&&py(tt)===lt.type){d(fe,lt.sibling),le=E(lt,_e.props),le.ref=ou(fe,lt,_e),le.return=fe,fe=le;break e}d(fe,lt);break}else u(fe,lt);lt=lt.sibling}_e.type===g?(le=Za(_e.props.children,fe.mode,De,_e.key),le.return=fe,fe=le):(De=xh(_e.type,_e.key,_e.props,null,fe.mode,De),De.ref=ou(fe,le,_e),De.return=fe,fe=De)}return G(fe);case H:e:{for(lt=_e.key;le!==null;){if(le.key===lt)if(le.tag===4&&le.stateNode.containerInfo===_e.containerInfo&&le.stateNode.implementation===_e.implementation){d(fe,le.sibling),le=E(le,_e.children||[]),le.return=fe,fe=le;break e}else{d(fe,le);break}else u(fe,le);le=le.sibling}le=hp(_e,fe.mode,De),le.return=fe,fe=le}return G(fe);case U:return lt=_e._init,_r(fe,le,lt(_e._payload),De)}if(hr(_e))return Ke(fe,le,_e,De);if(Q(_e))return et(fe,le,_e,De);Kc(fe,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"?(_e=""+_e,le!==null&&le.tag===6?(d(fe,le.sibling),le=E(le,_e),le.return=fe,fe=le):(d(fe,le),le=cp(_e,fe.mode,De),le.return=fe,fe=le),G(fe)):d(fe,le)}return _r}var sl=vy(!0),_y=vy(!1),Qc=na(null),Zc=null,al=null,xd=null;function bd(){xd=al=Zc=null}function wd(o){var u=Qc.current;Wt(Qc),o._currentValue=u}function Td(o,u,d){for(;o!==null;){var x=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,x!==null&&(x.childLanes|=u)):x!==null&&(x.childLanes&u)!==u&&(x.childLanes|=u),o===d)break;o=o.return}}function ol(o,u){Zc=o,xd=al=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&u)!==0&&(wn=!0),o.firstContext=null)}function $n(o){var u=o._currentValue;if(xd!==o)if(o={context:o,memoizedValue:u,next:null},al===null){if(Zc===null)throw Error(r(308));al=o,Zc.dependencies={lanes:0,firstContext:o}}else al=al.next=o;return u}var Va=null;function Sd(o){Va===null?Va=[o]:Va.push(o)}function my(o,u,d,x){var E=u.interleaved;return E===null?(d.next=d,Sd(u)):(d.next=E.next,E.next=d),u.interleaved=d,ys(o,x)}function ys(o,u){o.lanes|=u;var d=o.alternate;for(d!==null&&(d.lanes|=u),d=o,o=o.return;o!==null;)o.childLanes|=u,d=o.alternate,d!==null&&(d.childLanes|=u),d=o,o=o.return;return d.tag===3?d.stateNode:null}var aa=!1;function Ed(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yy(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function gs(o,u){return{eventTime:o,lane:u,tag:0,payload:null,callback:null,next:null}}function oa(o,u,d){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(kt&2)!==0){var E=x.pending;return E===null?u.next=u:(u.next=E.next,E.next=u),x.pending=u,ys(o,d)}return E=x.interleaved,E===null?(u.next=u,Sd(x)):(u.next=E.next,E.next=u),x.interleaved=u,ys(o,d)}function Jc(o,u,d){if(u=u.updateQueue,u!==null&&(u=u.shared,(d&4194240)!==0)){var x=u.lanes;x&=o.pendingLanes,d|=x,u.lanes=d,ss(o,d)}}function gy(o,u){var d=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,d===x)){var E=null,I=null;if(d=d.firstBaseUpdate,d!==null){do{var G={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};I===null?E=I=G:I=I.next=G,d=d.next}while(d!==null);I===null?E=I=u:I=I.next=u}else E=I=u;d={baseState:x.baseState,firstBaseUpdate:E,lastBaseUpdate:I,shared:x.shared,effects:x.effects},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=u}function eh(o,u,d,x){var E=o.updateQueue;aa=!1;var I=E.firstBaseUpdate,G=E.lastBaseUpdate,ee=E.shared.pending;if(ee!==null){E.shared.pending=null;var ie=ee,ge=ie.next;ie.next=null,G===null?I=ge:G.next=ge,G=ie;var Oe=o.alternate;Oe!==null&&(Oe=Oe.updateQueue,ee=Oe.lastBaseUpdate,ee!==G&&(ee===null?Oe.firstBaseUpdate=ge:ee.next=ge,Oe.lastBaseUpdate=ie))}if(I!==null){var Me=E.baseState;G=0,Oe=ge=ie=null,ee=I;do{var Pe=ee.lane,ze=ee.eventTime;if((x&Pe)===Pe){Oe!==null&&(Oe=Oe.next={eventTime:ze,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var Ke=o,et=ee;switch(Pe=u,ze=d,et.tag){case 1:if(Ke=et.payload,typeof Ke=="function"){Me=Ke.call(ze,Me,Pe);break e}Me=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=et.payload,Pe=typeof Ke=="function"?Ke.call(ze,Me,Pe):Ke,Pe==null)break e;Me=$({},Me,Pe);break e;case 2:aa=!0}}ee.callback!==null&&ee.lane!==0&&(o.flags|=64,Pe=E.effects,Pe===null?E.effects=[ee]:Pe.push(ee))}else ze={eventTime:ze,lane:Pe,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},Oe===null?(ge=Oe=ze,ie=Me):Oe=Oe.next=ze,G|=Pe;if(ee=ee.next,ee===null){if(ee=E.shared.pending,ee===null)break;Pe=ee,ee=Pe.next,Pe.next=null,E.lastBaseUpdate=Pe,E.shared.pending=null}}while(!0);if(Oe===null&&(ie=Me),E.baseState=ie,E.firstBaseUpdate=ge,E.lastBaseUpdate=Oe,u=E.shared.interleaved,u!==null){E=u;do G|=E.lane,E=E.next;while(E!==u)}else I===null&&(E.shared.lanes=0);$a|=G,o.lanes=G,o.memoizedState=Me}}function xy(o,u,d){if(o=u.effects,u.effects=null,o!==null)for(u=0;u<o.length;u++){var x=o[u],E=x.callback;if(E!==null){if(x.callback=null,x=d,typeof E!="function")throw Error(r(191,E));E.call(x)}}}var lu={},Ui=na(lu),uu=na(lu),cu=na(lu);function qa(o){if(o===lu)throw Error(r(174));return o}function Cd(o,u){switch(Xt(cu,u),Xt(uu,o),Xt(Ui,lu),o=u.nodeType,o){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:Us(null,"");break;default:o=o===8?u.parentNode:u,u=o.namespaceURI||null,o=o.tagName,u=Us(u,o)}Wt(Ui),Xt(Ui,u)}function ll(){Wt(Ui),Wt(uu),Wt(cu)}function by(o){qa(cu.current);var u=qa(Ui.current),d=Us(u,o.type);u!==d&&(Xt(uu,o),Xt(Ui,d))}function Ad(o){uu.current===o&&(Wt(Ui),Wt(uu))}var ir=na(0);function th(o){for(var u=o;u!==null;){if(u.tag===13){var d=u.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Pd=[];function Id(){for(var o=0;o<Pd.length;o++)Pd[o]._workInProgressVersionPrimary=null;Pd.length=0}var rh=V.ReactCurrentDispatcher,Od=V.ReactCurrentBatchConfig,Wa=0,sr=null,Ir=null,Br=null,nh=!1,hu=!1,fu=0,Yw=0;function Zr(){throw Error(r(321))}function Rd(o,u){if(u===null)return!1;for(var d=0;d<u.length&&d<o.length;d++)if(!Be(o[d],u[d]))return!1;return!0}function Md(o,u,d,x,E,I){if(Wa=I,sr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,rh.current=o===null||o.memoizedState===null?Jw:eT,o=d(x,E),hu){I=0;do{if(hu=!1,fu=0,25<=I)throw Error(r(301));I+=1,Br=Ir=null,u.updateQueue=null,rh.current=tT,o=d(x,E)}while(hu)}if(rh.current=ah,u=Ir!==null&&Ir.next!==null,Wa=0,Br=Ir=sr=null,nh=!1,u)throw Error(r(300));return o}function kd(){var o=fu!==0;return fu=0,o}function Gi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Br===null?sr.memoizedState=Br=o:Br=Br.next=o,Br}function Yn(){if(Ir===null){var o=sr.alternate;o=o!==null?o.memoizedState:null}else o=Ir.next;var u=Br===null?sr.memoizedState:Br.next;if(u!==null)Br=u,Ir=o;else{if(o===null)throw Error(r(310));Ir=o,o={memoizedState:Ir.memoizedState,baseState:Ir.baseState,baseQueue:Ir.baseQueue,queue:Ir.queue,next:null},Br===null?sr.memoizedState=Br=o:Br=Br.next=o}return Br}function du(o,u){return typeof u=="function"?u(o):u}function Dd(o){var u=Yn(),d=u.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=o;var x=Ir,E=x.baseQueue,I=d.pending;if(I!==null){if(E!==null){var G=E.next;E.next=I.next,I.next=G}x.baseQueue=E=I,d.pending=null}if(E!==null){I=E.next,x=x.baseState;var ee=G=null,ie=null,ge=I;do{var Oe=ge.lane;if((Wa&Oe)===Oe)ie!==null&&(ie=ie.next={lane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),x=ge.hasEagerState?ge.eagerState:o(x,ge.action);else{var Me={lane:Oe,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null};ie===null?(ee=ie=Me,G=x):ie=ie.next=Me,sr.lanes|=Oe,$a|=Oe}ge=ge.next}while(ge!==null&&ge!==I);ie===null?G=x:ie.next=ee,Be(x,u.memoizedState)||(wn=!0),u.memoizedState=x,u.baseState=G,u.baseQueue=ie,d.lastRenderedState=x}if(o=d.interleaved,o!==null){E=o;do I=E.lane,sr.lanes|=I,$a|=I,E=E.next;while(E!==o)}else E===null&&(d.lanes=0);return[u.memoizedState,d.dispatch]}function Nd(o){var u=Yn(),d=u.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=o;var x=d.dispatch,E=d.pending,I=u.memoizedState;if(E!==null){d.pending=null;var G=E=E.next;do I=o(I,G.action),G=G.next;while(G!==E);Be(I,u.memoizedState)||(wn=!0),u.memoizedState=I,u.baseQueue===null&&(u.baseState=I),d.lastRenderedState=I}return[I,x]}function wy(){}function Ty(o,u){var d=sr,x=Yn(),E=u(),I=!Be(x.memoizedState,E);if(I&&(x.memoizedState=E,wn=!0),x=x.queue,Fd(Cy.bind(null,d,x,o),[o]),x.getSnapshot!==u||I||Br!==null&&Br.memoizedState.tag&1){if(d.flags|=2048,pu(9,Ey.bind(null,d,x,E,u),void 0,null),jr===null)throw Error(r(349));(Wa&30)!==0||Sy(d,u,E)}return E}function Sy(o,u,d){o.flags|=16384,o={getSnapshot:u,value:d},u=sr.updateQueue,u===null?(u={lastEffect:null,stores:null},sr.updateQueue=u,u.stores=[o]):(d=u.stores,d===null?u.stores=[o]:d.push(o))}function Ey(o,u,d,x){u.value=d,u.getSnapshot=x,Ay(u)&&Py(o)}function Cy(o,u,d){return d(function(){Ay(u)&&Py(o)})}function Ay(o){var u=o.getSnapshot;o=o.value;try{var d=u();return!Be(o,d)}catch{return!0}}function Py(o){var u=ys(o,1);u!==null&&_i(u,o,1,-1)}function Iy(o){var u=Gi();return typeof o=="function"&&(o=o()),u.memoizedState=u.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:du,lastRenderedState:o},u.queue=o,o=o.dispatch=Zw.bind(null,sr,o),[u.memoizedState,o]}function pu(o,u,d,x){return o={tag:o,create:u,destroy:d,deps:x,next:null},u=sr.updateQueue,u===null?(u={lastEffect:null,stores:null},sr.updateQueue=u,u.lastEffect=o.next=o):(d=u.lastEffect,d===null?u.lastEffect=o.next=o:(x=d.next,d.next=o,o.next=x,u.lastEffect=o)),o}function Oy(){return Yn().memoizedState}function ih(o,u,d,x){var E=Gi();sr.flags|=o,E.memoizedState=pu(1|u,d,void 0,x===void 0?null:x)}function sh(o,u,d,x){var E=Yn();x=x===void 0?null:x;var I=void 0;if(Ir!==null){var G=Ir.memoizedState;if(I=G.destroy,x!==null&&Rd(x,G.deps)){E.memoizedState=pu(u,d,I,x);return}}sr.flags|=o,E.memoizedState=pu(1|u,d,I,x)}function Ry(o,u){return ih(8390656,8,o,u)}function Fd(o,u){return sh(2048,8,o,u)}function My(o,u){return sh(4,2,o,u)}function ky(o,u){return sh(4,4,o,u)}function Dy(o,u){if(typeof u=="function")return o=o(),u(o),function(){u(null)};if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function Ny(o,u,d){return d=d!=null?d.concat([o]):null,sh(4,4,Dy.bind(null,u,o),d)}function Ld(){}function Fy(o,u){var d=Yn();u=u===void 0?null:u;var x=d.memoizedState;return x!==null&&u!==null&&Rd(u,x[1])?x[0]:(d.memoizedState=[o,u],o)}function Ly(o,u){var d=Yn();u=u===void 0?null:u;var x=d.memoizedState;return x!==null&&u!==null&&Rd(u,x[1])?x[0]:(o=o(),d.memoizedState=[o,u],o)}function By(o,u,d){return(Wa&21)===0?(o.baseState&&(o.baseState=!1,wn=!0),o.memoizedState=d):(Be(d,u)||(d=Ec(),sr.lanes|=d,$a|=d,o.baseState=!0),u)}function Kw(o,u){var d=Ft;Ft=d!==0&&4>d?d:4,o(!0);var x=Od.transition;Od.transition={};try{o(!1),u()}finally{Ft=d,Od.transition=x}}function jy(){return Yn().memoizedState}function Qw(o,u,d){var x=ha(o);if(d={lane:x,action:d,hasEagerState:!1,eagerState:null,next:null},Uy(o))Gy(u,d);else if(d=my(o,u,d,x),d!==null){var E=ln();_i(d,o,x,E),Hy(d,u,x)}}function Zw(o,u,d){var x=ha(o),E={lane:x,action:d,hasEagerState:!1,eagerState:null,next:null};if(Uy(o))Gy(u,E);else{var I=o.alternate;if(o.lanes===0&&(I===null||I.lanes===0)&&(I=u.lastRenderedReducer,I!==null))try{var G=u.lastRenderedState,ee=I(G,d);if(E.hasEagerState=!0,E.eagerState=ee,Be(ee,G)){var ie=u.interleaved;ie===null?(E.next=E,Sd(u)):(E.next=ie.next,ie.next=E),u.interleaved=E;return}}catch{}finally{}d=my(o,u,E,x),d!==null&&(E=ln(),_i(d,o,x,E),Hy(d,u,x))}}function Uy(o){var u=o.alternate;return o===sr||u!==null&&u===sr}function Gy(o,u){hu=nh=!0;var d=o.pending;d===null?u.next=u:(u.next=d.next,d.next=u),o.pending=u}function Hy(o,u,d){if((d&4194240)!==0){var x=u.lanes;x&=o.pendingLanes,d|=x,u.lanes=d,ss(o,d)}}var ah={readContext:$n,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useInsertionEffect:Zr,useLayoutEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useMutableSource:Zr,useSyncExternalStore:Zr,useId:Zr,unstable_isNewReconciler:!1},Jw={readContext:$n,useCallback:function(o,u){return Gi().memoizedState=[o,u===void 0?null:u],o},useContext:$n,useEffect:Ry,useImperativeHandle:function(o,u,d){return d=d!=null?d.concat([o]):null,ih(4194308,4,Dy.bind(null,u,o),d)},useLayoutEffect:function(o,u){return ih(4194308,4,o,u)},useInsertionEffect:function(o,u){return ih(4,2,o,u)},useMemo:function(o,u){var d=Gi();return u=u===void 0?null:u,o=o(),d.memoizedState=[o,u],o},useReducer:function(o,u,d){var x=Gi();return u=d!==void 0?d(u):u,x.memoizedState=x.baseState=u,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:u},x.queue=o,o=o.dispatch=Qw.bind(null,sr,o),[x.memoizedState,o]},useRef:function(o){var u=Gi();return o={current:o},u.memoizedState=o},useState:Iy,useDebugValue:Ld,useDeferredValue:function(o){return Gi().memoizedState=o},useTransition:function(){var o=Iy(!1),u=o[0];return o=Kw.bind(null,o[1]),Gi().memoizedState=o,[u,o]},useMutableSource:function(){},useSyncExternalStore:function(o,u,d){var x=sr,E=Gi();if(Jt){if(d===void 0)throw Error(r(407));d=d()}else{if(d=u(),jr===null)throw Error(r(349));(Wa&30)!==0||Sy(x,u,d)}E.memoizedState=d;var I={value:d,getSnapshot:u};return E.queue=I,Ry(Cy.bind(null,x,I,o),[o]),x.flags|=2048,pu(9,Ey.bind(null,x,I,d,u),void 0,null),d},useId:function(){var o=Gi(),u=jr.identifierPrefix;if(Jt){var d=ms,x=_s;d=(x&~(1<<32-an(x)-1)).toString(32)+d,u=":"+u+"R"+d,d=fu++,0<d&&(u+="H"+d.toString(32)),u+=":"}else d=Yw++,u=":"+u+"r"+d.toString(32)+":";return o.memoizedState=u},unstable_isNewReconciler:!1},eT={readContext:$n,useCallback:Fy,useContext:$n,useEffect:Fd,useImperativeHandle:Ny,useInsertionEffect:My,useLayoutEffect:ky,useMemo:Ly,useReducer:Dd,useRef:Oy,useState:function(){return Dd(du)},useDebugValue:Ld,useDeferredValue:function(o){var u=Yn();return By(u,Ir.memoizedState,o)},useTransition:function(){var o=Dd(du)[0],u=Yn().memoizedState;return[o,u]},useMutableSource:wy,useSyncExternalStore:Ty,useId:jy,unstable_isNewReconciler:!1},tT={readContext:$n,useCallback:Fy,useContext:$n,useEffect:Fd,useImperativeHandle:Ny,useInsertionEffect:My,useLayoutEffect:ky,useMemo:Ly,useReducer:Nd,useRef:Oy,useState:function(){return Nd(du)},useDebugValue:Ld,useDeferredValue:function(o){var u=Yn();return Ir===null?u.memoizedState=o:By(u,Ir.memoizedState,o)},useTransition:function(){var o=Nd(du)[0],u=Yn().memoizedState;return[o,u]},useMutableSource:wy,useSyncExternalStore:Ty,useId:jy,unstable_isNewReconciler:!1};function di(o,u){if(o&&o.defaultProps){u=$({},u),o=o.defaultProps;for(var d in o)u[d]===void 0&&(u[d]=o[d]);return u}return u}function Bd(o,u,d,x){u=o.memoizedState,d=d(x,u),d=d==null?u:$({},u,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var oh={isMounted:function(o){return(o=o._reactInternals)?vn(o)===o:!1},enqueueSetState:function(o,u,d){o=o._reactInternals;var x=ln(),E=ha(o),I=gs(x,E);I.payload=u,d!=null&&(I.callback=d),u=oa(o,I,E),u!==null&&(_i(u,o,E,x),Jc(u,o,E))},enqueueReplaceState:function(o,u,d){o=o._reactInternals;var x=ln(),E=ha(o),I=gs(x,E);I.tag=1,I.payload=u,d!=null&&(I.callback=d),u=oa(o,I,E),u!==null&&(_i(u,o,E,x),Jc(u,o,E))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var d=ln(),x=ha(o),E=gs(d,x);E.tag=2,u!=null&&(E.callback=u),u=oa(o,E,x),u!==null&&(_i(u,o,x,d),Jc(u,o,x))}};function zy(o,u,d,x,E,I,G){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,I,G):u.prototype&&u.prototype.isPureReactComponent?!$e(d,x)||!$e(E,I):!0}function Xy(o,u,d){var x=!1,E=ia,I=u.contextType;return typeof I=="object"&&I!==null?I=$n(I):(E=bn(u)?Ha:Qr.current,x=u.contextTypes,I=(x=x!=null)?tl(o,E):ia),u=new u(d,I),o.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=oh,o.stateNode=u,u._reactInternals=o,x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=E,o.__reactInternalMemoizedMaskedChildContext=I),u}function Vy(o,u,d,x){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(d,x),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(d,x),u.state!==o&&oh.enqueueReplaceState(u,u.state,null)}function jd(o,u,d,x){var E=o.stateNode;E.props=d,E.state=o.memoizedState,E.refs={},Ed(o);var I=u.contextType;typeof I=="object"&&I!==null?E.context=$n(I):(I=bn(u)?Ha:Qr.current,E.context=tl(o,I)),E.state=o.memoizedState,I=u.getDerivedStateFromProps,typeof I=="function"&&(Bd(o,u,I,d),E.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(u=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),u!==E.state&&oh.enqueueReplaceState(E,E.state,null),eh(o,d,E,x),E.state=o.memoizedState),typeof E.componentDidMount=="function"&&(o.flags|=4194308)}function ul(o,u){try{var d="",x=u;do d+=de(x),x=x.return;while(x);var E=d}catch(I){E=`
Error generating stack: `+I.message+`
`+I.stack}return{value:o,source:u,stack:E,digest:null}}function Ud(o,u,d){return{value:o,source:null,stack:d??null,digest:u??null}}function Gd(o,u){try{console.error(u.value)}catch(d){setTimeout(function(){throw d})}}var rT=typeof WeakMap=="function"?WeakMap:Map;function qy(o,u,d){d=gs(-1,d),d.tag=3,d.payload={element:null};var x=u.value;return d.callback=function(){ph||(ph=!0,rp=x),Gd(o,u)},d}function Wy(o,u,d){d=gs(-1,d),d.tag=3;var x=o.type.getDerivedStateFromError;if(typeof x=="function"){var E=u.value;d.payload=function(){return x(E)},d.callback=function(){Gd(o,u)}}var I=o.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(d.callback=function(){Gd(o,u),typeof x!="function"&&(ua===null?ua=new Set([this]):ua.add(this));var G=u.stack;this.componentDidCatch(u.value,{componentStack:G!==null?G:""})}),d}function $y(o,u,d){var x=o.pingCache;if(x===null){x=o.pingCache=new rT;var E=new Set;x.set(u,E)}else E=x.get(u),E===void 0&&(E=new Set,x.set(u,E));E.has(d)||(E.add(d),o=_T.bind(null,o,u,d),u.then(o,o))}function Yy(o){do{var u;if((u=o.tag===13)&&(u=o.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return o;o=o.return}while(o!==null);return null}function Ky(o,u,d,x,E){return(o.mode&1)===0?(o===u?o.flags|=65536:(o.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(u=gs(-1,1),u.tag=2,oa(d,u,1))),d.lanes|=1),o):(o.flags|=65536,o.lanes=E,o)}var nT=V.ReactCurrentOwner,wn=!1;function on(o,u,d,x){u.child=o===null?_y(u,null,d,x):sl(u,o.child,d,x)}function Qy(o,u,d,x,E){d=d.render;var I=u.ref;return ol(u,E),x=Md(o,u,d,x,I,E),d=kd(),o!==null&&!wn?(u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~E,xs(o,u,E)):(Jt&&d&&vd(u),u.flags|=1,on(o,u,x,E),u.child)}function Zy(o,u,d,x,E){if(o===null){var I=d.type;return typeof I=="function"&&!up(I)&&I.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(u.tag=15,u.type=I,Jy(o,u,I,x,E)):(o=xh(d.type,null,x,u,u.mode,E),o.ref=u.ref,o.return=u,u.child=o)}if(I=o.child,(o.lanes&E)===0){var G=I.memoizedProps;if(d=d.compare,d=d!==null?d:$e,d(G,x)&&o.ref===u.ref)return xs(o,u,E)}return u.flags|=1,o=da(I,x),o.ref=u.ref,o.return=u,u.child=o}function Jy(o,u,d,x,E){if(o!==null){var I=o.memoizedProps;if($e(I,x)&&o.ref===u.ref)if(wn=!1,u.pendingProps=x=I,(o.lanes&E)!==0)(o.flags&131072)!==0&&(wn=!0);else return u.lanes=o.lanes,xs(o,u,E)}return Hd(o,u,d,x,E)}function eg(o,u,d){var x=u.pendingProps,E=x.children,I=o!==null?o.memoizedState:null;if(x.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xt(hl,Fn),Fn|=d;else{if((d&1073741824)===0)return o=I!==null?I.baseLanes|d:d,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:o,cachePool:null,transitions:null},u.updateQueue=null,Xt(hl,Fn),Fn|=o,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=I!==null?I.baseLanes:d,Xt(hl,Fn),Fn|=x}else I!==null?(x=I.baseLanes|d,u.memoizedState=null):x=d,Xt(hl,Fn),Fn|=x;return on(o,u,E,d),u.child}function tg(o,u){var d=u.ref;(o===null&&d!==null||o!==null&&o.ref!==d)&&(u.flags|=512,u.flags|=2097152)}function Hd(o,u,d,x,E){var I=bn(d)?Ha:Qr.current;return I=tl(u,I),ol(u,E),d=Md(o,u,d,x,I,E),x=kd(),o!==null&&!wn?(u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~E,xs(o,u,E)):(Jt&&x&&vd(u),u.flags|=1,on(o,u,d,E),u.child)}function rg(o,u,d,x,E){if(bn(d)){var I=!0;Vc(u)}else I=!1;if(ol(u,E),u.stateNode===null)uh(o,u),Xy(u,d,x),jd(u,d,x,E),x=!0;else if(o===null){var G=u.stateNode,ee=u.memoizedProps;G.props=ee;var ie=G.context,ge=d.contextType;typeof ge=="object"&&ge!==null?ge=$n(ge):(ge=bn(d)?Ha:Qr.current,ge=tl(u,ge));var Oe=d.getDerivedStateFromProps,Me=typeof Oe=="function"||typeof G.getSnapshotBeforeUpdate=="function";Me||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ee!==x||ie!==ge)&&Vy(u,G,x,ge),aa=!1;var Pe=u.memoizedState;G.state=Pe,eh(u,x,G,E),ie=u.memoizedState,ee!==x||Pe!==ie||xn.current||aa?(typeof Oe=="function"&&(Bd(u,d,Oe,x),ie=u.memoizedState),(ee=aa||zy(u,d,ee,x,Pe,ie,ge))?(Me||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(u.flags|=4194308)):(typeof G.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=x,u.memoizedState=ie),G.props=x,G.state=ie,G.context=ge,x=ee):(typeof G.componentDidMount=="function"&&(u.flags|=4194308),x=!1)}else{G=u.stateNode,yy(o,u),ee=u.memoizedProps,ge=u.type===u.elementType?ee:di(u.type,ee),G.props=ge,Me=u.pendingProps,Pe=G.context,ie=d.contextType,typeof ie=="object"&&ie!==null?ie=$n(ie):(ie=bn(d)?Ha:Qr.current,ie=tl(u,ie));var ze=d.getDerivedStateFromProps;(Oe=typeof ze=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ee!==Me||Pe!==ie)&&Vy(u,G,x,ie),aa=!1,Pe=u.memoizedState,G.state=Pe,eh(u,x,G,E);var Ke=u.memoizedState;ee!==Me||Pe!==Ke||xn.current||aa?(typeof ze=="function"&&(Bd(u,d,ze,x),Ke=u.memoizedState),(ge=aa||zy(u,d,ge,x,Pe,Ke,ie)||!1)?(Oe||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(x,Ke,ie),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(x,Ke,ie)),typeof G.componentDidUpdate=="function"&&(u.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof G.componentDidUpdate!="function"||ee===o.memoizedProps&&Pe===o.memoizedState||(u.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ee===o.memoizedProps&&Pe===o.memoizedState||(u.flags|=1024),u.memoizedProps=x,u.memoizedState=Ke),G.props=x,G.state=Ke,G.context=ie,x=ge):(typeof G.componentDidUpdate!="function"||ee===o.memoizedProps&&Pe===o.memoizedState||(u.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ee===o.memoizedProps&&Pe===o.memoizedState||(u.flags|=1024),x=!1)}return zd(o,u,d,x,I,E)}function zd(o,u,d,x,E,I){tg(o,u);var G=(u.flags&128)!==0;if(!x&&!G)return E&&oy(u,d,!1),xs(o,u,I);x=u.stateNode,nT.current=u;var ee=G&&typeof d.getDerivedStateFromError!="function"?null:x.render();return u.flags|=1,o!==null&&G?(u.child=sl(u,o.child,null,I),u.child=sl(u,null,ee,I)):on(o,u,ee,I),u.memoizedState=x.state,E&&oy(u,d,!0),u.child}function ng(o){var u=o.stateNode;u.pendingContext?sy(o,u.pendingContext,u.pendingContext!==u.context):u.context&&sy(o,u.context,!1),Cd(o,u.containerInfo)}function ig(o,u,d,x,E){return il(),gd(E),u.flags|=256,on(o,u,d,x),u.child}var Xd={dehydrated:null,treeContext:null,retryLane:0};function Vd(o){return{baseLanes:o,cachePool:null,transitions:null}}function sg(o,u,d){var x=u.pendingProps,E=ir.current,I=!1,G=(u.flags&128)!==0,ee;if((ee=G)||(ee=o!==null&&o.memoizedState===null?!1:(E&2)!==0),ee?(I=!0,u.flags&=-129):(o===null||o.memoizedState!==null)&&(E|=1),Xt(ir,E&1),o===null)return yd(u),o=u.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((u.mode&1)===0?u.lanes=1:o.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(G=x.children,o=x.fallback,I?(x=u.mode,I=u.child,G={mode:"hidden",children:G},(x&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=G):I=bh(G,x,0,null),o=Za(o,x,d,null),I.return=u,o.return=u,I.sibling=o,u.child=I,u.child.memoizedState=Vd(d),u.memoizedState=Xd,o):qd(u,G));if(E=o.memoizedState,E!==null&&(ee=E.dehydrated,ee!==null))return iT(o,u,G,x,ee,E,d);if(I){I=x.fallback,G=u.mode,E=o.child,ee=E.sibling;var ie={mode:"hidden",children:x.children};return(G&1)===0&&u.child!==E?(x=u.child,x.childLanes=0,x.pendingProps=ie,u.deletions=null):(x=da(E,ie),x.subtreeFlags=E.subtreeFlags&14680064),ee!==null?I=da(ee,I):(I=Za(I,G,d,null),I.flags|=2),I.return=u,x.return=u,x.sibling=I,u.child=x,x=I,I=u.child,G=o.child.memoizedState,G=G===null?Vd(d):{baseLanes:G.baseLanes|d,cachePool:null,transitions:G.transitions},I.memoizedState=G,I.childLanes=o.childLanes&~d,u.memoizedState=Xd,x}return I=o.child,o=I.sibling,x=da(I,{mode:"visible",children:x.children}),(u.mode&1)===0&&(x.lanes=d),x.return=u,x.sibling=null,o!==null&&(d=u.deletions,d===null?(u.deletions=[o],u.flags|=16):d.push(o)),u.child=x,u.memoizedState=null,x}function qd(o,u){return u=bh({mode:"visible",children:u},o.mode,0,null),u.return=o,o.child=u}function lh(o,u,d,x){return x!==null&&gd(x),sl(u,o.child,null,d),o=qd(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function iT(o,u,d,x,E,I,G){if(d)return u.flags&256?(u.flags&=-257,x=Ud(Error(r(422))),lh(o,u,G,x)):u.memoizedState!==null?(u.child=o.child,u.flags|=128,null):(I=x.fallback,E=u.mode,x=bh({mode:"visible",children:x.children},E,0,null),I=Za(I,E,G,null),I.flags|=2,x.return=u,I.return=u,x.sibling=I,u.child=x,(u.mode&1)!==0&&sl(u,o.child,null,G),u.child.memoizedState=Vd(G),u.memoizedState=Xd,I);if((u.mode&1)===0)return lh(o,u,G,null);if(E.data==="$!"){if(x=E.nextSibling&&E.nextSibling.dataset,x)var ee=x.dgst;return x=ee,I=Error(r(419)),x=Ud(I,x,void 0),lh(o,u,G,x)}if(ee=(G&o.childLanes)!==0,wn||ee){if(x=jr,x!==null){switch(G&-G){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(x.suspendedLanes|G))!==0?0:E,E!==0&&E!==I.retryLane&&(I.retryLane=E,ys(o,E),_i(x,o,E,-1))}return lp(),x=Ud(Error(r(421))),lh(o,u,G,x)}return E.data==="$?"?(u.flags|=128,u.child=o.child,u=mT.bind(null,o),E._reactRetry=u,null):(o=I.treeContext,Nn=ra(E.nextSibling),Dn=u,Jt=!0,fi=null,o!==null&&(qn[Wn++]=_s,qn[Wn++]=ms,qn[Wn++]=za,_s=o.id,ms=o.overflow,za=u),u=qd(u,x.children),u.flags|=4096,u)}function ag(o,u,d){o.lanes|=u;var x=o.alternate;x!==null&&(x.lanes|=u),Td(o.return,u,d)}function Wd(o,u,d,x,E){var I=o.memoizedState;I===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:x,tail:d,tailMode:E}:(I.isBackwards=u,I.rendering=null,I.renderingStartTime=0,I.last=x,I.tail=d,I.tailMode=E)}function og(o,u,d){var x=u.pendingProps,E=x.revealOrder,I=x.tail;if(on(o,u,x.children,d),x=ir.current,(x&2)!==0)x=x&1|2,u.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&ag(o,d,u);else if(o.tag===19)ag(o,d,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}x&=1}if(Xt(ir,x),(u.mode&1)===0)u.memoizedState=null;else switch(E){case"forwards":for(d=u.child,E=null;d!==null;)o=d.alternate,o!==null&&th(o)===null&&(E=d),d=d.sibling;d=E,d===null?(E=u.child,u.child=null):(E=d.sibling,d.sibling=null),Wd(u,!1,E,d,I);break;case"backwards":for(d=null,E=u.child,u.child=null;E!==null;){if(o=E.alternate,o!==null&&th(o)===null){u.child=E;break}o=E.sibling,E.sibling=d,d=E,E=o}Wd(u,!0,d,null,I);break;case"together":Wd(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function uh(o,u){(u.mode&1)===0&&o!==null&&(o.alternate=null,u.alternate=null,u.flags|=2)}function xs(o,u,d){if(o!==null&&(u.dependencies=o.dependencies),$a|=u.lanes,(d&u.childLanes)===0)return null;if(o!==null&&u.child!==o.child)throw Error(r(153));if(u.child!==null){for(o=u.child,d=da(o,o.pendingProps),u.child=d,d.return=u;o.sibling!==null;)o=o.sibling,d=d.sibling=da(o,o.pendingProps),d.return=u;d.sibling=null}return u.child}function sT(o,u,d){switch(u.tag){case 3:ng(u),il();break;case 5:by(u);break;case 1:bn(u.type)&&Vc(u);break;case 4:Cd(u,u.stateNode.containerInfo);break;case 10:var x=u.type._context,E=u.memoizedProps.value;Xt(Qc,x._currentValue),x._currentValue=E;break;case 13:if(x=u.memoizedState,x!==null)return x.dehydrated!==null?(Xt(ir,ir.current&1),u.flags|=128,null):(d&u.child.childLanes)!==0?sg(o,u,d):(Xt(ir,ir.current&1),o=xs(o,u,d),o!==null?o.sibling:null);Xt(ir,ir.current&1);break;case 19:if(x=(d&u.childLanes)!==0,(o.flags&128)!==0){if(x)return og(o,u,d);u.flags|=128}if(E=u.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Xt(ir,ir.current),x)break;return null;case 22:case 23:return u.lanes=0,eg(o,u,d)}return xs(o,u,d)}var lg,$d,ug,cg;lg=function(o,u){for(var d=u.child;d!==null;){if(d.tag===5||d.tag===6)o.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},$d=function(){},ug=function(o,u,d,x){var E=o.memoizedProps;if(E!==x){o=u.stateNode,qa(Ui.current);var I=null;switch(d){case"input":E=qe(o,E),x=qe(o,x),I=[];break;case"select":E=$({},E,{value:void 0}),x=$({},x,{value:void 0}),I=[];break;case"textarea":E=Yt(o,E),x=Yt(o,x),I=[];break;default:typeof E.onClick!="function"&&typeof x.onClick=="function"&&(o.onclick=Hc)}ve(d,x);var G;d=null;for(ge in E)if(!x.hasOwnProperty(ge)&&E.hasOwnProperty(ge)&&E[ge]!=null)if(ge==="style"){var ee=E[ge];for(G in ee)ee.hasOwnProperty(G)&&(d||(d={}),d[G]="")}else ge!=="dangerouslySetInnerHTML"&&ge!=="children"&&ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(s.hasOwnProperty(ge)?I||(I=[]):(I=I||[]).push(ge,null));for(ge in x){var ie=x[ge];if(ee=E?.[ge],x.hasOwnProperty(ge)&&ie!==ee&&(ie!=null||ee!=null))if(ge==="style")if(ee){for(G in ee)!ee.hasOwnProperty(G)||ie&&ie.hasOwnProperty(G)||(d||(d={}),d[G]="");for(G in ie)ie.hasOwnProperty(G)&&ee[G]!==ie[G]&&(d||(d={}),d[G]=ie[G])}else d||(I||(I=[]),I.push(ge,d)),d=ie;else ge==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,ee=ee?ee.__html:void 0,ie!=null&&ee!==ie&&(I=I||[]).push(ge,ie)):ge==="children"?typeof ie!="string"&&typeof ie!="number"||(I=I||[]).push(ge,""+ie):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&(s.hasOwnProperty(ge)?(ie!=null&&ge==="onScroll"&&qt("scroll",o),I||ee===ie||(I=[])):(I=I||[]).push(ge,ie))}d&&(I=I||[]).push("style",d);var ge=I;(u.updateQueue=ge)&&(u.flags|=4)}},cg=function(o,u,d,x){d!==x&&(u.flags|=4)};function vu(o,u){if(!Jt)switch(o.tailMode){case"hidden":u=o.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function Jr(o){var u=o.alternate!==null&&o.alternate.child===o.child,d=0,x=0;if(u)for(var E=o.child;E!==null;)d|=E.lanes|E.childLanes,x|=E.subtreeFlags&14680064,x|=E.flags&14680064,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)d|=E.lanes|E.childLanes,x|=E.subtreeFlags,x|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=x,o.childLanes=d,u}function aT(o,u,d){var x=u.pendingProps;switch(_d(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jr(u),null;case 1:return bn(u.type)&&Xc(),Jr(u),null;case 3:return x=u.stateNode,ll(),Wt(xn),Wt(Qr),Id(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(o===null||o.child===null)&&(Yc(u)?u.flags|=4:o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,fi!==null&&(sp(fi),fi=null))),$d(o,u),Jr(u),null;case 5:Ad(u);var E=qa(cu.current);if(d=u.type,o!==null&&u.stateNode!=null)ug(o,u,d,x,E),o.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!x){if(u.stateNode===null)throw Error(r(166));return Jr(u),null}if(o=qa(Ui.current),Yc(u)){x=u.stateNode,d=u.type;var I=u.memoizedProps;switch(x[ji]=u,x[su]=I,o=(u.mode&1)!==0,d){case"dialog":qt("cancel",x),qt("close",x);break;case"iframe":case"object":case"embed":qt("load",x);break;case"video":case"audio":for(E=0;E<ru.length;E++)qt(ru[E],x);break;case"source":qt("error",x);break;case"img":case"image":case"link":qt("error",x),qt("load",x);break;case"details":qt("toggle",x);break;case"input":Ve(x,I),qt("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!I.multiple},qt("invalid",x);break;case"textarea":Dr(x,I),qt("invalid",x)}ve(d,I),E=null;for(var G in I)if(I.hasOwnProperty(G)){var ee=I[G];G==="children"?typeof ee=="string"?x.textContent!==ee&&(I.suppressHydrationWarning!==!0&&Gc(x.textContent,ee,o),E=["children",ee]):typeof ee=="number"&&x.textContent!==""+ee&&(I.suppressHydrationWarning!==!0&&Gc(x.textContent,ee,o),E=["children",""+ee]):s.hasOwnProperty(G)&&ee!=null&&G==="onScroll"&&qt("scroll",x)}switch(d){case"input":He(x),Tt(x,I,!0);break;case"textarea":He(x),Je(x);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(x.onclick=Hc)}x=E,u.updateQueue=x,x!==null&&(u.flags|=4)}else{G=E.nodeType===9?E:E.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Cr(d)),o==="http://www.w3.org/1999/xhtml"?d==="script"?(o=G.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof x.is=="string"?o=G.createElement(d,{is:x.is}):(o=G.createElement(d),d==="select"&&(G=o,x.multiple?G.multiple=!0:x.size&&(G.size=x.size))):o=G.createElementNS(o,d),o[ji]=u,o[su]=x,lg(o,u,!1,!1),u.stateNode=o;e:{switch(G=ye(d,x),d){case"dialog":qt("cancel",o),qt("close",o),E=x;break;case"iframe":case"object":case"embed":qt("load",o),E=x;break;case"video":case"audio":for(E=0;E<ru.length;E++)qt(ru[E],o);E=x;break;case"source":qt("error",o),E=x;break;case"img":case"image":case"link":qt("error",o),qt("load",o),E=x;break;case"details":qt("toggle",o),E=x;break;case"input":Ve(o,x),E=qe(o,x),qt("invalid",o);break;case"option":E=x;break;case"select":o._wrapperState={wasMultiple:!!x.multiple},E=$({},x,{value:void 0}),qt("invalid",o);break;case"textarea":Dr(o,x),E=Yt(o,x),qt("invalid",o);break;default:E=x}ve(d,E),ee=E;for(I in ee)if(ee.hasOwnProperty(I)){var ie=ee[I];I==="style"?pn(o,ie):I==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,ie!=null&&Pi(o,ie)):I==="children"?typeof ie=="string"?(d!=="textarea"||ie!=="")&&zn(o,ie):typeof ie=="number"&&zn(o,""+ie):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(s.hasOwnProperty(I)?ie!=null&&I==="onScroll"&&qt("scroll",o):ie!=null&&L(o,I,ie,G))}switch(d){case"input":He(o),Tt(o,x,!1);break;case"textarea":He(o),Je(o);break;case"option":x.value!=null&&o.setAttribute("value",""+Ie(x.value));break;case"select":o.multiple=!!x.multiple,I=x.value,I!=null?nr(o,!!x.multiple,I,!1):x.defaultValue!=null&&nr(o,!!x.multiple,x.defaultValue,!0);break;default:typeof E.onClick=="function"&&(o.onclick=Hc)}switch(d){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Jr(u),null;case 6:if(o&&u.stateNode!=null)cg(o,u,o.memoizedProps,x);else{if(typeof x!="string"&&u.stateNode===null)throw Error(r(166));if(d=qa(cu.current),qa(Ui.current),Yc(u)){if(x=u.stateNode,d=u.memoizedProps,x[ji]=u,(I=x.nodeValue!==d)&&(o=Dn,o!==null))switch(o.tag){case 3:Gc(x.nodeValue,d,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Gc(x.nodeValue,d,(o.mode&1)!==0)}I&&(u.flags|=4)}else x=(d.nodeType===9?d:d.ownerDocument).createTextNode(x),x[ji]=u,u.stateNode=x}return Jr(u),null;case 13:if(Wt(ir),x=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Jt&&Nn!==null&&(u.mode&1)!==0&&(u.flags&128)===0)dy(),il(),u.flags|=98560,I=!1;else if(I=Yc(u),x!==null&&x.dehydrated!==null){if(o===null){if(!I)throw Error(r(318));if(I=u.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(r(317));I[ji]=u}else il(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Jr(u),I=!1}else fi!==null&&(sp(fi),fi=null),I=!0;if(!I)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=d,u):(x=x!==null,x!==(o!==null&&o.memoizedState!==null)&&x&&(u.child.flags|=8192,(u.mode&1)!==0&&(o===null||(ir.current&1)!==0?Or===0&&(Or=3):lp())),u.updateQueue!==null&&(u.flags|=4),Jr(u),null);case 4:return ll(),$d(o,u),o===null&&nu(u.stateNode.containerInfo),Jr(u),null;case 10:return wd(u.type._context),Jr(u),null;case 17:return bn(u.type)&&Xc(),Jr(u),null;case 19:if(Wt(ir),I=u.memoizedState,I===null)return Jr(u),null;if(x=(u.flags&128)!==0,G=I.rendering,G===null)if(x)vu(I,!1);else{if(Or!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(G=th(o),G!==null){for(u.flags|=128,vu(I,!1),x=G.updateQueue,x!==null&&(u.updateQueue=x,u.flags|=4),u.subtreeFlags=0,x=d,d=u.child;d!==null;)I=d,o=x,I.flags&=14680066,G=I.alternate,G===null?(I.childLanes=0,I.lanes=o,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=G.childLanes,I.lanes=G.lanes,I.child=G.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=G.memoizedProps,I.memoizedState=G.memoizedState,I.updateQueue=G.updateQueue,I.type=G.type,o=G.dependencies,I.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),d=d.sibling;return Xt(ir,ir.current&1|2),u.child}o=o.sibling}I.tail!==null&&Qt()>fl&&(u.flags|=128,x=!0,vu(I,!1),u.lanes=4194304)}else{if(!x)if(o=th(G),o!==null){if(u.flags|=128,x=!0,d=o.updateQueue,d!==null&&(u.updateQueue=d,u.flags|=4),vu(I,!0),I.tail===null&&I.tailMode==="hidden"&&!G.alternate&&!Jt)return Jr(u),null}else 2*Qt()-I.renderingStartTime>fl&&d!==1073741824&&(u.flags|=128,x=!0,vu(I,!1),u.lanes=4194304);I.isBackwards?(G.sibling=u.child,u.child=G):(d=I.last,d!==null?d.sibling=G:u.child=G,I.last=G)}return I.tail!==null?(u=I.tail,I.rendering=u,I.tail=u.sibling,I.renderingStartTime=Qt(),u.sibling=null,d=ir.current,Xt(ir,x?d&1|2:d&1),u):(Jr(u),null);case 22:case 23:return op(),x=u.memoizedState!==null,o!==null&&o.memoizedState!==null!==x&&(u.flags|=8192),x&&(u.mode&1)!==0?(Fn&1073741824)!==0&&(Jr(u),u.subtreeFlags&6&&(u.flags|=8192)):Jr(u),null;case 24:return null;case 25:return null}throw Error(r(156,u.tag))}function oT(o,u){switch(_d(u),u.tag){case 1:return bn(u.type)&&Xc(),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return ll(),Wt(xn),Wt(Qr),Id(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 5:return Ad(u),null;case 13:if(Wt(ir),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(r(340));il()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return Wt(ir),null;case 4:return ll(),null;case 10:return wd(u.type._context),null;case 22:case 23:return op(),null;case 24:return null;default:return null}}var ch=!1,en=!1,lT=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function cl(o,u){var d=o.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(x){ur(o,u,x)}else d.current=null}function Yd(o,u,d){try{d()}catch(x){ur(o,u,x)}}var hg=!1;function uT(o,u){if(od=Zs,o=dt(),xt(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var x=d.getSelection&&d.getSelection();if(x&&x.rangeCount!==0){d=x.anchorNode;var E=x.anchorOffset,I=x.focusNode;x=x.focusOffset;try{d.nodeType,I.nodeType}catch{d=null;break e}var G=0,ee=-1,ie=-1,ge=0,Oe=0,Me=o,Pe=null;t:for(;;){for(var ze;Me!==d||E!==0&&Me.nodeType!==3||(ee=G+E),Me!==I||x!==0&&Me.nodeType!==3||(ie=G+x),Me.nodeType===3&&(G+=Me.nodeValue.length),(ze=Me.firstChild)!==null;)Pe=Me,Me=ze;for(;;){if(Me===o)break t;if(Pe===d&&++ge===E&&(ee=G),Pe===I&&++Oe===x&&(ie=G),(ze=Me.nextSibling)!==null)break;Me=Pe,Pe=Me.parentNode}Me=ze}d=ee===-1||ie===-1?null:{start:ee,end:ie}}else d=null}d=d||{start:0,end:0}}else d=null;for(ld={focusedElem:o,selectionRange:d},Zs=!1,Ye=u;Ye!==null;)if(u=Ye,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,Ye=o;else for(;Ye!==null;){u=Ye;try{var Ke=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(Ke!==null){var et=Ke.memoizedProps,_r=Ke.memoizedState,fe=u.stateNode,le=fe.getSnapshotBeforeUpdate(u.elementType===u.type?et:di(u.type,et),_r);fe.__reactInternalSnapshotBeforeUpdate=le}break;case 3:var _e=u.stateNode.containerInfo;_e.nodeType===1?_e.textContent="":_e.nodeType===9&&_e.documentElement&&_e.removeChild(_e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(De){ur(u,u.return,De)}if(o=u.sibling,o!==null){o.return=u.return,Ye=o;break}Ye=u.return}return Ke=hg,hg=!1,Ke}function _u(o,u,d){var x=u.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var E=x=x.next;do{if((E.tag&o)===o){var I=E.destroy;E.destroy=void 0,I!==void 0&&Yd(u,d,I)}E=E.next}while(E!==x)}}function hh(o,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&o)===o){var x=d.create;d.destroy=x()}d=d.next}while(d!==u)}}function Kd(o){var u=o.ref;if(u!==null){var d=o.stateNode;switch(o.tag){case 5:o=d;break;default:o=d}typeof u=="function"?u(o):u.current=o}}function fg(o){var u=o.alternate;u!==null&&(o.alternate=null,fg(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&(delete u[ji],delete u[su],delete u[fd],delete u[Vw],delete u[qw])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function dg(o){return o.tag===5||o.tag===3||o.tag===4}function pg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||dg(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Qd(o,u,d){var x=o.tag;if(x===5||x===6)o=o.stateNode,u?d.nodeType===8?d.parentNode.insertBefore(o,u):d.insertBefore(o,u):(d.nodeType===8?(u=d.parentNode,u.insertBefore(o,d)):(u=d,u.appendChild(o)),d=d._reactRootContainer,d!=null||u.onclick!==null||(u.onclick=Hc));else if(x!==4&&(o=o.child,o!==null))for(Qd(o,u,d),o=o.sibling;o!==null;)Qd(o,u,d),o=o.sibling}function Zd(o,u,d){var x=o.tag;if(x===5||x===6)o=o.stateNode,u?d.insertBefore(o,u):d.appendChild(o);else if(x!==4&&(o=o.child,o!==null))for(Zd(o,u,d),o=o.sibling;o!==null;)Zd(o,u,d),o=o.sibling}var Xr=null,pi=!1;function la(o,u,d){for(d=d.child;d!==null;)vg(o,u,d),d=d.sibling}function vg(o,u,d){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(No,d)}catch{}switch(d.tag){case 5:en||cl(d,u);case 6:var x=Xr,E=pi;Xr=null,la(o,u,d),Xr=x,pi=E,Xr!==null&&(pi?(o=Xr,d=d.stateNode,o.nodeType===8?o.parentNode.removeChild(d):o.removeChild(d)):Xr.removeChild(d.stateNode));break;case 18:Xr!==null&&(pi?(o=Xr,d=d.stateNode,o.nodeType===8?hd(o.parentNode,d):o.nodeType===1&&hd(o,d),as(o)):hd(Xr,d.stateNode));break;case 4:x=Xr,E=pi,Xr=d.stateNode.containerInfo,pi=!0,la(o,u,d),Xr=x,pi=E;break;case 0:case 11:case 14:case 15:if(!en&&(x=d.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){E=x=x.next;do{var I=E,G=I.destroy;I=I.tag,G!==void 0&&((I&2)!==0||(I&4)!==0)&&Yd(d,u,G),E=E.next}while(E!==x)}la(o,u,d);break;case 1:if(!en&&(cl(d,u),x=d.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=d.memoizedProps,x.state=d.memoizedState,x.componentWillUnmount()}catch(ee){ur(d,u,ee)}la(o,u,d);break;case 21:la(o,u,d);break;case 22:d.mode&1?(en=(x=en)||d.memoizedState!==null,la(o,u,d),en=x):la(o,u,d);break;default:la(o,u,d)}}function _g(o){var u=o.updateQueue;if(u!==null){o.updateQueue=null;var d=o.stateNode;d===null&&(d=o.stateNode=new lT),u.forEach(function(x){var E=yT.bind(null,o,x);d.has(x)||(d.add(x),x.then(E,E))})}}function vi(o,u){var d=u.deletions;if(d!==null)for(var x=0;x<d.length;x++){var E=d[x];try{var I=o,G=u,ee=G;e:for(;ee!==null;){switch(ee.tag){case 5:Xr=ee.stateNode,pi=!1;break e;case 3:Xr=ee.stateNode.containerInfo,pi=!0;break e;case 4:Xr=ee.stateNode.containerInfo,pi=!0;break e}ee=ee.return}if(Xr===null)throw Error(r(160));vg(I,G,E),Xr=null,pi=!1;var ie=E.alternate;ie!==null&&(ie.return=null),E.return=null}catch(ge){ur(E,u,ge)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)mg(u,o),u=u.sibling}function mg(o,u){var d=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(vi(u,o),Hi(o),x&4){try{_u(3,o,o.return),hh(3,o)}catch(et){ur(o,o.return,et)}try{_u(5,o,o.return)}catch(et){ur(o,o.return,et)}}break;case 1:vi(u,o),Hi(o),x&512&&d!==null&&cl(d,d.return);break;case 5:if(vi(u,o),Hi(o),x&512&&d!==null&&cl(d,d.return),o.flags&32){var E=o.stateNode;try{zn(E,"")}catch(et){ur(o,o.return,et)}}if(x&4&&(E=o.stateNode,E!=null)){var I=o.memoizedProps,G=d!==null?d.memoizedProps:I,ee=o.type,ie=o.updateQueue;if(o.updateQueue=null,ie!==null)try{ee==="input"&&I.type==="radio"&&I.name!=null&&Ue(E,I),ye(ee,G);var ge=ye(ee,I);for(G=0;G<ie.length;G+=2){var Oe=ie[G],Me=ie[G+1];Oe==="style"?pn(E,Me):Oe==="dangerouslySetInnerHTML"?Pi(E,Me):Oe==="children"?zn(E,Me):L(E,Oe,Me,ge)}switch(ee){case"input":nt(E,I);break;case"textarea":Nr(E,I);break;case"select":var Pe=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!I.multiple;var ze=I.value;ze!=null?nr(E,!!I.multiple,ze,!1):Pe!==!!I.multiple&&(I.defaultValue!=null?nr(E,!!I.multiple,I.defaultValue,!0):nr(E,!!I.multiple,I.multiple?[]:"",!1))}E[su]=I}catch(et){ur(o,o.return,et)}}break;case 6:if(vi(u,o),Hi(o),x&4){if(o.stateNode===null)throw Error(r(162));E=o.stateNode,I=o.memoizedProps;try{E.nodeValue=I}catch(et){ur(o,o.return,et)}}break;case 3:if(vi(u,o),Hi(o),x&4&&d!==null&&d.memoizedState.isDehydrated)try{as(u.containerInfo)}catch(et){ur(o,o.return,et)}break;case 4:vi(u,o),Hi(o);break;case 13:vi(u,o),Hi(o),E=o.child,E.flags&8192&&(I=E.memoizedState!==null,E.stateNode.isHidden=I,!I||E.alternate!==null&&E.alternate.memoizedState!==null||(tp=Qt())),x&4&&_g(o);break;case 22:if(Oe=d!==null&&d.memoizedState!==null,o.mode&1?(en=(ge=en)||Oe,vi(u,o),en=ge):vi(u,o),Hi(o),x&8192){if(ge=o.memoizedState!==null,(o.stateNode.isHidden=ge)&&!Oe&&(o.mode&1)!==0)for(Ye=o,Oe=o.child;Oe!==null;){for(Me=Ye=Oe;Ye!==null;){switch(Pe=Ye,ze=Pe.child,Pe.tag){case 0:case 11:case 14:case 15:_u(4,Pe,Pe.return);break;case 1:cl(Pe,Pe.return);var Ke=Pe.stateNode;if(typeof Ke.componentWillUnmount=="function"){x=Pe,d=Pe.return;try{u=x,Ke.props=u.memoizedProps,Ke.state=u.memoizedState,Ke.componentWillUnmount()}catch(et){ur(x,d,et)}}break;case 5:cl(Pe,Pe.return);break;case 22:if(Pe.memoizedState!==null){xg(Me);continue}}ze!==null?(ze.return=Pe,Ye=ze):xg(Me)}Oe=Oe.sibling}e:for(Oe=null,Me=o;;){if(Me.tag===5){if(Oe===null){Oe=Me;try{E=Me.stateNode,ge?(I=E.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(ee=Me.stateNode,ie=Me.memoizedProps.style,G=ie!=null&&ie.hasOwnProperty("display")?ie.display:null,ee.style.display=dn("display",G))}catch(et){ur(o,o.return,et)}}}else if(Me.tag===6){if(Oe===null)try{Me.stateNode.nodeValue=ge?"":Me.memoizedProps}catch(et){ur(o,o.return,et)}}else if((Me.tag!==22&&Me.tag!==23||Me.memoizedState===null||Me===o)&&Me.child!==null){Me.child.return=Me,Me=Me.child;continue}if(Me===o)break e;for(;Me.sibling===null;){if(Me.return===null||Me.return===o)break e;Oe===Me&&(Oe=null),Me=Me.return}Oe===Me&&(Oe=null),Me.sibling.return=Me.return,Me=Me.sibling}}break;case 19:vi(u,o),Hi(o),x&4&&_g(o);break;case 21:break;default:vi(u,o),Hi(o)}}function Hi(o){var u=o.flags;if(u&2){try{e:{for(var d=o.return;d!==null;){if(dg(d)){var x=d;break e}d=d.return}throw Error(r(160))}switch(x.tag){case 5:var E=x.stateNode;x.flags&32&&(zn(E,""),x.flags&=-33);var I=pg(o);Zd(o,I,E);break;case 3:case 4:var G=x.stateNode.containerInfo,ee=pg(o);Qd(o,ee,G);break;default:throw Error(r(161))}}catch(ie){ur(o,o.return,ie)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function cT(o,u,d){Ye=o,yg(o)}function yg(o,u,d){for(var x=(o.mode&1)!==0;Ye!==null;){var E=Ye,I=E.child;if(E.tag===22&&x){var G=E.memoizedState!==null||ch;if(!G){var ee=E.alternate,ie=ee!==null&&ee.memoizedState!==null||en;ee=ch;var ge=en;if(ch=G,(en=ie)&&!ge)for(Ye=E;Ye!==null;)G=Ye,ie=G.child,G.tag===22&&G.memoizedState!==null?bg(E):ie!==null?(ie.return=G,Ye=ie):bg(E);for(;I!==null;)Ye=I,yg(I),I=I.sibling;Ye=E,ch=ee,en=ge}gg(o)}else(E.subtreeFlags&8772)!==0&&I!==null?(I.return=E,Ye=I):gg(o)}}function gg(o){for(;Ye!==null;){var u=Ye;if((u.flags&8772)!==0){var d=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:en||hh(5,u);break;case 1:var x=u.stateNode;if(u.flags&4&&!en)if(d===null)x.componentDidMount();else{var E=u.elementType===u.type?d.memoizedProps:di(u.type,d.memoizedProps);x.componentDidUpdate(E,d.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var I=u.updateQueue;I!==null&&xy(u,I,x);break;case 3:var G=u.updateQueue;if(G!==null){if(d=null,u.child!==null)switch(u.child.tag){case 5:d=u.child.stateNode;break;case 1:d=u.child.stateNode}xy(u,G,d)}break;case 5:var ee=u.stateNode;if(d===null&&u.flags&4){d=ee;var ie=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":ie.autoFocus&&d.focus();break;case"img":ie.src&&(d.src=ie.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var ge=u.alternate;if(ge!==null){var Oe=ge.memoizedState;if(Oe!==null){var Me=Oe.dehydrated;Me!==null&&as(Me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}en||u.flags&512&&Kd(u)}catch(Pe){ur(u,u.return,Pe)}}if(u===o){Ye=null;break}if(d=u.sibling,d!==null){d.return=u.return,Ye=d;break}Ye=u.return}}function xg(o){for(;Ye!==null;){var u=Ye;if(u===o){Ye=null;break}var d=u.sibling;if(d!==null){d.return=u.return,Ye=d;break}Ye=u.return}}function bg(o){for(;Ye!==null;){var u=Ye;try{switch(u.tag){case 0:case 11:case 15:var d=u.return;try{hh(4,u)}catch(ie){ur(u,d,ie)}break;case 1:var x=u.stateNode;if(typeof x.componentDidMount=="function"){var E=u.return;try{x.componentDidMount()}catch(ie){ur(u,E,ie)}}var I=u.return;try{Kd(u)}catch(ie){ur(u,I,ie)}break;case 5:var G=u.return;try{Kd(u)}catch(ie){ur(u,G,ie)}}}catch(ie){ur(u,u.return,ie)}if(u===o){Ye=null;break}var ee=u.sibling;if(ee!==null){ee.return=u.return,Ye=ee;break}Ye=u.return}}var hT=Math.ceil,fh=V.ReactCurrentDispatcher,Jd=V.ReactCurrentOwner,Kn=V.ReactCurrentBatchConfig,kt=0,jr=null,wr=null,Vr=0,Fn=0,hl=na(0),Or=0,mu=null,$a=0,dh=0,ep=0,yu=null,Tn=null,tp=0,fl=1/0,bs=null,ph=!1,rp=null,ua=null,vh=!1,ca=null,_h=0,gu=0,np=null,mh=-1,yh=0;function ln(){return(kt&6)!==0?Qt():mh!==-1?mh:mh=Qt()}function ha(o){return(o.mode&1)===0?1:(kt&2)!==0&&Vr!==0?Vr&-Vr:$w.transition!==null?(yh===0&&(yh=Ec()),yh):(o=Ft,o!==0||(o=window.event,o=o===void 0?16:Dc(o.type)),o)}function _i(o,u,d,x){if(50<gu)throw gu=0,np=null,Error(r(185));zr(o,d,x),((kt&2)===0||o!==jr)&&(o===jr&&((kt&2)===0&&(dh|=d),Or===4&&fa(o,Vr)),Sn(o,x),d===1&&kt===0&&(u.mode&1)===0&&(fl=Qt()+500,qc&&sa()))}function Sn(o,u){var d=o.callbackNode;Lo(o,u);var x=Ws(o,o===jr?Vr:0);if(x===0)d!==null&&Vs(d),o.callbackNode=null,o.callbackPriority=0;else if(u=x&-x,o.callbackPriority!==u){if(d!=null&&Vs(d),u===1)o.tag===0?Ww(Tg.bind(null,o)):ly(Tg.bind(null,o)),zw(function(){(kt&6)===0&&sa()}),d=null;else{switch(Ac(x)){case 1:d=ko;break;case 4:d=zl;break;case 16:d=Do;break;case 536870912:d=bc;break;default:d=Do}d=Rg(d,wg.bind(null,o))}o.callbackPriority=u,o.callbackNode=d}}function wg(o,u){if(mh=-1,yh=0,(kt&6)!==0)throw Error(r(327));var d=o.callbackNode;if(dl()&&o.callbackNode!==d)return null;var x=Ws(o,o===jr?Vr:0);if(x===0)return null;if((x&30)!==0||(x&o.expiredLanes)!==0||u)u=gh(o,x);else{u=x;var E=kt;kt|=2;var I=Eg();(jr!==o||Vr!==u)&&(bs=null,fl=Qt()+500,Ka(o,u));do try{pT();break}catch(ee){Sg(o,ee)}while(!0);bd(),fh.current=I,kt=E,wr!==null?u=0:(jr=null,Vr=0,u=Or)}if(u!==0){if(u===2&&(E=Bo(o),E!==0&&(x=E,u=ip(o,E))),u===1)throw d=mu,Ka(o,0),fa(o,x),Sn(o,Qt()),d;if(u===6)fa(o,x);else{if(E=o.current.alternate,(x&30)===0&&!fT(E)&&(u=gh(o,x),u===2&&(I=Bo(o),I!==0&&(x=I,u=ip(o,I))),u===1))throw d=mu,Ka(o,0),fa(o,x),Sn(o,Qt()),d;switch(o.finishedWork=E,o.finishedLanes=x,u){case 0:case 1:throw Error(r(345));case 2:Qa(o,Tn,bs);break;case 3:if(fa(o,x),(x&130023424)===x&&(u=tp+500-Qt(),10<u)){if(Ws(o,0)!==0)break;if(E=o.suspendedLanes,(E&x)!==x){ln(),o.pingedLanes|=o.suspendedLanes&E;break}o.timeoutHandle=cd(Qa.bind(null,o,Tn,bs),u);break}Qa(o,Tn,bs);break;case 4:if(fa(o,x),(x&4194240)===x)break;for(u=o.eventTimes,E=-1;0<x;){var G=31-an(x);I=1<<G,G=u[G],G>E&&(E=G),x&=~I}if(x=E,x=Qt()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*hT(x/1960))-x,10<x){o.timeoutHandle=cd(Qa.bind(null,o,Tn,bs),x);break}Qa(o,Tn,bs);break;case 5:Qa(o,Tn,bs);break;default:throw Error(r(329))}}}return Sn(o,Qt()),o.callbackNode===d?wg.bind(null,o):null}function ip(o,u){var d=yu;return o.current.memoizedState.isDehydrated&&(Ka(o,u).flags|=256),o=gh(o,u),o!==2&&(u=Tn,Tn=d,u!==null&&sp(u)),o}function sp(o){Tn===null?Tn=o:Tn.push.apply(Tn,o)}function fT(o){for(var u=o;;){if(u.flags&16384){var d=u.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var x=0;x<d.length;x++){var E=d[x],I=E.getSnapshot;E=E.value;try{if(!Be(I(),E))return!1}catch{return!1}}}if(d=u.child,u.subtreeFlags&16384&&d!==null)d.return=u,u=d;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function fa(o,u){for(u&=~ep,u&=~dh,o.suspendedLanes|=u,o.pingedLanes&=~u,o=o.expirationTimes;0<u;){var d=31-an(u),x=1<<d;o[d]=-1,u&=~x}}function Tg(o){if((kt&6)!==0)throw Error(r(327));dl();var u=Ws(o,0);if((u&1)===0)return Sn(o,Qt()),null;var d=gh(o,u);if(o.tag!==0&&d===2){var x=Bo(o);x!==0&&(u=x,d=ip(o,x))}if(d===1)throw d=mu,Ka(o,0),fa(o,u),Sn(o,Qt()),d;if(d===6)throw Error(r(345));return o.finishedWork=o.current.alternate,o.finishedLanes=u,Qa(o,Tn,bs),Sn(o,Qt()),null}function ap(o,u){var d=kt;kt|=1;try{return o(u)}finally{kt=d,kt===0&&(fl=Qt()+500,qc&&sa())}}function Ya(o){ca!==null&&ca.tag===0&&(kt&6)===0&&dl();var u=kt;kt|=1;var d=Kn.transition,x=Ft;try{if(Kn.transition=null,Ft=1,o)return o()}finally{Ft=x,Kn.transition=d,kt=u,(kt&6)===0&&sa()}}function op(){Fn=hl.current,Wt(hl)}function Ka(o,u){o.finishedWork=null,o.finishedLanes=0;var d=o.timeoutHandle;if(d!==-1&&(o.timeoutHandle=-1,Hw(d)),wr!==null)for(d=wr.return;d!==null;){var x=d;switch(_d(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Xc();break;case 3:ll(),Wt(xn),Wt(Qr),Id();break;case 5:Ad(x);break;case 4:ll();break;case 13:Wt(ir);break;case 19:Wt(ir);break;case 10:wd(x.type._context);break;case 22:case 23:op()}d=d.return}if(jr=o,wr=o=da(o.current,null),Vr=Fn=u,Or=0,mu=null,ep=dh=$a=0,Tn=yu=null,Va!==null){for(u=0;u<Va.length;u++)if(d=Va[u],x=d.interleaved,x!==null){d.interleaved=null;var E=x.next,I=d.pending;if(I!==null){var G=I.next;I.next=E,x.next=G}d.pending=x}Va=null}return o}function Sg(o,u){do{var d=wr;try{if(bd(),rh.current=ah,nh){for(var x=sr.memoizedState;x!==null;){var E=x.queue;E!==null&&(E.pending=null),x=x.next}nh=!1}if(Wa=0,Br=Ir=sr=null,hu=!1,fu=0,Jd.current=null,d===null||d.return===null){Or=1,mu=u,wr=null;break}e:{var I=o,G=d.return,ee=d,ie=u;if(u=Vr,ee.flags|=32768,ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var ge=ie,Oe=ee,Me=Oe.tag;if((Oe.mode&1)===0&&(Me===0||Me===11||Me===15)){var Pe=Oe.alternate;Pe?(Oe.updateQueue=Pe.updateQueue,Oe.memoizedState=Pe.memoizedState,Oe.lanes=Pe.lanes):(Oe.updateQueue=null,Oe.memoizedState=null)}var ze=Yy(G);if(ze!==null){ze.flags&=-257,Ky(ze,G,ee,I,u),ze.mode&1&&$y(I,ge,u),u=ze,ie=ge;var Ke=u.updateQueue;if(Ke===null){var et=new Set;et.add(ie),u.updateQueue=et}else Ke.add(ie);break e}else{if((u&1)===0){$y(I,ge,u),lp();break e}ie=Error(r(426))}}else if(Jt&&ee.mode&1){var _r=Yy(G);if(_r!==null){(_r.flags&65536)===0&&(_r.flags|=256),Ky(_r,G,ee,I,u),gd(ul(ie,ee));break e}}I=ie=ul(ie,ee),Or!==4&&(Or=2),yu===null?yu=[I]:yu.push(I),I=G;do{switch(I.tag){case 3:I.flags|=65536,u&=-u,I.lanes|=u;var fe=qy(I,ie,u);gy(I,fe);break e;case 1:ee=ie;var le=I.type,_e=I.stateNode;if((I.flags&128)===0&&(typeof le.getDerivedStateFromError=="function"||_e!==null&&typeof _e.componentDidCatch=="function"&&(ua===null||!ua.has(_e)))){I.flags|=65536,u&=-u,I.lanes|=u;var De=Wy(I,ee,u);gy(I,De);break e}}I=I.return}while(I!==null)}Ag(d)}catch(tt){u=tt,wr===d&&d!==null&&(wr=d=d.return);continue}break}while(!0)}function Eg(){var o=fh.current;return fh.current=ah,o===null?ah:o}function lp(){(Or===0||Or===3||Or===2)&&(Or=4),jr===null||($a&268435455)===0&&(dh&268435455)===0||fa(jr,Vr)}function gh(o,u){var d=kt;kt|=2;var x=Eg();(jr!==o||Vr!==u)&&(bs=null,Ka(o,u));do try{dT();break}catch(E){Sg(o,E)}while(!0);if(bd(),kt=d,fh.current=x,wr!==null)throw Error(r(261));return jr=null,Vr=0,Or}function dT(){for(;wr!==null;)Cg(wr)}function pT(){for(;wr!==null&&!Zf();)Cg(wr)}function Cg(o){var u=Og(o.alternate,o,Fn);o.memoizedProps=o.pendingProps,u===null?Ag(o):wr=u,Jd.current=null}function Ag(o){var u=o;do{var d=u.alternate;if(o=u.return,(u.flags&32768)===0){if(d=aT(d,u,Fn),d!==null){wr=d;return}}else{if(d=oT(d,u),d!==null){d.flags&=32767,wr=d;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Or=6,wr=null;return}}if(u=u.sibling,u!==null){wr=u;return}wr=u=o}while(u!==null);Or===0&&(Or=5)}function Qa(o,u,d){var x=Ft,E=Kn.transition;try{Kn.transition=null,Ft=1,vT(o,u,d,x)}finally{Kn.transition=E,Ft=x}return null}function vT(o,u,d,x){do dl();while(ca!==null);if((kt&6)!==0)throw Error(r(327));d=o.finishedWork;var E=o.finishedLanes;if(d===null)return null;if(o.finishedWork=null,o.finishedLanes=0,d===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0;var I=d.lanes|d.childLanes;if(Cc(o,I),o===jr&&(wr=jr=null,Vr=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||vh||(vh=!0,Rg(Do,function(){return dl(),null})),I=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||I){I=Kn.transition,Kn.transition=null;var G=Ft;Ft=1;var ee=kt;kt|=4,Jd.current=null,uT(o,d),mg(d,o),st(ld),Zs=!!od,ld=od=null,o.current=d,cT(d),Ma(),kt=ee,Ft=G,Kn.transition=I}else o.current=d;if(vh&&(vh=!1,ca=o,_h=E),I=o.pendingLanes,I===0&&(ua=null),wc(d.stateNode),Sn(o,Qt()),u!==null)for(x=o.onRecoverableError,d=0;d<u.length;d++)E=u[d],x(E.value,{componentStack:E.stack,digest:E.digest});if(ph)throw ph=!1,o=rp,rp=null,o;return(_h&1)!==0&&o.tag!==0&&dl(),I=o.pendingLanes,(I&1)!==0?o===np?gu++:(gu=0,np=o):gu=0,sa(),null}function dl(){if(ca!==null){var o=Ac(_h),u=Kn.transition,d=Ft;try{if(Kn.transition=null,Ft=16>o?16:o,ca===null)var x=!1;else{if(o=ca,ca=null,_h=0,(kt&6)!==0)throw Error(r(331));var E=kt;for(kt|=4,Ye=o.current;Ye!==null;){var I=Ye,G=I.child;if((Ye.flags&16)!==0){var ee=I.deletions;if(ee!==null){for(var ie=0;ie<ee.length;ie++){var ge=ee[ie];for(Ye=ge;Ye!==null;){var Oe=Ye;switch(Oe.tag){case 0:case 11:case 15:_u(8,Oe,I)}var Me=Oe.child;if(Me!==null)Me.return=Oe,Ye=Me;else for(;Ye!==null;){Oe=Ye;var Pe=Oe.sibling,ze=Oe.return;if(fg(Oe),Oe===ge){Ye=null;break}if(Pe!==null){Pe.return=ze,Ye=Pe;break}Ye=ze}}}var Ke=I.alternate;if(Ke!==null){var et=Ke.child;if(et!==null){Ke.child=null;do{var _r=et.sibling;et.sibling=null,et=_r}while(et!==null)}}Ye=I}}if((I.subtreeFlags&2064)!==0&&G!==null)G.return=I,Ye=G;else e:for(;Ye!==null;){if(I=Ye,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:_u(9,I,I.return)}var fe=I.sibling;if(fe!==null){fe.return=I.return,Ye=fe;break e}Ye=I.return}}var le=o.current;for(Ye=le;Ye!==null;){G=Ye;var _e=G.child;if((G.subtreeFlags&2064)!==0&&_e!==null)_e.return=G,Ye=_e;else e:for(G=le;Ye!==null;){if(ee=Ye,(ee.flags&2048)!==0)try{switch(ee.tag){case 0:case 11:case 15:hh(9,ee)}}catch(tt){ur(ee,ee.return,tt)}if(ee===G){Ye=null;break e}var De=ee.sibling;if(De!==null){De.return=ee.return,Ye=De;break e}Ye=ee.return}}if(kt=E,sa(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(No,o)}catch{}x=!0}return x}finally{Ft=d,Kn.transition=u}}return!1}function Pg(o,u,d){u=ul(d,u),u=qy(o,u,1),o=oa(o,u,1),u=ln(),o!==null&&(zr(o,1,u),Sn(o,u))}function ur(o,u,d){if(o.tag===3)Pg(o,o,d);else for(;u!==null;){if(u.tag===3){Pg(u,o,d);break}else if(u.tag===1){var x=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(ua===null||!ua.has(x))){o=ul(d,o),o=Wy(u,o,1),u=oa(u,o,1),o=ln(),u!==null&&(zr(u,1,o),Sn(u,o));break}}u=u.return}}function _T(o,u,d){var x=o.pingCache;x!==null&&x.delete(u),u=ln(),o.pingedLanes|=o.suspendedLanes&d,jr===o&&(Vr&d)===d&&(Or===4||Or===3&&(Vr&130023424)===Vr&&500>Qt()-tp?Ka(o,0):ep|=d),Sn(o,u)}function Ig(o,u){u===0&&((o.mode&1)===0?u=1:(u=Fo,Fo<<=1,(Fo&130023424)===0&&(Fo=4194304)));var d=ln();o=ys(o,u),o!==null&&(zr(o,u,d),Sn(o,d))}function mT(o){var u=o.memoizedState,d=0;u!==null&&(d=u.retryLane),Ig(o,d)}function yT(o,u){var d=0;switch(o.tag){case 13:var x=o.stateNode,E=o.memoizedState;E!==null&&(d=E.retryLane);break;case 19:x=o.stateNode;break;default:throw Error(r(314))}x!==null&&x.delete(u),Ig(o,d)}var Og;Og=function(o,u,d){if(o!==null)if(o.memoizedProps!==u.pendingProps||xn.current)wn=!0;else{if((o.lanes&d)===0&&(u.flags&128)===0)return wn=!1,sT(o,u,d);wn=(o.flags&131072)!==0}else wn=!1,Jt&&(u.flags&1048576)!==0&&uy(u,$c,u.index);switch(u.lanes=0,u.tag){case 2:var x=u.type;uh(o,u),o=u.pendingProps;var E=tl(u,Qr.current);ol(u,d),E=Md(null,u,x,o,E,d);var I=kd();return u.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,bn(x)?(I=!0,Vc(u)):I=!1,u.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Ed(u),E.updater=oh,u.stateNode=E,E._reactInternals=u,jd(u,x,o,d),u=zd(null,u,x,!0,I,d)):(u.tag=0,Jt&&I&&vd(u),on(null,u,E,d),u=u.child),u;case 16:x=u.elementType;e:{switch(uh(o,u),o=u.pendingProps,E=x._init,x=E(x._payload),u.type=x,E=u.tag=xT(x),o=di(x,o),E){case 0:u=Hd(null,u,x,o,d);break e;case 1:u=rg(null,u,x,o,d);break e;case 11:u=Qy(null,u,x,o,d);break e;case 14:u=Zy(null,u,x,di(x.type,o),d);break e}throw Error(r(306,x,""))}return u;case 0:return x=u.type,E=u.pendingProps,E=u.elementType===x?E:di(x,E),Hd(o,u,x,E,d);case 1:return x=u.type,E=u.pendingProps,E=u.elementType===x?E:di(x,E),rg(o,u,x,E,d);case 3:e:{if(ng(u),o===null)throw Error(r(387));x=u.pendingProps,I=u.memoizedState,E=I.element,yy(o,u),eh(u,x,null,d);var G=u.memoizedState;if(x=G.element,I.isDehydrated)if(I={element:x,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},u.updateQueue.baseState=I,u.memoizedState=I,u.flags&256){E=ul(Error(r(423)),u),u=ig(o,u,x,d,E);break e}else if(x!==E){E=ul(Error(r(424)),u),u=ig(o,u,x,d,E);break e}else for(Nn=ra(u.stateNode.containerInfo.firstChild),Dn=u,Jt=!0,fi=null,d=_y(u,null,x,d),u.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(il(),x===E){u=xs(o,u,d);break e}on(o,u,x,d)}u=u.child}return u;case 5:return by(u),o===null&&yd(u),x=u.type,E=u.pendingProps,I=o!==null?o.memoizedProps:null,G=E.children,ud(x,E)?G=null:I!==null&&ud(x,I)&&(u.flags|=32),tg(o,u),on(o,u,G,d),u.child;case 6:return o===null&&yd(u),null;case 13:return sg(o,u,d);case 4:return Cd(u,u.stateNode.containerInfo),x=u.pendingProps,o===null?u.child=sl(u,null,x,d):on(o,u,x,d),u.child;case 11:return x=u.type,E=u.pendingProps,E=u.elementType===x?E:di(x,E),Qy(o,u,x,E,d);case 7:return on(o,u,u.pendingProps,d),u.child;case 8:return on(o,u,u.pendingProps.children,d),u.child;case 12:return on(o,u,u.pendingProps.children,d),u.child;case 10:e:{if(x=u.type._context,E=u.pendingProps,I=u.memoizedProps,G=E.value,Xt(Qc,x._currentValue),x._currentValue=G,I!==null)if(Be(I.value,G)){if(I.children===E.children&&!xn.current){u=xs(o,u,d);break e}}else for(I=u.child,I!==null&&(I.return=u);I!==null;){var ee=I.dependencies;if(ee!==null){G=I.child;for(var ie=ee.firstContext;ie!==null;){if(ie.context===x){if(I.tag===1){ie=gs(-1,d&-d),ie.tag=2;var ge=I.updateQueue;if(ge!==null){ge=ge.shared;var Oe=ge.pending;Oe===null?ie.next=ie:(ie.next=Oe.next,Oe.next=ie),ge.pending=ie}}I.lanes|=d,ie=I.alternate,ie!==null&&(ie.lanes|=d),Td(I.return,d,u),ee.lanes|=d;break}ie=ie.next}}else if(I.tag===10)G=I.type===u.type?null:I.child;else if(I.tag===18){if(G=I.return,G===null)throw Error(r(341));G.lanes|=d,ee=G.alternate,ee!==null&&(ee.lanes|=d),Td(G,d,u),G=I.sibling}else G=I.child;if(G!==null)G.return=I;else for(G=I;G!==null;){if(G===u){G=null;break}if(I=G.sibling,I!==null){I.return=G.return,G=I;break}G=G.return}I=G}on(o,u,E.children,d),u=u.child}return u;case 9:return E=u.type,x=u.pendingProps.children,ol(u,d),E=$n(E),x=x(E),u.flags|=1,on(o,u,x,d),u.child;case 14:return x=u.type,E=di(x,u.pendingProps),E=di(x.type,E),Zy(o,u,x,E,d);case 15:return Jy(o,u,u.type,u.pendingProps,d);case 17:return x=u.type,E=u.pendingProps,E=u.elementType===x?E:di(x,E),uh(o,u),u.tag=1,bn(x)?(o=!0,Vc(u)):o=!1,ol(u,d),Xy(u,x,E),jd(u,x,E,d),zd(null,u,x,!0,o,d);case 19:return og(o,u,d);case 22:return eg(o,u,d)}throw Error(r(156,u.tag))};function Rg(o,u){return ns(o,u)}function gT(o,u,d,x){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(o,u,d,x){return new gT(o,u,d,x)}function up(o){return o=o.prototype,!(!o||!o.isReactComponent)}function xT(o){if(typeof o=="function")return up(o)?1:0;if(o!=null){if(o=o.$$typeof,o===re)return 11;if(o===Z)return 14}return 2}function da(o,u){var d=o.alternate;return d===null?(d=Qn(o.tag,u,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=u,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&14680064,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,u=o.dependencies,d.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d}function xh(o,u,d,x,E,I){var G=2;if(x=o,typeof o=="function")up(o)&&(G=1);else if(typeof o=="string")G=5;else e:switch(o){case g:return Za(d.children,E,I,u);case ne:G=8,E|=8;break;case B:return o=Qn(12,d,u,E|2),o.elementType=B,o.lanes=I,o;case he:return o=Qn(13,d,u,E),o.elementType=he,o.lanes=I,o;case xe:return o=Qn(19,d,u,E),o.elementType=xe,o.lanes=I,o;case W:return bh(d,E,I,u);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Y:G=10;break e;case se:G=9;break e;case re:G=11;break e;case Z:G=14;break e;case U:G=16,x=null;break e}throw Error(r(130,o==null?o:typeof o,""))}return u=Qn(G,d,u,E),u.elementType=o,u.type=x,u.lanes=I,u}function Za(o,u,d,x){return o=Qn(7,o,x,u),o.lanes=d,o}function bh(o,u,d,x){return o=Qn(22,o,x,u),o.elementType=W,o.lanes=d,o.stateNode={isHidden:!1},o}function cp(o,u,d){return o=Qn(6,o,null,u),o.lanes=d,o}function hp(o,u,d){return u=Qn(4,o.children!==null?o.children:[],o.key,u),u.lanes=d,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}function bT(o,u,d,x,E){this.tag=u,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vl(0),this.expirationTimes=Vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vl(0),this.identifierPrefix=x,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function fp(o,u,d,x,E,I,G,ee,ie){return o=new bT(o,u,d,ee,ie),u===1?(u=1,I===!0&&(u|=8)):u=0,I=Qn(3,null,null,u),o.current=I,I.stateNode=o,I.memoizedState={element:x,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ed(I),o}function wT(o,u,d){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:x==null?null:""+x,children:o,containerInfo:u,implementation:d}}function Mg(o){if(!o)return ia;o=o._reactInternals;e:{if(vn(o)!==o||o.tag!==1)throw Error(r(170));var u=o;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(bn(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(r(171))}if(o.tag===1){var d=o.type;if(bn(d))return ay(o,d,u)}return u}function kg(o,u,d,x,E,I,G,ee,ie){return o=fp(d,x,!0,o,E,I,G,ee,ie),o.context=Mg(null),d=o.current,x=ln(),E=ha(d),I=gs(x,E),I.callback=u??null,oa(d,I,E),o.current.lanes=E,zr(o,E,x),Sn(o,x),o}function wh(o,u,d,x){var E=u.current,I=ln(),G=ha(E);return d=Mg(d),u.context===null?u.context=d:u.pendingContext=d,u=gs(I,G),u.payload={element:o},x=x===void 0?null:x,x!==null&&(u.callback=x),o=oa(E,u,G),o!==null&&(_i(o,E,G,I),Jc(o,E,G)),G}function Th(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Dg(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<u?d:u}}function dp(o,u){Dg(o,u),(o=o.alternate)&&Dg(o,u)}function TT(){return null}var Ng=typeof reportError=="function"?reportError:function(o){console.error(o)};function pp(o){this._internalRoot=o}Sh.prototype.render=pp.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(r(409));wh(o,u,null,null)},Sh.prototype.unmount=pp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;Ya(function(){wh(null,o,null,null)}),u[ps]=null}};function Sh(o){this._internalRoot=o}Sh.prototype.unstable_scheduleHydration=function(o){if(o){var u=Pc();o={blockedOn:null,target:o,priority:u};for(var d=0;d<ki.length&&u!==0&&u<ki[d].priority;d++);ki.splice(d,0,o),d===0&&Oc(o)}};function vp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Eh(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Fg(){}function ST(o,u,d,x,E){if(E){if(typeof x=="function"){var I=x;x=function(){var ge=Th(G);I.call(ge)}}var G=kg(u,x,o,0,null,!1,!1,"",Fg);return o._reactRootContainer=G,o[ps]=G.current,nu(o.nodeType===8?o.parentNode:o),Ya(),G}for(;E=o.lastChild;)o.removeChild(E);if(typeof x=="function"){var ee=x;x=function(){var ge=Th(ie);ee.call(ge)}}var ie=fp(o,0,!1,null,null,!1,!1,"",Fg);return o._reactRootContainer=ie,o[ps]=ie.current,nu(o.nodeType===8?o.parentNode:o),Ya(function(){wh(u,ie,d,x)}),ie}function Ch(o,u,d,x,E){var I=d._reactRootContainer;if(I){var G=I;if(typeof E=="function"){var ee=E;E=function(){var ie=Th(G);ee.call(ie)}}wh(u,G,o,E)}else G=ST(d,u,o,E,x);return Th(G)}Ri=function(o){switch(o.tag){case 3:var u=o.stateNode;if(u.current.memoizedState.isDehydrated){var d=ka(u.pendingLanes);d!==0&&(ss(u,d|1),Sn(u,Qt()),(kt&6)===0&&(fl=Qt()+500,sa()))}break;case 13:Ya(function(){var x=ys(o,1);if(x!==null){var E=ln();_i(x,o,1,E)}}),dp(o,1)}},oi=function(o){if(o.tag===13){var u=ys(o,134217728);if(u!==null){var d=ln();_i(u,o,134217728,d)}dp(o,134217728)}},jo=function(o){if(o.tag===13){var u=ha(o),d=ys(o,u);if(d!==null){var x=ln();_i(d,o,u,x)}dp(o,u)}},Pc=function(){return Ft},$s=function(o,u){var d=Ft;try{return Ft=o,u()}finally{Ft=d}},Nt=function(o,u,d){switch(u){case"input":if(nt(o,d),u=d.name,d.type==="radio"&&u!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<d.length;u++){var x=d[u];if(x!==o&&x.form===o.form){var E=zc(x);if(!E)throw Error(r(90));Ge(x),nt(x,E)}}}break;case"textarea":Nr(o,d);break;case"select":u=d.value,u!=null&&nr(o,!!d.multiple,u,!1)}},dr=ap,Pn=Ya;var ET={usingClientEntryPoint:!1,Events:[au,Jo,zc,Ar,Kt,ap]},xu={findFiberByHostInstance:Ga,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CT={bundleType:xu.bundleType,version:xu.version,rendererPackageName:xu.rendererPackageName,rendererConfig:xu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=On(o),o===null?null:o.stateNode},findFiberByHostInstance:xu.findFiberByHostInstance||TT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{No=Ah.inject(CT),Rn=Ah}catch{}}return En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ET,En.createPortal=function(o,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vp(u))throw Error(r(200));return wT(o,u,null,d)},En.createRoot=function(o,u){if(!vp(o))throw Error(r(299));var d=!1,x="",E=Ng;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onRecoverableError!==void 0&&(E=u.onRecoverableError)),u=fp(o,1,!1,null,null,d,!1,x,E),o[ps]=u.current,nu(o.nodeType===8?o.parentNode:o),new pp(u)},En.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=On(u),o=o===null?null:o.stateNode,o},En.flushSync=function(o){return Ya(o)},En.hydrate=function(o,u,d){if(!Eh(u))throw Error(r(200));return Ch(null,o,u,!0,d)},En.hydrateRoot=function(o,u,d){if(!vp(o))throw Error(r(405));var x=d!=null&&d.hydratedSources||null,E=!1,I="",G=Ng;if(d!=null&&(d.unstable_strictMode===!0&&(E=!0),d.identifierPrefix!==void 0&&(I=d.identifierPrefix),d.onRecoverableError!==void 0&&(G=d.onRecoverableError)),u=kg(u,null,o,1,d??null,E,!1,I,G),o[ps]=u.current,nu(o),x)for(o=0;o<x.length;o++)d=x[o],E=d._getVersion,E=E(d._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[d,E]:u.mutableSourceEagerHydrationData.push(d,E);return new Sh(u)},En.render=function(o,u,d){if(!Eh(u))throw Error(r(200));return Ch(null,o,u,!1,d)},En.unmountComponentAtNode=function(o){if(!Eh(o))throw Error(r(40));return o._reactRootContainer?(Ya(function(){Ch(null,null,o,!1,function(){o._reactRootContainer=null,o[ps]=null})}),!0):!1},En.unstable_batchedUpdates=ap,En.unstable_renderSubtreeIntoContainer=function(o,u,d,x){if(!Eh(d))throw Error(r(200));if(o==null||o._reactInternals===void 0)throw Error(r(38));return Ch(o,u,d,!1,x)},En.version="18.3.1-next-f1338f8080-20240426",En}var Xg;function LT(){if(Xg)return yp.exports;Xg=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),yp.exports=FT(),yp.exports}var Vg;function BT(){if(Vg)return Ph;Vg=1;var i=LT();return Ph.createRoot=i.createRoot,Ph.hydrateRoot=i.hydrateRoot,Ph}var jT=BT();const $t=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Sr=Object.keys,nn=Array.isArray;function fn(i,e){return typeof e!="object"||Sr(e).forEach(function(r){i[r]=e[r]}),i}typeof Promise>"u"||$t.Promise||($t.Promise=Promise);const $u=Object.getPrototypeOf,UT={}.hasOwnProperty;function Hn(i,e){return UT.call(i,e)}function kl(i,e){typeof e=="function"&&(e=e($u(i))),(typeof Reflect>"u"?Sr:Reflect.ownKeys)(e).forEach(r=>{ks(i,r,e[r])})}const g1=Object.defineProperty;function ks(i,e,r,n){g1(i,e,fn(r&&Hn(r,"get")&&typeof r.get=="function"?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function Al(i){return{from:function(e){return i.prototype=Object.create(e.prototype),ks(i.prototype,"constructor",i),{extend:kl.bind(null,i.prototype)}}}}const GT=Object.getOwnPropertyDescriptor;function fm(i,e){let r;return GT(i,e)||(r=$u(i))&&fm(r,e)}const HT=[].slice;function bf(i,e,r){return HT.call(i,e,r)}function x1(i,e){return e(i)}function Nu(i){if(!i)throw new Error("Assertion Failed")}function b1(i){$t.setImmediate?setImmediate(i):setTimeout(i,0)}function w1(i,e){return i.reduce((r,n,s)=>{var a=e(n,s);return a&&(r[a[0]]=a[1]),r},{})}function Ds(i,e){if(typeof e=="string"&&Hn(i,e))return i[e];if(!e)return i;if(typeof e!="string"){for(var r=[],n=0,s=e.length;n<s;++n){var a=Ds(i,e[n]);r.push(a)}return r}var l=e.indexOf(".");if(l!==-1){var c=i[e.substr(0,l)];return c==null?void 0:Ds(c,e.substr(l+1))}}function Ti(i,e,r){if(i&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(i)))if(typeof e!="string"&&"length"in e){Nu(typeof r!="string"&&"length"in r);for(var n=0,s=e.length;n<s;++n)Ti(i,e[n],r[n])}else{var a=e.indexOf(".");if(a!==-1){var l=e.substr(0,a),c=e.substr(a+1);if(c==="")r===void 0?nn(i)&&!isNaN(parseInt(l))?i.splice(l,1):delete i[l]:i[l]=r;else{var h=i[l];h&&Hn(i,l)||(h=i[l]={}),Ti(h,c,r)}}else r===void 0?nn(i)&&!isNaN(parseInt(e))?i.splice(e,1):delete i[e]:i[e]=r}}function T1(i){var e={};for(var r in i)Hn(i,r)&&(e[r]=i[r]);return e}const zT=[].concat;function S1(i){return zT.apply([],i)}const E1="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(S1([8,16,32,64].map(i=>["Int","Uint","Float"].map(e=>e+i+"Array")))).filter(i=>$t[i]),XT=E1.map(i=>$t[i]);w1(E1,i=>[i,!0]);let ma=null;function uc(i){ma=typeof WeakMap<"u"&&new WeakMap;const e=n_(i);return ma=null,e}function n_(i){if(!i||typeof i!="object")return i;let e=ma&&ma.get(i);if(e)return e;if(nn(i)){e=[],ma&&ma.set(i,e);for(var r=0,n=i.length;r<n;++r)e.push(n_(i[r]))}else if(XT.indexOf(i.constructor)>=0)e=i;else{const a=$u(i);for(var s in e=a===Object.prototype?{}:Object.create(a),ma&&ma.set(i,e),i)Hn(i,s)&&(e[s]=n_(i[s]))}return e}const{toString:VT}={};function i_(i){return VT.call(i).slice(8,-1)}const s_=typeof Symbol<"u"?Symbol.iterator:"@@iterator",qT=typeof s_=="symbol"?function(i){var e;return i!=null&&(e=i[s_])&&e.apply(i)}:function(){return null},bl={};function Ps(i){var e,r,n,s;if(arguments.length===1){if(nn(i))return i.slice();if(this===bl&&typeof i=="string")return[i];if(s=qT(i)){for(r=[];!(n=s.next()).done;)r.push(n.value);return r}if(i==null)return[i];if(typeof(e=i.length)=="number"){for(r=new Array(e);e--;)r[e]=i[e];return r}return[i]}for(e=arguments.length,r=new Array(e);e--;)r[e]=arguments[e];return r}const dm=typeof Symbol<"u"?i=>i[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Ji=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function C1(i,e){Ji=i,A1=e}var A1=()=>!0;const WT=!new Error("").stack;function Ao(){if(WT)try{throw Ao.arguments,new Error}catch(i){return i}return new Error}function a_(i,e){var r=i.stack;return r?(e=e||0,r.indexOf(i.name)===0&&(e+=(i.name+i.message).split(`
`).length),r.split(`
`).slice(e).filter(A1).map(n=>`
`+n).join("")):""}var P1=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],pm=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(P1),$T={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Pl(i,e){this._e=Ao(),this.name=i,this.message=e}function I1(i,e){return i+". Errors: "+Object.keys(e).map(r=>e[r].toString()).filter((r,n,s)=>s.indexOf(r)===n).join(`
`)}function wf(i,e,r,n){this._e=Ao(),this.failures=e,this.failedKeys=n,this.successCount=r,this.message=I1(i,e)}function ju(i,e){this._e=Ao(),this.name="BulkError",this.failures=Object.keys(e).map(r=>e[r]),this.failuresByPos=e,this.message=I1(i,e)}Al(Pl).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+a_(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Al(wf).from(Pl),Al(ju).from(Pl);var vm=pm.reduce((i,e)=>(i[e]=e+"Error",i),{});const YT=Pl;var pt=pm.reduce((i,e)=>{var r=e+"Error";function n(s,a){this._e=Ao(),this.name=r,s?typeof s=="string"?(this.message=`${s}${a?`
 `+a:""}`,this.inner=a||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=$T[e]||r,this.inner=null)}return Al(n).from(YT),i[e]=n,i},{});pt.Syntax=SyntaxError,pt.Type=TypeError,pt.Range=RangeError;var qg=P1.reduce((i,e)=>(i[e+"Error"]=pt[e],i),{}),lf=pm.reduce((i,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(i[e+"Error"]=pt[e]),i),{});function zt(){}function Yu(i){return i}function KT(i,e){return i==null||i===Yu?e:function(r){return e(i(r))}}function xo(i,e){return function(){i.apply(this,arguments),e.apply(this,arguments)}}function QT(i,e){return i===zt?e:function(){var r=i.apply(this,arguments);r!==void 0&&(arguments[0]=r);var n=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?xo(n,this.onsuccess):n),s&&(this.onerror=this.onerror?xo(s,this.onerror):s),a!==void 0?a:r}}function ZT(i,e){return i===zt?e:function(){i.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?xo(r,this.onsuccess):r),n&&(this.onerror=this.onerror?xo(n,this.onerror):n)}}function JT(i,e){return i===zt?e:function(r){var n=i.apply(this,arguments);fn(r,n);var s=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var l=e.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?xo(s,this.onsuccess):s),a&&(this.onerror=this.onerror?xo(a,this.onerror):a),n===void 0?l===void 0?void 0:l:fn(n,l)}}function eS(i,e){return i===zt?e:function(){return e.apply(this,arguments)!==!1&&i.apply(this,arguments)}}function _m(i,e){return i===zt?e:function(){var r=i.apply(this,arguments);if(r&&typeof r.then=="function"){for(var n=this,s=arguments.length,a=new Array(s);s--;)a[s]=arguments[s];return r.then(function(){return e.apply(n,a)})}return e.apply(this,arguments)}}lf.ModifyError=wf,lf.DexieError=Pl,lf.BulkError=ju;var Ku={};const O1=100,[o_,Tf,l_]=typeof Promise>"u"?[]:(()=>{let i=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[i,$u(i),i];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,$u(e),i]})(),R1=Tf&&Tf.then,uf=o_&&o_.constructor,mm=!!l_;var u_=!1,tS=l_?()=>{l_.then(Ih)}:$t.setImmediate?setImmediate.bind(null,Ih):$t.MutationObserver?()=>{var i=document.createElement("div");new MutationObserver(()=>{Ih(),i=null}).observe(i,{attributes:!0}),i.setAttribute("i","1")}:()=>{setTimeout(Ih,0)},Uu=function(i,e){Fu.push([i,e]),Sf&&(tS(),Sf=!1)},c_=!0,Sf=!0,vo=[],cf=[],h_=null,f_=Yu,Il={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Yg,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(i=>{try{Yg(i[0],i[1])}catch{}})}},ot=Il,Fu=[],_o=0,hf=[];function We(i){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=zt,this._lib=!1;var e=this._PSD=ot;if(Ji&&(this._stackHolder=Ao(),this._prev=null,this._numPrev=0),typeof i!="function"){if(i!==Ku)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&p_(this,this._value))}this._state=null,this._value=null,++e.ref,k1(this,i)}const d_={get:function(){var i=ot,e=Ef;function r(n,s){var a=!i.global&&(i!==ot||e!==Ef);const l=a&&!Ns();var c=new We((h,_)=>{ym(this,new M1(Cf(n,i,a,l),Cf(s,i,a,l),h,_,i))});return Ji&&F1(c,this),c}return r.prototype=Ku,r},set:function(i){ks(this,"then",i&&i.prototype===Ku?d_:{get:function(){return i},set:d_.set})}};function M1(i,e,r,n,s){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof e=="function"?e:null,this.resolve=r,this.reject=n,this.psd=s}function k1(i,e){try{e(r=>{if(i._state===null){if(r===i)throw new TypeError("A promise cannot be resolved with itself.");var n=i._lib&&cc();r&&typeof r.then=="function"?k1(i,(s,a)=>{r instanceof We?r._then(s,a):r.then(s,a)}):(i._state=!0,i._value=r,D1(i)),n&&hc()}},p_.bind(null,i))}catch(r){p_(i,r)}}function p_(i,e){if(cf.push(e),i._state===null){var r=i._lib&&cc();e=f_(e),i._state=!1,i._value=e,Ji&&e!==null&&typeof e=="object"&&!e._promise&&function(n,s,a){try{n.apply(null,a)}catch{}}(()=>{var n=fm(e,"stack");e._promise=i,ks(e,"stack",{get:()=>u_?n&&(n.get?n.get.apply(e):n.value):i.stack})}),function(n){vo.some(s=>s._value===n._value)||vo.push(n)}(i),D1(i),r&&hc()}}function D1(i){var e=i._listeners;i._listeners=[];for(var r=0,n=e.length;r<n;++r)ym(i,e[r]);var s=i._PSD;--s.ref||s.finalize(),_o===0&&(++_o,Uu(()=>{--_o==0&&gm()},[]))}function ym(i,e){if(i._state!==null){var r=i._state?e.onFulfilled:e.onRejected;if(r===null)return(i._state?e.resolve:e.reject)(i._value);++e.psd.ref,++_o,Uu(rS,[r,i,e])}else i._listeners.push(e)}function rS(i,e,r){try{h_=e;var n,s=e._value;e._state?n=i(s):(cf.length&&(cf=[]),n=i(s),cf.indexOf(s)===-1&&function(a){for(var l=vo.length;l;)if(vo[--l]._value===a._value)return void vo.splice(l,1)}(e)),r.resolve(n)}catch(a){r.reject(a)}finally{h_=null,--_o==0&&gm(),--r.psd.ref||r.psd.finalize()}}function N1(i,e,r){if(e.length===r)return e;var n="";if(i._state===!1){var s,a,l=i._value;l!=null?(s=l.name||"Error",a=l.message||l,n=a_(l,0)):(s=l,a=""),e.push(s+(a?": "+a:"")+n)}return Ji&&((n=a_(i._stackHolder,2))&&e.indexOf(n)===-1&&e.push(n),i._prev&&N1(i._prev,e,r)),e}function F1(i,e){var r=e?e._numPrev+1:0;r<100&&(i._prev=e,i._numPrev=r)}function Ih(){cc()&&hc()}function cc(){var i=c_;return c_=!1,Sf=!1,i}function hc(){var i,e,r;do for(;Fu.length>0;)for(i=Fu,Fu=[],r=i.length,e=0;e<r;++e){var n=i[e];n[0].apply(null,n[1])}while(Fu.length>0);c_=!0,Sf=!0}function gm(){var i=vo;vo=[],i.forEach(n=>{n._PSD.onunhandled.call(null,n._value,n)});for(var e=hf.slice(0),r=e.length;r;)e[--r]()}function Oh(i){return new We(Ku,!1,i)}function er(i,e){var r=ot;return function(){var n=cc(),s=ot;try{return Ea(r,!0),i.apply(this,arguments)}catch(a){e&&e(a)}finally{Ea(s,!1),n&&hc()}}}kl(We.prototype,{then:d_,_then:function(i,e){ym(this,new M1(null,null,i,e,ot))},catch:function(i){if(arguments.length===1)return this.then(null,i);var e=arguments[0],r=arguments[1];return typeof e=="function"?this.then(null,n=>n instanceof e?r(n):Oh(n)):this.then(null,n=>n&&n.name===e?r(n):Oh(n))},finally:function(i){return this.then(e=>(i(),e),e=>(i(),Oh(e)))},stack:{get:function(){if(this._stack)return this._stack;try{u_=!0;var i=N1(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=i),i}finally{u_=!1}}},timeout:function(i,e){return i<1/0?new We((r,n)=>{var s=setTimeout(()=>n(new pt.Timeout(e)),i);this.then(r,n).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&ks(We.prototype,Symbol.toStringTag,"Dexie.Promise"),Il.env=L1(),kl(We,{all:function(){var i=Ps.apply(null,arguments).map(Rh);return new We(function(e,r){i.length===0&&e([]);var n=i.length;i.forEach((s,a)=>We.resolve(s).then(l=>{i[a]=l,--n||e(i)},r))})},resolve:i=>{if(i instanceof We)return i;if(i&&typeof i.then=="function")return new We((r,n)=>{i.then(r,n)});var e=new We(Ku,!0,i);return F1(e,h_),e},reject:Oh,race:function(){var i=Ps.apply(null,arguments).map(Rh);return new We((e,r)=>{i.map(n=>We.resolve(n).then(e,r))})},PSD:{get:()=>ot,set:i=>ot=i},totalEchoes:{get:()=>Ef},newPSD:Sa,usePSD:Bl,scheduler:{get:()=>Uu,set:i=>{Uu=i}},rejectionMapper:{get:()=>f_,set:i=>{f_=i}},follow:(i,e)=>new We((r,n)=>Sa((s,a)=>{var l=ot;l.unhandleds=[],l.onunhandled=a,l.finalize=xo(function(){(function(c){function h(){c(),hf.splice(hf.indexOf(h),1)}hf.push(h),++_o,Uu(()=>{--_o==0&&gm()},[])})(()=>{this.unhandleds.length===0?s():a(this.unhandleds[0])})},l.finalize),i()},e,r,n))}),uf&&(uf.allSettled&&ks(We,"allSettled",function(){const i=Ps.apply(null,arguments).map(Rh);return new We(e=>{i.length===0&&e([]);let r=i.length;const n=new Array(r);i.forEach((s,a)=>We.resolve(s).then(l=>n[a]={status:"fulfilled",value:l},l=>n[a]={status:"rejected",reason:l}).then(()=>--r||e(n)))})}),uf.any&&typeof AggregateError<"u"&&ks(We,"any",function(){const i=Ps.apply(null,arguments).map(Rh);return new We((e,r)=>{i.length===0&&r(new AggregateError([]));let n=i.length;const s=new Array(n);i.forEach((a,l)=>We.resolve(a).then(c=>e(c),c=>{s[l]=c,--n||r(new AggregateError(s))}))})}));const rn={awaits:0,echoes:0,id:0};var nS=0,ff=[],bp=0,Ef=0,iS=0;function Sa(i,e,r,n){var s=ot,a=Object.create(s);a.parent=s,a.ref=0,a.global=!1,a.id=++iS;var l=Il.env;a.env=mm?{Promise:We,PromiseProp:{value:We,configurable:!0,writable:!0},all:We.all,race:We.race,allSettled:We.allSettled,any:We.any,resolve:We.resolve,reject:We.reject,nthen:Wg(l.nthen,a),gthen:Wg(l.gthen,a)}:{},e&&fn(a,e),++s.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=Bl(a,i,r,n);return a.ref===0&&a.finalize(),c}function Ll(){return rn.id||(rn.id=++nS),++rn.awaits,rn.echoes+=O1,rn.id}function Ns(){return!!rn.awaits&&(--rn.awaits==0&&(rn.id=0),rn.echoes=rn.awaits*O1,!0)}function Rh(i){return rn.echoes&&i&&i.constructor===uf?(Ll(),i.then(e=>(Ns(),e),e=>(Ns(),kr(e)))):i}function sS(i){++Ef,rn.echoes&&--rn.echoes!=0||(rn.echoes=rn.id=0),ff.push(ot),Ea(i,!0)}function aS(){var i=ff[ff.length-1];ff.pop(),Ea(i,!1)}function Ea(i,e){var r=ot;if((e?!rn.echoes||bp++&&i===ot:!bp||--bp&&i===ot)||B1(e?sS.bind(null,i):aS),i!==ot&&(ot=i,r===Il&&(Il.env=L1()),mm)){var n=Il.env.Promise,s=i.env;Tf.then=s.nthen,n.prototype.then=s.gthen,(r.global||i.global)&&(Object.defineProperty($t,"Promise",s.PromiseProp),n.all=s.all,n.race=s.race,n.resolve=s.resolve,n.reject=s.reject,s.allSettled&&(n.allSettled=s.allSettled),s.any&&(n.any=s.any))}}function L1(){var i=$t.Promise;return mm?{Promise:i,PromiseProp:Object.getOwnPropertyDescriptor($t,"Promise"),all:i.all,race:i.race,allSettled:i.allSettled,any:i.any,resolve:i.resolve,reject:i.reject,nthen:Tf.then,gthen:i.prototype.then}:{}}function Bl(i,e,r,n,s){var a=ot;try{return Ea(i,!0),e(r,n,s)}finally{Ea(a,!1)}}function B1(i){R1.call(o_,i)}function Cf(i,e,r,n){return typeof i!="function"?i:function(){var s=ot;r&&Ll(),Ea(e,!0);try{return i.apply(this,arguments)}finally{Ea(s,!1),n&&B1(Ns)}}}function Wg(i,e){return function(r,n){return i.call(this,Cf(r,e),Cf(n,e))}}(""+R1).indexOf("[native code]")===-1&&(Ll=Ns=zt);const $g="unhandledrejection";function Yg(i,e){var r;try{r=e.onuncatched(i)}catch{}if(r!==!1)try{var n,s={promise:e,reason:i};if($t.document&&document.createEvent?((n=document.createEvent("Event")).initEvent($g,!0,!0),fn(n,s)):$t.CustomEvent&&fn(n=new CustomEvent($g,{detail:s}),s),n&&$t.dispatchEvent&&(dispatchEvent(n),!$t.PromiseRejectionEvent&&$t.onunhandledrejection))try{$t.onunhandledrejection(n)}catch{}Ji&&n&&!n.defaultPrevented&&console.warn(`Unhandled rejection: ${i.stack||i}`)}catch{}}var kr=We.reject;function v_(i,e,r,n){if(i.idbdb&&(i._state.openComplete||ot.letThrough||i._vip)){var s=i._createTransaction(e,r,i._dbSchema);try{s.create(),i._state.PR1398_maxLoop=3}catch(a){return a.name===vm.InvalidState&&i.isOpen()&&--i._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),i._close(),i.open().then(()=>v_(i,e,r,n))):kr(a)}return s._promise(e,(a,l)=>Sa(()=>(ot.trans=s,n(a,l,s)))).then(a=>s._completion.then(()=>a))}if(i._state.openComplete)return kr(new pt.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._options.autoOpen)return kr(new pt.DatabaseClosed);i.open().catch(zt)}return i._state.dbReadyPromise.then(()=>v_(i,e,r,n))}const Kg="3.2.7",po="￿",__=-1/0,ws="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",j1="String expected.",Gu=[],Xf=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),oS=Xf,lS=Xf,U1=i=>!/(dexie\.js|dexie\.min\.js)/.test(i),Vf="__dbnames",wp="readonly",Tp="readwrite";function bo(i,e){return i?e?function(){return i.apply(this,arguments)&&e.apply(this,arguments)}:i:e}const G1={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Mh(i){return typeof i!="string"||/\./.test(i)?e=>e:e=>(e[i]===void 0&&i in e&&delete(e=uc(e))[i],e)}class uS{_trans(e,r,n){const s=this._tx||ot.trans,a=this.name;function l(h,_,m){if(!m.schema[a])throw new pt.NotFound("Table "+a+" not part of transaction");return r(m.idbtrans,m)}const c=cc();try{return s&&s.db===this.db?s===ot.trans?s._promise(e,l,n):Sa(()=>s._promise(e,l,n),{trans:s,transless:ot.transless||ot}):v_(this.db,e,[this.name],l)}finally{c&&hc()}}get(e,r){return e&&e.constructor===Object?this.where(e).first(r):this._trans("readonly",n=>this.core.get({trans:n,key:e}).then(s=>this.hook.reading.fire(s))).then(r)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(nn(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const r=Sr(e);if(r.length===1)return this.where(r[0]).equals(e[r[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter(_=>{if(_.compound&&r.every(m=>_.keyPath.indexOf(m)>=0)){for(let m=0;m<r.length;++m)if(r.indexOf(_.keyPath[m])===-1)return!1;return!0}return!1}).sort((_,m)=>_.keyPath.length-m.keyPath.length)[0];if(n&&this.db._maxKey!==po){const _=n.keyPath.slice(0,r.length);return this.where(_).equals(_.map(m=>e[m]))}!n&&Ji&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${r.join("+")}]`);const{idxByName:s}=this.schema,a=this.db._deps.indexedDB;function l(_,m){try{return a.cmp(_,m)===0}catch{return!1}}const[c,h]=r.reduce(([_,m],f)=>{const p=s[f],y=e[f];return[_||p,_||!p?bo(m,p&&p.multi?b=>{const T=Ds(b,f);return nn(T)&&T.some(S=>l(y,S))}:b=>l(y,Ds(b,f))):m]},[null,null]);return c?this.where(c.name).equals(e[c.keyPath]).filter(h):n?this.filter(h):this.where(r).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,nn(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const r=n=>{if(!n)return n;const s=Object.create(e.prototype);for(var a in n)if(Hn(n,a))try{s[a]=n[a]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),e}defineClass(){return this.mapToClass(function(e){fn(this,e)})}add(e,r){const{auto:n,keyPath:s}=this.schema.primKey;let a=e;return s&&n&&(a=Mh(s)(e)),this._trans("readwrite",l=>this.core.mutate({trans:l,type:"add",keys:r!=null?[r]:null,values:[a]})).then(l=>l.numFailures?We.reject(l.failures[0]):l.lastResult).then(l=>{if(s)try{Ti(e,s,l)}catch{}return l})}update(e,r){if(typeof e!="object"||nn(e))return this.where(":id").equals(e).modify(r);{const n=Ds(e,this.schema.primKey.keyPath);if(n===void 0)return kr(new pt.InvalidArgument("Given object does not contain its primary key"));try{typeof r!="function"?Sr(r).forEach(s=>{Ti(e,s,r[s])}):r(e,{value:e,primKey:n})}catch{}return this.where(":id").equals(n).modify(r)}}put(e,r){const{auto:n,keyPath:s}=this.schema.primKey;let a=e;return s&&n&&(a=Mh(s)(e)),this._trans("readwrite",l=>this.core.mutate({trans:l,type:"put",values:[a],keys:r!=null?[r]:null})).then(l=>l.numFailures?We.reject(l.failures[0]):l.lastResult).then(l=>{if(s)try{Ti(e,s,l)}catch{}return l})}delete(e){return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:[e]})).then(r=>r.numFailures?We.reject(r.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:G1})).then(e=>e.numFailures?We.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",r=>this.core.getMany({keys:e,trans:r}).then(n=>n.map(s=>this.hook.reading.fire(s))))}bulkAdd(e,r,n){const s=Array.isArray(r)?r:void 0,a=(n=n||(s?void 0:r))?n.allKeys:void 0;return this._trans("readwrite",l=>{const{auto:c,keyPath:h}=this.schema.primKey;if(h&&s)throw new pt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new pt.InvalidArgument("Arguments objects and keys must have the same length");const _=e.length;let m=h&&c?e.map(Mh(h)):e;return this.core.mutate({trans:l,type:"add",keys:s,values:m,wantResults:a}).then(({numFailures:f,results:p,lastResult:y,failures:b})=>{if(f===0)return a?p:y;throw new ju(`${this.name}.bulkAdd(): ${f} of ${_} operations failed`,b)})})}bulkPut(e,r,n){const s=Array.isArray(r)?r:void 0,a=(n=n||(s?void 0:r))?n.allKeys:void 0;return this._trans("readwrite",l=>{const{auto:c,keyPath:h}=this.schema.primKey;if(h&&s)throw new pt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new pt.InvalidArgument("Arguments objects and keys must have the same length");const _=e.length;let m=h&&c?e.map(Mh(h)):e;return this.core.mutate({trans:l,type:"put",keys:s,values:m,wantResults:a}).then(({numFailures:f,results:p,lastResult:y,failures:b})=>{if(f===0)return a?p:y;throw new ju(`${this.name}.bulkPut(): ${f} of ${_} operations failed`,b)})})}bulkDelete(e){const r=e.length;return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:e})).then(({numFailures:n,lastResult:s,failures:a})=>{if(n===0)return s;throw new ju(`${this.name}.bulkDelete(): ${n} of ${r} operations failed`,a)})}}function Hu(i){var e={},r=function(l,c){if(c){for(var h=arguments.length,_=new Array(h-1);--h;)_[h-1]=arguments[h];return e[l].subscribe.apply(null,_),i}if(typeof l=="string")return e[l]};r.addEventType=a;for(var n=1,s=arguments.length;n<s;++n)a(arguments[n]);return r;function a(l,c,h){if(typeof l!="object"){var _;c||(c=eS),h||(h=zt);var m={subscribers:[],fire:h,subscribe:function(f){m.subscribers.indexOf(f)===-1&&(m.subscribers.push(f),m.fire=c(m.fire,f))},unsubscribe:function(f){m.subscribers=m.subscribers.filter(function(p){return p!==f}),m.fire=m.subscribers.reduce(c,h)}};return e[l]=r[l]=m,m}Sr(_=l).forEach(function(f){var p=_[f];if(nn(p))a(f,_[f][0],_[f][1]);else{if(p!=="asap")throw new pt.InvalidArgument("Invalid event config");var y=a(f,Yu,function(){for(var b=arguments.length,T=new Array(b);b--;)T[b]=arguments[b];y.subscribers.forEach(function(S){b1(function(){S.apply(null,T)})})})}})}}function wu(i,e){return Al(e).from({prototype:i}),e}function pl(i,e){return!(i.filter||i.algorithm||i.or)&&(e?i.justLimit:!i.replayFilter)}function Sp(i,e){i.filter=bo(i.filter,e)}function Ep(i,e,r){var n=i.replayFilter;i.replayFilter=n?()=>bo(n(),e()):e,i.justLimit=r&&!n}function df(i,e){if(i.isPrimKey)return e.primaryKey;const r=e.getIndexByKeyPath(i.index);if(!r)throw new pt.Schema("KeyPath "+i.index+" on object store "+e.name+" is not indexed");return r}function Qg(i,e,r){const n=df(i,e.schema);return e.openCursor({trans:r,values:!i.keysOnly,reverse:i.dir==="prev",unique:!!i.unique,query:{index:n,range:i.range}})}function kh(i,e,r,n){const s=i.replayFilter?bo(i.filter,i.replayFilter()):i.filter;if(i.or){const a={},l=(c,h,_)=>{if(!s||s(h,_,p=>h.stop(p),p=>h.fail(p))){var m=h.primaryKey,f=""+m;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(m)),Hn(a,f)||(a[f]=!0,e(c,h,_))}};return Promise.all([i.or._iterate(l,r),Zg(Qg(i,n,r),i.algorithm,l,!i.keysOnly&&i.valueMapper)])}return Zg(Qg(i,n,r),bo(i.algorithm,s),e,!i.keysOnly&&i.valueMapper)}function Zg(i,e,r,n){var s=er(n?(a,l,c)=>r(n(a),l,c):r);return i.then(a=>{if(a)return a.start(()=>{var l=()=>a.continue();e&&!e(a,c=>l=c,c=>{a.stop(c),l=zt},c=>{a.fail(c),l=zt})||s(a.value,a,c=>l=c),l()})})}function un(i,e){try{const r=Jg(i),n=Jg(e);if(r!==n)return r==="Array"?1:n==="Array"?-1:r==="binary"?1:n==="binary"?-1:r==="string"?1:n==="string"?-1:r==="Date"?1:n!=="Date"?NaN:-1;switch(r){case"number":case"Date":case"string":return i>e?1:i<e?-1:0;case"binary":return function(s,a){const l=s.length,c=a.length,h=l<c?l:c;for(let _=0;_<h;++_)if(s[_]!==a[_])return s[_]<a[_]?-1:1;return l===c?0:l<c?-1:1}(e0(i),e0(e));case"Array":return function(s,a){const l=s.length,c=a.length,h=l<c?l:c;for(let _=0;_<h;++_){const m=un(s[_],a[_]);if(m!==0)return m}return l===c?0:l<c?-1:1}(i,e)}}catch{}return NaN}function Jg(i){const e=typeof i;if(e!=="object")return e;if(ArrayBuffer.isView(i))return"binary";const r=i_(i);return r==="ArrayBuffer"?"binary":r}function e0(i){return i instanceof Uint8Array?i:ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i)}class cS{_read(e,r){var n=this._ctx;return n.error?n.table._trans(null,kr.bind(null,n.error)):n.table._trans("readonly",e).then(r)}_write(e){var r=this._ctx;return r.error?r.table._trans(null,kr.bind(null,r.error)):r.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var r=this._ctx;r.algorithm=bo(r.algorithm,e)}_iterate(e,r){return kh(this._ctx,e,r,this._ctx.table.core)}clone(e){var r=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&fn(n,e),r._ctx=n,r}raw(){return this._ctx.valueMapper=null,this}each(e){var r=this._ctx;return this._read(n=>kh(r,e,n,r.table.core))}count(e){return this._read(r=>{const n=this._ctx,s=n.table.core;if(pl(n,!0))return s.count({trans:r,query:{index:df(n,s.schema),range:n.range}}).then(l=>Math.min(l,n.limit));var a=0;return kh(n,()=>(++a,!1),r,s).then(()=>a)}).then(e)}sortBy(e,r){const n=e.split(".").reverse(),s=n[0],a=n.length-1;function l(_,m){return m?l(_[n[m]],m-1):_[s]}var c=this._ctx.dir==="next"?1:-1;function h(_,m){var f=l(_,a),p=l(m,a);return f<p?-c:f>p?c:0}return this.toArray(function(_){return _.sort(h)}).then(r)}toArray(e){return this._read(r=>{var n=this._ctx;if(n.dir==="next"&&pl(n,!0)&&n.limit>0){const{valueMapper:s}=n,a=df(n,n.table.core.schema);return n.table.core.query({trans:r,limit:n.limit,values:!0,query:{index:a,range:n.range}}).then(({result:l})=>s?l.map(s):l)}{const s=[];return kh(n,a=>s.push(a),r,n.table.core).then(()=>s)}},e)}offset(e){var r=this._ctx;return e<=0||(r.offset+=e,pl(r)?Ep(r,()=>{var n=e;return(s,a)=>n===0||(n===1?(--n,!1):(a(()=>{s.advance(n),n=0}),!1))}):Ep(r,()=>{var n=e;return()=>--n<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Ep(this._ctx,()=>{var r=e;return function(n,s,a){return--r<=0&&s(a),r>=0}},!0),this}until(e,r){return Sp(this._ctx,function(n,s,a){return!e(n.value)||(s(a),r)}),this}first(e){return this.limit(1).toArray(function(r){return r[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var r,n;return Sp(this._ctx,function(s){return e(s.value)}),r=this._ctx,n=e,r.isMatch=bo(r.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(n,s){e(s.key,s)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(n,s){e(s.primaryKey,s)})}keys(e){var r=this._ctx;r.keysOnly=!r.isMatch;var n=[];return this.each(function(s,a){n.push(a.key)}).then(function(){return n}).then(e)}primaryKeys(e){var r=this._ctx;if(r.dir==="next"&&pl(r,!0)&&r.limit>0)return this._read(s=>{var a=df(r,r.table.core.schema);return r.table.core.query({trans:s,values:!1,limit:r.limit,query:{index:a,range:r.range}})}).then(({result:s})=>s).then(e);r.keysOnly=!r.isMatch;var n=[];return this.each(function(s,a){n.push(a.primaryKey)}).then(function(){return n}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(r){return r[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,r=e.index&&e.table.schema.idxByName[e.index];if(!r||!r.multi)return this;var n={};return Sp(this._ctx,function(s){var a=s.primaryKey.toString(),l=Hn(n,a);return n[a]=!0,!l}),this}modify(e){var r=this._ctx;return this._write(n=>{var s;if(typeof e=="function")s=e;else{var a=Sr(e),l=a.length;s=function(T){for(var S=!1,A=0;A<l;++A){var R=a[A],L=e[R];Ds(T,R)!==L&&(Ti(T,R,L),S=!0)}return S}}const c=r.table.core,{outbound:h,extractKey:_}=c.schema.primaryKey,m=this.db._options.modifyChunkSize||200,f=[];let p=0;const y=[],b=(T,S)=>{const{failures:A,numFailures:R}=S;p+=T-R;for(let L of Sr(A))f.push(A[L])};return this.clone().primaryKeys().then(T=>{const S=A=>{const R=Math.min(m,T.length-A);return c.getMany({trans:n,keys:T.slice(A,A+R),cache:"immutable"}).then(L=>{const V=[],M=[],H=h?[]:null,g=[];for(let B=0;B<R;++B){const Y=L[B],se={value:uc(Y),primKey:T[A+B]};s.call(se,se.value,se)!==!1&&(se.value==null?g.push(T[A+B]):h||un(_(Y),_(se.value))===0?(M.push(se.value),h&&H.push(T[A+B])):(g.push(T[A+B]),V.push(se.value)))}const ne=pl(r)&&r.limit===1/0&&(typeof e!="function"||e===Cp)&&{index:r.index,range:r.range};return Promise.resolve(V.length>0&&c.mutate({trans:n,type:"add",values:V}).then(B=>{for(let Y in B.failures)g.splice(parseInt(Y),1);b(V.length,B)})).then(()=>(M.length>0||ne&&typeof e=="object")&&c.mutate({trans:n,type:"put",keys:H,values:M,criteria:ne,changeSpec:typeof e!="function"&&e}).then(B=>b(M.length,B))).then(()=>(g.length>0||ne&&e===Cp)&&c.mutate({trans:n,type:"delete",keys:g,criteria:ne}).then(B=>b(g.length,B))).then(()=>T.length>A+R&&S(A+m))})};return S(0).then(()=>{if(f.length>0)throw new wf("Error modifying one or more objects",f,p,y);return T.length})})})}delete(){var e=this._ctx,r=e.range;return pl(e)&&(e.isPrimKey&&!lS||r.type===3)?this._write(n=>{const{primaryKey:s}=e.table.core.schema,a=r;return e.table.core.count({trans:n,query:{index:s,range:a}}).then(l=>e.table.core.mutate({trans:n,type:"deleteRange",range:a}).then(({failures:c,lastResult:h,results:_,numFailures:m})=>{if(m)throw new wf("Could not delete some values",Object.keys(c).map(f=>c[f]),l-m);return l-m}))}):this.modify(Cp)}}const Cp=(i,e)=>e.value=null;function hS(i,e){return i<e?-1:i===e?0:1}function fS(i,e){return i>e?-1:i===e?0:1}function Bn(i,e,r){var n=i instanceof z1?new i.Collection(i):i;return n._ctx.error=r?new r(e):new TypeError(e),n}function vl(i){return new i.Collection(i,()=>H1("")).limit(0)}function dS(i,e,r,n,s,a){for(var l=Math.min(i.length,n.length),c=-1,h=0;h<l;++h){var _=e[h];if(_!==n[h])return s(i[h],r[h])<0?i.substr(0,h)+r[h]+r.substr(h+1):s(i[h],n[h])<0?i.substr(0,h)+n[h]+r.substr(h+1):c>=0?i.substr(0,c)+e[c]+r.substr(c+1):null;s(i[h],_)<0&&(c=h)}return l<n.length&&a==="next"?i+r.substr(i.length):l<i.length&&a==="prev"?i.substr(0,r.length):c<0?null:i.substr(0,c)+n[c]+r.substr(c+1)}function Dh(i,e,r,n){var s,a,l,c,h,_,m,f=r.length;if(!r.every(T=>typeof T=="string"))return Bn(i,j1);function p(T){s=function(A){return A==="next"?R=>R.toUpperCase():R=>R.toLowerCase()}(T),a=function(A){return A==="next"?R=>R.toLowerCase():R=>R.toUpperCase()}(T),l=T==="next"?hS:fS;var S=r.map(function(A){return{lower:a(A),upper:s(A)}}).sort(function(A,R){return l(A.lower,R.lower)});c=S.map(function(A){return A.upper}),h=S.map(function(A){return A.lower}),_=T,m=T==="next"?"":n}p("next");var y=new i.Collection(i,()=>_a(c[0],h[f-1]+n));y._ondirectionchange=function(T){p(T)};var b=0;return y._addAlgorithm(function(T,S,A){var R=T.key;if(typeof R!="string")return!1;var L=a(R);if(e(L,h,b))return!0;for(var V=null,M=b;M<f;++M){var H=dS(R,L,c[M],h[M],l,_);H===null&&V===null?b=M+1:(V===null||l(V,H)>0)&&(V=H)}return S(V!==null?function(){T.continue(V+m)}:A),!1}),y}function _a(i,e,r,n){return{type:2,lower:i,upper:e,lowerOpen:r,upperOpen:n}}function H1(i){return{type:1,lower:i,upper:i}}class z1{get Collection(){return this._ctx.table.db.Collection}between(e,r,n,s){n=n!==!1,s=s===!0;try{return this._cmp(e,r)>0||this._cmp(e,r)===0&&(n||s)&&(!n||!s)?vl(this):new this.Collection(this,()=>_a(e,r,!n,!s))}catch{return Bn(this,ws)}}equals(e){return e==null?Bn(this,ws):new this.Collection(this,()=>H1(e))}above(e){return e==null?Bn(this,ws):new this.Collection(this,()=>_a(e,void 0,!0))}aboveOrEqual(e){return e==null?Bn(this,ws):new this.Collection(this,()=>_a(e,void 0,!1))}below(e){return e==null?Bn(this,ws):new this.Collection(this,()=>_a(void 0,e,!1,!0))}belowOrEqual(e){return e==null?Bn(this,ws):new this.Collection(this,()=>_a(void 0,e))}startsWith(e){return typeof e!="string"?Bn(this,j1):this.between(e,e+po,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Dh(this,(r,n)=>r.indexOf(n[0])===0,[e],po)}equalsIgnoreCase(e){return Dh(this,(r,n)=>r===n[0],[e],"")}anyOfIgnoreCase(){var e=Ps.apply(bl,arguments);return e.length===0?vl(this):Dh(this,(r,n)=>n.indexOf(r)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Ps.apply(bl,arguments);return e.length===0?vl(this):Dh(this,(r,n)=>n.some(s=>r.indexOf(s)===0),e,po)}anyOf(){const e=Ps.apply(bl,arguments);let r=this._cmp;try{e.sort(r)}catch{return Bn(this,ws)}if(e.length===0)return vl(this);const n=new this.Collection(this,()=>_a(e[0],e[e.length-1]));n._ondirectionchange=a=>{r=a==="next"?this._ascending:this._descending,e.sort(r)};let s=0;return n._addAlgorithm((a,l,c)=>{const h=a.key;for(;r(h,e[s])>0;)if(++s,s===e.length)return l(c),!1;return r(h,e[s])===0||(l(()=>{a.continue(e[s])}),!1)}),n}notEqual(e){return this.inAnyRange([[__,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Ps.apply(bl,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Bn(this,ws)}const r=e.reduce((n,s)=>n?n.concat([[n[n.length-1][1],s]]):[[__,s]],null);return r.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,r){const n=this._cmp,s=this._ascending,a=this._descending,l=this._min,c=this._max;if(e.length===0)return vl(this);if(!e.every(R=>R[0]!==void 0&&R[1]!==void 0&&s(R[0],R[1])<=0))return Bn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",pt.InvalidArgument);const h=!r||r.includeLowers!==!1,_=r&&r.includeUppers===!0;let m,f=s;function p(R,L){return f(R[0],L[0])}try{m=e.reduce(function(R,L){let V=0,M=R.length;for(;V<M;++V){const H=R[V];if(n(L[0],H[1])<0&&n(L[1],H[0])>0){H[0]=l(H[0],L[0]),H[1]=c(H[1],L[1]);break}}return V===M&&R.push(L),R},[]),m.sort(p)}catch{return Bn(this,ws)}let y=0;const b=_?R=>s(R,m[y][1])>0:R=>s(R,m[y][1])>=0,T=h?R=>a(R,m[y][0])>0:R=>a(R,m[y][0])>=0;let S=b;const A=new this.Collection(this,()=>_a(m[0][0],m[m.length-1][1],!h,!_));return A._ondirectionchange=R=>{R==="next"?(S=b,f=s):(S=T,f=a),m.sort(p)},A._addAlgorithm((R,L,V)=>{for(var M=R.key;S(M);)if(++y,y===m.length)return L(V),!1;return!!function(H){return!b(H)&&!T(H)}(M)||(this._cmp(M,m[y][1])===0||this._cmp(M,m[y][0])===0||L(()=>{f===s?R.continue(m[y][0]):R.continue(m[y][1])}),!1)}),A}startsWithAnyOf(){const e=Ps.apply(bl,arguments);return e.every(r=>typeof r=="string")?e.length===0?vl(this):this.inAnyRange(e.map(r=>[r,r+po])):Bn(this,"startsWithAnyOf() only works with strings")}}function Xi(i){return er(function(e){return Qu(e),i(e.target.error),!1})}function Qu(i){i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault()}const Zu="storagemutated",ya="x-storagemutated-1",Ca=Hu(null,Zu);class pS{_lock(){return Nu(!ot.global),++this._reculock,this._reculock!==1||ot.global||(ot.lockOwnerFor=this),this}_unlock(){if(Nu(!ot.global),--this._reculock==0)for(ot.global||(ot.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Bl(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&ot.lockOwnerFor!==this}create(e){if(!this.mode)return this;const r=this.db.idbdb,n=this.db._state.dbOpenError;if(Nu(!this.idbtrans),!e&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new pt.DatabaseClosed(n);case"MissingAPIError":throw new pt.MissingAPI(n.message,n);default:throw new pt.OpenFailed(n)}if(!this.active)throw new pt.TransactionInactive;return Nu(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=er(s=>{Qu(s),this._reject(e.error)}),e.onabort=er(s=>{Qu(s),this.active&&this._reject(new pt.Abort(e.error)),this.active=!1,this.on("abort").fire(s)}),e.oncomplete=er(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Ca.storagemutated.fire(e.mutatedParts)}),this}_promise(e,r,n){if(e==="readwrite"&&this.mode!=="readwrite")return kr(new pt.ReadOnly("Transaction is readonly"));if(!this.active)return kr(new pt.TransactionInactive);if(this._locked())return new We((a,l)=>{this._blockedFuncs.push([()=>{this._promise(e,r,n).then(a,l)},ot])});if(n)return Sa(()=>{var a=new We((l,c)=>{this._lock();const h=r(l,c,this);h&&h.then&&h.then(l,c)});return a.finally(()=>this._unlock()),a._lib=!0,a});var s=new We((a,l)=>{var c=r(a,l,this);c&&c.then&&c.then(a,l)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(e){var r=this._root();const n=We.resolve(e);if(r._waitingFor)r._waitingFor=r._waitingFor.then(()=>n);else{r._waitingFor=n,r._waitingQueue=[];var s=r.idbtrans.objectStore(r.storeNames[0]);(function l(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(s.get(-1/0).onsuccess=l)})()}var a=r._waitingFor;return new We((l,c)=>{n.then(h=>r._waitingQueue.push(er(l.bind(null,h))),h=>r._waitingQueue.push(er(c.bind(null,h)))).finally(()=>{r._waitingFor===a&&(r._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new pt.Abort))}table(e){const r=this._memoizedTables||(this._memoizedTables={});if(Hn(r,e))return r[e];const n=this.schema[e];if(!n)throw new pt.NotFound("Table "+e+" not part of transaction");const s=new this.db.Table(e,n,this);return s.core=this.db.core.table(e),r[e]=s,s}}function m_(i,e,r,n,s,a,l){return{name:i,keyPath:e,unique:r,multi:n,auto:s,compound:a,src:(r&&!l?"&":"")+(n?"*":"")+(s?"++":"")+X1(e)}}function X1(i){return typeof i=="string"?i:i?"["+[].join.call(i,"+")+"]":""}function V1(i,e,r){return{name:i,primKey:e,indexes:r,mappedClass:null,idxByName:w1(r,n=>[n.name,n])}}let Ju=i=>{try{return i.only([[]]),Ju=()=>[[]],[[]]}catch{return Ju=()=>po,po}};function y_(i){return i==null?()=>{}:typeof i=="string"?function(e){return e.split(".").length===1?n=>n[e]:n=>Ds(n,e)}(i):e=>Ds(e,i)}function t0(i){return[].slice.call(i)}let vS=0;function zu(i){return i==null?":id":typeof i=="string"?i:`[${i.join("+")}]`}function _S(i,e,r){function n(h){if(h.type===3)return null;if(h.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:_,upper:m,lowerOpen:f,upperOpen:p}=h;return _===void 0?m===void 0?null:e.upperBound(m,!!p):m===void 0?e.lowerBound(_,!!f):e.bound(_,m,!!f,!!p)}const{schema:s,hasGetAll:a}=function(h,_){const m=t0(h.objectStoreNames);return{schema:{name:h.name,tables:m.map(f=>_.objectStore(f)).map(f=>{const{keyPath:p,autoIncrement:y}=f,b=nn(p),T=p==null,S={},A={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:T,compound:b,keyPath:p,autoIncrement:y,unique:!0,extractKey:y_(p)},indexes:t0(f.indexNames).map(R=>f.index(R)).map(R=>{const{name:L,unique:V,multiEntry:M,keyPath:H}=R,g={name:L,compound:nn(H),keyPath:H,unique:V,multiEntry:M,extractKey:y_(H)};return S[zu(H)]=g,g}),getIndexByKeyPath:R=>S[zu(R)]};return S[":id"]=A.primaryKey,p!=null&&(S[zu(p)]=A.primaryKey),A})},hasGetAll:m.length>0&&"getAll"in _.objectStore(m[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(i,r),l=s.tables.map(h=>function(_){const m=_.name;return{name:m,schema:_,mutate:function({trans:f,type:p,keys:y,values:b,range:T}){return new Promise((S,A)=>{S=er(S);const R=f.objectStore(m),L=R.keyPath==null,V=p==="put"||p==="add";if(!V&&p!=="delete"&&p!=="deleteRange")throw new Error("Invalid operation type: "+p);const{length:M}=y||b||{length:1};if(y&&b&&y.length!==b.length)throw new Error("Given keys array must have same length as given values array.");if(M===0)return S({numFailures:0,failures:{},results:[],lastResult:void 0});let H;const g=[],ne=[];let B=0;const Y=re=>{++B,Qu(re)};if(p==="deleteRange"){if(T.type===4)return S({numFailures:B,failures:ne,results:[],lastResult:void 0});T.type===3?g.push(H=R.clear()):g.push(H=R.delete(n(T)))}else{const[re,he]=V?L?[b,y]:[b,null]:[y,null];if(V)for(let xe=0;xe<M;++xe)g.push(H=he&&he[xe]!==void 0?R[p](re[xe],he[xe]):R[p](re[xe])),H.onerror=Y;else for(let xe=0;xe<M;++xe)g.push(H=R[p](re[xe])),H.onerror=Y}const se=re=>{const he=re.target.result;g.forEach((xe,Z)=>xe.error!=null&&(ne[Z]=xe.error)),S({numFailures:B,failures:ne,results:p==="delete"?y:g.map(xe=>xe.result),lastResult:he})};H.onerror=re=>{Y(re),se(re)},H.onsuccess=se})},getMany:({trans:f,keys:p})=>new Promise((y,b)=>{y=er(y);const T=f.objectStore(m),S=p.length,A=new Array(S);let R,L=0,V=0;const M=g=>{const ne=g.target;A[ne._pos]=ne.result,++V===L&&y(A)},H=Xi(b);for(let g=0;g<S;++g)p[g]!=null&&(R=T.get(p[g]),R._pos=g,R.onsuccess=M,R.onerror=H,++L);L===0&&y(A)}),get:({trans:f,key:p})=>new Promise((y,b)=>{y=er(y);const T=f.objectStore(m).get(p);T.onsuccess=S=>y(S.target.result),T.onerror=Xi(b)}),query:function(f){return p=>new Promise((y,b)=>{y=er(y);const{trans:T,values:S,limit:A,query:R}=p,L=A===1/0?void 0:A,{index:V,range:M}=R,H=T.objectStore(m),g=V.isPrimaryKey?H:H.index(V.name),ne=n(M);if(A===0)return y({result:[]});if(f){const B=S?g.getAll(ne,L):g.getAllKeys(ne,L);B.onsuccess=Y=>y({result:Y.target.result}),B.onerror=Xi(b)}else{let B=0;const Y=S||!("openKeyCursor"in g)?g.openCursor(ne):g.openKeyCursor(ne),se=[];Y.onsuccess=re=>{const he=Y.result;return he?(se.push(S?he.value:he.primaryKey),++B===A?y({result:se}):void he.continue()):y({result:se})},Y.onerror=Xi(b)}})}(a),openCursor:function({trans:f,values:p,query:y,reverse:b,unique:T}){return new Promise((S,A)=>{S=er(S);const{index:R,range:L}=y,V=f.objectStore(m),M=R.isPrimaryKey?V:V.index(R.name),H=b?T?"prevunique":"prev":T?"nextunique":"next",g=p||!("openKeyCursor"in M)?M.openCursor(n(L),H):M.openKeyCursor(n(L),H);g.onerror=Xi(A),g.onsuccess=er(ne=>{const B=g.result;if(!B)return void S(null);B.___id=++vS,B.done=!1;const Y=B.continue.bind(B);let se=B.continuePrimaryKey;se&&(se=se.bind(B));const re=B.advance.bind(B),he=()=>{throw new Error("Cursor not stopped")};B.trans=f,B.stop=B.continue=B.continuePrimaryKey=B.advance=()=>{throw new Error("Cursor not started")},B.fail=er(A),B.next=function(){let xe=1;return this.start(()=>xe--?this.continue():this.stop()).then(()=>this)},B.start=xe=>{const Z=new Promise((W,z)=>{W=er(W),g.onerror=Xi(z),B.fail=z,B.stop=Q=>{B.stop=B.continue=B.continuePrimaryKey=B.advance=he,W(Q)}}),U=()=>{if(g.result)try{xe()}catch(W){B.fail(W)}else B.done=!0,B.start=()=>{throw new Error("Cursor behind last entry")},B.stop()};return g.onsuccess=er(W=>{g.onsuccess=U,U()}),B.continue=Y,B.continuePrimaryKey=se,B.advance=re,U(),Z},S(B)},A)})},count({query:f,trans:p}){const{index:y,range:b}=f;return new Promise((T,S)=>{const A=p.objectStore(m),R=y.isPrimaryKey?A:A.index(y.name),L=n(b),V=L?R.count(L):R.count();V.onsuccess=er(M=>T(M.target.result)),V.onerror=Xi(S)})}}}(h)),c={};return l.forEach(h=>c[h.name]=h),{stack:"dbcore",transaction:i.transaction.bind(i),table(h){if(!c[h])throw new Error(`Table '${h}' not found`);return c[h]},MIN_KEY:-1/0,MAX_KEY:Ju(e),schema:s}}function g_({_novip:i},e){const r=e.db,n=function(s,a,{IDBKeyRange:l,indexedDB:c},h){return{dbcore:function(m,f){return f.reduce((p,{create:y})=>({...p,...y(p)}),m)}(_S(a,l,h),s.dbcore)}}(i._middlewares,r,i._deps,e);i.core=n.dbcore,i.tables.forEach(s=>{const a=s.name;i.core.schema.tables.some(l=>l.name===a)&&(s.core=i.core.table(a),i[a]instanceof i.Table&&(i[a].core=s.core))})}function Af({_novip:i},e,r,n){r.forEach(s=>{const a=n[s];e.forEach(l=>{const c=fm(l,s);(!c||"value"in c&&c.value===void 0)&&(l===i.Transaction.prototype||l instanceof i.Transaction?ks(l,s,{get(){return this.table(s)},set(h){g1(this,s,{value:h,writable:!0,configurable:!0,enumerable:!0})}}):l[s]=new i.Table(s,a))})})}function x_({_novip:i},e){e.forEach(r=>{for(let n in r)r[n]instanceof i.Table&&delete r[n]})}function mS(i,e){return i._cfg.version-e._cfg.version}function yS(i,e,r,n){const s=i._dbSchema,a=i._createTransaction("readwrite",i._storeNames,s);a.create(r),a._completion.catch(n);const l=a._reject.bind(a),c=ot.transless||ot;Sa(()=>{ot.trans=a,ot.transless=c,e===0?(Sr(s).forEach(h=>{Ap(r,h,s[h].primKey,s[h].indexes)}),g_(i,r),We.follow(()=>i.on.populate.fire(a)).catch(l)):function({_novip:h},_,m,f){const p=[],y=h._versions;let b=h._dbSchema=w_(h,h.idbdb,f),T=!1;const S=y.filter(R=>R._cfg.version>=_);function A(){return p.length?We.resolve(p.shift()(m.idbtrans)).then(A):We.resolve()}return S.forEach(R=>{p.push(()=>{const L=b,V=R._cfg.dbschema;T_(h,L,f),T_(h,V,f),b=h._dbSchema=V;const M=q1(L,V);M.add.forEach(g=>{Ap(f,g[0],g[1].primKey,g[1].indexes)}),M.change.forEach(g=>{if(g.recreate)throw new pt.Upgrade("Not yet support for changing primary key");{const ne=f.objectStore(g.name);g.add.forEach(B=>b_(ne,B)),g.change.forEach(B=>{ne.deleteIndex(B.name),b_(ne,B)}),g.del.forEach(B=>ne.deleteIndex(B))}});const H=R._cfg.contentUpgrade;if(H&&R._cfg.version>_){g_(h,f),m._memoizedTables={},T=!0;let g=T1(V);M.del.forEach(se=>{g[se]=L[se]}),x_(h,[h.Transaction.prototype]),Af(h,[h.Transaction.prototype],Sr(g),g),m.schema=g;const ne=dm(H);let B;ne&&Ll();const Y=We.follow(()=>{if(B=H(m),B&&ne){var se=Ns.bind(null,null);B.then(se,se)}});return B&&typeof B.then=="function"?We.resolve(B):Y.then(()=>B)}}),p.push(L=>{(!T||!oS)&&function(V,M){[].slice.call(M.db.objectStoreNames).forEach(H=>V[H]==null&&M.db.deleteObjectStore(H))}(R._cfg.dbschema,L),x_(h,[h.Transaction.prototype]),Af(h,[h.Transaction.prototype],h._storeNames,h._dbSchema),m.schema=h._dbSchema})}),A().then(()=>{var R,L;L=f,Sr(R=b).forEach(V=>{L.db.objectStoreNames.contains(V)||Ap(L,V,R[V].primKey,R[V].indexes)})})}(i,e,a,r).catch(l)})}function q1(i,e){const r={del:[],add:[],change:[]};let n;for(n in i)e[n]||r.del.push(n);for(n in e){const s=i[n],a=e[n];if(s){const l={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||s.primKey.auto!==a.primKey.auto&&!Xf)l.recreate=!0,r.change.push(l);else{const c=s.idxByName,h=a.idxByName;let _;for(_ in c)h[_]||l.del.push(_);for(_ in h){const m=c[_],f=h[_];m?m.src!==f.src&&l.change.push(f):l.add.push(f)}(l.del.length>0||l.add.length>0||l.change.length>0)&&r.change.push(l)}}else r.add.push([n,a])}return r}function Ap(i,e,r,n){const s=i.db.createObjectStore(e,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(a=>b_(s,a)),s}function b_(i,e){i.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function w_(i,e,r){const n={};return bf(e.objectStoreNames,0).forEach(s=>{const a=r.objectStore(s);let l=a.keyPath;const c=m_(X1(l),l||"",!1,!1,!!a.autoIncrement,l&&typeof l!="string",!0),h=[];for(let m=0;m<a.indexNames.length;++m){const f=a.index(a.indexNames[m]);l=f.keyPath;var _=m_(f.name,l,!!f.unique,!!f.multiEntry,!1,l&&typeof l!="string",!1);h.push(_)}n[s]=V1(s,c,h)}),n}function T_({_novip:i},e,r){const n=r.db.objectStoreNames;for(let s=0;s<n.length;++s){const a=n[s],l=r.objectStore(a);i._hasGetAll="getAll"in l;for(let c=0;c<l.indexNames.length;++c){const h=l.indexNames[c],_=l.index(h).keyPath,m=typeof _=="string"?_:"["+bf(_).join("+")+"]";if(e[a]){const f=e[a].idxByName[m];f&&(f.name=h,delete e[a].idxByName[m],e[a].idxByName[h]=f)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&$t.WorkerGlobalScope&&$t instanceof $t.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}class gS{_parseStoresSpec(e,r){Sr(e).forEach(n=>{if(e[n]!==null){var s=e[n].split(",").map((l,c)=>{const h=(l=l.trim()).replace(/([&*]|\+\+)/g,""),_=/^\[/.test(h)?h.match(/^\[(.*)\]$/)[1].split("+"):h;return m_(h,_||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),nn(_),c===0)}),a=s.shift();if(a.multi)throw new pt.Schema("Primary key cannot be multi-valued");s.forEach(l=>{if(l.auto)throw new pt.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new pt.Schema("Index must have a name and cannot be an empty string")}),r[n]=V1(n,a,s)}})}stores(e){const r=this.db;this._cfg.storesSource=this._cfg.storesSource?fn(this._cfg.storesSource,e):e;const n=r._versions,s={};let a={};return n.forEach(l=>{fn(s,l._cfg.storesSource),a=l._cfg.dbschema={},l._parseStoresSpec(s,a)}),r._dbSchema=a,x_(r,[r._allTables,r,r.Transaction.prototype]),Af(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],Sr(a),a),r._storeNames=Sr(a),this}upgrade(e){return this._cfg.contentUpgrade=_m(this._cfg.contentUpgrade||zt,e),this}}function xm(i,e){let r=i._dbNamesDB;return r||(r=i._dbNamesDB=new mo(Vf,{addons:[],indexedDB:i,IDBKeyRange:e}),r.version(1).stores({dbnames:"name"})),r.table("dbnames")}function bm(i){return i&&typeof i.databases=="function"}function S_(i){return Sa(function(){return ot.letThrough=!0,i()})}function xS(){var i;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var r=function(){return indexedDB.databases().finally(e)};i=setInterval(r,100),r()}).finally(function(){return clearInterval(i)}):Promise.resolve()}function bS(i){const e=i._state,{indexedDB:r}=i._deps;if(e.isBeingOpened||i.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?kr(e.dbOpenError):i);Ji&&(e.openCanceller._stackHolder=Ao()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const n=e.openCanceller;function s(){if(e.openCanceller!==n)throw new pt.DatabaseClosed("db.open() was cancelled")}let a=e.dbReadyResolve,l=null,c=!1;const h=()=>new We((_,m)=>{if(s(),!r)throw new pt.MissingAPI;const f=i.name,p=e.autoSchema?r.open(f):r.open(f,Math.round(10*i.verno));if(!p)throw new pt.MissingAPI;p.onerror=Xi(m),p.onblocked=er(i._fireOnBlocked),p.onupgradeneeded=er(y=>{if(l=p.transaction,e.autoSchema&&!i._options.allowEmptyDB){p.onerror=Qu,l.abort(),p.result.close();const T=r.deleteDatabase(f);T.onsuccess=T.onerror=er(()=>{m(new pt.NoSuchDatabase(`Database ${f} doesnt exist`))})}else{l.onerror=Xi(m);var b=y.oldVersion>Math.pow(2,62)?0:y.oldVersion;c=b<1,i._novip.idbdb=p.result,yS(i,b/10,l,m)}},m),p.onsuccess=er(()=>{l=null;const y=i._novip.idbdb=p.result,b=bf(y.objectStoreNames);if(b.length>0)try{const S=y.transaction((T=b).length===1?T[0]:T,"readonly");e.autoSchema?function({_novip:A},R,L){A.verno=R.version/10;const V=A._dbSchema=w_(0,R,L);A._storeNames=bf(R.objectStoreNames,0),Af(A,[A._allTables],Sr(V),V)}(i,y,S):(T_(i,i._dbSchema,S),function(A,R){const L=q1(w_(0,A.idbdb,R),A._dbSchema);return!(L.add.length||L.change.some(V=>V.add.length||V.change.length))}(i,S)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),g_(i,S)}catch{}var T;Gu.push(i),y.onversionchange=er(S=>{e.vcFired=!0,i.on("versionchange").fire(S)}),y.onclose=er(S=>{i.on("close").fire(S)}),c&&function({indexedDB:S,IDBKeyRange:A},R){!bm(S)&&R!==Vf&&xm(S,A).put({name:R}).catch(zt)}(i._deps,f),_()},m)}).catch(_=>_&&_.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),h()):We.reject(_));return We.race([n,(typeof navigator>"u"?We.resolve():xS()).then(h)]).then(()=>(s(),e.onReadyBeingFired=[],We.resolve(S_(()=>i.on.ready.fire(i.vip))).then(function _(){if(e.onReadyBeingFired.length>0){let m=e.onReadyBeingFired.reduce(_m,zt);return e.onReadyBeingFired=[],We.resolve(S_(()=>m(i.vip))).then(_)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>i).catch(_=>{e.dbOpenError=_;try{l&&l.abort()}catch{}return n===e.openCanceller&&i._close(),kr(_)}).finally(()=>{e.openComplete=!0,a()})}function E_(i){var e=a=>i.next(a),r=s(e),n=s(a=>i.throw(a));function s(a){return l=>{var c=a(l),h=c.value;return c.done?h:h&&typeof h.then=="function"?h.then(r,n):nn(h)?Promise.all(h).then(r,n):r(h)}}return s(e)()}function wS(i,e,r){var n=arguments.length;if(n<2)throw new pt.InvalidArgument("Too few arguments");for(var s=new Array(n-1);--n;)s[n-1]=arguments[n];return r=s.pop(),[i,S1(s),r]}function W1(i,e,r,n,s){return We.resolve().then(()=>{const a=ot.transless||ot,l=i._createTransaction(e,r,i._dbSchema,n),c={trans:l,transless:a};if(n)l.idbtrans=n.idbtrans;else try{l.create(),i._state.PR1398_maxLoop=3}catch(f){return f.name===vm.InvalidState&&i.isOpen()&&--i._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),i._close(),i.open().then(()=>W1(i,e,r,null,s))):kr(f)}const h=dm(s);let _;h&&Ll();const m=We.follow(()=>{if(_=s.call(l,l),_)if(h){var f=Ns.bind(null,null);_.then(f,f)}else typeof _.next=="function"&&typeof _.throw=="function"&&(_=E_(_))},c);return(_&&typeof _.then=="function"?We.resolve(_).then(f=>l.active?f:kr(new pt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):m.then(()=>_)).then(f=>(n&&l._resolve(),l._completion.then(()=>f))).catch(f=>(l._reject(f),kr(f)))})}function Nh(i,e,r){const n=nn(i)?i.slice():[i];for(let s=0;s<r;++s)n.push(e);return n}const TS={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(i){return{...i,table(e){const r=i.table(e),{schema:n}=r,s={},a=[];function l(m,f,p){const y=zu(m),b=s[y]=s[y]||[],T=m==null?0:typeof m=="string"?1:m.length,S=f>0,A={...p,isVirtual:S,keyTail:f,keyLength:T,extractKey:y_(m),unique:!S&&p.unique};return b.push(A),A.isPrimaryKey||a.push(A),T>1&&l(T===2?m[0]:m.slice(0,T-1),f+1,p),b.sort((R,L)=>R.keyTail-L.keyTail),A}const c=l(n.primaryKey.keyPath,0,n.primaryKey);s[":id"]=[c];for(const m of n.indexes)l(m.keyPath,0,m);function h(m){const f=m.query.index;return f.isVirtual?{...m,query:{index:f,range:(p=m.query.range,y=f.keyTail,{type:p.type===1?2:p.type,lower:Nh(p.lower,p.lowerOpen?i.MAX_KEY:i.MIN_KEY,y),lowerOpen:!0,upper:Nh(p.upper,p.upperOpen?i.MIN_KEY:i.MAX_KEY,y),upperOpen:!0})}}:m;var p,y}return{...r,schema:{...n,primaryKey:c,indexes:a,getIndexByKeyPath:function(m){const f=s[zu(m)];return f&&f[0]}},count:m=>r.count(h(m)),query:m=>r.query(h(m)),openCursor(m){const{keyTail:f,isVirtual:p,keyLength:y}=m.query.index;return p?r.openCursor(h(m)).then(b=>b&&function(T){return Object.create(T,{continue:{value:function(A){A!=null?T.continue(Nh(A,m.reverse?i.MAX_KEY:i.MIN_KEY,f)):m.unique?T.continue(T.key.slice(0,y).concat(m.reverse?i.MIN_KEY:i.MAX_KEY,f)):T.continue()}},continuePrimaryKey:{value(A,R){T.continuePrimaryKey(Nh(A,i.MAX_KEY,f),R)}},primaryKey:{get:()=>T.primaryKey},key:{get(){const A=T.key;return y===1?A[0]:A.slice(0,y)}},value:{get:()=>T.value}})}(b)):r.openCursor(m)}}}}}};function wm(i,e,r,n){return r=r||{},n=n||"",Sr(i).forEach(s=>{if(Hn(e,s)){var a=i[s],l=e[s];if(typeof a=="object"&&typeof l=="object"&&a&&l){const c=i_(a);c!==i_(l)?r[n+s]=e[s]:c==="Object"?wm(a,l,r,n+s+"."):a!==l&&(r[n+s]=e[s])}else a!==l&&(r[n+s]=e[s])}else r[n+s]=void 0}),Sr(e).forEach(s=>{Hn(i,s)||(r[n+s]=e[s])}),r}const SS={stack:"dbcore",name:"HooksMiddleware",level:2,create:i=>({...i,table(e){const r=i.table(e),{primaryKey:n}=r.schema;return{...r,mutate(a){const l=ot.trans,{deleting:c,creating:h,updating:_}=l.table(e).hook;switch(a.type){case"add":if(h.fire===zt)break;return l._promise("readwrite",()=>m(a),!0);case"put":if(h.fire===zt&&_.fire===zt)break;return l._promise("readwrite",()=>m(a),!0);case"delete":if(c.fire===zt)break;return l._promise("readwrite",()=>m(a),!0);case"deleteRange":if(c.fire===zt)break;return l._promise("readwrite",()=>function(p){return f(p.trans,p.range,1e4)}(a),!0)}return r.mutate(a);function m(p){const y=ot.trans,b=p.keys||function(T,S){return S.type==="delete"?S.keys:S.keys||S.values.map(T.extractKey)}(n,p);if(!b)throw new Error("Keys missing");return(p=p.type==="add"||p.type==="put"?{...p,keys:b}:{...p}).type!=="delete"&&(p.values=[...p.values]),p.keys&&(p.keys=[...p.keys]),function(T,S,A){return S.type==="add"?Promise.resolve([]):T.getMany({trans:S.trans,keys:A,cache:"immutable"})}(r,p,b).then(T=>{const S=b.map((A,R)=>{const L=T[R],V={onerror:null,onsuccess:null};if(p.type==="delete")c.fire.call(V,A,L,y);else if(p.type==="add"||L===void 0){const M=h.fire.call(V,A,p.values[R],y);A==null&&M!=null&&(A=M,p.keys[R]=A,n.outbound||Ti(p.values[R],n.keyPath,A))}else{const M=wm(L,p.values[R]),H=_.fire.call(V,M,A,L,y);if(H){const g=p.values[R];Object.keys(H).forEach(ne=>{Hn(g,ne)?g[ne]=H[ne]:Ti(g,ne,H[ne])})}}return V});return r.mutate(p).then(({failures:A,results:R,numFailures:L,lastResult:V})=>{for(let M=0;M<b.length;++M){const H=R?R[M]:b[M],g=S[M];H==null?g.onerror&&g.onerror(A[M]):g.onsuccess&&g.onsuccess(p.type==="put"&&T[M]?p.values[M]:H)}return{failures:A,results:R,numFailures:L,lastResult:V}}).catch(A=>(S.forEach(R=>R.onerror&&R.onerror(A)),Promise.reject(A)))})}function f(p,y,b){return r.query({trans:p,values:!1,query:{index:n,range:y},limit:b}).then(({result:T})=>m({type:"delete",keys:T,trans:p}).then(S=>S.numFailures>0?Promise.reject(S.failures[0]):T.length<b?{failures:[],numFailures:0,lastResult:void 0}:f(p,{...y,lower:T[T.length-1],lowerOpen:!0},b)))}}}}})};function $1(i,e,r){try{if(!e||e.keys.length<i.length)return null;const n=[];for(let s=0,a=0;s<e.keys.length&&a<i.length;++s)un(e.keys[s],i[a])===0&&(n.push(r?uc(e.values[s]):e.values[s]),++a);return n.length===i.length?n:null}catch{return null}}const ES={stack:"dbcore",level:-1,create:i=>({table:e=>{const r=i.table(e);return{...r,getMany:n=>{if(!n.cache)return r.getMany(n);const s=$1(n.keys,n.trans._cache,n.cache==="clone");return s?We.resolve(s):r.getMany(n).then(a=>(n.trans._cache={keys:n.keys,values:n.cache==="clone"?uc(a):a},a))},mutate:n=>(n.type!=="add"&&(n.trans._cache=null),r.mutate(n))}}})};function Tm(i){return!("from"in i)}const Cs=function(i,e){if(!this){const r=new Cs;return i&&"d"in i&&fn(r,i),r}fn(this,arguments.length?{d:1,from:i,to:arguments.length>1?e:i}:{d:0})};function ec(i,e,r){const n=un(e,r);if(isNaN(n))return;if(n>0)throw RangeError();if(Tm(i))return fn(i,{from:e,to:r,d:1});const s=i.l,a=i.r;if(un(r,i.from)<0)return s?ec(s,e,r):i.l={from:e,to:r,d:1,l:null,r:null},r0(i);if(un(e,i.to)>0)return a?ec(a,e,r):i.r={from:e,to:r,d:1,l:null,r:null},r0(i);un(e,i.from)<0&&(i.from=e,i.l=null,i.d=a?a.d+1:1),un(r,i.to)>0&&(i.to=r,i.r=null,i.d=i.l?i.l.d+1:1);const l=!i.r;s&&!i.l&&Pf(i,s),a&&l&&Pf(i,a)}function Pf(i,e){Tm(e)||function r(n,{from:s,to:a,l,r:c}){ec(n,s,a),l&&r(n,l),c&&r(n,c)}(i,e)}function CS(i,e){const r=C_(e);let n=r.next();if(n.done)return!1;let s=n.value;const a=C_(i);let l=a.next(s.from),c=l.value;for(;!n.done&&!l.done;){if(un(c.from,s.to)<=0&&un(c.to,s.from)>=0)return!0;un(s.from,c.from)<0?s=(n=r.next(c.from)).value:c=(l=a.next(s.from)).value}return!1}function C_(i){let e=Tm(i)?null:{s:0,n:i};return{next(r){const n=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,n)for(;e.n.l&&un(r,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!n||un(r,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function r0(i){var e,r;const n=(((e=i.r)===null||e===void 0?void 0:e.d)||0)-(((r=i.l)===null||r===void 0?void 0:r.d)||0),s=n>1?"r":n<-1?"l":"";if(s){const a=s==="r"?"l":"r",l={...i},c=i[s];i.from=c.from,i.to=c.to,i[s]=c[s],l[s]=c[a],i[a]=l,l.d=n0(l)}i.d=n0(i)}function n0({r:i,l:e}){return(i?e?Math.max(i.d,e.d):i.d:e?e.d:0)+1}kl(Cs.prototype,{add(i){return Pf(this,i),this},addKey(i){return ec(this,i,i),this},addKeys(i){return i.forEach(e=>ec(this,e,e)),this},[s_](){return C_(this)}});const AS={stack:"dbcore",level:0,create:i=>{const e=i.schema.name,r=new Cs(i.MIN_KEY,i.MAX_KEY);return{...i,table:n=>{const s=i.table(n),{schema:a}=s,{primaryKey:l}=a,{extractKey:c,outbound:h}=l,_={...s,mutate:p=>{const y=p.trans,b=y.mutatedParts||(y.mutatedParts={}),T=H=>{const g=`idb://${e}/${n}/${H}`;return b[g]||(b[g]=new Cs)},S=T(""),A=T(":dels"),{type:R}=p;let[L,V]=p.type==="deleteRange"?[p.range]:p.type==="delete"?[p.keys]:p.values.length<50?[[],p.values]:[];const M=p.trans._cache;return s.mutate(p).then(H=>{if(nn(L)){R!=="delete"&&(L=H.results),S.addKeys(L);const g=$1(L,M);g||R==="add"||A.addKeys(L),(g||V)&&function(ne,B,Y,se){function re(he){const xe=ne(he.name||"");function Z(W){return W!=null?he.extractKey(W):null}const U=W=>he.multiEntry&&nn(W)?W.forEach(z=>xe.addKey(z)):xe.addKey(W);(Y||se).forEach((W,z)=>{const Q=Y&&Z(Y[z]),$=se&&Z(se[z]);un(Q,$)!==0&&(Q!=null&&U(Q),$!=null&&U($))})}B.indexes.forEach(re)}(T,a,g,V)}else if(L){const g={from:L.lower,to:L.upper};A.add(g),S.add(g)}else S.add(r),A.add(r),a.indexes.forEach(g=>T(g.name).add(r));return H})}},m=({query:{index:p,range:y}})=>{var b,T;return[p,new Cs((b=y.lower)!==null&&b!==void 0?b:i.MIN_KEY,(T=y.upper)!==null&&T!==void 0?T:i.MAX_KEY)]},f={get:p=>[l,new Cs(p.key)],getMany:p=>[l,new Cs().addKeys(p.keys)],count:m,query:m,openCursor:m};return Sr(f).forEach(p=>{_[p]=function(y){const{subscr:b}=ot;if(b){const T=V=>{const M=`idb://${e}/${n}/${V}`;return b[M]||(b[M]=new Cs)},S=T(""),A=T(":dels"),[R,L]=f[p](y);if(T(R.name||"").add(L),!R.isPrimaryKey){if(p!=="count"){const V=p==="query"&&h&&y.values&&s.query({...y,values:!1});return s[p].apply(this,arguments).then(M=>{if(p==="query"){if(h&&y.values)return V.then(({result:g})=>(S.addKeys(g),M));const H=y.values?M.result.map(c):M.result;y.values?S.addKeys(H):A.addKeys(H)}else if(p==="openCursor"){const H=M,g=y.values;return H&&Object.create(H,{key:{get:()=>(A.addKey(H.primaryKey),H.key)},primaryKey:{get(){const ne=H.primaryKey;return A.addKey(ne),ne}},value:{get:()=>(g&&S.addKey(H.primaryKey),H.value)}})}return M})}A.add(r)}}return s[p].apply(this,arguments)}}),_}}}};class mo{constructor(e,r){this._middlewares={},this.verno=0;const n=mo.dependencies;this._options=r={addons:mo.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...r},this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};const{addons:s}=r;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:zt,dbReadyPromise:null,cancelOpen:zt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var l;a.dbReadyPromise=new We(c=>{a.dbReadyResolve=c}),a.openCanceller=new We((c,h)=>{a.cancelOpen=h}),this._state=a,this.name=e,this.on=Hu(this,"populate","blocked","versionchange","close",{ready:[_m,zt]}),this.on.ready.subscribe=x1(this.on.ready.subscribe,c=>(h,_)=>{mo.vip(()=>{const m=this._state;if(m.openComplete)m.dbOpenError||We.resolve().then(h),_&&c(h);else if(m.onReadyBeingFired)m.onReadyBeingFired.push(h),_&&c(h);else{c(h);const f=this;_||c(function p(){f.on.ready.unsubscribe(h),f.on.ready.unsubscribe(p)})}})}),this.Collection=(l=this,wu(cS.prototype,function(c,h){this.db=l;let _=G1,m=null;if(h)try{_=h()}catch(b){m=b}const f=c._ctx,p=f.table,y=p.hook.reading.fire;this._ctx={table:p,index:f.index,isPrimKey:!f.index||p.schema.primKey.keyPath&&f.index===p.schema.primKey.name,range:_,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:m,or:f.or,valueMapper:y!==Yu?y:null}})),this.Table=function(c){return wu(uS.prototype,function(h,_,m){this.db=c,this._tx=m,this.name=h,this.schema=_,this.hook=c._allTables[h]?c._allTables[h].hook:Hu(null,{creating:[QT,zt],reading:[KT,Yu],updating:[JT,zt],deleting:[ZT,zt]})})}(this),this.Transaction=function(c){return wu(pS.prototype,function(h,_,m,f,p){this.db=c,this.mode=h,this.storeNames=_,this.schema=m,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=Hu(this,"complete","error","abort"),this.parent=p||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new We((y,b)=>{this._resolve=y,this._reject=b}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},y=>{var b=this.active;return this.active=!1,this.on.error.fire(y),this.parent?this.parent._reject(y):b&&this.idbtrans&&this.idbtrans.abort(),kr(y)})})}(this),this.Version=function(c){return wu(gS.prototype,function(h){this.db=c,this._cfg={version:h,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(c){return wu(z1.prototype,function(h,_,m){this.db=c,this._ctx={table:h,index:_===":id"?null:_,or:m};const f=c._deps.indexedDB;if(!f)throw new pt.MissingAPI;this._cmp=this._ascending=f.cmp.bind(f),this._descending=(p,y)=>f.cmp(y,p),this._max=(p,y)=>f.cmp(p,y)>0?p:y,this._min=(p,y)=>f.cmp(p,y)<0?p:y,this._IDBKeyRange=c._deps.IDBKeyRange})}(this),this.on("versionchange",c=>{c.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",c=>{!c.newVersion||c.newVersion<c.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${c.oldVersion/10}`)}),this._maxKey=Ju(r.IDBKeyRange),this._createTransaction=(c,h,_,m)=>new this.Transaction(c,h,_,this._options.chromeTransactionDurability,m),this._fireOnBlocked=c=>{this.on("blocked").fire(c),Gu.filter(h=>h.name===this.name&&h!==this&&!h._state.vcFired).map(h=>h.on("versionchange").fire(c))},this.use(TS),this.use(SS),this.use(AS),this.use(ES),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(c=>c(this))}version(e){if(isNaN(e)||e<.1)throw new pt.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new pt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const r=this._versions;var n=r.filter(s=>s._cfg.version===e)[0];return n||(n=new this.Version(e),r.push(n),r.sort(mS),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||ot.letThrough||this._vip)?e():new We((r,n)=>{if(this._state.openComplete)return n(new pt.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void n(new pt.DatabaseClosed);this.open().catch(zt)}this._state.dbReadyPromise.then(r,n)}).then(e)}use({stack:e,create:r,level:n,name:s}){s&&this.unuse({stack:e,name:s});const a=this._middlewares[e]||(this._middlewares[e]=[]);return a.push({stack:e,create:r,level:n??10,name:s}),a.sort((l,c)=>l.level-c.level),this}unuse({stack:e,name:r,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(s=>n?s.create!==n:!!r&&s.name!==r)),this}open(){return bS(this)}_close(){const e=this._state,r=Gu.indexOf(this);if(r>=0&&Gu.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new We(n=>{e.dbReadyResolve=n}),e.openCanceller=new We((n,s)=>{e.cancelOpen=s})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new pt.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,r=this._state;return new We((n,s)=>{const a=()=>{this.close();var l=this._deps.indexedDB.deleteDatabase(this.name);l.onsuccess=er(()=>{(function({indexedDB:c,IDBKeyRange:h},_){!bm(c)&&_!==Vf&&xm(c,h).delete(_).catch(zt)})(this._deps,this.name),n()}),l.onerror=Xi(s),l.onblocked=this._fireOnBlocked};if(e)throw new pt.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Sr(this._allTables).map(e=>this._allTables[e])}transaction(){const e=wS.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,r,n){let s=ot.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);const a=e.indexOf("?")!==-1;let l,c;e=e.replace("!","").replace("?","");try{if(c=r.map(_=>{var m=_ instanceof this.Table?_.name:_;if(typeof m!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return m}),e=="r"||e===wp)l=wp;else{if(e!="rw"&&e!=Tp)throw new pt.InvalidArgument("Invalid transaction mode: "+e);l=Tp}if(s){if(s.mode===wp&&l===Tp){if(!a)throw new pt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&c.forEach(_=>{if(s&&s.storeNames.indexOf(_)===-1){if(!a)throw new pt.SubTransaction("Table "+_+" not included in parent transaction.");s=null}}),a&&s&&!s.active&&(s=null)}}catch(_){return s?s._promise(null,(m,f)=>{f(_)}):kr(_)}const h=W1.bind(null,this,l,c,s,n);return s?s._promise(l,h,"lock"):ot.trans?Bl(ot.transless,()=>this._whenReady(h)):this._whenReady(h)}table(e){if(!Hn(this._allTables,e))throw new pt.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const PS=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class IS{constructor(e){this._subscribe=e}subscribe(e,r,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:r,complete:n})}[PS](){return this}}function Y1(i,e){return Sr(e).forEach(r=>{Pf(i[r]||(i[r]=new Cs),e[r])}),i}function OS(i){let e,r=!1;const n=new IS(s=>{const a=dm(i);let l=!1,c={},h={};const _={get closed(){return l},unsubscribe:()=>{l=!0,Ca.storagemutated.unsubscribe(y)}};s.start&&s.start(_);let m=!1,f=!1;function p(){return Sr(h).some(T=>c[T]&&CS(c[T],h[T]))}const y=T=>{Y1(c,T),p()&&b()},b=()=>{if(m||l)return;c={};const T={},S=function(A){a&&Ll();const R=()=>Sa(i,{subscr:A,trans:null}),L=ot.trans?Bl(ot.transless,R):R();return a&&L.then(Ns,Ns),L}(T);f||(Ca(Zu,y),f=!0),m=!0,Promise.resolve(S).then(A=>{r=!0,e=A,m=!1,l||(p()?b():(c={},h=T,s.next&&s.next(A)))},A=>{m=!1,r=!1,s.error&&s.error(A),_.unsubscribe()})};return b(),_});return n.hasValue=()=>r,n.getValue=()=>e,n}let A_;try{A_={indexedDB:$t.indexedDB||$t.mozIndexedDB||$t.webkitIndexedDB||$t.msIndexedDB,IDBKeyRange:$t.IDBKeyRange||$t.webkitIDBKeyRange}}catch{A_={indexedDB:null,IDBKeyRange:null}}const Ja=mo;function pf(i){let e=Ms;try{Ms=!0,Ca.storagemutated.fire(i)}finally{Ms=e}}kl(Ja,{...lf,delete:i=>new Ja(i,{addons:[]}).delete(),exists:i=>new Ja(i,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(i){try{return function({indexedDB:e,IDBKeyRange:r}){return bm(e)?Promise.resolve(e.databases()).then(n=>n.map(s=>s.name).filter(s=>s!==Vf)):xm(e,r).toCollection().primaryKeys()}(Ja.dependencies).then(i)}catch{return kr(new pt.MissingAPI)}},defineClass:()=>function(i){fn(this,i)},ignoreTransaction:i=>ot.trans?Bl(ot.transless,i):i(),vip:S_,async:function(i){return function(){try{var e=E_(i.apply(this,arguments));return e&&typeof e.then=="function"?e:We.resolve(e)}catch(r){return kr(r)}}},spawn:function(i,e,r){try{var n=E_(i.apply(r,e||[]));return n&&typeof n.then=="function"?n:We.resolve(n)}catch(s){return kr(s)}},currentTransaction:{get:()=>ot.trans||null},waitFor:function(i,e){const r=We.resolve(typeof i=="function"?Ja.ignoreTransaction(i):i).timeout(e||6e4);return ot.trans?ot.trans.waitFor(r):r},Promise:We,debug:{get:()=>Ji,set:i=>{C1(i,i==="dexie"?()=>!0:U1)}},derive:Al,extend:fn,props:kl,override:x1,Events:Hu,on:Ca,liveQuery:OS,extendObservabilitySet:Y1,getByKeyPath:Ds,setByKeyPath:Ti,delByKeyPath:function(i,e){typeof e=="string"?Ti(i,e,void 0):"length"in e&&[].map.call(e,function(r){Ti(i,r,void 0)})},shallowClone:T1,deepClone:uc,getObjectDiff:wm,cmp:un,asap:b1,minKey:__,addons:[],connections:Gu,errnames:vm,dependencies:A_,semVer:Kg,version:Kg.split(".").map(i=>parseInt(i)).reduce((i,e,r)=>i+e/Math.pow(10,2*r))}),Ja.maxKey=Ju(Ja.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ca(Zu,i=>{if(!Ms){let e;Xf?(e=document.createEvent("CustomEvent"),e.initCustomEvent(ya,!0,!0,i)):e=new CustomEvent(ya,{detail:i}),Ms=!0,dispatchEvent(e),Ms=!1}}),addEventListener(ya,({detail:i})=>{Ms||pf(i)}));let Ms=!1;if(typeof BroadcastChannel<"u"){const i=new BroadcastChannel(ya);typeof i.unref=="function"&&i.unref(),Ca(Zu,e=>{Ms||i.postMessage(e)}),i.onmessage=e=>{e.data&&pf(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Ca(Zu,e=>{try{Ms||(typeof localStorage<"u"&&localStorage.setItem(ya,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(r=>r.postMessage({type:ya,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===ya){const r=JSON.parse(e.newValue);r&&pf(r.changedParts)}});const i=self.document&&navigator.serviceWorker;i&&i.addEventListener("message",function({data:e}){e&&e.type===ya&&pf(e.changedParts)})}We.rejectionMapper=function(i,e){if(!i||i instanceof Pl||i instanceof TypeError||i instanceof SyntaxError||!i.name||!qg[i.name])return i;var r=new qg[i.name](e||i.message,i);return"stack"in i&&ks(r,"stack",{get:function(){return this.inner.stack}}),r},C1(Ji,U1);function RS(i){var e=this.constructor;return this.then(function(r){return e.resolve(i()).then(function(){return r})},function(r){return e.resolve(i()).then(function(){return e.reject(r)})})}function MS(i){var e=this;return new e(function(r,n){if(!(i&&typeof i.length<"u"))return n(new TypeError(typeof i+" "+i+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var s=Array.prototype.slice.call(i);if(s.length===0)return r([]);var a=s.length;function l(h,_){if(_&&(typeof _=="object"||typeof _=="function")){var m=_.then;if(typeof m=="function"){m.call(_,function(f){l(h,f)},function(f){s[h]={status:"rejected",reason:f},--a===0&&r(s)});return}}s[h]={status:"fulfilled",value:_},--a===0&&r(s)}for(var c=0;c<s.length;c++)l(c,s[c])})}function K1(i,e){this.name="AggregateError",this.errors=i,this.message=e||""}K1.prototype=Error.prototype;function kS(i){var e=this;return new e(function(r,n){if(!(i&&typeof i.length<"u"))return n(new TypeError("Promise.any accepts an array"));var s=Array.prototype.slice.call(i);if(s.length===0)return n();for(var a=[],l=0;l<s.length;l++)try{e.resolve(s[l]).then(r).catch(function(c){a.push(c),a.length===s.length&&n(new K1(a,"All promises were rejected"))})}catch(c){n(c)}})}var DS=setTimeout;function Q1(i){return!!(i&&typeof i.length<"u")}function NS(){}function FS(i,e){return function(){i.apply(e,arguments)}}function lr(i){if(!(this instanceof lr))throw new TypeError("Promises must be constructed via new");if(typeof i!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],J1(i,this)}function Z1(i,e){for(;i._state===3;)i=i._value;if(i._state===0){i._deferreds.push(e);return}i._handled=!0,lr._immediateFn(function(){var r=i._state===1?e.onFulfilled:e.onRejected;if(r===null){(i._state===1?P_:tc)(e.promise,i._value);return}var n;try{n=r(i._value)}catch(s){tc(e.promise,s);return}P_(e.promise,n)})}function P_(i,e){try{if(e===i)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e=="object"||typeof e=="function")){var r=e.then;if(e instanceof lr){i._state=3,i._value=e,I_(i);return}else if(typeof r=="function"){J1(FS(r,e),i);return}}i._state=1,i._value=e,I_(i)}catch(n){tc(i,n)}}function tc(i,e){i._state=2,i._value=e,I_(i)}function I_(i){i._state===2&&i._deferreds.length===0&&lr._immediateFn(function(){i._handled||lr._unhandledRejectionFn(i._value)});for(var e=0,r=i._deferreds.length;e<r;e++)Z1(i,i._deferreds[e]);i._deferreds=null}function LS(i,e,r){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof e=="function"?e:null,this.promise=r}function J1(i,e){var r=!1;try{i(function(n){r||(r=!0,P_(e,n))},function(n){r||(r=!0,tc(e,n))})}catch(n){if(r)return;r=!0,tc(e,n)}}lr.prototype.catch=function(i){return this.then(null,i)};lr.prototype.then=function(i,e){var r=new this.constructor(NS);return Z1(this,new LS(i,e,r)),r};lr.prototype.finally=RS;lr.all=function(i){return new lr(function(e,r){if(!Q1(i))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(i);if(n.length===0)return e([]);var s=n.length;function a(c,h){try{if(h&&(typeof h=="object"||typeof h=="function")){var _=h.then;if(typeof _=="function"){_.call(h,function(m){a(c,m)},r);return}}n[c]=h,--s===0&&e(n)}catch(m){r(m)}}for(var l=0;l<n.length;l++)a(l,n[l])})};lr.any=kS;lr.allSettled=MS;lr.resolve=function(i){return i&&typeof i=="object"&&i.constructor===lr?i:new lr(function(e){e(i)})};lr.reject=function(i){return new lr(function(e,r){r(i)})};lr.race=function(i){return new lr(function(e,r){if(!Q1(i))return r(new TypeError("Promise.race accepts an array"));for(var n=0,s=i.length;n<s;n++)lr.resolve(i[n]).then(e,r)})};lr._immediateFn=typeof setImmediate=="function"&&function(i){setImmediate(i)}||function(i){DS(i,0)};lr._unhandledRejectionFn=function(e){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Pp,i0;function BS(){if(i0)return Pp;i0=1;var i=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function s(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var l={},c=0;c<10;c++)l["_"+String.fromCharCode(c)]=c;var h=Object.getOwnPropertyNames(l).map(function(m){return l[m]});if(h.join("")!=="0123456789")return!1;var _={};return"abcdefghijklmnopqrst".split("").forEach(function(m){_[m]=m}),Object.keys(Object.assign({},_)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Pp=s()?Object.assign:function(a,l){for(var c,h=n(a),_,m=1;m<arguments.length;m++){c=Object(arguments[m]);for(var f in c)e.call(c,f)&&(h[f]=c[f]);if(i){_=i(c);for(var p=0;p<_.length;p++)r.call(c,_[p])&&(h[_[p]]=c[_[p]])}}return h},Pp}var jS=BS();const US=Fl(jS);/*!
 * @pixi/polyfill - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof global<"u"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=lr);Object.assign||(Object.assign=US);var GS=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var HS=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-HS}}var Ip=Date.now(),s0=["ms","moz","webkit","o"];for(var Op=0;Op<s0.length&&!globalThis.requestAnimationFrame;++Op){var Rp=s0[Op];globalThis.requestAnimationFrame=globalThis[Rp+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[Rp+"CancelAnimationFrame"]||globalThis[Rp+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(i){if(typeof i!="function")throw new TypeError(i+"is not a function");var e=Date.now(),r=GS+Ip-e;return r<0&&(r=0),Ip=e,globalThis.self.setTimeout(function(){Ip=Date.now(),i(performance.now())},r)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(i){return clearTimeout(i)});Math.sign||(Math.sign=function(e){return e=Number(e),e===0||isNaN(e)?e:e>0?1:-1});Number.isInteger||(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/constants - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Fs;(function(i){i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2"})(Fs||(Fs={}));var rc;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS"})(rc||(rc={}));var If;(function(i){i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL"})(If||(If={}));var ct;(function(i){i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR"})(ct||(ct={}));var ti;(function(i){i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(ti||(ti={}));var Le;(function(i){i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.RG=33319]="RG",i[i.RED=6403]="RED",i[i.RGBA_INTEGER=36249]="RGBA_INTEGER",i[i.RGB_INTEGER=36248]="RGB_INTEGER",i[i.RG_INTEGER=33320]="RG_INTEGER",i[i.RED_INTEGER=36244]="RED_INTEGER",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Le||(Le={}));var yo;(function(i){i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(yo||(yo={}));var Ze;(function(i){i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.UNSIGNED_INT=5125]="UNSIGNED_INT",i[i.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",i[i.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",i[i.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",i[i.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",i[i.BYTE=5120]="BYTE",i[i.SHORT=5122]="SHORT",i[i.INT=5124]="INT",i[i.FLOAT=5126]="FLOAT",i[i.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",i[i.HALF_FLOAT=36193]="HALF_FLOAT"})(Ze||(Ze={}));var Of;(function(i){i[i.FLOAT=0]="FLOAT",i[i.INT=1]="INT",i[i.UINT=2]="UINT"})(Of||(Of={}));var Wi;(function(i){i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR"})(Wi||(Wi={}));var Gn;(function(i){i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Gn||(Gn={}));var Ci;(function(i){i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON",i[i.ON_MANUAL=3]="ON_MANUAL"})(Ci||(Ci={}));var Ai;(function(i){i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",i[i.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Ai||(Ai={}));var xi;(function(i){i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT"})(xi||(xi={}));var Rf;(function(i){i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL"})(Rf||(Rf={}));var jn;(function(i){i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp"})(jn||(jn={}));var Tr;(function(i){i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE",i[i.COLOR=4]="COLOR"})(Tr||(Tr={}));var a0;(function(i){i[i.RED=1]="RED",i[i.GREEN=2]="GREEN",i[i.BLUE=4]="BLUE",i[i.ALPHA=8]="ALPHA"})(a0||(a0={}));var tr;(function(i){i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH"})(tr||(tr={}));var Ki;(function(i){i[i.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",i[i.ARRAY_BUFFER=34962]="ARRAY_BUFFER",i[i.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Ki||(Ki={}));/*!
 * @pixi/settings - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var zS={createCanvas:function(i,e){var r=document.createElement("canvas");return r.width=i,r.height=e,r},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var i;return(i=document.baseURI)!==null&&i!==void 0?i:window.location.href},fetch:function(i,e){return fetch(i,e)}},Mp=/iPhone/i,o0=/iPod/i,l0=/iPad/i,u0=/\biOS-universal(?:.+)Mac\b/i,kp=/\bAndroid(?:.+)Mobile\b/i,c0=/Android/i,_l=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Fh=/Silk/i,Ts=/Windows Phone/i,h0=/\bWindows(?:.+)ARM\b/i,f0=/BlackBerry/i,d0=/BB10/i,p0=/Opera Mini/i,v0=/\b(CriOS|Chrome)(?:.+)Mobile/i,_0=/Mobile(?:.+)Firefox\b/i,m0=function(i){return typeof i<"u"&&i.platform==="MacIntel"&&typeof i.maxTouchPoints=="number"&&i.maxTouchPoints>1&&typeof MSStream>"u"};function XS(i){return function(e){return e.test(i)}}function VS(i){var e={userAgent:"",platform:"",maxTouchPoints:0};!i&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof i=="string"?e.userAgent=i:i&&i.userAgent&&(e={userAgent:i.userAgent,platform:i.platform,maxTouchPoints:i.maxTouchPoints||0});var r=e.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var s=XS(r),a={apple:{phone:s(Mp)&&!s(Ts),ipod:s(o0),tablet:!s(Mp)&&(s(l0)||m0(e))&&!s(Ts),universal:s(u0),device:(s(Mp)||s(o0)||s(l0)||s(u0)||m0(e))&&!s(Ts)},amazon:{phone:s(_l),tablet:!s(_l)&&s(Fh),device:s(_l)||s(Fh)},android:{phone:!s(Ts)&&s(_l)||!s(Ts)&&s(kp),tablet:!s(Ts)&&!s(_l)&&!s(kp)&&(s(Fh)||s(c0)),device:!s(Ts)&&(s(_l)||s(Fh)||s(kp)||s(c0))||s(/\bokhttp\b/i)},windows:{phone:s(Ts),tablet:s(h0),device:s(Ts)||s(h0)},other:{blackberry:s(f0),blackberry10:s(d0),opera:s(p0),firefox:s(_0),chrome:s(v0),device:s(f0)||s(d0)||s(p0)||s(_0)||s(v0)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}var $i=VS(globalThis.navigator);function qS(){return!$i.apple.device}function WS(i){var e=!0;if($i.tablet||$i.phone){if($i.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var n=parseInt(r[1],10);n<11&&(e=!1)}}if($i.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var n=parseInt(r[1],10);n<7&&(e=!1)}}}return e?i:4}var Xe={ADAPTER:zS,MIPMAP_TEXTURES:Ci.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:tr.NONE,SPRITE_MAX_TEXTURES:WS(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:Rf.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:Gn.CLAMP,SCALE_MODE:Wi.LINEAR,PRECISION_VERTEX:jn.HIGH,PRECISION_FRAGMENT:$i.apple.device?jn.HIGH:jn.MEDIUM,CAN_UPLOAD_SAME_BUFFER:qS(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Dp={exports:{}},y0;function $S(){return y0||(y0=1,function(i){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(h,_,m){this.fn=h,this.context=_,this.once=m||!1}function a(h,_,m,f,p){if(typeof m!="function")throw new TypeError("The listener must be a function");var y=new s(m,f||h,p),b=r?r+_:_;return h._events[b]?h._events[b].fn?h._events[b]=[h._events[b],y]:h._events[b].push(y):(h._events[b]=y,h._eventsCount++),h}function l(h,_){--h._eventsCount===0?h._events=new n:delete h._events[_]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var _=[],m,f;if(this._eventsCount===0)return _;for(f in m=this._events)e.call(m,f)&&_.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(m)):_},c.prototype.listeners=function(_){var m=r?r+_:_,f=this._events[m];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,y=f.length,b=new Array(y);p<y;p++)b[p]=f[p].fn;return b},c.prototype.listenerCount=function(_){var m=r?r+_:_,f=this._events[m];return f?f.fn?1:f.length:0},c.prototype.emit=function(_,m,f,p,y,b){var T=r?r+_:_;if(!this._events[T])return!1;var S=this._events[T],A=arguments.length,R,L;if(S.fn){switch(S.once&&this.removeListener(_,S.fn,void 0,!0),A){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,m),!0;case 3:return S.fn.call(S.context,m,f),!0;case 4:return S.fn.call(S.context,m,f,p),!0;case 5:return S.fn.call(S.context,m,f,p,y),!0;case 6:return S.fn.call(S.context,m,f,p,y,b),!0}for(L=1,R=new Array(A-1);L<A;L++)R[L-1]=arguments[L];S.fn.apply(S.context,R)}else{var V=S.length,M;for(L=0;L<V;L++)switch(S[L].once&&this.removeListener(_,S[L].fn,void 0,!0),A){case 1:S[L].fn.call(S[L].context);break;case 2:S[L].fn.call(S[L].context,m);break;case 3:S[L].fn.call(S[L].context,m,f);break;case 4:S[L].fn.call(S[L].context,m,f,p);break;default:if(!R)for(M=1,R=new Array(A-1);M<A;M++)R[M-1]=arguments[M];S[L].fn.apply(S[L].context,R)}}return!0},c.prototype.on=function(_,m,f){return a(this,_,m,f,!1)},c.prototype.once=function(_,m,f){return a(this,_,m,f,!0)},c.prototype.removeListener=function(_,m,f,p){var y=r?r+_:_;if(!this._events[y])return this;if(!m)return l(this,y),this;var b=this._events[y];if(b.fn)b.fn===m&&(!p||b.once)&&(!f||b.context===f)&&l(this,y);else{for(var T=0,S=[],A=b.length;T<A;T++)(b[T].fn!==m||p&&!b[T].once||f&&b[T].context!==f)&&S.push(b[T]);S.length?this._events[y]=S.length===1?S[0]:S:l(this,y)}return this},c.prototype.removeAllListeners=function(_){var m;return _?(m=r?r+_:_,this._events[m]&&l(this,m)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,i.exports=c}(Dp)),Dp.exports}var YS=$S();const fc=Fl(YS);var Lh={exports:{}},g0;function KS(){if(g0)return Lh.exports;g0=1,Lh.exports=i,Lh.exports.default=i;function i(U,W,z){z=z||2;var Q=W&&W.length,$=Q?W[0]*z:U.length,j=e(U,0,$,z,!0),N=[];if(!j||j.next===j.prev)return N;var q,oe,de,Te,Ae,Ie,ke;if(Q&&(j=h(U,W,j,z)),U.length>80*z){q=de=U[0],oe=Te=U[1];for(var Ce=z;Ce<$;Ce+=z)Ae=U[Ce],Ie=U[Ce+1],Ae<q&&(q=Ae),Ie<oe&&(oe=Ie),Ae>de&&(de=Ae),Ie>Te&&(Te=Ie);ke=Math.max(de-q,Te-oe),ke=ke!==0?32767/ke:0}return n(j,N,z,q,oe,ke,0),N}function e(U,W,z,Q,$){var j,N;if($===Z(U,W,z,Q)>0)for(j=W;j<z;j+=Q)N=re(j,U[j],U[j+1],N);else for(j=z-Q;j>=W;j-=Q)N=re(j,U[j],U[j+1],N);return N&&V(N,N.next)&&(he(N),N=N.next),N}function r(U,W){if(!U)return U;W||(W=U);var z=U,Q;do if(Q=!1,!z.steiner&&(V(z,z.next)||L(z.prev,z,z.next)===0)){if(he(z),z=W=z.prev,z===z.next)break;Q=!0}else z=z.next;while(Q||z!==W);return W}function n(U,W,z,Q,$,j,N){if(U){!N&&j&&y(U,Q,$,j);for(var q=U,oe,de;U.prev!==U.next;){if(oe=U.prev,de=U.next,j?a(U,Q,$,j):s(U)){W.push(oe.i/z|0),W.push(U.i/z|0),W.push(de.i/z|0),he(U),U=de.next,q=de.next;continue}if(U=de,U===q){N?N===1?(U=l(r(U),W,z),n(U,W,z,Q,$,j,2)):N===2&&c(U,W,z,Q,$,j):n(r(U),W,z,Q,$,j,1);break}}}}function s(U){var W=U.prev,z=U,Q=U.next;if(L(W,z,Q)>=0)return!1;for(var $=W.x,j=z.x,N=Q.x,q=W.y,oe=z.y,de=Q.y,Te=$<j?$<N?$:N:j<N?j:N,Ae=q<oe?q<de?q:de:oe<de?oe:de,Ie=$>j?$>N?$:N:j>N?j:N,ke=q>oe?q>de?q:de:oe>de?oe:de,Ce=Q.next;Ce!==W;){if(Ce.x>=Te&&Ce.x<=Ie&&Ce.y>=Ae&&Ce.y<=ke&&A($,q,j,oe,N,de,Ce.x,Ce.y)&&L(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.next}return!0}function a(U,W,z,Q){var $=U.prev,j=U,N=U.next;if(L($,j,N)>=0)return!1;for(var q=$.x,oe=j.x,de=N.x,Te=$.y,Ae=j.y,Ie=N.y,ke=q<oe?q<de?q:de:oe<de?oe:de,Ce=Te<Ae?Te<Ie?Te:Ie:Ae<Ie?Ae:Ie,He=q>oe?q>de?q:de:oe>de?oe:de,Ge=Te>Ae?Te>Ie?Te:Ie:Ae>Ie?Ae:Ie,rt=T(ke,Ce,W,z,Q),qe=T(He,Ge,W,z,Q),Ve=U.prevZ,Ue=U.nextZ;Ve&&Ve.z>=rt&&Ue&&Ue.z<=qe;){if(Ve.x>=ke&&Ve.x<=He&&Ve.y>=Ce&&Ve.y<=Ge&&Ve!==$&&Ve!==N&&A(q,Te,oe,Ae,de,Ie,Ve.x,Ve.y)&&L(Ve.prev,Ve,Ve.next)>=0||(Ve=Ve.prevZ,Ue.x>=ke&&Ue.x<=He&&Ue.y>=Ce&&Ue.y<=Ge&&Ue!==$&&Ue!==N&&A(q,Te,oe,Ae,de,Ie,Ue.x,Ue.y)&&L(Ue.prev,Ue,Ue.next)>=0))return!1;Ue=Ue.nextZ}for(;Ve&&Ve.z>=rt;){if(Ve.x>=ke&&Ve.x<=He&&Ve.y>=Ce&&Ve.y<=Ge&&Ve!==$&&Ve!==N&&A(q,Te,oe,Ae,de,Ie,Ve.x,Ve.y)&&L(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.prevZ}for(;Ue&&Ue.z<=qe;){if(Ue.x>=ke&&Ue.x<=He&&Ue.y>=Ce&&Ue.y<=Ge&&Ue!==$&&Ue!==N&&A(q,Te,oe,Ae,de,Ie,Ue.x,Ue.y)&&L(Ue.prev,Ue,Ue.next)>=0)return!1;Ue=Ue.nextZ}return!0}function l(U,W,z){var Q=U;do{var $=Q.prev,j=Q.next.next;!V($,j)&&M($,Q,Q.next,j)&&B($,j)&&B(j,$)&&(W.push($.i/z|0),W.push(Q.i/z|0),W.push(j.i/z|0),he(Q),he(Q.next),Q=U=j),Q=Q.next}while(Q!==U);return r(Q)}function c(U,W,z,Q,$,j){var N=U;do{for(var q=N.next.next;q!==N.prev;){if(N.i!==q.i&&R(N,q)){var oe=se(N,q);N=r(N,N.next),oe=r(oe,oe.next),n(N,W,z,Q,$,j,0),n(oe,W,z,Q,$,j,0);return}q=q.next}N=N.next}while(N!==U)}function h(U,W,z,Q){var $=[],j,N,q,oe,de;for(j=0,N=W.length;j<N;j++)q=W[j]*Q,oe=j<N-1?W[j+1]*Q:U.length,de=e(U,q,oe,Q,!1),de===de.next&&(de.steiner=!0),$.push(S(de));for($.sort(_),j=0;j<$.length;j++)z=m($[j],z);return z}function _(U,W){return U.x-W.x}function m(U,W){var z=f(U,W);if(!z)return W;var Q=se(z,U);return r(Q,Q.next),r(z,z.next)}function f(U,W){var z=W,Q=U.x,$=U.y,j=-1/0,N;do{if($<=z.y&&$>=z.next.y&&z.next.y!==z.y){var q=z.x+($-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(q<=Q&&q>j&&(j=q,N=z.x<z.next.x?z:z.next,q===Q))return N}z=z.next}while(z!==W);if(!N)return null;var oe=N,de=N.x,Te=N.y,Ae=1/0,Ie;z=N;do Q>=z.x&&z.x>=de&&Q!==z.x&&A($<Te?Q:j,$,de,Te,$<Te?j:Q,$,z.x,z.y)&&(Ie=Math.abs($-z.y)/(Q-z.x),B(z,U)&&(Ie<Ae||Ie===Ae&&(z.x>N.x||z.x===N.x&&p(N,z)))&&(N=z,Ae=Ie)),z=z.next;while(z!==oe);return N}function p(U,W){return L(U.prev,U,W.prev)<0&&L(W.next,U,U.next)<0}function y(U,W,z,Q){var $=U;do $.z===0&&($.z=T($.x,$.y,W,z,Q)),$.prevZ=$.prev,$.nextZ=$.next,$=$.next;while($!==U);$.prevZ.nextZ=null,$.prevZ=null,b($)}function b(U){var W,z,Q,$,j,N,q,oe,de=1;do{for(z=U,U=null,j=null,N=0;z;){for(N++,Q=z,q=0,W=0;W<de&&(q++,Q=Q.nextZ,!!Q);W++);for(oe=de;q>0||oe>0&&Q;)q!==0&&(oe===0||!Q||z.z<=Q.z)?($=z,z=z.nextZ,q--):($=Q,Q=Q.nextZ,oe--),j?j.nextZ=$:U=$,$.prevZ=j,j=$;z=Q}j.nextZ=null,de*=2}while(N>1);return U}function T(U,W,z,Q,$){return U=(U-z)*$|0,W=(W-Q)*$|0,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,W=(W|W<<8)&16711935,W=(W|W<<4)&252645135,W=(W|W<<2)&858993459,W=(W|W<<1)&1431655765,U|W<<1}function S(U){var W=U,z=U;do(W.x<z.x||W.x===z.x&&W.y<z.y)&&(z=W),W=W.next;while(W!==U);return z}function A(U,W,z,Q,$,j,N,q){return($-N)*(W-q)>=(U-N)*(j-q)&&(U-N)*(Q-q)>=(z-N)*(W-q)&&(z-N)*(j-q)>=($-N)*(Q-q)}function R(U,W){return U.next.i!==W.i&&U.prev.i!==W.i&&!ne(U,W)&&(B(U,W)&&B(W,U)&&Y(U,W)&&(L(U.prev,U,W.prev)||L(U,W.prev,W))||V(U,W)&&L(U.prev,U,U.next)>0&&L(W.prev,W,W.next)>0)}function L(U,W,z){return(W.y-U.y)*(z.x-W.x)-(W.x-U.x)*(z.y-W.y)}function V(U,W){return U.x===W.x&&U.y===W.y}function M(U,W,z,Q){var $=g(L(U,W,z)),j=g(L(U,W,Q)),N=g(L(z,Q,U)),q=g(L(z,Q,W));return!!($!==j&&N!==q||$===0&&H(U,z,W)||j===0&&H(U,Q,W)||N===0&&H(z,U,Q)||q===0&&H(z,W,Q))}function H(U,W,z){return W.x<=Math.max(U.x,z.x)&&W.x>=Math.min(U.x,z.x)&&W.y<=Math.max(U.y,z.y)&&W.y>=Math.min(U.y,z.y)}function g(U){return U>0?1:U<0?-1:0}function ne(U,W){var z=U;do{if(z.i!==U.i&&z.next.i!==U.i&&z.i!==W.i&&z.next.i!==W.i&&M(z,z.next,U,W))return!0;z=z.next}while(z!==U);return!1}function B(U,W){return L(U.prev,U,U.next)<0?L(U,W,U.next)>=0&&L(U,U.prev,W)>=0:L(U,W,U.prev)<0||L(U,U.next,W)<0}function Y(U,W){var z=U,Q=!1,$=(U.x+W.x)/2,j=(U.y+W.y)/2;do z.y>j!=z.next.y>j&&z.next.y!==z.y&&$<(z.next.x-z.x)*(j-z.y)/(z.next.y-z.y)+z.x&&(Q=!Q),z=z.next;while(z!==U);return Q}function se(U,W){var z=new xe(U.i,U.x,U.y),Q=new xe(W.i,W.x,W.y),$=U.next,j=W.prev;return U.next=W,W.prev=U,z.next=$,$.prev=z,Q.next=z,z.prev=Q,j.next=Q,Q.prev=j,Q}function re(U,W,z,Q){var $=new xe(U,W,z);return Q?($.next=Q.next,$.prev=Q,Q.next.prev=$,Q.next=$):($.prev=$,$.next=$),$}function he(U){U.next.prev=U.prev,U.prev.next=U.next,U.prevZ&&(U.prevZ.nextZ=U.nextZ),U.nextZ&&(U.nextZ.prevZ=U.prevZ)}function xe(U,W,z){this.i=U,this.x=W,this.y=z,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}i.deviation=function(U,W,z,Q){var $=W&&W.length,j=$?W[0]*z:U.length,N=Math.abs(Z(U,0,j,z));if($)for(var q=0,oe=W.length;q<oe;q++){var de=W[q]*z,Te=q<oe-1?W[q+1]*z:U.length;N-=Math.abs(Z(U,de,Te,z))}var Ae=0;for(q=0;q<Q.length;q+=3){var Ie=Q[q]*z,ke=Q[q+1]*z,Ce=Q[q+2]*z;Ae+=Math.abs((U[Ie]-U[Ce])*(U[ke+1]-U[Ie+1])-(U[Ie]-U[ke])*(U[Ce+1]-U[Ie+1]))}return N===0&&Ae===0?0:Math.abs((Ae-N)/N)};function Z(U,W,z,Q){for(var $=0,j=W,N=z-Q;j<z;j+=Q)$+=(U[N]-U[j])*(U[j+1]+U[N+1]),N=j;return $}return i.flatten=function(U){for(var W=U[0][0].length,z={vertices:[],holes:[],dimensions:W},Q=0,$=0;$<U.length;$++){for(var j=0;j<U[$].length;j++)for(var N=0;N<W;N++)z.vertices.push(U[$][j][N]);$>0&&(Q+=U[$-1].length,z.holes.push(Q))}return z},Lh.exports}var QS=KS();const eb=Fl(QS);var eo={},Lu={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var ZS=Lu.exports,x0;function JS(){return x0||(x0=1,function(i,e){(function(r){var n=e&&!e.nodeType&&e,s=i&&!i.nodeType&&i,a=typeof As=="object"&&As;(a.global===a||a.window===a||a.self===a)&&(r=a);var l,c=2147483647,h=36,_=1,m=26,f=38,p=700,y=72,b=128,T="-",S=/^xn--/,A=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},V=h-_,M=Math.floor,H=String.fromCharCode,g;function ne($){throw new RangeError(L[$])}function B($,j){for(var N=$.length,q=[];N--;)q[N]=j($[N]);return q}function Y($,j){var N=$.split("@"),q="";N.length>1&&(q=N[0]+"@",$=N[1]),$=$.replace(R,".");var oe=$.split("."),de=B(oe,j).join(".");return q+de}function se($){for(var j=[],N=0,q=$.length,oe,de;N<q;)oe=$.charCodeAt(N++),oe>=55296&&oe<=56319&&N<q?(de=$.charCodeAt(N++),(de&64512)==56320?j.push(((oe&1023)<<10)+(de&1023)+65536):(j.push(oe),N--)):j.push(oe);return j}function re($){return B($,function(j){var N="";return j>65535&&(j-=65536,N+=H(j>>>10&1023|55296),j=56320|j&1023),N+=H(j),N}).join("")}function he($){return $-48<10?$-22:$-65<26?$-65:$-97<26?$-97:h}function xe($,j){return $+22+75*($<26)-((j!=0)<<5)}function Z($,j,N){var q=0;for($=N?M($/p):$>>1,$+=M($/j);$>V*m>>1;q+=h)$=M($/V);return M(q+(V+1)*$/($+f))}function U($){var j=[],N=$.length,q,oe=0,de=b,Te=y,Ae,Ie,ke,Ce,He,Ge,rt,qe,Ve;for(Ae=$.lastIndexOf(T),Ae<0&&(Ae=0),Ie=0;Ie<Ae;++Ie)$.charCodeAt(Ie)>=128&&ne("not-basic"),j.push($.charCodeAt(Ie));for(ke=Ae>0?Ae+1:0;ke<N;){for(Ce=oe,He=1,Ge=h;ke>=N&&ne("invalid-input"),rt=he($.charCodeAt(ke++)),(rt>=h||rt>M((c-oe)/He))&&ne("overflow"),oe+=rt*He,qe=Ge<=Te?_:Ge>=Te+m?m:Ge-Te,!(rt<qe);Ge+=h)Ve=h-qe,He>M(c/Ve)&&ne("overflow"),He*=Ve;q=j.length+1,Te=Z(oe-Ce,q,Ce==0),M(oe/q)>c-de&&ne("overflow"),de+=M(oe/q),oe%=q,j.splice(oe++,0,de)}return re(j)}function W($){var j,N,q,oe,de,Te,Ae,Ie,ke,Ce,He,Ge=[],rt,qe,Ve,Ue;for($=se($),rt=$.length,j=b,N=0,de=y,Te=0;Te<rt;++Te)He=$[Te],He<128&&Ge.push(H(He));for(q=oe=Ge.length,oe&&Ge.push(T);q<rt;){for(Ae=c,Te=0;Te<rt;++Te)He=$[Te],He>=j&&He<Ae&&(Ae=He);for(qe=q+1,Ae-j>M((c-N)/qe)&&ne("overflow"),N+=(Ae-j)*qe,j=Ae,Te=0;Te<rt;++Te)if(He=$[Te],He<j&&++N>c&&ne("overflow"),He==j){for(Ie=N,ke=h;Ce=ke<=de?_:ke>=de+m?m:ke-de,!(Ie<Ce);ke+=h)Ue=Ie-Ce,Ve=h-Ce,Ge.push(H(xe(Ce+Ue%Ve,0))),Ie=M(Ue/Ve);Ge.push(H(xe(Ie,0))),de=Z(N,qe,q==oe),N=0,++q}++N,++j}return Ge.join("")}function z($){return Y($,function(j){return S.test(j)?U(j.slice(4).toLowerCase()):j})}function Q($){return Y($,function(j){return A.test(j)?"xn--"+W(j):j})}if(l={version:"1.4.1",ucs2:{decode:se,encode:re},decode:U,encode:W,toASCII:Q,toUnicode:z},n&&s)if(i.exports==n)s.exports=l;else for(g in l)l.hasOwnProperty(g)&&(n[g]=l[g]);else r.punycode=l})(ZS)}(Lu,Lu.exports)),Lu.exports}var Np,b0;function jl(){return b0||(b0=1,Np=TypeError),Np}const eE={},tb=Object.freeze(Object.defineProperty({__proto__:null,default:eE},Symbol.toStringTag,{value:"Module"})),tE=IT(tb);var Fp,w0;function qf(){if(w0)return Fp;w0=1;var i=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=i&&e&&typeof e.get=="function"?e.get:null,n=i&&Map.prototype.forEach,s=typeof Set=="function"&&Set.prototype,a=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=s&&a&&typeof a.get=="function"?a.get:null,c=s&&Set.prototype.forEach,h=typeof WeakMap=="function"&&WeakMap.prototype,_=h?WeakMap.prototype.has:null,m=typeof WeakSet=="function"&&WeakSet.prototype,f=m?WeakSet.prototype.has:null,p=typeof WeakRef=="function"&&WeakRef.prototype,y=p?WeakRef.prototype.deref:null,b=Boolean.prototype.valueOf,T=Object.prototype.toString,S=Function.prototype.toString,A=String.prototype.match,R=String.prototype.slice,L=String.prototype.replace,V=String.prototype.toUpperCase,M=String.prototype.toLowerCase,H=RegExp.prototype.test,g=Array.prototype.concat,ne=Array.prototype.join,B=Array.prototype.slice,Y=Math.floor,se=typeof BigInt=="function"?BigInt.prototype.valueOf:null,re=Object.getOwnPropertySymbols,he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,xe=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Z=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===xe||!0)?Symbol.toStringTag:null,U=Object.prototype.propertyIsEnumerable,W=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(ve){return ve.__proto__}:null);function z(ve,ye){if(ve===1/0||ve===-1/0||ve!==ve||ve&&ve>-1e3&&ve<1e3||H.call(/e/,ye))return ye;var St=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof ve=="number"){var Mt=ve<0?-Y(-ve):Y(ve);if(Mt!==ve){var Nt=String(Mt),at=R.call(ye,Nt.length+1);return L.call(Nt,St,"$&_")+"."+L.call(L.call(at,/([0-9]{3})/g,"$&_"),/_$/,"")}}return L.call(ye,St,"$&_")}var Q=tE,$=Q.custom,j=qe($)?$:null,N={__proto__:null,double:'"',single:"'"},q={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Fp=function ve(ye,St,Mt,Nt){var at=St||{};if(nt(at,"quoteStyle")&&!nt(N,at.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(nt(at,"maxStringLength")&&(typeof at.maxStringLength=="number"?at.maxStringLength<0&&at.maxStringLength!==1/0:at.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var fr=nt(at,"customInspect")?at.customInspect:!0;if(typeof fr!="boolean"&&fr!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(nt(at,"indent")&&at.indent!==null&&at.indent!=="	"&&!(parseInt(at.indent,10)===at.indent&&at.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(nt(at,"numericSeparator")&&typeof at.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var An=at.numericSeparator;if(typeof ye>"u")return"undefined";if(ye===null)return"null";if(typeof ye=="boolean")return ye?"true":"false";if(typeof ye=="string")return Us(ye,at);if(typeof ye=="number"){if(ye===0)return 1/0/ye>0?"0":"-0";var Ar=String(ye);return An?z(ye,Ar):Ar}if(typeof ye=="bigint"){var Kt=String(ye)+"n";return An?z(ye,Kt):Kt}var dr=typeof at.depth>"u"?5:at.depth;if(typeof Mt>"u"&&(Mt=0),Mt>=dr&&dr>0&&typeof ye=="object")return Ae(ye)?"[Array]":"[Object]";var Pn=dn(at,Mt);if(typeof Nt>"u")Nt=[];else if(hr(Nt,ye)>=0)return"[Circular]";function Hr(On,ai,ns){if(ai&&(Nt=B.call(Nt),Nt.push(ai)),ns){var Vs={depth:at.depth};return nt(at,"quoteStyle")&&(Vs.quoteStyle=at.quoteStyle),ve(On,Vs,Mt+1,Nt)}return ve(On,at,Mt+1,Nt)}if(typeof ye=="function"&&!ke(ye)){var Hs=Er(ye),ii=Cn(ye,Hr);return"[Function"+(Hs?": "+Hs:" (anonymous)")+"]"+(ii.length>0?" { "+ne.call(ii,", ")+" }":"")}if(qe(ye)){var In=xe?L.call(String(ye),/^(Symbol\(.*\))_[^)]*$/,"$1"):he.call(ye);return typeof ye=="object"&&!xe?Pi(In):In}if(Cr(ye)){for(var Fr="<"+M.call(String(ye.nodeName)),rs=ye.attributes||[],sn=0;sn<rs.length;sn++)Fr+=" "+rs[sn].name+"="+oe(de(rs[sn].value),"double",at);return Fr+=">",ye.childNodes&&ye.childNodes.length&&(Fr+="..."),Fr+="</"+M.call(String(ye.nodeName))+">",Fr}if(Ae(ye)){if(ye.length===0)return"[]";var Ii=Cn(ye,Hr);return Pn&&!ts(Ii)?"["+pn(Ii,Pn)+"]":"[ "+ne.call(Ii,", ")+" ]"}if(Ce(ye)){var Oi=Cn(ye,Hr);return!("cause"in Error.prototype)&&"cause"in ye&&!U.call(ye,"cause")?"{ ["+String(ye)+"] "+ne.call(g.call("[cause]: "+Hr(ye.cause),Oi),", ")+" }":Oi.length===0?"["+String(ye)+"]":"{ ["+String(ye)+"] "+ne.call(Oi,", ")+" }"}if(typeof ye=="object"&&fr){if(j&&typeof ye[j]=="function"&&Q)return Q(ye,{depth:dr-Mt});if(fr!=="symbol"&&typeof ye.inspect=="function")return ye.inspect()}if(nr(ye)){var zs=[];return n&&n.call(ye,function(On,ai){zs.push(Hr(ai,ye,!0)+" => "+Hr(On,ye))}),ni("Map",r.call(ye),zs,Pn)}if(Nr(ye)){var Ia=[];return c&&c.call(ye,function(On){Ia.push(Hr(On,ye))}),ni("Set",l.call(ye),Ia,Pn)}if(Yt(ye))return zn("WeakMap");if(Je(ye))return zn("WeakSet");if(Dr(ye))return zn("WeakRef");if(Ge(ye))return Pi(Hr(Number(ye)));if(Ve(ye))return Pi(Hr(se.call(ye)));if(rt(ye))return Pi(b.call(ye));if(He(ye))return Pi(Hr(String(ye)));if(typeof window<"u"&&ye===window)return"{ [object Window] }";if(typeof globalThis<"u"&&ye===globalThis||typeof As<"u"&&ye===As)return"{ [object globalThis] }";if(!Ie(ye)&&!ke(ye)){var Oa=Cn(ye,Hr),Mo=W?W(ye)===Object.prototype:ye instanceof Object||ye.constructor===Object,vn=ye instanceof Object?"":"null prototype",Ra=!Mo&&Z&&Object(ye)===ye&&Z in ye?R.call(Tt(ye),8,-1):vn?"Object":"",si=Mo||typeof ye.constructor!="function"?"":ye.constructor.name?ye.constructor.name+" ":"",Xs=si+(Ra||vn?"["+ne.call(g.call([],Ra||[],vn||[]),": ")+"] ":"");return Oa.length===0?Xs+"{}":Pn?Xs+"{"+pn(Oa,Pn)+"}":Xs+"{ "+ne.call(Oa,", ")+" }"}return String(ye)};function oe(ve,ye,St){var Mt=St.quoteStyle||ye,Nt=N[Mt];return Nt+ve+Nt}function de(ve){return L.call(String(ve),/"/g,"&quot;")}function Te(ve){return!Z||!(typeof ve=="object"&&(Z in ve||typeof ve[Z]<"u"))}function Ae(ve){return Tt(ve)==="[object Array]"&&Te(ve)}function Ie(ve){return Tt(ve)==="[object Date]"&&Te(ve)}function ke(ve){return Tt(ve)==="[object RegExp]"&&Te(ve)}function Ce(ve){return Tt(ve)==="[object Error]"&&Te(ve)}function He(ve){return Tt(ve)==="[object String]"&&Te(ve)}function Ge(ve){return Tt(ve)==="[object Number]"&&Te(ve)}function rt(ve){return Tt(ve)==="[object Boolean]"&&Te(ve)}function qe(ve){if(xe)return ve&&typeof ve=="object"&&ve instanceof Symbol;if(typeof ve=="symbol")return!0;if(!ve||typeof ve!="object"||!he)return!1;try{return he.call(ve),!0}catch{}return!1}function Ve(ve){if(!ve||typeof ve!="object"||!se)return!1;try{return se.call(ve),!0}catch{}return!1}var Ue=Object.prototype.hasOwnProperty||function(ve){return ve in this};function nt(ve,ye){return Ue.call(ve,ye)}function Tt(ve){return T.call(ve)}function Er(ve){if(ve.name)return ve.name;var ye=A.call(S.call(ve),/^function\s*([\w$]+)/);return ye?ye[1]:null}function hr(ve,ye){if(ve.indexOf)return ve.indexOf(ye);for(var St=0,Mt=ve.length;St<Mt;St++)if(ve[St]===ye)return St;return-1}function nr(ve){if(!r||!ve||typeof ve!="object")return!1;try{r.call(ve);try{l.call(ve)}catch{return!0}return ve instanceof Map}catch{}return!1}function Yt(ve){if(!_||!ve||typeof ve!="object")return!1;try{_.call(ve,_);try{f.call(ve,f)}catch{return!0}return ve instanceof WeakMap}catch{}return!1}function Dr(ve){if(!y||!ve||typeof ve!="object")return!1;try{return y.call(ve),!0}catch{}return!1}function Nr(ve){if(!l||!ve||typeof ve!="object")return!1;try{l.call(ve);try{r.call(ve)}catch{return!0}return ve instanceof Set}catch{}return!1}function Je(ve){if(!f||!ve||typeof ve!="object")return!1;try{f.call(ve,f);try{_.call(ve,_)}catch{return!0}return ve instanceof WeakSet}catch{}return!1}function Cr(ve){return!ve||typeof ve!="object"?!1:typeof HTMLElement<"u"&&ve instanceof HTMLElement?!0:typeof ve.nodeName=="string"&&typeof ve.getAttribute=="function"}function Us(ve,ye){if(ve.length>ye.maxStringLength){var St=ve.length-ye.maxStringLength,Mt="... "+St+" more character"+(St>1?"s":"");return Us(R.call(ve,0,ye.maxStringLength),ye)+Mt}var Nt=q[ye.quoteStyle||"single"];Nt.lastIndex=0;var at=L.call(L.call(ve,Nt,"\\$1"),/[\x00-\x1f]/g,Gs);return oe(at,"single",ye)}function Gs(ve){var ye=ve.charCodeAt(0),St={8:"b",9:"t",10:"n",12:"f",13:"r"}[ye];return St?"\\"+St:"\\x"+(ye<16?"0":"")+V.call(ye.toString(16))}function Pi(ve){return"Object("+ve+")"}function zn(ve){return ve+" { ? }"}function ni(ve,ye,St,Mt){var Nt=Mt?pn(St,Mt):ne.call(St,", ");return ve+" ("+ye+") {"+Nt+"}"}function ts(ve){for(var ye=0;ye<ve.length;ye++)if(hr(ve[ye],`
`)>=0)return!1;return!0}function dn(ve,ye){var St;if(ve.indent==="	")St="	";else if(typeof ve.indent=="number"&&ve.indent>0)St=ne.call(Array(ve.indent+1)," ");else return null;return{base:St,prev:ne.call(Array(ye+1),St)}}function pn(ve,ye){if(ve.length===0)return"";var St=`
`+ye.prev+ye.base;return St+ne.call(ve,","+St)+`
`+ye.prev}function Cn(ve,ye){var St=Ae(ve),Mt=[];if(St){Mt.length=ve.length;for(var Nt=0;Nt<ve.length;Nt++)Mt[Nt]=nt(ve,Nt)?ye(ve[Nt],ve):""}var at=typeof re=="function"?re(ve):[],fr;if(xe){fr={};for(var An=0;An<at.length;An++)fr["$"+at[An]]=at[An]}for(var Ar in ve)nt(ve,Ar)&&(St&&String(Number(Ar))===Ar&&Ar<ve.length||xe&&fr["$"+Ar]instanceof Symbol||(H.call(/[^\w$]/,Ar)?Mt.push(ye(Ar,ve)+": "+ye(ve[Ar],ve)):Mt.push(Ar+": "+ye(ve[Ar],ve))));if(typeof re=="function")for(var Kt=0;Kt<at.length;Kt++)U.call(ve,at[Kt])&&Mt.push("["+ye(at[Kt])+"]: "+ye(ve[at[Kt]],ve));return Mt}return Fp}var Lp,T0;function rE(){if(T0)return Lp;T0=1;var i=qf(),e=jl(),r=function(c,h,_){for(var m=c,f;(f=m.next)!=null;m=f)if(f.key===h)return m.next=f.next,_||(f.next=c.next,c.next=f),f},n=function(c,h){if(c){var _=r(c,h);return _&&_.value}},s=function(c,h,_){var m=r(c,h);m?m.value=_:c.next={key:h,next:c.next,value:_}},a=function(c,h){return c?!!r(c,h):!1},l=function(c,h){if(c)return r(c,h,!0)};return Lp=function(){var h,_={assert:function(m){if(!_.has(m))throw new e("Side channel does not contain "+i(m))},delete:function(m){var f=h&&h.next,p=l(h,m);return p&&f&&f===p&&(h=void 0),!!p},get:function(m){return n(h,m)},has:function(m){return a(h,m)},set:function(m,f){h||(h={next:void 0}),s(h,m,f)}};return _},Lp}var Bp,S0;function rb(){return S0||(S0=1,Bp=Object),Bp}var jp,E0;function nE(){return E0||(E0=1,jp=Error),jp}var Up,C0;function iE(){return C0||(C0=1,Up=EvalError),Up}var Gp,A0;function sE(){return A0||(A0=1,Gp=RangeError),Gp}var Hp,P0;function aE(){return P0||(P0=1,Hp=ReferenceError),Hp}var zp,I0;function oE(){return I0||(I0=1,zp=SyntaxError),zp}var Xp,O0;function lE(){return O0||(O0=1,Xp=URIError),Xp}var Vp,R0;function uE(){return R0||(R0=1,Vp=Math.abs),Vp}var qp,M0;function cE(){return M0||(M0=1,qp=Math.floor),qp}var Wp,k0;function hE(){return k0||(k0=1,Wp=Math.max),Wp}var $p,D0;function fE(){return D0||(D0=1,$p=Math.min),$p}var Yp,N0;function dE(){return N0||(N0=1,Yp=Math.pow),Yp}var Kp,F0;function pE(){return F0||(F0=1,Kp=Math.round),Kp}var Qp,L0;function vE(){return L0||(L0=1,Qp=Number.isNaN||function(e){return e!==e}),Qp}var Zp,B0;function _E(){if(B0)return Zp;B0=1;var i=vE();return Zp=function(r){return i(r)||r===0?r:r<0?-1:1},Zp}var Jp,j0;function mE(){return j0||(j0=1,Jp=Object.getOwnPropertyDescriptor),Jp}var ev,U0;function nb(){if(U0)return ev;U0=1;var i=mE();if(i)try{i([],"length")}catch{i=null}return ev=i,ev}var tv,G0;function yE(){if(G0)return tv;G0=1;var i=Object.defineProperty||!1;if(i)try{i({},"a",{value:1})}catch{i=!1}return tv=i,tv}var rv,H0;function gE(){return H0||(H0=1,rv=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;e[r]=s;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var l=Object.getOwnPropertySymbols(e);if(l.length!==1||l[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(e,r);if(c.value!==s||c.enumerable!==!0)return!1}return!0}),rv}var nv,z0;function xE(){if(z0)return nv;z0=1;var i=typeof Symbol<"u"&&Symbol,e=gE();return nv=function(){return typeof i!="function"||typeof Symbol!="function"||typeof i("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},nv}var iv,X0;function ib(){return X0||(X0=1,iv=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),iv}var sv,V0;function sb(){if(V0)return sv;V0=1;var i=rb();return sv=i.getPrototypeOf||null,sv}var av,q0;function bE(){if(q0)return av;q0=1;var i="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,n="[object Function]",s=function(h,_){for(var m=[],f=0;f<h.length;f+=1)m[f]=h[f];for(var p=0;p<_.length;p+=1)m[p+h.length]=_[p];return m},a=function(h,_){for(var m=[],f=_,p=0;f<h.length;f+=1,p+=1)m[p]=h[f];return m},l=function(c,h){for(var _="",m=0;m<c.length;m+=1)_+=c[m],m+1<c.length&&(_+=h);return _};return av=function(h){var _=this;if(typeof _!="function"||e.apply(_)!==n)throw new TypeError(i+_);for(var m=a(arguments,1),f,p=function(){if(this instanceof f){var A=_.apply(this,s(m,arguments));return Object(A)===A?A:this}return _.apply(h,s(m,arguments))},y=r(0,_.length-m.length),b=[],T=0;T<y;T++)b[T]="$"+T;if(f=Function("binder","return function ("+l(b,",")+"){ return binder.apply(this,arguments); }")(p),_.prototype){var S=function(){};S.prototype=_.prototype,f.prototype=new S,S.prototype=null}return f},av}var ov,W0;function Wf(){if(W0)return ov;W0=1;var i=bE();return ov=Function.prototype.bind||i,ov}var lv,$0;function Sm(){return $0||($0=1,lv=Function.prototype.call),lv}var uv,Y0;function ab(){return Y0||(Y0=1,uv=Function.prototype.apply),uv}var cv,K0;function wE(){return K0||(K0=1,cv=typeof Reflect<"u"&&Reflect&&Reflect.apply),cv}var hv,Q0;function TE(){if(Q0)return hv;Q0=1;var i=Wf(),e=ab(),r=Sm(),n=wE();return hv=n||i.call(r,e),hv}var fv,Z0;function ob(){if(Z0)return fv;Z0=1;var i=Wf(),e=jl(),r=Sm(),n=TE();return fv=function(a){if(a.length<1||typeof a[0]!="function")throw new e("a function is required");return n(i,r,a)},fv}var dv,J0;function SE(){if(J0)return dv;J0=1;var i=ob(),e=nb(),r;try{r=[].__proto__===Array.prototype}catch(l){if(!l||typeof l!="object"||!("code"in l)||l.code!=="ERR_PROTO_ACCESS")throw l}var n=!!r&&e&&e(Object.prototype,"__proto__"),s=Object,a=s.getPrototypeOf;return dv=n&&typeof n.get=="function"?i([n.get]):typeof a=="function"?function(c){return a(c==null?c:s(c))}:!1,dv}var pv,ex;function EE(){if(ex)return pv;ex=1;var i=ib(),e=sb(),r=SE();return pv=i?function(s){return i(s)}:e?function(s){if(!s||typeof s!="object"&&typeof s!="function")throw new TypeError("getProto: not an object");return e(s)}:r?function(s){return r(s)}:null,pv}var vv,tx;function CE(){if(tx)return vv;tx=1;var i=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=Wf();return vv=r.call(i,e),vv}var _v,rx;function Em(){if(rx)return _v;rx=1;var i,e=rb(),r=nE(),n=iE(),s=sE(),a=aE(),l=oE(),c=jl(),h=lE(),_=uE(),m=cE(),f=hE(),p=fE(),y=dE(),b=pE(),T=_E(),S=Function,A=function(ke){try{return S('"use strict"; return ('+ke+").constructor;")()}catch{}},R=nb(),L=yE(),V=function(){throw new c},M=R?function(){try{return arguments.callee,V}catch{try{return R(arguments,"callee").get}catch{return V}}}():V,H=xE()(),g=EE(),ne=sb(),B=ib(),Y=ab(),se=Sm(),re={},he=typeof Uint8Array>"u"||!g?i:g(Uint8Array),xe={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?i:ArrayBuffer,"%ArrayIteratorPrototype%":H&&g?g([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":re,"%AsyncGenerator%":re,"%AsyncGeneratorFunction%":re,"%AsyncIteratorPrototype%":re,"%Atomics%":typeof Atomics>"u"?i:Atomics,"%BigInt%":typeof BigInt>"u"?i:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?i:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?i:Float16Array,"%Float32Array%":typeof Float32Array>"u"?i:Float32Array,"%Float64Array%":typeof Float64Array>"u"?i:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?i:FinalizationRegistry,"%Function%":S,"%GeneratorFunction%":re,"%Int8Array%":typeof Int8Array>"u"?i:Int8Array,"%Int16Array%":typeof Int16Array>"u"?i:Int16Array,"%Int32Array%":typeof Int32Array>"u"?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":H&&g?g(g([][Symbol.iterator]())):i,"%JSON%":typeof JSON=="object"?JSON:i,"%Map%":typeof Map>"u"?i:Map,"%MapIteratorPrototype%":typeof Map>"u"||!H||!g?i:g(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":R,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?i:Promise,"%Proxy%":typeof Proxy>"u"?i:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":typeof Reflect>"u"?i:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?i:Set,"%SetIteratorPrototype%":typeof Set>"u"||!H||!g?i:g(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":H&&g?g(""[Symbol.iterator]()):i,"%Symbol%":H?Symbol:i,"%SyntaxError%":l,"%ThrowTypeError%":M,"%TypedArray%":he,"%TypeError%":c,"%Uint8Array%":typeof Uint8Array>"u"?i:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?i:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?i:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?i:Uint32Array,"%URIError%":h,"%WeakMap%":typeof WeakMap>"u"?i:WeakMap,"%WeakRef%":typeof WeakRef>"u"?i:WeakRef,"%WeakSet%":typeof WeakSet>"u"?i:WeakSet,"%Function.prototype.call%":se,"%Function.prototype.apply%":Y,"%Object.defineProperty%":L,"%Object.getPrototypeOf%":ne,"%Math.abs%":_,"%Math.floor%":m,"%Math.max%":f,"%Math.min%":p,"%Math.pow%":y,"%Math.round%":b,"%Math.sign%":T,"%Reflect.getPrototypeOf%":B};if(g)try{null.error}catch(ke){var Z=g(g(ke));xe["%Error.prototype%"]=Z}var U=function ke(Ce){var He;if(Ce==="%AsyncFunction%")He=A("async function () {}");else if(Ce==="%GeneratorFunction%")He=A("function* () {}");else if(Ce==="%AsyncGeneratorFunction%")He=A("async function* () {}");else if(Ce==="%AsyncGenerator%"){var Ge=ke("%AsyncGeneratorFunction%");Ge&&(He=Ge.prototype)}else if(Ce==="%AsyncIteratorPrototype%"){var rt=ke("%AsyncGenerator%");rt&&g&&(He=g(rt.prototype))}return xe[Ce]=He,He},W={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},z=Wf(),Q=CE(),$=z.call(se,Array.prototype.concat),j=z.call(Y,Array.prototype.splice),N=z.call(se,String.prototype.replace),q=z.call(se,String.prototype.slice),oe=z.call(se,RegExp.prototype.exec),de=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Te=/\\(\\)?/g,Ae=function(Ce){var He=q(Ce,0,1),Ge=q(Ce,-1);if(He==="%"&&Ge!=="%")throw new l("invalid intrinsic syntax, expected closing `%`");if(Ge==="%"&&He!=="%")throw new l("invalid intrinsic syntax, expected opening `%`");var rt=[];return N(Ce,de,function(qe,Ve,Ue,nt){rt[rt.length]=Ue?N(nt,Te,"$1"):Ve||qe}),rt},Ie=function(Ce,He){var Ge=Ce,rt;if(Q(W,Ge)&&(rt=W[Ge],Ge="%"+rt[0]+"%"),Q(xe,Ge)){var qe=xe[Ge];if(qe===re&&(qe=U(Ge)),typeof qe>"u"&&!He)throw new c("intrinsic "+Ce+" exists, but is not available. Please file an issue!");return{alias:rt,name:Ge,value:qe}}throw new l("intrinsic "+Ce+" does not exist!")};return _v=function(Ce,He){if(typeof Ce!="string"||Ce.length===0)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof He!="boolean")throw new c('"allowMissing" argument must be a boolean');if(oe(/^%?[^%]*%?$/,Ce)===null)throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ge=Ae(Ce),rt=Ge.length>0?Ge[0]:"",qe=Ie("%"+rt+"%",He),Ve=qe.name,Ue=qe.value,nt=!1,Tt=qe.alias;Tt&&(rt=Tt[0],j(Ge,$([0,1],Tt)));for(var Er=1,hr=!0;Er<Ge.length;Er+=1){var nr=Ge[Er],Yt=q(nr,0,1),Dr=q(nr,-1);if((Yt==='"'||Yt==="'"||Yt==="`"||Dr==='"'||Dr==="'"||Dr==="`")&&Yt!==Dr)throw new l("property names with quotes must have matching quotes");if((nr==="constructor"||!hr)&&(nt=!0),rt+="."+nr,Ve="%"+rt+"%",Q(xe,Ve))Ue=xe[Ve];else if(Ue!=null){if(!(nr in Ue)){if(!He)throw new c("base intrinsic for "+Ce+" exists, but the property is not available.");return}if(R&&Er+1>=Ge.length){var Nr=R(Ue,nr);hr=!!Nr,hr&&"get"in Nr&&!("originalValue"in Nr.get)?Ue=Nr.get:Ue=Ue[nr]}else hr=Q(Ue,nr),Ue=Ue[nr];hr&&!nt&&(xe[Ve]=Ue)}}return Ue},_v}var mv,nx;function lb(){if(nx)return mv;nx=1;var i=Em(),e=ob(),r=e([i("%String.prototype.indexOf%")]);return mv=function(s,a){var l=i(s,!!a);return typeof l=="function"&&r(s,".prototype.")>-1?e([l]):l},mv}var yv,ix;function ub(){if(ix)return yv;ix=1;var i=Em(),e=lb(),r=qf(),n=jl(),s=i("%Map%",!0),a=e("Map.prototype.get",!0),l=e("Map.prototype.set",!0),c=e("Map.prototype.has",!0),h=e("Map.prototype.delete",!0),_=e("Map.prototype.size",!0);return yv=!!s&&function(){var f,p={assert:function(y){if(!p.has(y))throw new n("Side channel does not contain "+r(y))},delete:function(y){if(f){var b=h(f,y);return _(f)===0&&(f=void 0),b}return!1},get:function(y){if(f)return a(f,y)},has:function(y){return f?c(f,y):!1},set:function(y,b){f||(f=new s),l(f,y,b)}};return p},yv}var gv,sx;function AE(){if(sx)return gv;sx=1;var i=Em(),e=lb(),r=qf(),n=ub(),s=jl(),a=i("%WeakMap%",!0),l=e("WeakMap.prototype.get",!0),c=e("WeakMap.prototype.set",!0),h=e("WeakMap.prototype.has",!0),_=e("WeakMap.prototype.delete",!0);return gv=a?function(){var f,p,y={assert:function(b){if(!y.has(b))throw new s("Side channel does not contain "+r(b))},delete:function(b){if(a&&b&&(typeof b=="object"||typeof b=="function")){if(f)return _(f,b)}else if(n&&p)return p.delete(b);return!1},get:function(b){return a&&b&&(typeof b=="object"||typeof b=="function")&&f?l(f,b):p&&p.get(b)},has:function(b){return a&&b&&(typeof b=="object"||typeof b=="function")&&f?h(f,b):!!p&&p.has(b)},set:function(b,T){a&&b&&(typeof b=="object"||typeof b=="function")?(f||(f=new a),c(f,b,T)):n&&(p||(p=n()),p.set(b,T))}};return y}:n,gv}var xv,ax;function PE(){if(ax)return xv;ax=1;var i=jl(),e=qf(),r=rE(),n=ub(),s=AE(),a=s||n||r;return xv=function(){var c,h={assert:function(_){if(!h.has(_))throw new i("Side channel does not contain "+e(_))},delete:function(_){return!!c&&c.delete(_)},get:function(_){return c&&c.get(_)},has:function(_){return!!c&&c.has(_)},set:function(_,m){c||(c=a()),c.set(_,m)}};return h},xv}var bv,ox;function Cm(){if(ox)return bv;ox=1;var i=String.prototype.replace,e=/%20/g,r={RFC1738:"RFC1738",RFC3986:"RFC3986"};return bv={default:r.RFC3986,formatters:{RFC1738:function(n){return i.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:r.RFC1738,RFC3986:r.RFC3986},bv}var wv,lx;function cb(){if(lx)return wv;lx=1;var i=Cm(),e=Object.prototype.hasOwnProperty,r=Array.isArray,n=function(){for(var S=[],A=0;A<256;++A)S.push("%"+((A<16?"0":"")+A.toString(16)).toUpperCase());return S}(),s=function(A){for(;A.length>1;){var R=A.pop(),L=R.obj[R.prop];if(r(L)){for(var V=[],M=0;M<L.length;++M)typeof L[M]<"u"&&V.push(L[M]);R.obj[R.prop]=V}}},a=function(A,R){for(var L=R&&R.plainObjects?{__proto__:null}:{},V=0;V<A.length;++V)typeof A[V]<"u"&&(L[V]=A[V]);return L},l=function S(A,R,L){if(!R)return A;if(typeof R!="object"&&typeof R!="function"){if(r(A))A.push(R);else if(A&&typeof A=="object")(L&&(L.plainObjects||L.allowPrototypes)||!e.call(Object.prototype,R))&&(A[R]=!0);else return[A,R];return A}if(!A||typeof A!="object")return[A].concat(R);var V=A;return r(A)&&!r(R)&&(V=a(A,L)),r(A)&&r(R)?(R.forEach(function(M,H){if(e.call(A,H)){var g=A[H];g&&typeof g=="object"&&M&&typeof M=="object"?A[H]=S(g,M,L):A.push(M)}else A[H]=M}),A):Object.keys(R).reduce(function(M,H){var g=R[H];return e.call(M,H)?M[H]=S(M[H],g,L):M[H]=g,M},V)},c=function(A,R){return Object.keys(R).reduce(function(L,V){return L[V]=R[V],L},A)},h=function(S,A,R){var L=S.replace(/\+/g," ");if(R==="iso-8859-1")return L.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(L)}catch{return L}},_=1024,m=function(A,R,L,V,M){if(A.length===0)return A;var H=A;if(typeof A=="symbol"?H=Symbol.prototype.toString.call(A):typeof A!="string"&&(H=String(A)),L==="iso-8859-1")return escape(H).replace(/%u[0-9a-f]{4}/gi,function(he){return"%26%23"+parseInt(he.slice(2),16)+"%3B"});for(var g="",ne=0;ne<H.length;ne+=_){for(var B=H.length>=_?H.slice(ne,ne+_):H,Y=[],se=0;se<B.length;++se){var re=B.charCodeAt(se);if(re===45||re===46||re===95||re===126||re>=48&&re<=57||re>=65&&re<=90||re>=97&&re<=122||M===i.RFC1738&&(re===40||re===41)){Y[Y.length]=B.charAt(se);continue}if(re<128){Y[Y.length]=n[re];continue}if(re<2048){Y[Y.length]=n[192|re>>6]+n[128|re&63];continue}if(re<55296||re>=57344){Y[Y.length]=n[224|re>>12]+n[128|re>>6&63]+n[128|re&63];continue}se+=1,re=65536+((re&1023)<<10|B.charCodeAt(se)&1023),Y[Y.length]=n[240|re>>18]+n[128|re>>12&63]+n[128|re>>6&63]+n[128|re&63]}g+=Y.join("")}return g},f=function(A){for(var R=[{obj:{o:A},prop:"o"}],L=[],V=0;V<R.length;++V)for(var M=R[V],H=M.obj[M.prop],g=Object.keys(H),ne=0;ne<g.length;++ne){var B=g[ne],Y=H[B];typeof Y=="object"&&Y!==null&&L.indexOf(Y)===-1&&(R.push({obj:H,prop:B}),L.push(Y))}return s(R),A},p=function(A){return Object.prototype.toString.call(A)==="[object RegExp]"},y=function(A){return!A||typeof A!="object"?!1:!!(A.constructor&&A.constructor.isBuffer&&A.constructor.isBuffer(A))},b=function(A,R){return[].concat(A,R)},T=function(A,R){if(r(A)){for(var L=[],V=0;V<A.length;V+=1)L.push(R(A[V]));return L}return R(A)};return wv={arrayToObject:a,assign:c,combine:b,compact:f,decode:h,encode:m,isBuffer:y,isRegExp:p,maybeMap:T,merge:l},wv}var Tv,ux;function IE(){if(ux)return Tv;ux=1;var i=PE(),e=cb(),r=Cm(),n=Object.prototype.hasOwnProperty,s={brackets:function(S){return S+"[]"},comma:"comma",indices:function(S,A){return S+"["+A+"]"},repeat:function(S){return S}},a=Array.isArray,l=Array.prototype.push,c=function(T,S){l.apply(T,a(S)?S:[S])},h=Date.prototype.toISOString,_=r.default,m={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:_,formatter:r.formatters[_],indices:!1,serializeDate:function(S){return h.call(S)},skipNulls:!1,strictNullHandling:!1},f=function(S){return typeof S=="string"||typeof S=="number"||typeof S=="boolean"||typeof S=="symbol"||typeof S=="bigint"},p={},y=function T(S,A,R,L,V,M,H,g,ne,B,Y,se,re,he,xe,Z,U,W){for(var z=S,Q=W,$=0,j=!1;(Q=Q.get(p))!==void 0&&!j;){var N=Q.get(S);if($+=1,typeof N<"u"){if(N===$)throw new RangeError("Cyclic object value");j=!0}typeof Q.get(p)>"u"&&($=0)}if(typeof B=="function"?z=B(A,z):z instanceof Date?z=re(z):R==="comma"&&a(z)&&(z=e.maybeMap(z,function(Ve){return Ve instanceof Date?re(Ve):Ve})),z===null){if(M)return ne&&!Z?ne(A,m.encoder,U,"key",he):A;z=""}if(f(z)||e.isBuffer(z)){if(ne){var q=Z?A:ne(A,m.encoder,U,"key",he);return[xe(q)+"="+xe(ne(z,m.encoder,U,"value",he))]}return[xe(A)+"="+xe(String(z))]}var oe=[];if(typeof z>"u")return oe;var de;if(R==="comma"&&a(z))Z&&ne&&(z=e.maybeMap(z,ne)),de=[{value:z.length>0?z.join(",")||null:void 0}];else if(a(B))de=B;else{var Te=Object.keys(z);de=Y?Te.sort(Y):Te}var Ae=g?String(A).replace(/\./g,"%2E"):String(A),Ie=L&&a(z)&&z.length===1?Ae+"[]":Ae;if(V&&a(z)&&z.length===0)return Ie+"[]";for(var ke=0;ke<de.length;++ke){var Ce=de[ke],He=typeof Ce=="object"&&Ce&&typeof Ce.value<"u"?Ce.value:z[Ce];if(!(H&&He===null)){var Ge=se&&g?String(Ce).replace(/\./g,"%2E"):String(Ce),rt=a(z)?typeof R=="function"?R(Ie,Ge):Ie:Ie+(se?"."+Ge:"["+Ge+"]");W.set(S,$);var qe=i();qe.set(p,W),c(oe,T(He,rt,R,L,V,M,H,g,R==="comma"&&Z&&a(z)?null:ne,B,Y,se,re,he,xe,Z,U,qe))}}return oe},b=function(S){if(!S)return m;if(typeof S.allowEmptyArrays<"u"&&typeof S.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof S.encodeDotInKeys<"u"&&typeof S.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(S.encoder!==null&&typeof S.encoder<"u"&&typeof S.encoder!="function")throw new TypeError("Encoder has to be a function.");var A=S.charset||m.charset;if(typeof S.charset<"u"&&S.charset!=="utf-8"&&S.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var R=r.default;if(typeof S.format<"u"){if(!n.call(r.formatters,S.format))throw new TypeError("Unknown format option provided.");R=S.format}var L=r.formatters[R],V=m.filter;(typeof S.filter=="function"||a(S.filter))&&(V=S.filter);var M;if(S.arrayFormat in s?M=S.arrayFormat:"indices"in S?M=S.indices?"indices":"repeat":M=m.arrayFormat,"commaRoundTrip"in S&&typeof S.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var H=typeof S.allowDots>"u"?S.encodeDotInKeys===!0?!0:m.allowDots:!!S.allowDots;return{addQueryPrefix:typeof S.addQueryPrefix=="boolean"?S.addQueryPrefix:m.addQueryPrefix,allowDots:H,allowEmptyArrays:typeof S.allowEmptyArrays=="boolean"?!!S.allowEmptyArrays:m.allowEmptyArrays,arrayFormat:M,charset:A,charsetSentinel:typeof S.charsetSentinel=="boolean"?S.charsetSentinel:m.charsetSentinel,commaRoundTrip:!!S.commaRoundTrip,delimiter:typeof S.delimiter>"u"?m.delimiter:S.delimiter,encode:typeof S.encode=="boolean"?S.encode:m.encode,encodeDotInKeys:typeof S.encodeDotInKeys=="boolean"?S.encodeDotInKeys:m.encodeDotInKeys,encoder:typeof S.encoder=="function"?S.encoder:m.encoder,encodeValuesOnly:typeof S.encodeValuesOnly=="boolean"?S.encodeValuesOnly:m.encodeValuesOnly,filter:V,format:R,formatter:L,serializeDate:typeof S.serializeDate=="function"?S.serializeDate:m.serializeDate,skipNulls:typeof S.skipNulls=="boolean"?S.skipNulls:m.skipNulls,sort:typeof S.sort=="function"?S.sort:null,strictNullHandling:typeof S.strictNullHandling=="boolean"?S.strictNullHandling:m.strictNullHandling}};return Tv=function(T,S){var A=T,R=b(S),L,V;typeof R.filter=="function"?(V=R.filter,A=V("",A)):a(R.filter)&&(V=R.filter,L=V);var M=[];if(typeof A!="object"||A===null)return"";var H=s[R.arrayFormat],g=H==="comma"&&R.commaRoundTrip;L||(L=Object.keys(A)),R.sort&&L.sort(R.sort);for(var ne=i(),B=0;B<L.length;++B){var Y=L[B],se=A[Y];R.skipNulls&&se===null||c(M,y(se,Y,H,g,R.allowEmptyArrays,R.strictNullHandling,R.skipNulls,R.encodeDotInKeys,R.encode?R.encoder:null,R.filter,R.sort,R.allowDots,R.serializeDate,R.format,R.formatter,R.encodeValuesOnly,R.charset,ne))}var re=M.join(R.delimiter),he=R.addQueryPrefix===!0?"?":"";return R.charsetSentinel&&(R.charset==="iso-8859-1"?he+="utf8=%26%2310003%3B&":he+="utf8=%E2%9C%93&"),re.length>0?he+re:""},Tv}var Sv,cx;function OE(){if(cx)return Sv;cx=1;var i=cb(),e=Object.prototype.hasOwnProperty,r=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:i.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},s=function(p){return p.replace(/&#(\d+);/g,function(y,b){return String.fromCharCode(parseInt(b,10))})},a=function(p,y,b){if(p&&typeof p=="string"&&y.comma&&p.indexOf(",")>-1)return p.split(",");if(y.throwOnLimitExceeded&&b>=y.arrayLimit)throw new RangeError("Array limit exceeded. Only "+y.arrayLimit+" element"+(y.arrayLimit===1?"":"s")+" allowed in an array.");return p},l="utf8=%26%2310003%3B",c="utf8=%E2%9C%93",h=function(y,b){var T={__proto__:null},S=b.ignoreQueryPrefix?y.replace(/^\?/,""):y;S=S.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var A=b.parameterLimit===1/0?void 0:b.parameterLimit,R=S.split(b.delimiter,b.throwOnLimitExceeded?A+1:A);if(b.throwOnLimitExceeded&&R.length>A)throw new RangeError("Parameter limit exceeded. Only "+A+" parameter"+(A===1?"":"s")+" allowed.");var L=-1,V,M=b.charset;if(b.charsetSentinel)for(V=0;V<R.length;++V)R[V].indexOf("utf8=")===0&&(R[V]===c?M="utf-8":R[V]===l&&(M="iso-8859-1"),L=V,V=R.length);for(V=0;V<R.length;++V)if(V!==L){var H=R[V],g=H.indexOf("]="),ne=g===-1?H.indexOf("="):g+1,B,Y;ne===-1?(B=b.decoder(H,n.decoder,M,"key"),Y=b.strictNullHandling?null:""):(B=b.decoder(H.slice(0,ne),n.decoder,M,"key"),Y=i.maybeMap(a(H.slice(ne+1),b,r(T[B])?T[B].length:0),function(re){return b.decoder(re,n.decoder,M,"value")})),Y&&b.interpretNumericEntities&&M==="iso-8859-1"&&(Y=s(String(Y))),H.indexOf("[]=")>-1&&(Y=r(Y)?[Y]:Y);var se=e.call(T,B);se&&b.duplicates==="combine"?T[B]=i.combine(T[B],Y):(!se||b.duplicates==="last")&&(T[B]=Y)}return T},_=function(p,y,b,T){var S=0;if(p.length>0&&p[p.length-1]==="[]"){var A=p.slice(0,-1).join("");S=Array.isArray(y)&&y[A]?y[A].length:0}for(var R=T?y:a(y,b,S),L=p.length-1;L>=0;--L){var V,M=p[L];if(M==="[]"&&b.parseArrays)V=b.allowEmptyArrays&&(R===""||b.strictNullHandling&&R===null)?[]:i.combine([],R);else{V=b.plainObjects?{__proto__:null}:{};var H=M.charAt(0)==="["&&M.charAt(M.length-1)==="]"?M.slice(1,-1):M,g=b.decodeDotInKeys?H.replace(/%2E/g,"."):H,ne=parseInt(g,10);!b.parseArrays&&g===""?V={0:R}:!isNaN(ne)&&M!==g&&String(ne)===g&&ne>=0&&b.parseArrays&&ne<=b.arrayLimit?(V=[],V[ne]=R):g!=="__proto__"&&(V[g]=R)}R=V}return R},m=function(y,b,T,S){if(y){var A=T.allowDots?y.replace(/\.([^.[]+)/g,"[$1]"):y,R=/(\[[^[\]]*])/,L=/(\[[^[\]]*])/g,V=T.depth>0&&R.exec(A),M=V?A.slice(0,V.index):A,H=[];if(M){if(!T.plainObjects&&e.call(Object.prototype,M)&&!T.allowPrototypes)return;H.push(M)}for(var g=0;T.depth>0&&(V=L.exec(A))!==null&&g<T.depth;){if(g+=1,!T.plainObjects&&e.call(Object.prototype,V[1].slice(1,-1))&&!T.allowPrototypes)return;H.push(V[1])}if(V){if(T.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+T.depth+" and strictDepth is true");H.push("["+A.slice(V.index)+"]")}return _(H,b,T,S)}},f=function(y){if(!y)return n;if(typeof y.allowEmptyArrays<"u"&&typeof y.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof y.decodeDotInKeys<"u"&&typeof y.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(y.decoder!==null&&typeof y.decoder<"u"&&typeof y.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof y.charset<"u"&&y.charset!=="utf-8"&&y.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof y.throwOnLimitExceeded<"u"&&typeof y.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var b=typeof y.charset>"u"?n.charset:y.charset,T=typeof y.duplicates>"u"?n.duplicates:y.duplicates;if(T!=="combine"&&T!=="first"&&T!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var S=typeof y.allowDots>"u"?y.decodeDotInKeys===!0?!0:n.allowDots:!!y.allowDots;return{allowDots:S,allowEmptyArrays:typeof y.allowEmptyArrays=="boolean"?!!y.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof y.allowPrototypes=="boolean"?y.allowPrototypes:n.allowPrototypes,allowSparse:typeof y.allowSparse=="boolean"?y.allowSparse:n.allowSparse,arrayLimit:typeof y.arrayLimit=="number"?y.arrayLimit:n.arrayLimit,charset:b,charsetSentinel:typeof y.charsetSentinel=="boolean"?y.charsetSentinel:n.charsetSentinel,comma:typeof y.comma=="boolean"?y.comma:n.comma,decodeDotInKeys:typeof y.decodeDotInKeys=="boolean"?y.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof y.decoder=="function"?y.decoder:n.decoder,delimiter:typeof y.delimiter=="string"||i.isRegExp(y.delimiter)?y.delimiter:n.delimiter,depth:typeof y.depth=="number"||y.depth===!1?+y.depth:n.depth,duplicates:T,ignoreQueryPrefix:y.ignoreQueryPrefix===!0,interpretNumericEntities:typeof y.interpretNumericEntities=="boolean"?y.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof y.parameterLimit=="number"?y.parameterLimit:n.parameterLimit,parseArrays:y.parseArrays!==!1,plainObjects:typeof y.plainObjects=="boolean"?y.plainObjects:n.plainObjects,strictDepth:typeof y.strictDepth=="boolean"?!!y.strictDepth:n.strictDepth,strictNullHandling:typeof y.strictNullHandling=="boolean"?y.strictNullHandling:n.strictNullHandling,throwOnLimitExceeded:typeof y.throwOnLimitExceeded=="boolean"?y.throwOnLimitExceeded:!1}};return Sv=function(p,y){var b=f(y);if(p===""||p===null||typeof p>"u")return b.plainObjects?{__proto__:null}:{};for(var T=typeof p=="string"?h(p,b):p,S=b.plainObjects?{__proto__:null}:{},A=Object.keys(T),R=0;R<A.length;++R){var L=A[R],V=m(L,T[L],b,typeof p=="string");S=i.merge(S,V,b)}return b.allowSparse===!0?S:i.compact(S)},Sv}var Ev,hx;function RE(){if(hx)return Ev;hx=1;var i=IE(),e=OE(),r=Cm();return Ev={formats:r,parse:e,stringify:i},Ev}var fx;function ME(){if(fx)return eo;fx=1;var i=JS();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var r=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,a=["<",">",'"',"`"," ","\r",`
`,"	"],l=["{","}","|","\\","^","`"].concat(a),c=["'"].concat(l),h=["%","/","?",";","#"].concat(c),_=["/","?","#"],m=255,f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=RE();function A(M,H,g){if(M&&typeof M=="object"&&M instanceof e)return M;var ne=new e;return ne.parse(M,H,g),ne}e.prototype.parse=function(M,H,g){if(typeof M!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof M);var ne=M.indexOf("?"),B=ne!==-1&&ne<M.indexOf("#")?"?":"#",Y=M.split(B),se=/\\/g;Y[0]=Y[0].replace(se,"/"),M=Y.join(B);var re=M;if(re=re.trim(),!g&&M.split("#").length===1){var he=s.exec(re);if(he)return this.path=re,this.href=re,this.pathname=he[1],he[2]?(this.search=he[2],H?this.query=S.parse(this.search.substr(1)):this.query=this.search.substr(1)):H&&(this.search="",this.query={}),this}var xe=r.exec(re);if(xe){xe=xe[0];var Z=xe.toLowerCase();this.protocol=Z,re=re.substr(xe.length)}if(g||xe||re.match(/^\/\/[^@/]+@[^@/]+/)){var U=re.substr(0,2)==="//";U&&!(xe&&b[xe])&&(re=re.substr(2),this.slashes=!0)}if(!b[xe]&&(U||xe&&!T[xe])){for(var W=-1,z=0;z<_.length;z++){var Q=re.indexOf(_[z]);Q!==-1&&(W===-1||Q<W)&&(W=Q)}var $,j;W===-1?j=re.lastIndexOf("@"):j=re.lastIndexOf("@",W),j!==-1&&($=re.slice(0,j),re=re.slice(j+1),this.auth=decodeURIComponent($)),W=-1;for(var z=0;z<h.length;z++){var Q=re.indexOf(h[z]);Q!==-1&&(W===-1||Q<W)&&(W=Q)}W===-1&&(W=re.length),this.host=re.slice(0,W),re=re.slice(W),this.parseHost(),this.hostname=this.hostname||"";var N=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!N)for(var q=this.hostname.split(/\./),z=0,oe=q.length;z<oe;z++){var de=q[z];if(de&&!de.match(f)){for(var Te="",Ae=0,Ie=de.length;Ae<Ie;Ae++)de.charCodeAt(Ae)>127?Te+="x":Te+=de[Ae];if(!Te.match(f)){var ke=q.slice(0,z),Ce=q.slice(z+1),He=de.match(p);He&&(ke.push(He[1]),Ce.unshift(He[2])),Ce.length&&(re="/"+Ce.join(".")+re),this.hostname=ke.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=i.toASCII(this.hostname));var Ge=this.port?":"+this.port:"",rt=this.hostname||"";this.host=rt+Ge,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),re[0]!=="/"&&(re="/"+re))}if(!y[Z])for(var z=0,oe=c.length;z<oe;z++){var qe=c[z];if(re.indexOf(qe)!==-1){var Ve=encodeURIComponent(qe);Ve===qe&&(Ve=escape(qe)),re=re.split(qe).join(Ve)}}var Ue=re.indexOf("#");Ue!==-1&&(this.hash=re.substr(Ue),re=re.slice(0,Ue));var nt=re.indexOf("?");if(nt!==-1?(this.search=re.substr(nt),this.query=re.substr(nt+1),H&&(this.query=S.parse(this.query)),re=re.slice(0,nt)):H&&(this.search="",this.query={}),re&&(this.pathname=re),T[Z]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Ge=this.pathname||"",Tt=this.search||"";this.path=Ge+Tt}return this.href=this.format(),this};function R(M){return typeof M=="string"&&(M=A(M)),M instanceof e?M.format():e.prototype.format.call(M)}e.prototype.format=function(){var M=this.auth||"";M&&(M=encodeURIComponent(M),M=M.replace(/%3A/i,":"),M+="@");var H=this.protocol||"",g=this.pathname||"",ne=this.hash||"",B=!1,Y="";this.host?B=M+this.host:this.hostname&&(B=M+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(B+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(Y=S.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var se=this.search||Y&&"?"+Y||"";return H&&H.substr(-1)!==":"&&(H+=":"),this.slashes||(!H||T[H])&&B!==!1?(B="//"+(B||""),g&&g.charAt(0)!=="/"&&(g="/"+g)):B||(B=""),ne&&ne.charAt(0)!=="#"&&(ne="#"+ne),se&&se.charAt(0)!=="?"&&(se="?"+se),g=g.replace(/[?#]/g,function(re){return encodeURIComponent(re)}),se=se.replace("#","%23"),H+B+g+se+ne};function L(M,H){return A(M,!1,!0).resolve(H)}e.prototype.resolve=function(M){return this.resolveObject(A(M,!1,!0)).format()};function V(M,H){return M?A(M,!1,!0).resolveObject(H):H}return e.prototype.resolveObject=function(M){if(typeof M=="string"){var H=new e;H.parse(M,!1,!0),M=H}for(var g=new e,ne=Object.keys(this),B=0;B<ne.length;B++){var Y=ne[B];g[Y]=this[Y]}if(g.hash=M.hash,M.href==="")return g.href=g.format(),g;if(M.slashes&&!M.protocol){for(var se=Object.keys(M),re=0;re<se.length;re++){var he=se[re];he!=="protocol"&&(g[he]=M[he])}return T[g.protocol]&&g.hostname&&!g.pathname&&(g.pathname="/",g.path=g.pathname),g.href=g.format(),g}if(M.protocol&&M.protocol!==g.protocol){if(!T[M.protocol]){for(var xe=Object.keys(M),Z=0;Z<xe.length;Z++){var U=xe[Z];g[U]=M[U]}return g.href=g.format(),g}if(g.protocol=M.protocol,!M.host&&!b[M.protocol]){for(var oe=(M.pathname||"").split("/");oe.length&&!(M.host=oe.shift()););M.host||(M.host=""),M.hostname||(M.hostname=""),oe[0]!==""&&oe.unshift(""),oe.length<2&&oe.unshift(""),g.pathname=oe.join("/")}else g.pathname=M.pathname;if(g.search=M.search,g.query=M.query,g.host=M.host||"",g.auth=M.auth,g.hostname=M.hostname||M.host,g.port=M.port,g.pathname||g.search){var W=g.pathname||"",z=g.search||"";g.path=W+z}return g.slashes=g.slashes||M.slashes,g.href=g.format(),g}var Q=g.pathname&&g.pathname.charAt(0)==="/",$=M.host||M.pathname&&M.pathname.charAt(0)==="/",j=$||Q||g.host&&M.pathname,N=j,q=g.pathname&&g.pathname.split("/")||[],oe=M.pathname&&M.pathname.split("/")||[],de=g.protocol&&!T[g.protocol];if(de&&(g.hostname="",g.port=null,g.host&&(q[0]===""?q[0]=g.host:q.unshift(g.host)),g.host="",M.protocol&&(M.hostname=null,M.port=null,M.host&&(oe[0]===""?oe[0]=M.host:oe.unshift(M.host)),M.host=null),j=j&&(oe[0]===""||q[0]==="")),$)g.host=M.host||M.host===""?M.host:g.host,g.hostname=M.hostname||M.hostname===""?M.hostname:g.hostname,g.search=M.search,g.query=M.query,q=oe;else if(oe.length)q||(q=[]),q.pop(),q=q.concat(oe),g.search=M.search,g.query=M.query;else if(M.search!=null){if(de){g.host=q.shift(),g.hostname=g.host;var Te=g.host&&g.host.indexOf("@")>0?g.host.split("@"):!1;Te&&(g.auth=Te.shift(),g.hostname=Te.shift(),g.host=g.hostname)}return g.search=M.search,g.query=M.query,(g.pathname!==null||g.search!==null)&&(g.path=(g.pathname?g.pathname:"")+(g.search?g.search:"")),g.href=g.format(),g}if(!q.length)return g.pathname=null,g.search?g.path="/"+g.search:g.path=null,g.href=g.format(),g;for(var Ae=q.slice(-1)[0],Ie=(g.host||M.host||q.length>1)&&(Ae==="."||Ae==="..")||Ae==="",ke=0,Ce=q.length;Ce>=0;Ce--)Ae=q[Ce],Ae==="."?q.splice(Ce,1):Ae===".."?(q.splice(Ce,1),ke++):ke&&(q.splice(Ce,1),ke--);if(!j&&!N)for(;ke--;ke)q.unshift("..");j&&q[0]!==""&&(!q[0]||q[0].charAt(0)!=="/")&&q.unshift(""),Ie&&q.join("/").substr(-1)!=="/"&&q.push("");var He=q[0]===""||q[0]&&q[0].charAt(0)==="/";if(de){g.hostname=He?"":q.length?q.shift():"",g.host=g.hostname;var Te=g.host&&g.host.indexOf("@")>0?g.host.split("@"):!1;Te&&(g.auth=Te.shift(),g.hostname=Te.shift(),g.host=g.hostname)}return j=j||g.host&&q.length,j&&!He&&q.unshift(""),q.length>0?g.pathname=q.join("/"):(g.pathname=null,g.path=null),(g.pathname!==null||g.search!==null)&&(g.path=(g.pathname?g.pathname:"")+(g.search?g.search:"")),g.auth=M.auth||g.auth,g.slashes=g.slashes||M.slashes,g.href=g.format(),g},e.prototype.parseHost=function(){var M=this.host,H=n.exec(M);H&&(H=H[0],H!==":"&&(this.port=H.substr(1)),M=M.substr(0,M.length-H.length)),M&&(this.hostname=M)},eo.parse=A,eo.resolve=L,eo.resolveObject=V,eo.format=R,eo.Url=e,eo}var Cv=ME();/*!
 * @pixi/utils - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Tl={parse:Cv.parse,format:Cv.format,resolve:Cv.resolve};Xe.RETINA_PREFIX=/@([0-9\.]+)x/;Xe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var dx=!1,px="6.5.10";function kE(i){var e;if(!dx){if(Xe.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var r=[`
 %c %c %c PixiJS `+px+" - ✰ "+i+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,r)}else globalThis.console&&globalThis.console.log("PixiJS "+px+" - "+i+" - http://www.pixijs.com/");dx=!0}}var Av;function DE(){return typeof Av>"u"&&(Av=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:Xe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Xe.ADAPTER.getWebGLRenderingContext())return!1;var r=Xe.ADAPTER.createCanvas(),n=r.getContext("webgl",e)||r.getContext("experimental-webgl",e),s=!!(n&&n.getContextAttributes().stencil);if(n){var a=n.getExtension("WEBGL_lose_context");a&&a.loseContext()}return n=null,s}catch{return!1}}()),Av}var NE="#f0f8ff",FE="#faebd7",LE="#00ffff",BE="#7fffd4",jE="#f0ffff",UE="#f5f5dc",GE="#ffe4c4",HE="#000000",zE="#ffebcd",XE="#0000ff",VE="#8a2be2",qE="#a52a2a",WE="#deb887",$E="#5f9ea0",YE="#7fff00",KE="#d2691e",QE="#ff7f50",ZE="#6495ed",JE="#fff8dc",eC="#dc143c",tC="#00ffff",rC="#00008b",nC="#008b8b",iC="#b8860b",sC="#a9a9a9",aC="#006400",oC="#a9a9a9",lC="#bdb76b",uC="#8b008b",cC="#556b2f",hC="#ff8c00",fC="#9932cc",dC="#8b0000",pC="#e9967a",vC="#8fbc8f",_C="#483d8b",mC="#2f4f4f",yC="#2f4f4f",gC="#00ced1",xC="#9400d3",bC="#ff1493",wC="#00bfff",TC="#696969",SC="#696969",EC="#1e90ff",CC="#b22222",AC="#fffaf0",PC="#228b22",IC="#ff00ff",OC="#dcdcdc",RC="#f8f8ff",MC="#daa520",kC="#ffd700",DC="#808080",NC="#008000",FC="#adff2f",LC="#808080",BC="#f0fff0",jC="#ff69b4",UC="#cd5c5c",GC="#4b0082",HC="#fffff0",zC="#f0e68c",XC="#fff0f5",VC="#e6e6fa",qC="#7cfc00",WC="#fffacd",$C="#add8e6",YC="#f08080",KC="#e0ffff",QC="#fafad2",ZC="#d3d3d3",JC="#90ee90",e2="#d3d3d3",t2="#ffb6c1",r2="#ffa07a",n2="#20b2aa",i2="#87cefa",s2="#778899",a2="#778899",o2="#b0c4de",l2="#ffffe0",u2="#00ff00",c2="#32cd32",h2="#faf0e6",f2="#ff00ff",d2="#800000",p2="#66cdaa",v2="#0000cd",_2="#ba55d3",m2="#9370db",y2="#3cb371",g2="#7b68ee",x2="#00fa9a",b2="#48d1cc",w2="#c71585",T2="#191970",S2="#f5fffa",E2="#ffe4e1",C2="#ffe4b5",A2="#ffdead",P2="#000080",I2="#fdf5e6",O2="#808000",R2="#6b8e23",M2="#ffa500",k2="#ff4500",D2="#da70d6",N2="#eee8aa",F2="#98fb98",L2="#afeeee",B2="#db7093",j2="#ffefd5",U2="#ffdab9",G2="#cd853f",H2="#ffc0cb",z2="#dda0dd",X2="#b0e0e6",V2="#800080",q2="#663399",W2="#ff0000",$2="#bc8f8f",Y2="#4169e1",K2="#8b4513",Q2="#fa8072",Z2="#f4a460",J2="#2e8b57",eA="#fff5ee",tA="#a0522d",rA="#c0c0c0",nA="#87ceeb",iA="#6a5acd",sA="#708090",aA="#708090",oA="#fffafa",lA="#00ff7f",uA="#4682b4",cA="#d2b48c",hA="#008080",fA="#d8bfd8",dA="#ff6347",pA="#40e0d0",vA="#ee82ee",_A="#f5deb3",mA="#ffffff",yA="#f5f5f5",gA="#ffff00",xA="#9acd32",bA={aliceblue:NE,antiquewhite:FE,aqua:LE,aquamarine:BE,azure:jE,beige:UE,bisque:GE,black:HE,blanchedalmond:zE,blue:XE,blueviolet:VE,brown:qE,burlywood:WE,cadetblue:$E,chartreuse:YE,chocolate:KE,coral:QE,cornflowerblue:ZE,cornsilk:JE,crimson:eC,cyan:tC,darkblue:rC,darkcyan:nC,darkgoldenrod:iC,darkgray:sC,darkgreen:aC,darkgrey:oC,darkkhaki:lC,darkmagenta:uC,darkolivegreen:cC,darkorange:hC,darkorchid:fC,darkred:dC,darksalmon:pC,darkseagreen:vC,darkslateblue:_C,darkslategray:mC,darkslategrey:yC,darkturquoise:gC,darkviolet:xC,deeppink:bC,deepskyblue:wC,dimgray:TC,dimgrey:SC,dodgerblue:EC,firebrick:CC,floralwhite:AC,forestgreen:PC,fuchsia:IC,gainsboro:OC,ghostwhite:RC,goldenrod:MC,gold:kC,gray:DC,green:NC,greenyellow:FC,grey:LC,honeydew:BC,hotpink:jC,indianred:UC,indigo:GC,ivory:HC,khaki:zC,lavenderblush:XC,lavender:VC,lawngreen:qC,lemonchiffon:WC,lightblue:$C,lightcoral:YC,lightcyan:KC,lightgoldenrodyellow:QC,lightgray:ZC,lightgreen:JC,lightgrey:e2,lightpink:t2,lightsalmon:r2,lightseagreen:n2,lightskyblue:i2,lightslategray:s2,lightslategrey:a2,lightsteelblue:o2,lightyellow:l2,lime:u2,limegreen:c2,linen:h2,magenta:f2,maroon:d2,mediumaquamarine:p2,mediumblue:v2,mediumorchid:_2,mediumpurple:m2,mediumseagreen:y2,mediumslateblue:g2,mediumspringgreen:x2,mediumturquoise:b2,mediumvioletred:w2,midnightblue:T2,mintcream:S2,mistyrose:E2,moccasin:C2,navajowhite:A2,navy:P2,oldlace:I2,olive:O2,olivedrab:R2,orange:M2,orangered:k2,orchid:D2,palegoldenrod:N2,palegreen:F2,paleturquoise:L2,palevioletred:B2,papayawhip:j2,peachpuff:U2,peru:G2,pink:H2,plum:z2,powderblue:X2,purple:V2,rebeccapurple:q2,red:W2,rosybrown:$2,royalblue:Y2,saddlebrown:K2,salmon:Q2,sandybrown:Z2,seagreen:J2,seashell:eA,sienna:tA,silver:rA,skyblue:nA,slateblue:iA,slategray:sA,slategrey:aA,snow:oA,springgreen:lA,steelblue:uA,tan:cA,teal:hA,thistle:fA,tomato:dA,turquoise:pA,violet:vA,wheat:_A,white:mA,whitesmoke:yA,yellow:gA,yellowgreen:xA};function Dl(i,e){return e===void 0&&(e=[]),e[0]=(i>>16&255)/255,e[1]=(i>>8&255)/255,e[2]=(i&255)/255,e}function hb(i){var e=i.toString(16);return e="000000".substring(0,6-e.length)+e,"#"+e}function fb(i){return typeof i=="string"&&(i=bA[i.toLowerCase()]||i,i[0]==="#"&&(i=i.slice(1))),parseInt(i,16)}function wA(){for(var i=[],e=[],r=0;r<32;r++)i[r]=r,e[r]=r;i[ct.NORMAL_NPM]=ct.NORMAL,i[ct.ADD_NPM]=ct.ADD,i[ct.SCREEN_NPM]=ct.SCREEN,e[ct.NORMAL]=ct.NORMAL_NPM,e[ct.ADD]=ct.ADD_NPM,e[ct.SCREEN]=ct.SCREEN_NPM;var n=[];return n.push(e),n.push(i),n}var Am=wA();function Pm(i,e){return Am[e?1:0][i]}function TA(i,e,r,n){return r=r||new Float32Array(4),n||n===void 0?(r[0]=i[0]*e,r[1]=i[1]*e,r[2]=i[2]*e):(r[0]=i[0],r[1]=i[1],r[2]=i[2]),r[3]=e,r}function dc(i,e){if(e===1)return(e*255<<24)+i;if(e===0)return 0;var r=i>>16&255,n=i>>8&255,s=i&255;return r=r*e+.5|0,n=n*e+.5|0,s=s*e+.5|0,(e*255<<24)+(r<<16)+(n<<8)+s}function Im(i,e,r,n){return r=r||new Float32Array(4),r[0]=(i>>16&255)/255,r[1]=(i>>8&255)/255,r[2]=(i&255)/255,(n||n===void 0)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function SA(i,e){e===void 0&&(e=null);var r=i*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+r);for(var n=0,s=0;n<r;n+=6,s+=4)e[n+0]=s+0,e[n+1]=s+1,e[n+2]=s+2,e[n+3]=s+0,e[n+4]=s+2,e[n+5]=s+3;return e}function db(i){if(i.BYTES_PER_ELEMENT===4)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(i.BYTES_PER_ELEMENT===2){if(i instanceof Uint16Array)return"Uint16Array"}else if(i.BYTES_PER_ELEMENT===1&&i instanceof Uint8Array)return"Uint8Array";return null}function Mf(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function vx(i){return!(i&i-1)&&!!i}function _x(i){var e=(i>65535?1:0)<<4;i>>>=e;var r=(i>255?1:0)<<3;return i>>>=r,e|=r,r=(i>15?1:0)<<2,i>>>=r,e|=r,r=(i>3?1:0)<<1,i>>>=r,e|=r,e|i>>1}function Ol(i,e,r){var n=i.length,s;if(!(e>=n||r===0)){r=e+r>n?n-e:r;var a=n-r;for(s=e;s<a;++s)i[s]=i[s+r];i.length=a}}function Sl(i){return i===0?0:i<0?-1:1}var EA=0;function wo(){return++EA}var mx={};function Si(i,e,r){if(r===void 0&&(r=3),!mx[e]){var n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+i):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+i),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+i),console.warn(n))),mx[e]=!0}}var yx={},Es=Object.create(null),to=Object.create(null),gx=function(){function i(e,r,n){this.canvas=Xe.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=n||Xe.RESOLUTION,this.resize(e,r)}return i.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},i.prototype.resize=function(e,r){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(r*this.resolution)},i.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(i.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),i}();function CA(i){var e=i.width,r=i.height,n=i.getContext("2d",{willReadFrequently:!0}),s=n.getImageData(0,0,e,r),a=s.data,l=a.length,c={top:null,left:null,right:null,bottom:null},h=null,_,m,f;for(_=0;_<l;_+=4)a[_+3]!==0&&(m=_/4%e,f=~~(_/4/e),c.top===null&&(c.top=f),(c.left===null||m<c.left)&&(c.left=m),(c.right===null||c.right<m)&&(c.right=m+1),(c.bottom===null||c.bottom<f)&&(c.bottom=f));return c.top!==null&&(e=c.right-c.left,r=c.bottom-c.top+1,h=n.getImageData(c.left,c.top,e,r)),{height:r,width:e,data:h}}var Bh;function AA(i,e){if(e===void 0&&(e=globalThis.location),i.indexOf("data:")===0)return"";e=e||globalThis.location,Bh||(Bh=document.createElement("a")),Bh.href=i;var r=Tl.parse(Bh.href),n=!r.port&&e.port===""||r.port===e.port;return r.hostname!==e.hostname||!n||r.protocol!==e.protocol?"anonymous":""}function kf(i,e){var r=Xe.RETINA_PREFIX.exec(i);return r?parseFloat(r[1]):e!==void 0?e:1}/*!
 * @pixi/math - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Df=Math.PI*2,PA=180/Math.PI,IA=Math.PI/180,Gr;(function(i){i[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC"})(Gr||(Gr={}));var yt=function(){function i(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this.x=0,this.y=0,this.x=e,this.y=r}return i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},i.prototype.copyTo=function(e){return e.set(this.x,this.y),e},i.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},i.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x=e,this.y=r,this},i.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},i}(),jh=[new yt,new yt,new yt,new yt],mt=function(){function i(e,r,n,s){e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),s===void 0&&(s=0),this.x=Number(e),this.y=Number(r),this.width=Number(n),this.height=Number(s),this.type=Gr.RECT}return Object.defineProperty(i.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(i,"EMPTY",{get:function(){return new i(0,0,0,0)},enumerable:!1,configurable:!0}),i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},i.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},i.prototype.contains=function(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height},i.prototype.intersects=function(e,r){if(!r){var n=this.x<e.x?e.x:this.x,s=this.right>e.right?e.right:this.right;if(s<=n)return!1;var a=this.y<e.y?e.y:this.y,l=this.bottom>e.bottom?e.bottom:this.bottom;return l>a}var c=this.left,h=this.right,_=this.top,m=this.bottom;if(h<=c||m<=_)return!1;var f=jh[0].set(e.left,e.top),p=jh[1].set(e.left,e.bottom),y=jh[2].set(e.right,e.top),b=jh[3].set(e.right,e.bottom);if(y.x<=f.x||p.y<=f.y)return!1;var T=Math.sign(r.a*r.d-r.b*r.c);if(T===0||(r.apply(f,f),r.apply(p,p),r.apply(y,y),r.apply(b,b),Math.max(f.x,p.x,y.x,b.x)<=c||Math.min(f.x,p.x,y.x,b.x)>=h||Math.max(f.y,p.y,y.y,b.y)<=_||Math.min(f.y,p.y,y.y,b.y)>=m))return!1;var S=T*(p.y-f.y),A=T*(f.x-p.x),R=S*c+A*_,L=S*h+A*_,V=S*c+A*m,M=S*h+A*m;if(Math.max(R,L,V,M)<=S*f.x+A*f.y||Math.min(R,L,V,M)>=S*b.x+A*b.y)return!1;var H=T*(f.y-y.y),g=T*(y.x-f.x),ne=H*c+g*_,B=H*h+g*_,Y=H*c+g*m,se=H*h+g*m;return!(Math.max(ne,B,Y,se)<=H*f.x+g*f.y||Math.min(ne,B,Y,se)>=H*b.x+g*b.y)},i.prototype.pad=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this},i.prototype.fit=function(e){var r=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(n-r,0),this.y=s,this.height=Math.max(a-s,0),this},i.prototype.ceil=function(e,r){e===void 0&&(e=1),r===void 0&&(r=.001);var n=Math.ceil((this.x+this.width-r)*e)/e,s=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=n-this.x,this.height=s-this.y,this},i.prototype.enlarge=function(e){var r=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=n-r,this.y=s,this.height=a-s,this},i.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},i}(),OA=function(){function i(e,r,n){e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),this.x=e,this.y=r,this.radius=n,this.type=Gr.CIRC}return i.prototype.clone=function(){return new i(this.x,this.y,this.radius)},i.prototype.contains=function(e,r){if(this.radius<=0)return!1;var n=this.radius*this.radius,s=this.x-e,a=this.y-r;return s*=s,a*=a,s+a<=n},i.prototype.getBounds=function(){return new mt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},i.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},i}(),RA=function(){function i(e,r,n,s){e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),s===void 0&&(s=0),this.x=e,this.y=r,this.width=n,this.height=s,this.type=Gr.ELIP}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,s=(r-this.y)/this.height;return n*=n,s*=s,n+s<=1},i.prototype.getBounds=function(){return new mt(this.x-this.width,this.y-this.height,this.width,this.height)},i.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},i}(),vf=function(){function i(){for(var e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];var s=Array.isArray(r[0])?r[0]:r;if(typeof s[0]!="number"){for(var a=[],l=0,c=s.length;l<c;l++)a.push(s[l].x,s[l].y);s=a}this.points=s,this.type=Gr.POLY,this.closeStroke=!0}return i.prototype.clone=function(){var e=this.points.slice(),r=new i(e);return r.closeStroke=this.closeStroke,r},i.prototype.contains=function(e,r){for(var n=!1,s=this.points.length/2,a=0,l=s-1;a<s;l=a++){var c=this.points[a*2],h=this.points[a*2+1],_=this.points[l*2],m=this.points[l*2+1],f=h>r!=m>r&&e<(_-c)*((r-h)/(m-h))+c;f&&(n=!n)}return n},i.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(e,r){return e+", "+r},"")+"]")},i}(),MA=function(){function i(e,r,n,s,a){e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),s===void 0&&(s=0),a===void 0&&(a=20),this.x=e,this.y=r,this.width=n,this.height=s,this.radius=a,this.type=Gr.RREC}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.radius)},i.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;var s=e-(this.x+n),a=r-(this.y+n),l=n*n;if(s*s+a*a<=l||(s=e-(this.x+this.width-n),s*s+a*a<=l)||(a=r-(this.y+this.height-n),s*s+a*a<=l)||(s=e-(this.x+n),s*s+a*a<=l))return!0}return!1},i.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},i}(),xa=function(){function i(e,r,n,s){n===void 0&&(n=0),s===void 0&&(s=0),this._x=n,this._y=s,this.cb=e,this.scope=r}return i.prototype.clone=function(e,r){return e===void 0&&(e=this.cb),r===void 0&&(r=this.scope),new i(e,r,this._x,this._y)},i.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this},i.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},i.prototype.copyTo=function(e){return e.set(this._x,this._y),e},i.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},i.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),i}(),rr=function(){function i(e,r,n,s,a,l){e===void 0&&(e=1),r===void 0&&(r=0),n===void 0&&(n=0),s===void 0&&(s=1),a===void 0&&(a=0),l===void 0&&(l=0),this.array=null,this.a=e,this.b=r,this.c=n,this.d=s,this.tx=a,this.ty=l}return i.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},i.prototype.set=function(e,r,n,s,a,l){return this.a=e,this.b=r,this.c=n,this.d=s,this.tx=a,this.ty=l,this},i.prototype.toArray=function(e,r){this.array||(this.array=new Float32Array(9));var n=r||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},i.prototype.apply=function(e,r){r=r||new yt;var n=e.x,s=e.y;return r.x=this.a*n+this.c*s+this.tx,r.y=this.b*n+this.d*s+this.ty,r},i.prototype.applyInverse=function(e,r){r=r||new yt;var n=1/(this.a*this.d+this.c*-this.b),s=e.x,a=e.y;return r.x=this.d*n*s+-this.c*n*a+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*a+-this.b*n*s+(-this.ty*this.a+this.tx*this.b)*n,r},i.prototype.translate=function(e,r){return this.tx+=e,this.ty+=r,this},i.prototype.scale=function(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this},i.prototype.rotate=function(e){var r=Math.cos(e),n=Math.sin(e),s=this.a,a=this.c,l=this.tx;return this.a=s*r-this.b*n,this.b=s*n+this.b*r,this.c=a*r-this.d*n,this.d=a*n+this.d*r,this.tx=l*r-this.ty*n,this.ty=l*n+this.ty*r,this},i.prototype.append=function(e){var r=this.a,n=this.b,s=this.c,a=this.d;return this.a=e.a*r+e.b*s,this.b=e.a*n+e.b*a,this.c=e.c*r+e.d*s,this.d=e.c*n+e.d*a,this.tx=e.tx*r+e.ty*s+this.tx,this.ty=e.tx*n+e.ty*a+this.ty,this},i.prototype.setTransform=function(e,r,n,s,a,l,c,h,_){return this.a=Math.cos(c+_)*a,this.b=Math.sin(c+_)*a,this.c=-Math.sin(c-h)*l,this.d=Math.cos(c-h)*l,this.tx=e-(n*this.a+s*this.c),this.ty=r-(n*this.b+s*this.d),this},i.prototype.prepend=function(e){var r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var n=this.a,s=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this},i.prototype.decompose=function(e){var r=this.a,n=this.b,s=this.c,a=this.d,l=e.pivot,c=-Math.atan2(-s,a),h=Math.atan2(n,r),_=Math.abs(c+h);return _<1e-5||Math.abs(Df-_)<1e-5?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=c,e.skew.y=h),e.scale.x=Math.sqrt(r*r+n*n),e.scale.y=Math.sqrt(s*s+a*a),e.position.x=this.tx+(l.x*r+l.y*s),e.position.y=this.ty+(l.x*n+l.y*a),e},i.prototype.invert=function(){var e=this.a,r=this.b,n=this.c,s=this.d,a=this.tx,l=e*s-r*n;return this.a=s/l,this.b=-r/l,this.c=-n/l,this.d=e/l,this.tx=(n*this.ty-s*a)/l,this.ty=-(e*this.ty-r*a)/l,this},i.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},i.prototype.clone=function(){var e=new i;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},i.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},i.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},i.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(i,"IDENTITY",{get:function(){return new i},enumerable:!1,configurable:!0}),Object.defineProperty(i,"TEMP_MATRIX",{get:function(){return new i},enumerable:!1,configurable:!0}),i}(),lo=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uo=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],co=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ho=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],O_=[],pb=[],Uh=Math.sign;function kA(){for(var i=0;i<16;i++){var e=[];O_.push(e);for(var r=0;r<16;r++)for(var n=Uh(lo[i]*lo[r]+co[i]*uo[r]),s=Uh(uo[i]*lo[r]+ho[i]*uo[r]),a=Uh(lo[i]*co[r]+co[i]*ho[r]),l=Uh(uo[i]*co[r]+ho[i]*ho[r]),c=0;c<16;c++)if(lo[c]===n&&uo[c]===s&&co[c]===a&&ho[c]===l){e.push(c);break}}for(var i=0;i<16;i++){var h=new rr;h.set(lo[i],uo[i],co[i],ho[i],0,0),pb.push(h)}}kA();var ar={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(i){return lo[i]},uY:function(i){return uo[i]},vX:function(i){return co[i]},vY:function(i){return ho[i]},inv:function(i){return i&8?i&15:-i&7},add:function(i,e){return O_[i][e]},sub:function(i,e){return O_[i][ar.inv(e)]},rotate180:function(i){return i^4},isVertical:function(i){return(i&3)===2},byDirection:function(i,e){return Math.abs(i)*2<=Math.abs(e)?e>=0?ar.S:ar.N:Math.abs(e)*2<=Math.abs(i)?i>0?ar.E:ar.W:e>0?i>0?ar.SE:ar.SW:i>0?ar.NE:ar.NW},matrixAppendRotationInv:function(i,e,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var s=pb[ar.inv(e)];s.tx=r,s.ty=n,i.append(s)}},Ul=function(){function i(){this.worldTransform=new rr,this.localTransform=new rr,this.position=new xa(this.onChange,this,0,0),this.scale=new xa(this.onChange,this,1,1),this.pivot=new xa(this.onChange,this,0,0),this.skew=new xa(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return i.prototype.onChange=function(){this._localID++},i.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},i.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},i.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},i.prototype.updateTransform=function(e){var r=this.localTransform;if(this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,s=this.worldTransform;s.a=r.a*n.a+r.b*n.c,s.b=r.a*n.b+r.b*n.d,s.c=r.c*n.a+r.d*n.c,s.d=r.c*n.b+r.d*n.d,s.tx=r.tx*n.a+r.ty*n.c+n.tx,s.ty=r.tx*n.b+r.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}},i.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),i.IDENTITY=new i,i}();/*!
 * @pixi/display - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Xe.SORTABLE_CHILDREN=!1;var Nf=function(){function i(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return i.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},i.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},i.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?mt.EMPTY:(e=e||new mt(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},i.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},i.prototype.addPointMatrix=function(e,r){var n=e.a,s=e.b,a=e.c,l=e.d,c=e.tx,h=e.ty,_=n*r.x+a*r.y+c,m=s*r.x+l*r.y+h;this.minX=Math.min(this.minX,_),this.maxX=Math.max(this.maxX,_),this.minY=Math.min(this.minY,m),this.maxY=Math.max(this.maxY,m)},i.prototype.addQuad=function(e){var r=this.minX,n=this.minY,s=this.maxX,a=this.maxY,l=e[0],c=e[1];r=l<r?l:r,n=c<n?c:n,s=l>s?l:s,a=c>a?c:a,l=e[2],c=e[3],r=l<r?l:r,n=c<n?c:n,s=l>s?l:s,a=c>a?c:a,l=e[4],c=e[5],r=l<r?l:r,n=c<n?c:n,s=l>s?l:s,a=c>a?c:a,l=e[6],c=e[7],r=l<r?l:r,n=c<n?c:n,s=l>s?l:s,a=c>a?c:a,this.minX=r,this.minY=n,this.maxX=s,this.maxY=a},i.prototype.addFrame=function(e,r,n,s,a){this.addFrameMatrix(e.worldTransform,r,n,s,a)},i.prototype.addFrameMatrix=function(e,r,n,s,a){var l=e.a,c=e.b,h=e.c,_=e.d,m=e.tx,f=e.ty,p=this.minX,y=this.minY,b=this.maxX,T=this.maxY,S=l*r+h*n+m,A=c*r+_*n+f;p=S<p?S:p,y=A<y?A:y,b=S>b?S:b,T=A>T?A:T,S=l*s+h*n+m,A=c*s+_*n+f,p=S<p?S:p,y=A<y?A:y,b=S>b?S:b,T=A>T?A:T,S=l*r+h*a+m,A=c*r+_*a+f,p=S<p?S:p,y=A<y?A:y,b=S>b?S:b,T=A>T?A:T,S=l*s+h*a+m,A=c*s+_*a+f,p=S<p?S:p,y=A<y?A:y,b=S>b?S:b,T=A>T?A:T,this.minX=p,this.minY=y,this.maxX=b,this.maxY=T},i.prototype.addVertexData=function(e,r,n){for(var s=this.minX,a=this.minY,l=this.maxX,c=this.maxY,h=r;h<n;h+=2){var _=e[h],m=e[h+1];s=_<s?_:s,a=m<a?m:a,l=_>l?_:l,c=m>c?m:c}this.minX=s,this.minY=a,this.maxX=l,this.maxY=c},i.prototype.addVertices=function(e,r,n,s){this.addVerticesMatrix(e.worldTransform,r,n,s)},i.prototype.addVerticesMatrix=function(e,r,n,s,a,l){a===void 0&&(a=0),l===void 0&&(l=a);for(var c=e.a,h=e.b,_=e.c,m=e.d,f=e.tx,p=e.ty,y=this.minX,b=this.minY,T=this.maxX,S=this.maxY,A=n;A<s;A+=2){var R=r[A],L=r[A+1],V=c*R+_*L+f,M=m*L+h*R+p;y=Math.min(y,V-a),T=Math.max(T,V+a),b=Math.min(b,M-l),S=Math.max(S,M+l)}this.minX=y,this.minY=b,this.maxX=T,this.maxY=S},i.prototype.addBounds=function(e){var r=this.minX,n=this.minY,s=this.maxX,a=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>s?e.maxX:s,this.maxY=e.maxY>a?e.maxY:a},i.prototype.addBoundsMask=function(e,r){var n=e.minX>r.minX?e.minX:r.minX,s=e.minY>r.minY?e.minY:r.minY,a=e.maxX<r.maxX?e.maxX:r.maxX,l=e.maxY<r.maxY?e.maxY:r.maxY;if(n<=a&&s<=l){var c=this.minX,h=this.minY,_=this.maxX,m=this.maxY;this.minX=n<c?n:c,this.minY=s<h?s:h,this.maxX=a>_?a:_,this.maxY=l>m?l:m}},i.prototype.addBoundsMatrix=function(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)},i.prototype.addBoundsArea=function(e,r){var n=e.minX>r.x?e.minX:r.x,s=e.minY>r.y?e.minY:r.y,a=e.maxX<r.x+r.width?e.maxX:r.x+r.width,l=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(n<=a&&s<=l){var c=this.minX,h=this.minY,_=this.maxX,m=this.maxY;this.minX=n<c?n:c,this.minY=s<h?s:h,this.maxX=a>_?a:_,this.maxY=l>m?l:m}},i.prototype.pad=function(e,r){e===void 0&&(e=0),r===void 0&&(r=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)},i.prototype.addFramePad=function(e,r,n,s,a,l){e-=a,r-=l,n+=a,s+=l,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>s?this.maxY:s},i}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var R_=function(i,e){return R_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},R_(i,e)};function Om(i,e){R_(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var yr=function(i){Om(e,i);function e(){var r=i.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new Ul,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new Nf,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return e.mixin=function(r){for(var n=Object.keys(r),s=0;s<n.length;++s){var a=n[s];Object.defineProperty(e.prototype,a,Object.getOwnPropertyDescriptor(r,a))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(r,n){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new mt),n=this._boundsRect),this._bounds.getRectangle(n)},e.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new mt),r=this._localBoundsRect),this._localBounds||(this._localBounds=new Nf);var n=this.transform,s=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var a=this._bounds,l=this._boundsID;this._bounds=this._localBounds;var c=this.getBounds(!1,r);return this.parent=s,this.transform=n,this._bounds=a,this._bounds.updateID+=this._boundsID-l,c},e.prototype.toGlobal=function(r,n,s){return s===void 0&&(s=!1),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,n)},e.prototype.toLocal=function(r,n,s,a){return n&&(r=n.toGlobal(r,s,a)),a||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,s)},e.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},e.prototype.setTransform=function(r,n,s,a,l,c,h,_,m){return r===void 0&&(r=0),n===void 0&&(n=0),s===void 0&&(s=1),a===void 0&&(a=1),l===void 0&&(l=0),c===void 0&&(c=0),h===void 0&&(h=0),_===void 0&&(_=0),m===void 0&&(m=0),this.position.x=r,this.position.y=n,this.scale.x=s||1,this.scale.y=a||1,this.rotation=l,this.skew.x=c,this.skew.y=h,this.pivot.x=_,this.pivot.y=m,this},e.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new vb),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},e.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*PA},set:function(r){this.transform.rotation=r*IA},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1))}if(this._mask=r,this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}},enumerable:!1,configurable:!0}),e}(fc),vb=function(i){Om(e,i);function e(){var r=i!==null&&i.apply(this,arguments)||this;return r.sortDirty=null,r}return e}(yr);yr.prototype.displayObjectUpdateTransform=yr.prototype.updateTransform;function DA(i,e){return i.zIndex===e.zIndex?i._lastSortedIndex-e._lastSortedIndex:i.zIndex-e.zIndex}var gr=function(i){Om(e,i);function e(){var r=i.call(this)||this;return r.children=[],r.sortableChildren=Xe.SORTABLE_CHILDREN,r.sortDirty=!1,r}return e.prototype.onChildrenChange=function(r){},e.prototype.addChild=function(){for(var r=arguments,n=[],s=0;s<arguments.length;s++)n[s]=r[s];if(n.length>1)for(var a=0;a<n.length;a++)this.addChild(n[a]);else{var l=n[0];l.parent&&l.parent.removeChild(l),l.parent=this,this.sortDirty=!0,l.transform._parentID=-1,this.children.push(l),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",l,this,this.children.length-1),l.emit("added",this)}return n[0]},e.prototype.addChildAt=function(r,n){if(n<0||n>this.children.length)throw new Error(r+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(n,0,r),this._boundsID++,this.onChildrenChange(n),r.emit("added",this),this.emit("childAdded",r,this,n),r},e.prototype.swapChildren=function(r,n){if(r!==n){var s=this.getChildIndex(r),a=this.getChildIndex(n);this.children[s]=n,this.children[a]=r,this.onChildrenChange(s<a?s:a)}},e.prototype.getChildIndex=function(r){var n=this.children.indexOf(r);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n},e.prototype.setChildIndex=function(r,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var s=this.getChildIndex(r);Ol(this.children,s,1),this.children.splice(n,0,r),this.onChildrenChange(n)},e.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},e.prototype.removeChild=function(){for(var r=arguments,n=[],s=0;s<arguments.length;s++)n[s]=r[s];if(n.length>1)for(var a=0;a<n.length;a++)this.removeChild(n[a]);else{var l=n[0],c=this.children.indexOf(l);if(c===-1)return null;l.parent=null,l.transform._parentID=-1,Ol(this.children,c,1),this._boundsID++,this.onChildrenChange(c),l.emit("removed",this),this.emit("childRemoved",l,this,c)}return n[0]},e.prototype.removeChildAt=function(r){var n=this.getChildAt(r);return n.parent=null,n.transform._parentID=-1,Ol(this.children,r,1),this._boundsID++,this.onChildrenChange(r),n.emit("removed",this),this.emit("childRemoved",n,this,r),n},e.prototype.removeChildren=function(r,n){r===void 0&&(r=0),n===void 0&&(n=this.children.length);var s=r,a=n,l=a-s,c;if(l>0&&l<=a){c=this.children.splice(s,l);for(var h=0;h<c.length;++h)c[h].parent=null,c[h].transform&&(c[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var h=0;h<c.length;++h)c[h].emit("removed",this),this.emit("childRemoved",c[h],this,h);return c}else if(l===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var r=!1,n=0,s=this.children.length;n<s;++n){var a=this.children[n];a._lastSortedIndex=n,!r&&a.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(DA),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,n=this.children.length;r<n;++r){var s=this.children[r];s.visible&&s.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var n=this.children[r];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){var s=n._mask.isMaskData?n._mask.maskObject:n._mask;s?(s.calculateBounds(),this._bounds.addBoundsMask(n._bounds,s._bounds)):this._bounds.addBounds(n._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(r,n){n===void 0&&(n=!1);var s=i.prototype.getLocalBounds.call(this,r);if(!n)for(var a=0,l=this.children.length;a<l;++a){var c=this.children[a];c.visible&&c.updateTransform()}return s},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(r){var n=r.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var s,a;if(this.cullArea?(s=this.cullArea,a=this.worldTransform):this._render!==e.prototype._render&&(s=this.getBounds(!0)),s&&n.intersects(s,a))this._render(r);else if(this.cullArea)return;for(var l=0,c=this.children.length;l<c;++l){var h=this.children[l],_=h.cullable;h.cullable=_||!this.cullArea,h.render(r),h.cullable=_}}},e.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var n=0,s=this.children.length;n<s;++n)this.children[n].render(r)}},e.prototype.renderAdvanced=function(r){var n=this.filters,s=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var a=0;a<n.length;a++)n[a].enabled&&this._enabledFilters.push(n[a])}var l=n&&this._enabledFilters&&this._enabledFilters.length||s&&(!s.isMaskData||s.enabled&&(s.autoDetect||s.type!==Tr.NONE));if(l&&r.batch.flush(),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),s&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var a=0,c=this.children.length;a<c;++a)this.children[a].render(r)}l&&r.batch.flush(),s&&r.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},e.prototype._render=function(r){},e.prototype.destroy=function(r){i.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof r=="boolean"?r:r&&r.children,s=this.removeChildren(0,this.children.length);if(n)for(var a=0;a<s.length;++a)s[a].destroy(r)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var n=this.getLocalBounds().width;n!==0?this.scale.x=r/n:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var n=this.getLocalBounds().height;n!==0?this.scale.y=r/n:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),e}(yr);gr.prototype.containerUpdateTransform=gr.prototype.updateTransform;/*!
 * @pixi/extensions - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Xu=function(){return Xu=Object.assign||function(e){for(var r=arguments,n,s=1,a=arguments.length;s<a;s++){n=r[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Xu.apply(this,arguments)},Ht;(function(i){i.Application="application",i.RendererPlugin="renderer-webgl-plugin",i.CanvasRendererPlugin="renderer-canvas-plugin",i.Loader="loader",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser"})(Ht||(Ht={}));var xx=function(i){if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");var e=typeof i.extension!="object"?{type:i.extension}:i.extension;i=Xu(Xu({},e),{ref:i})}if(typeof i=="object")i=Xu({},i);else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},Bs={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var i=arguments,e=this,r=[],n=0;n<arguments.length;n++)r[n]=i[n];return r.map(xx).forEach(function(s){s.type.forEach(function(a){var l,c;return(c=(l=e._removeHandlers)[a])===null||c===void 0?void 0:c.call(l,s)})}),this},add:function(){for(var i=arguments,e=this,r=[],n=0;n<arguments.length;n++)r[n]=i[n];return r.map(xx).forEach(function(s){s.type.forEach(function(a){var l=e._addHandlers,c=e._queue;l[a]?l[a](s):(c[a]=c[a]||[],c[a].push(s))})}),this},handle:function(i,e,r){var n=this._addHandlers=this._addHandlers||{},s=this._removeHandlers=this._removeHandlers||{};if(n[i]||s[i])throw new Error("Extension type "+i+" already has a handler");n[i]=e,s[i]=r;var a=this._queue;return a[i]&&(a[i].forEach(function(l){return e(l)}),delete a[i]),this},handleByMap:function(i,e){return this.handle(i,function(r){e[r.name]=r.ref},function(r){delete e[r.name]})},handleByList:function(i,e){return this.handle(i,function(r){var n,s;e.includes(r.ref)||(e.push(r.ref),i===Ht.Loader&&((s=(n=r.ref).add)===null||s===void 0||s.call(n)))},function(r){var n=e.indexOf(r.ref);n!==-1&&e.splice(n,1)})}};/*!
 * @pixi/runner - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var $r=function(){function i(e){this.items=[],this._name=e,this._aliasCount=0}return i.prototype.emit=function(e,r,n,s,a,l,c,h){if(arguments.length>8)throw new Error("max arguments reached");var _=this,m=_.name,f=_.items;this._aliasCount++;for(var p=0,y=f.length;p<y;p++)f[p][m](e,r,n,s,a,l,c,h);return f===this.items&&this._aliasCount--,this},i.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},i.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},i.prototype.remove=function(e){var r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this},i.prototype.contains=function(e){return this.items.indexOf(e)!==-1},i.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},i.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(i.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),i}();Object.defineProperties($r.prototype,{dispatch:{value:$r.prototype.emit},run:{value:$r.prototype.emit}});/*!
 * @pixi/ticker - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Xe.TARGET_FPMS=.06;var Ls;(function(i){i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY"})(Ls||(Ls={}));var Pv=function(){function i(e,r,n,s){r===void 0&&(r=null),n===void 0&&(n=0),s===void 0&&(s=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=n,this.once=s}return i.prototype.match=function(e,r){return r===void 0&&(r=null),this.fn===e&&this.context===r},i.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r},i.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},i.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=e?null:r,this.previous=null,r},i}(),Yr=function(){function i(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Pv(null,null,1/0),this.deltaMS=1/Xe.TARGET_FPMS,this.elapsedMS=1/Xe.TARGET_FPMS,this._tick=function(r){e._requestId=null,e.started&&(e.update(r),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return i.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},i.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},i.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},i.prototype.add=function(e,r,n){return n===void 0&&(n=Ls.NORMAL),this._addListener(new Pv(e,r,n))},i.prototype.addOnce=function(e,r,n){return n===void 0&&(n=Ls.NORMAL),this._addListener(new Pv(e,r,n,!0))},i.prototype._addListener=function(e){var r=this._head.next,n=this._head;if(!r)e.connect(n);else{for(;r;){if(e.priority>r.priority){e.connect(n);break}n=r,r=r.next}e.previous||e.connect(n)}return this._startIfPossible(),this},i.prototype.remove=function(e,r){for(var n=this._head.next;n;)n.match(e,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(i.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,r=this._head;r=r.next;)e++;return e},enumerable:!1,configurable:!0}),i.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},i.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},i.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},i.prototype.update=function(e){e===void 0&&(e=performance.now());var r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*Xe.TARGET_FPMS;for(var s=this._head,a=s.next;a;)a=a.emit(this.deltaTime);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(i.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var r=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,r)/1e3,Xe.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"shared",{get:function(){if(!i._shared){var e=i._shared=new i;e.autoStart=!0,e._protected=!0}return i._shared},enumerable:!1,configurable:!0}),Object.defineProperty(i,"system",{get:function(){if(!i._system){var e=i._system=new i;e.autoStart=!0,e._protected=!0}return i._system},enumerable:!1,configurable:!0}),i}(),NA=function(){function i(){}return i.init=function(e){var r=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,Ls.LOW)},get:function(){return this._ticker}}),this.stop=function(){r._ticker.stop()},this.start=function(){r._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Yr.shared:new Yr,e.autoStart&&this.start()},i.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},i.extension=Ht.Application,i}();/*!
 * @pixi/core - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Xe.PREFER_ENV=$i.any?Fs.WEBGL:Fs.WEBGL2;Xe.STRICT_TEXTURE_CACHE=!1;var M_=[];function _b(i,e){if(!i)return null;var r="";if(typeof i=="string"){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);n&&(r=n[1].toLowerCase())}for(var s=M_.length-1;s>=0;--s){var a=M_[s];if(a.test&&a.test(i,r))return new a(i,e)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var k_=function(i,e){return k_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},k_(i,e)};function Vt(i,e){k_(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var D_=function(){return D_=Object.assign||function(e){for(var r=arguments,n,s=1,a=arguments.length;s<a;s++){n=r[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},D_.apply(this,arguments)};function FA(i,e){var r={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(r[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(r[n[s]]=i[n[s]]);return r}var nc=function(){function i(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new $r("setRealSize"),this.onUpdate=new $r("update"),this.onError=new $r("onError")}return i.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},i.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},i.prototype.resize=function(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))},Object.defineProperty(i.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),i.prototype.update=function(){this.destroyed||this.onUpdate.emit()},i.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),i.prototype.style=function(e,r,n){return!1},i.prototype.dispose=function(){},i.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},i.test=function(e,r){return!1},i}(),pc=function(i){Vt(e,i);function e(r,n){var s=this,a=n||{},l=a.width,c=a.height;if(!l||!c)throw new Error("BufferResource width or height invalid");return s=i.call(this,l,c)||this,s.data=r,s}return e.prototype.upload=function(r,n,s){var a=r.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Ai.UNPACK);var l=n.realWidth,c=n.realHeight;return s.width===l&&s.height===c?a.texSubImage2D(n.target,0,0,0,l,c,n.format,s.type,this.data):(s.width=l,s.height=c,a.texImage2D(n.target,0,s.internalFormat,l,c,0,n.format,s.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Uint32Array},e}(nc),LA={scaleMode:Wi.NEAREST,format:Le.RGBA,alphaMode:Ai.NPM},Pt=function(i){Vt(e,i);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=null);var s=i.call(this)||this;n=n||{};var a=n.alphaMode,l=n.mipmap,c=n.anisotropicLevel,h=n.scaleMode,_=n.width,m=n.height,f=n.wrapMode,p=n.format,y=n.type,b=n.target,T=n.resolution,S=n.resourceOptions;return r&&!(r instanceof nc)&&(r=_b(r,S),r.internal=!0),s.resolution=T||Xe.RESOLUTION,s.width=Math.round((_||0)*s.resolution)/s.resolution,s.height=Math.round((m||0)*s.resolution)/s.resolution,s._mipmap=l!==void 0?l:Xe.MIPMAP_TEXTURES,s.anisotropicLevel=c!==void 0?c:Xe.ANISOTROPIC_LEVEL,s._wrapMode=f||Xe.WRAP_MODE,s._scaleMode=h!==void 0?h:Xe.SCALE_MODE,s.format=p||Le.RGBA,s.type=y||Ze.UNSIGNED_BYTE,s.target=b||yo.TEXTURE_2D,s.alphaMode=a!==void 0?a:Ai.UNPACK,s.uid=wo(),s.touched=0,s.isPowerOfTwo=!1,s._refreshPOT(),s._glTextures={},s.dirtyId=0,s.dirtyStyleId=0,s.cacheId=null,s.valid=_>0&&m>0,s.textureCacheIds=[],s.destroyed=!1,s.resource=null,s._batchEnabled=0,s._batchLocation=0,s.parentTextureArray=null,s.setResource(r),s}return Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(r,n){var s;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,s=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,s=!0),s&&this.dirtyStyleId++,this},e.prototype.setSize=function(r,n,s){return s=s||this.resolution,this.setRealSize(r*s,n*s,s)},e.prototype.setRealSize=function(r,n,s){return this.resolution=s||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=vx(this.realWidth)&&vx(this.realHeight)},e.prototype.setResolution=function(r){var n=this.resolution;return n===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*n)/r,this.height=Math.round(this.height*n)/r,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(r){this.emit("error",this,r)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete to[this.cacheId],delete Es[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(r,n,s){s===void 0&&(s=Xe.STRICT_TEXTURE_CACHE);var a=typeof r=="string",l=null;if(a)l=r;else{if(!r._pixiId){var c=n&&n.pixiIdPrefix||"pixiid";r._pixiId=c+"_"+wo()}l=r._pixiId}var h=to[l];if(a&&s&&!h)throw new Error('The cacheId "'+l+'" does not exist in BaseTextureCache.');return h||(h=new e(r,n),h.cacheId=l,e.addToCache(h,l)),h},e.fromBuffer=function(r,n,s,a){r=r||new Float32Array(n*s*4);var l=new pc(r,{width:n,height:s}),c=r instanceof Float32Array?Ze.FLOAT:Ze.UNSIGNED_BYTE;return new e(l,Object.assign({},LA,a||{width:n,height:s,type:c}))},e.addToCache=function(r,n){n&&(r.textureCacheIds.indexOf(n)===-1&&r.textureCacheIds.push(n),to[n]&&console.warn("BaseTexture added to the cache with an id ["+n+"] that already had an entry"),to[n]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var n=to[r];if(n){var s=n.textureCacheIds.indexOf(r);return s>-1&&n.textureCacheIds.splice(s,1),delete to[r],n}}else if(r&&r.textureCacheIds){for(var a=0;a<r.textureCacheIds.length;++a)delete to[r.textureCacheIds[a]];return r.textureCacheIds.length=0,r}return null},e._globalBatch=0,e}(fc),mb=function(i){Vt(e,i);function e(r,n){var s=this,a=n||{},l=a.width,c=a.height;s=i.call(this,l,c)||this,s.items=[],s.itemDirtyIds=[];for(var h=0;h<r;h++){var _=new Pt;s.items.push(_),s.itemDirtyIds.push(-2)}return s.length=r,s._load=null,s.baseTexture=null,s}return e.prototype.initFromArray=function(r,n){for(var s=0;s<this.length;s++)r[s]&&(r[s].castToBaseTexture?this.addBaseTextureAt(r[s].castToBaseTexture(),s):r[s]instanceof nc?this.addResourceAt(r[s],s):this.addResourceAt(_b(r[s],n),s))},e.prototype.dispose=function(){for(var r=0,n=this.length;r<n;r++)this.items[r].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(r,n){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");return r.valid&&!this.valid&&this.resize(r.width,r.height),this.items[n].setResource(r),this},e.prototype.bind=function(r){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");i.prototype.bind.call(this,r);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=r,this.items[n].on("update",r.update,r)},e.prototype.unbind=function(r){i.prototype.unbind.call(this,r);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",r.update,r)},e.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.items.map(function(a){return a.resource}).filter(function(a){return a}),s=n.map(function(a){return a.load()});return this._load=Promise.all(s).then(function(){var a=r.items[0],l=a.realWidth,c=a.realHeight;return r.resize(l,c),Promise.resolve(r)}),this._load},e}(nc),BA=function(i){Vt(e,i);function e(r,n){var s=this,a=n||{},l=a.width,c=a.height,h,_;return Array.isArray(r)?(h=r,_=r.length):_=r,s=i.call(this,_,{width:l,height:c})||this,h&&s.initFromArray(h,n),s}return e.prototype.addBaseTextureAt=function(r,n){if(r.resource)this.addResourceAt(r.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this},e.prototype.bind=function(r){i.prototype.bind.call(this,r),r.target=yo.TEXTURE_2D_ARRAY},e.prototype.upload=function(r,n,s){var a=this,l=a.length,c=a.itemDirtyIds,h=a.items,_=r.gl;s.dirtyId<0&&_.texImage3D(_.TEXTURE_2D_ARRAY,0,s.internalFormat,this._width,this._height,l,0,n.format,s.type,null);for(var m=0;m<l;m++){var f=h[m];c[m]<f.dirtyId&&(c[m]=f.dirtyId,f.valid&&_.texSubImage3D(_.TEXTURE_2D_ARRAY,0,0,0,m,f.resource.width,f.resource.height,1,n.format,s.type,f.resource.source))}return!0},e}(mb),Aa=function(i){Vt(e,i);function e(r){var n=this,s=r,a=s.naturalWidth||s.videoWidth||s.width,l=s.naturalHeight||s.videoHeight||s.height;return n=i.call(this,a,l)||this,n.source=r,n.noSubImage=!1,n}return e.crossOrigin=function(r,n,s){s===void 0&&n.indexOf("data:")!==0?r.crossOrigin=AA(n):s!==!1&&(r.crossOrigin=typeof s=="string"?s:"anonymous")},e.prototype.upload=function(r,n,s,a){var l=r.gl,c=n.realWidth,h=n.realHeight;if(a=a||this.source,a instanceof HTMLImageElement){if(!a.complete||a.naturalWidth===0)return!1}else if(a instanceof HTMLVideoElement&&a.readyState<=1)return!1;return l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Ai.UNPACK),!this.noSubImage&&n.target===l.TEXTURE_2D&&s.width===c&&s.height===h?l.texSubImage2D(l.TEXTURE_2D,0,0,0,n.format,s.type,a):(s.width=c,s.height=h,l.texImage2D(n.target,0,s.internalFormat,n.format,s.type,a)),!0},e.prototype.update=function(){if(!this.destroyed){var r=this.source,n=r.naturalWidth||r.videoWidth||r.width,s=r.naturalHeight||r.videoHeight||r.height;this.resize(n,s),i.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(nc),jA=function(i){Vt(e,i);function e(r){return i.call(this,r)||this}return e.test=function(r){var n=globalThis.OffscreenCanvas;return n&&r instanceof n?!0:globalThis.HTMLCanvasElement&&r instanceof HTMLCanvasElement},e}(Aa),UA=function(i){Vt(e,i);function e(r,n){var s=this,a=n||{},l=a.width,c=a.height,h=a.autoLoad,_=a.linkBaseTexture;if(r&&r.length!==e.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");s=i.call(this,6,{width:l,height:c})||this;for(var m=0;m<e.SIDES;m++)s.items[m].target=yo.TEXTURE_CUBE_MAP_POSITIVE_X+m;return s.linkBaseTexture=_!==!1,r&&s.initFromArray(r,n),h!==!1&&s.load(),s}return e.prototype.bind=function(r){i.prototype.bind.call(this,r),r.target=yo.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(r,n,s){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=yo.TEXTURE_CUBE_MAP_POSITIVE_X+n,r.parentTextureArray=this.baseTexture,this.items[n]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[n]=r,this},e.prototype.upload=function(r,n,s){for(var a=this.itemDirtyIds,l=0;l<e.SIDES;l++){var c=this.items[l];(a[l]<c.dirtyId||s.dirtyId<n.dirtyId)&&(c.valid&&c.resource?(c.resource.upload(r,c,s),a[l]=c.dirtyId):a[l]<-1&&(r.gl.texImage2D(c.target,0,s.internalFormat,n.realWidth,n.realHeight,0,n.format,s.type,null),a[l]=-1))}return!0},e.test=function(r){return Array.isArray(r)&&r.length===e.SIDES},e.SIDES=6,e}(mb),yb=function(i){Vt(e,i);function e(r,n){var s=this;if(n=n||{},!(r instanceof HTMLImageElement)){var a=new Image;Aa.crossOrigin(a,r,n.crossorigin),a.src=r,r=a}return s=i.call(this,r)||this,!r.complete&&s._width&&s._height&&(s._width=0,s._height=0),s.url=r.src,s._process=null,s.preserveBitmap=!1,s.createBitmap=(n.createBitmap!==void 0?n.createBitmap:Xe.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,s.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,s.bitmap=null,s._load=null,n.autoLoad!==!1&&s.load(),s}return e.prototype.load=function(r){var n=this;return this._load?this._load:(r!==void 0&&(this.createBitmap=r),this._load=new Promise(function(s,a){var l=n.source;n.url=l.src;var c=function(){n.destroyed||(l.onload=null,l.onerror=null,n.resize(l.width,l.height),n._load=null,n.createBitmap?s(n.process()):s(n))};l.complete&&l.src?c():(l.onload=c,l.onerror=function(h){a(h),n.onError.emit(h)})}),this._load)},e.prototype.process=function(){var r=this,n=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var s=globalThis.createImageBitmap,a=!n.crossOrigin||n.crossOrigin==="anonymous";return this._process=fetch(n.src,{mode:a?"cors":"no-cors"}).then(function(l){return l.blob()}).then(function(l){return s(l,0,0,n.width,n.height,{premultiplyAlpha:r.alphaMode===null||r.alphaMode===Ai.UNPACK?"premultiply":"none"})}).then(function(l){return r.destroyed?Promise.reject():(r.bitmap=l,r.update(),r._process=null,Promise.resolve(r))}),this._process},e.prototype.upload=function(r,n,s){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return i.prototype.upload.call(this,r,n,s);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(i.prototype.upload.call(this,r,n,s,this.bitmap),!this.preserveBitmap){var a=!0,l=n._glTextures;for(var c in l){var h=l[c];if(h!==s&&h.dirtyId!==n.dirtyId){a=!1;break}}a&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,i.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(r){return typeof r=="string"||r instanceof HTMLImageElement},e}(Aa),GA=function(i){Vt(e,i);function e(r,n){var s=this;return n=n||{},s=i.call(this,Xe.ADAPTER.createCanvas())||this,s._width=0,s._height=0,s.svg=r,s.scale=n.scale||1,s._overrideWidth=n.width,s._overrideHeight=n.height,s._resolve=null,s._crossorigin=n.crossorigin,s._load=null,n.autoLoad!==!1&&s.load(),s}return e.prototype.load=function(){var r=this;return this._load?this._load:(this._load=new Promise(function(n){if(r._resolve=function(){r.resize(r.source.width,r.source.height),n(r)},e.SVG_XML.test(r.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");r.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.svg)))}r._loadSvg()}),this._load)},e.prototype._loadSvg=function(){var r=this,n=new Image;Aa.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=function(s){r._resolve&&(n.onerror=null,r.onError.emit(s))},n.onload=function(){if(r._resolve){var s=n.width,a=n.height;if(!s||!a)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var l=s*r.scale,c=a*r.scale;(r._overrideWidth||r._overrideHeight)&&(l=r._overrideWidth||r._overrideHeight/a*s,c=r._overrideHeight||r._overrideWidth/s*a),l=Math.round(l),c=Math.round(c);var h=r.source;h.width=l,h.height=c,h._pixiId="canvas_"+wo(),h.getContext("2d").drawImage(n,0,0,s,a,0,0,l,c),r._resolve(),r._resolve=null}}},e.getSize=function(r){var n=e.SVG_SIZE.exec(r),s={};return n&&(s[n[1]]=Math.round(parseFloat(n[3])),s[n[5]]=Math.round(parseFloat(n[7]))),s},e.prototype.dispose=function(){i.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(r,n){return n==="svg"||typeof r=="string"&&r.startsWith("data:image/svg+xml")||typeof r=="string"&&e.SVG_XML.test(r)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Aa),HA=function(i){Vt(e,i);function e(r,n){var s=this;if(n=n||{},!(r instanceof HTMLVideoElement)){var a=document.createElement("video");a.setAttribute("preload","auto"),a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);var l=r[0].src||r[0];Aa.crossOrigin(a,l,n.crossorigin);for(var c=0;c<r.length;++c){var h=document.createElement("source"),_=r[c],m=_.src,f=_.mime;m=m||r[c];var p=m.split("?").shift().toLowerCase(),y=p.slice(p.lastIndexOf(".")+1);f=f||e.MIME_TYPES[y]||"video/"+y,h.src=m,h.type=f,a.appendChild(h)}r=a}return s=i.call(this,r)||this,s.noSubImage=!0,s._autoUpdate=!0,s._isConnectedToTicker=!1,s._updateFPS=n.updateFPS||0,s._msToNextUpdate=0,s.autoPlay=n.autoPlay!==!1,s._load=null,s._resolve=null,s._onCanPlay=s._onCanPlay.bind(s),s._onError=s._onError.bind(s),n.autoLoad!==!1&&s.load(),s}return e.prototype.update=function(r){if(!this.destroyed){var n=Yr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(i.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",this._onPlayStart.bind(this)),n.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener("canplay",this._onCanPlay),n.addEventListener("canplaythrough",this._onCanPlay),n.addEventListener("error",this._onError,!0)),this._load=new Promise(function(s){r.valid?s(r):(r._resolve=s,n.load())}),this._load},e.prototype._onError=function(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)},e.prototype._isSourcePlaying=function(){var r=this.source;return!r.paused&&!r.ended&&this._isSourceReady()},e.prototype._isSourceReady=function(){var r=this.source;return r.readyState>2},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Yr.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Yr.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);var n=this.valid;this.resize(r.videoWidth,r.videoHeight),!n&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(Yr.shared.remove(this.update,this),this._isConnectedToTicker=!1);var r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),i.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(Yr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Yr.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(r){r!==this._updateFPS&&(this._updateFPS=r)},enumerable:!1,configurable:!0}),e.test=function(r,n){return globalThis.HTMLVideoElement&&r instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Aa),zA=function(i){Vt(e,i);function e(r){return i.call(this,r)||this}return e.test=function(r){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&r instanceof ImageBitmap},e}(Aa);M_.push(yb,zA,jA,HA,GA,pc,UA,BA);var XA=function(i){Vt(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.upload=function(r,n,s){var a=r.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Ai.UNPACK);var l=n.realWidth,c=n.realHeight;return s.width===l&&s.height===c?a.texSubImage2D(n.target,0,0,0,l,c,n.format,s.type,this.data):(s.width=l,s.height=c,a.texImage2D(n.target,0,s.internalFormat,l,c,0,n.format,s.type,this.data)),!0},e}(pc),N_=function(){function i(e,r){this.width=Math.round(e||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new $r("disposeFramebuffer"),this.multisample=tr.NONE}return Object.defineProperty(i.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),i.prototype.addColorTexture=function(e,r){return e===void 0&&(e=0),this.colorTextures[e]=r||new Pt(null,{scaleMode:Wi.NEAREST,resolution:1,mipmap:Ci.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.addDepthTexture=function(e){return this.depthTexture=e||new Pt(new XA(null,{width:this.width,height:this.height}),{scaleMode:Wi.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Ci.OFF,format:Le.DEPTH_COMPONENT,type:Ze.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.resize=function(e,r){if(e=Math.round(e),r=Math.round(r),!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var s=this.colorTextures[n],a=s.resolution;s.setSize(e/a,r/a)}if(this.depthTexture){var a=this.depthTexture.resolution;this.depthTexture.setSize(e/a,r/a)}}},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},i}(),gb=function(i){Vt(e,i);function e(r){r===void 0&&(r={});var n=this;if(typeof r=="number"){var s=arguments[0],a=arguments[1],l=arguments[2],c=arguments[3];r={width:s,height:a,scaleMode:l,resolution:c}}return r.width=r.width||100,r.height=r.height||100,r.multisample=r.multisample!==void 0?r.multisample:tr.NONE,n=i.call(this,null,r)||this,n.mipmap=Ci.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new N_(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=r.multisample,n.maskStack=[],n.filterStack=[{}],n}return e.prototype.resize=function(r,n){this.framebuffer.resize(r*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),i.prototype.dispose.call(this)},e.prototype.destroy=function(){i.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(Pt),xb=function(){function i(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return i.prototype.set=function(e,r,n){var s=r.width,a=r.height;if(n){var l=e.width/2/s,c=e.height/2/a,h=e.x/s+l,_=e.y/a+c;n=ar.add(n,ar.NW),this.x0=h+l*ar.uX(n),this.y0=_+c*ar.uY(n),n=ar.add(n,2),this.x1=h+l*ar.uX(n),this.y1=_+c*ar.uY(n),n=ar.add(n,2),this.x2=h+l*ar.uX(n),this.y2=_+c*ar.uY(n),n=ar.add(n,2),this.x3=h+l*ar.uX(n),this.y3=_+c*ar.uY(n)}else this.x0=e.x/s,this.y0=e.y/a,this.x1=(e.x+e.width)/s,this.y1=e.y/a,this.x2=(e.x+e.width)/s,this.y2=(e.y+e.height)/a,this.x3=e.x/s,this.y3=(e.y+e.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},i.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},i}(),bx=new xb;function Gh(i){i.destroy=function(){},i.on=function(){},i.once=function(){},i.emit=function(){}}var it=function(i){Vt(e,i);function e(r,n,s,a,l,c){var h=i.call(this)||this;if(h.noFrame=!1,n||(h.noFrame=!0,n=new mt(0,0,1,1)),r instanceof e&&(r=r.baseTexture),h.baseTexture=r,h._frame=n,h.trim=a,h.valid=!1,h._uvs=bx,h.uvMatrix=null,h.orig=s||n,h._rotate=Number(l||0),l===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=c?new yt(c.x,c.y):new yt(0,0),h._updateID=0,h.textureCacheIds=[],r.valid?h.noFrame?r.valid&&h.onBaseTextureUpdated(r):h.frame=n:r.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&r.on("update",h.onBaseTextureUpdated,h),h}return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(r){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=r.width,this._frame.height=r.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(r){if(this.baseTexture){if(r){var n=this.baseTexture.resource;n&&n.url&&Es[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var r=this._frame.clone(),n=this._frame===this.orig?r:this.orig.clone(),s=new e(this.baseTexture,!this.noFrame&&r,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(s._frame=r),s},e.prototype.updateUvs=function(){this._uvs===bx&&(this._uvs=new xb),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(r,n,s){n===void 0&&(n={}),s===void 0&&(s=Xe.STRICT_TEXTURE_CACHE);var a=typeof r=="string",l=null;if(a)l=r;else if(r instanceof Pt){if(!r.cacheId){var c=n&&n.pixiIdPrefix||"pixiid";r.cacheId=c+"-"+wo(),Pt.addToCache(r,r.cacheId)}l=r.cacheId}else{if(!r._pixiId){var c=n&&n.pixiIdPrefix||"pixiid";r._pixiId=c+"_"+wo()}l=r._pixiId}var h=Es[l];if(a&&s&&!h)throw new Error('The cacheId "'+l+'" does not exist in TextureCache.');return!h&&!(r instanceof Pt)?(n.resolution||(n.resolution=kf(r)),h=new e(new Pt(r,n)),h.baseTexture.cacheId=l,Pt.addToCache(h.baseTexture,l),e.addToCache(h,l)):!h&&r instanceof Pt&&(h=new e(r),e.addToCache(h,l)),h},e.fromURL=function(r,n){var s=Object.assign({autoLoad:!1},n?.resourceOptions),a=e.from(r,Object.assign({resourceOptions:s},n),!1),l=a.baseTexture.resource;return a.baseTexture.valid?Promise.resolve(a):l.load().then(function(){return Promise.resolve(a)})},e.fromBuffer=function(r,n,s,a){return new e(Pt.fromBuffer(r,n,s,a))},e.fromLoader=function(r,n,s,a){var l=new Pt(r,Object.assign({scaleMode:Xe.SCALE_MODE,resolution:kf(n)},a)),c=l.resource;c instanceof yb&&(c.url=n);var h=new e(l);return s||(s=n),Pt.addToCache(h.baseTexture,s),e.addToCache(h,s),s!==n&&(Pt.addToCache(h.baseTexture,n),e.addToCache(h,n)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(_){h.baseTexture.once("loaded",function(){return _(h)})})},e.addToCache=function(r,n){n&&(r.textureCacheIds.indexOf(n)===-1&&r.textureCacheIds.push(n),Es[n]&&console.warn("Texture added to the cache with an id ["+n+"] that already had an entry"),Es[n]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var n=Es[r];if(n){var s=n.textureCacheIds.indexOf(r);return s>-1&&n.textureCacheIds.splice(s,1),delete Es[r],n}}else if(r&&r.textureCacheIds){for(var a=0;a<r.textureCacheIds.length;++a)Es[r.textureCacheIds[a]]===r&&delete Es[r.textureCacheIds[a]];return r.textureCacheIds.length=0,r}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(r){this._frame=r,this.noFrame=!1;var n=r.x,s=r.y,a=r.width,l=r.height,c=n+a>this.baseTexture.width,h=s+l>this.baseTexture.height;if(c||h){var _=c&&h?"and":"or",m="X: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.width,f="Y: "+s+" + "+l+" = "+(s+l)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(m+" "+_+" "+f))}this.valid=a&&l&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=r),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(r){this._rotate=r,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new Pt),Gh(e._EMPTY),Gh(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var r=Xe.ADAPTER.createCanvas(16,16),n=r.getContext("2d");r.width=16,r.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),e._WHITE=new e(Pt.from(r)),Gh(e._WHITE),Gh(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(fc),To=function(i){Vt(e,i);function e(r,n){var s=i.call(this,r,n)||this;return s.valid=!0,s.filterFrame=null,s.filterPoolKey=null,s.updateUvs(),s}return Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(r){this.framebuffer.multisample=r},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,n,s){s===void 0&&(s=!0);var a=this.baseTexture.resolution,l=Math.round(r*a)/a,c=Math.round(n*a)/a;this.valid=l>0&&c>0,this._frame.width=this.orig.width=l,this._frame.height=this.orig.height=c,s&&this.baseTexture.resize(l,c),this.updateUvs()},e.prototype.setResolution=function(r){var n=this.baseTexture;n.resolution!==r&&(n.setResolution(r),this.resize(n.width,n.height,!1))},e.create=function(r){for(var n=arguments,s=[],a=1;a<arguments.length;a++)s[a-1]=n[a];return typeof r=="number"&&(Si("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),r={width:r,height:s[0],scaleMode:s[1],resolution:s[2]}),new e(new gb(r))},e}(it),VA=function(){function i(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return i.prototype.createTexture=function(e,r,n){n===void 0&&(n=tr.NONE);var s=new gb(Object.assign({width:e,height:r,resolution:1,multisample:n},this.textureOptions));return new To(s)},i.prototype.getOptimalTexture=function(e,r,n,s){n===void 0&&(n=1),s===void 0&&(s=tr.NONE);var a;e=Math.ceil(e*n-1e-6),r=Math.ceil(r*n-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=Mf(e),r=Mf(r),a=((e&65535)<<16|r&65535)>>>0,s>1&&(a+=s*4294967296)):a=s>1?-s:-1,this.texturePool[a]||(this.texturePool[a]=[]);var l=this.texturePool[a].pop();return l||(l=this.createTexture(e,r,s)),l.filterPoolKey=a,l.setResolution(n),l},i.prototype.getFilterTexture=function(e,r,n){var s=this.getOptimalTexture(e.width,e.height,r||e.resolution,n||tr.NONE);return s.filterFrame=e.filterFrame,s},i.prototype.returnTexture=function(e){var r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)},i.prototype.returnFilterTexture=function(e){this.returnTexture(e)},i.prototype.clear=function(e){if(e=e!==!1,e)for(var r in this.texturePool){var n=this.texturePool[r];if(n)for(var s=0;s<n.length;s++)n[s].destroy(!0)}this.texturePool={}},i.prototype.setScreenSize=function(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(var r in this.texturePool)if(Number(r)<0){var n=this.texturePool[r];if(n)for(var s=0;s<n.length;s++)n[s].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},i.SCREEN_KEY=-1,i}(),wx=function(){function i(e,r,n,s,a,l,c){r===void 0&&(r=0),n===void 0&&(n=!1),s===void 0&&(s=Ze.FLOAT),this.buffer=e,this.size=r,this.normalized=n,this.type=s,this.stride=a,this.start=l,this.instance=c}return i.prototype.destroy=function(){this.buffer=null},i.from=function(e,r,n,s,a){return new i(e,r,n,s,a)},i}(),qA=0,or=function(){function i(e,r,n){r===void 0&&(r=!0),n===void 0&&(n=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=qA++,this.disposeRunner=new $r("disposeBuffer")}return i.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(i.prototype,"index",{get:function(){return this.type===Ki.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?Ki.ELEMENT_ARRAY_BUFFER:Ki.ARRAY_BUFFER},enumerable:!1,configurable:!0}),i.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new i(e)},i}(),WA={Float32Array,Uint32Array,Int32Array,Uint8Array};function $A(i,e){for(var r=0,n=0,s={},a=0;a<i.length;a++)n+=e[a],r+=i[a].length;for(var l=new ArrayBuffer(r*4),c=null,h=0,a=0;a<i.length;a++){var _=e[a],m=i[a],f=db(m);s[f]||(s[f]=new WA[f](l)),c=s[f];for(var p=0;p<m.length;p++){var y=(p/_|0)*n+h,b=p%_;c[y+b]=m[p]}h+=_}return new Float32Array(l)}var Tx={5126:4,5123:2,5121:1},YA=0,KA={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Po=function(){function i(e,r){e===void 0&&(e=[]),r===void 0&&(r={}),this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=YA++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new $r("disposeGeometry"),this.refCount=0}return i.prototype.addAttribute=function(e,r,n,s,a,l,c,h){if(n===void 0&&(n=0),s===void 0&&(s=!1),h===void 0&&(h=!1),!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof or||(r instanceof Array&&(r=new Float32Array(r)),r=new or(r));var _=e.split("|");if(_.length>1){for(var m=0;m<_.length;m++)this.addAttribute(_[m],r,n,s,a);return this}var f=this.buffers.indexOf(r);return f===-1&&(this.buffers.push(r),f=this.buffers.length-1),this.attributes[e]=new wx(f,n,s,a,l,c,h),this.instanced=this.instanced||h,this},i.prototype.getAttribute=function(e){return this.attributes[e]},i.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},i.prototype.addIndex=function(e){return e instanceof or||(e instanceof Array&&(e=new Uint16Array(e)),e=new or(e)),e.type=Ki.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},i.prototype.getIndex=function(){return this.indexBuffer},i.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e=[],r=[],n=new or,s;for(s in this.attributes){var a=this.attributes[s],l=this.buffers[a.buffer];e.push(l.data),r.push(a.size*Tx[a.type]/4),a.buffer=0}for(n.data=$A(e,r),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},i.prototype.getSize=function(){for(var e in this.attributes){var r=this.attributes[e],n=this.buffers[r.buffer];return n.data.length/(r.stride/4||r.size)}return 0},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},i.prototype.clone=function(){for(var e=new i,r=0;r<this.buffers.length;r++)e.buffers[r]=new or(this.buffers[r].data.slice(0));for(var r in this.attributes){var n=this.attributes[r];e.attributes[r]=new wx(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Ki.ELEMENT_ARRAY_BUFFER),e},i.merge=function(e){for(var r=new i,n=[],s=[],a=[],l,c=0;c<e.length;c++){l=e[c];for(var h=0;h<l.buffers.length;h++)s[h]=s[h]||0,s[h]+=l.buffers[h].data.length,a[h]=0}for(var c=0;c<l.buffers.length;c++)n[c]=new KA[db(l.buffers[c].data)](s[c]),r.buffers[c]=new or(n[c]);for(var c=0;c<e.length;c++){l=e[c];for(var h=0;h<l.buffers.length;h++)n[h].set(l.buffers[h].data,a[h]),a[h]+=l.buffers[h].data.length}if(r.attributes=l.attributes,l.indexBuffer){r.indexBuffer=r.buffers[l.buffers.indexOf(l.indexBuffer)],r.indexBuffer.type=Ki.ELEMENT_ARRAY_BUFFER;for(var _=0,m=0,f=0,p=0,c=0;c<l.buffers.length;c++)if(l.buffers[c]!==l.indexBuffer){p=c;break}for(var c in l.attributes){var y=l.attributes[c];(y.buffer|0)===p&&(m+=y.size*Tx[y.type]/4)}for(var c=0;c<e.length;c++){for(var b=e[c].indexBuffer.data,h=0;h<b.length;h++)r.indexBuffer.data[h+f]+=_;_+=e[c].buffers[p].data.length/m,f+=b.length}}return r},i}(),QA=function(i){Vt(e,i);function e(){var r=i.call(this)||this;return r.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),r}return e}(Po),Rm=function(i){Vt(e,i);function e(){var r=i.call(this)||this;return r.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),r.uvs=new Float32Array([0,0,1,0,1,1,0,1]),r.vertexBuffer=new or(r.vertices),r.uvBuffer=new or(r.uvs),r.addAttribute("aVertexPosition",r.vertexBuffer).addAttribute("aTextureCoord",r.uvBuffer).addIndex([0,1,2,0,2,3]),r}return e.prototype.map=function(r,n){var s=0,a=0;return this.uvs[0]=s,this.uvs[1]=a,this.uvs[2]=s+n.width/r.width,this.uvs[3]=a,this.uvs[4]=s+n.width/r.width,this.uvs[5]=a+n.height/r.height,this.uvs[6]=s,this.uvs[7]=a+n.height/r.height,s=n.x,a=n.y,this.vertices[0]=s,this.vertices[1]=a,this.vertices[2]=s+n.width,this.vertices[3]=a,this.vertices[4]=s+n.width,this.vertices[5]=a+n.height,this.vertices[6]=s,this.vertices[7]=a+n.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Po),ZA=0,go=function(){function i(e,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ZA++,this.static=!!r,this.ubo=!!n,e instanceof or?(this.buffer=e,this.buffer.type=Ki.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new or(new Float32Array(1)),this.buffer.type=Ki.UNIFORM_BUFFER,this.autoManage=!0))}return i.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},i.prototype.add=function(e,r,n){if(!this.ubo)this.uniforms[e]=new i(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},i.from=function(e,r,n){return new i(e,r,n)},i.uboFrom=function(e,r){return new i(e,r??!0,!0)},i}(),JA=function(){function i(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=tr.NONE,this.sourceFrame=new mt,this.destinationFrame=new mt,this.bindingSourceFrame=new mt,this.bindingDestinationFrame=new mt,this.filters=[],this.transform=null}return i.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},i}(),Hh=[new yt,new yt,new yt,new yt],Iv=new rr,eP=function(){function i(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new VA,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new QA,this.quadUv=new Rm,this.tempRect=new mt,this.activeState={},this.globalUniforms=new go({outputFrame:new mt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return i.prototype.push=function(e,r){for(var n,s,a=this.renderer,l=this.defaultFilterStack,c=this.statePool.pop()||new JA,h=this.renderer.renderTexture,_=r[0].resolution,m=r[0].multisample,f=r[0].padding,p=r[0].autoFit,y=(n=r[0].legacy)!==null&&n!==void 0?n:!0,b=1;b<r.length;b++){var T=r[b];_=Math.min(_,T.resolution),m=Math.min(m,T.multisample),f=this.useMaxPadding?Math.max(f,T.padding):f+T.padding,p=p&&T.autoFit,y=y||((s=T.legacy)!==null&&s!==void 0?s:!0)}l.length===1&&(this.defaultFilterStack[0].renderTexture=h.current),l.push(c),c.resolution=_,c.multisample=m,c.legacy=y,c.target=e,c.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),c.sourceFrame.pad(f);var S=this.tempRect.copyFrom(h.sourceFrame);a.projection.transform&&this.transformAABB(Iv.copyFrom(a.projection.transform).invert(),S),p?(c.sourceFrame.fit(S),(c.sourceFrame.width<=0||c.sourceFrame.height<=0)&&(c.sourceFrame.width=0,c.sourceFrame.height=0)):c.sourceFrame.intersects(S)||(c.sourceFrame.width=0,c.sourceFrame.height=0),this.roundFrame(c.sourceFrame,h.current?h.current.resolution:a.resolution,h.sourceFrame,h.destinationFrame,a.projection.transform),c.renderTexture=this.getOptimalFilterTexture(c.sourceFrame.width,c.sourceFrame.height,_,m),c.filters=r,c.destinationFrame.width=c.renderTexture.width,c.destinationFrame.height=c.renderTexture.height;var A=this.tempRect;A.x=0,A.y=0,A.width=c.sourceFrame.width,A.height=c.sourceFrame.height,c.renderTexture.filterFrame=c.sourceFrame,c.bindingSourceFrame.copyFrom(h.sourceFrame),c.bindingDestinationFrame.copyFrom(h.destinationFrame),c.transform=a.projection.transform,a.projection.transform=null,h.bind(c.renderTexture,c.sourceFrame,A),a.framebuffer.clear(0,0,0,0)},i.prototype.pop=function(){var e=this.defaultFilterStack,r=e.pop(),n=r.filters;this.activeState=r;var s=this.globalUniforms.uniforms;s.outputFrame=r.sourceFrame,s.resolution=r.resolution;var a=s.inputSize,l=s.inputPixel,c=s.inputClamp;if(a[0]=r.destinationFrame.width,a[1]=r.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],l[0]=Math.round(a[0]*r.resolution),l[1]=Math.round(a[1]*r.resolution),l[2]=1/l[0],l[3]=1/l[1],c[0]=.5*l[2],c[1]=.5*l[3],c[2]=r.sourceFrame.width*a[2]-.5*l[2],c[3]=r.sourceFrame.height*a[3]-.5*l[3],r.legacy){var h=s.filterArea;h[0]=r.destinationFrame.width,h[1]=r.destinationFrame.height,h[2]=r.sourceFrame.x,h[3]=r.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();var _=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,_.renderTexture,xi.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var m=r.renderTexture,f=this.getOptimalFilterTexture(m.width,m.height,r.resolution);f.filterFrame=m.filterFrame;var p=0;for(p=0;p<n.length-1;++p){p===1&&r.multisample>1&&(f=this.getOptimalFilterTexture(m.width,m.height,r.resolution),f.filterFrame=m.filterFrame),n[p].apply(this,m,f,xi.CLEAR,r);var y=m;m=f,f=y}n[p].apply(this,m,_.renderTexture,xi.BLEND,r),p>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(m),this.returnFilterTexture(f)}r.clear(),this.statePool.push(r)},i.prototype.bindAndClear=function(e,r){r===void 0&&(r=xi.CLEAR);var n=this.renderer,s=n.renderTexture,a=n.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var l=this.tempRect;l.x=0,l.y=0,l.width=e.filterFrame.width,l.height=e.filterFrame.height,s.bind(e,e.filterFrame,l)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?s.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var c=a.stateId&1||this.forceClear;(r===xi.CLEAR||r===xi.BLIT&&c)&&this.renderer.framebuffer.clear(0,0,0,0)},i.prototype.applyFilter=function(e,r,n,s){var a=this.renderer;a.state.set(e.state),this.bindAndClear(n,s),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,a.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(ti.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(ti.TRIANGLE_STRIP))},i.prototype.calculateSpriteMatrix=function(e,r){var n=this.activeState,s=n.sourceFrame,a=n.destinationFrame,l=r._texture.orig,c=e.set(a.width,0,0,a.height,s.x,s.y),h=r.worldTransform.copyTo(rr.TEMP_MATRIX);return h.invert(),c.prepend(h),c.scale(1/l.width,1/l.height),c.translate(r.anchor.x,r.anchor.y),c},i.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},i.prototype.getOptimalFilterTexture=function(e,r,n,s){return n===void 0&&(n=1),s===void 0&&(s=tr.NONE),this.texturePool.getOptimalTexture(e,r,n,s)},i.prototype.getFilterTexture=function(e,r,n){if(typeof e=="number"){var s=e;e=r,r=s}e=e||this.activeState.renderTexture;var a=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,n||tr.NONE);return a.filterFrame=e.filterFrame,a},i.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},i.prototype.emptyPool=function(){this.texturePool.clear(!0)},i.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},i.prototype.transformAABB=function(e,r){var n=Hh[0],s=Hh[1],a=Hh[2],l=Hh[3];n.set(r.left,r.top),s.set(r.left,r.bottom),a.set(r.right,r.top),l.set(r.right,r.bottom),e.apply(n,n),e.apply(s,s),e.apply(a,a),e.apply(l,l);var c=Math.min(n.x,s.x,a.x,l.x),h=Math.min(n.y,s.y,a.y,l.y),_=Math.max(n.x,s.x,a.x,l.x),m=Math.max(n.y,s.y,a.y,l.y);r.x=c,r.y=h,r.width=_-c,r.height=m-h},i.prototype.roundFrame=function(e,r,n,s,a){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(a){var l=a.a,c=a.b,h=a.c,_=a.d;if((Math.abs(c)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(l)>1e-4||Math.abs(_)>1e-4))return}a=a?Iv.copyFrom(a):Iv.identity(),a.translate(-n.x,-n.y).scale(s.width/n.width,s.height/n.height).translate(s.x,s.y),this.transformAABB(a,e),e.ceil(r),this.transformAABB(a.invert(),e)}},i}(),vc=function(){function i(e){this.renderer=e}return i.prototype.flush=function(){},i.prototype.destroy=function(){this.renderer=null},i.prototype.start=function(){},i.prototype.stop=function(){this.flush()},i.prototype.render=function(e){},i}(),tP=function(){function i(e){this.renderer=e,this.emptyRenderer=new vc(e),this.currentRenderer=this.emptyRenderer}return i.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},i.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},i.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},i.prototype.copyBoundTextures=function(e,r){for(var n=this.renderer.texture.boundTextures,s=r-1;s>=0;--s)e[s]=n[s]||null,e[s]&&(e[s]._batchLocation=s)},i.prototype.boundArray=function(e,r,n,s){for(var a=e.elements,l=e.ids,c=e.count,h=0,_=0;_<c;_++){var m=a[_],f=m._batchLocation;if(f>=0&&f<s&&r[f]===m){l[_]=f;continue}for(;h<s;){var p=r[h];if(p&&p._batchEnabled===n&&p._batchLocation===h){h++;continue}l[_]=h,m._batchLocation=h,r[h]=m;break}}},i.prototype.destroy=function(){this.renderer=null},i}(),Sx=0,rP=function(){function i(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(i.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),i.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Sx++},i.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Sx++,this.renderer.runners.contextChange.emit(e)},i.prototype.initFromOptions=function(e){var r=this.createContext(this.renderer.view,e);this.initFromContext(r)},i.prototype.createContext=function(e,r){var n;if(Xe.PREFER_ENV>=Fs.WEBGL2&&(n=e.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},i.prototype.getExtensions=function(){var e=this.gl,r={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},i.prototype.handleContextLost=function(e){var r=this;e.preventDefault(),setTimeout(function(){r.gl.isContextLost()&&r.extensions.loseContext&&r.extensions.loseContext.restoreContext()},0)},i.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},i.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},i.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},i.prototype.validateContext=function(e){var r=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var s=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},i}(),nP=function(){function i(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=tr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return i}(),iP=new mt,sP=function(){function i(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new N_(10,10),this.msaaSamples=null}return i.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new mt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;Xe.PREFER_ENV===Fs.WEBGL_LEGACY&&(r=null,n=null),r?e.drawBuffers=function(s){return r.drawBuffersWEBGL(s)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},i.prototype.bind=function(e,r,n){n===void 0&&(n=0);var s=this.gl;if(e){var a=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,s.bindFramebuffer(s.FRAMEBUFFER,a.framebuffer)),a.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,a.mipLevel=n),a.dirtyId!==e.dirtyId&&(a.dirtyId=e.dirtyId,a.dirtyFormat!==e.dirtyFormat?(a.dirtyFormat=e.dirtyFormat,a.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):a.dirtySize!==e.dirtySize&&(a.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var l=0;l<e.colorTextures.length;l++){var c=e.colorTextures[l];this.renderer.texture.unbind(c.parentTextureArray||c)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){var h=r.width>>n,_=r.height>>n,m=h/r.width;this.setViewport(r.x*m,r.y*m,h,_)}else{var h=e.width>>n,_=e.height>>n;this.setViewport(0,0,h,_)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},i.prototype.setViewport=function(e,r,n,s){var a=this.viewport;e=Math.round(e),r=Math.round(r),n=Math.round(n),s=Math.round(s),(a.width!==n||a.height!==s||a.x!==e||a.y!==r)&&(a.x=e,a.y=r,a.width=n,a.height=s,this.gl.viewport(e,r,n,s))},Object.defineProperty(i.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),i.prototype.clear=function(e,r,n,s,a){a===void 0&&(a=If.COLOR|If.DEPTH);var l=this.gl;l.clearColor(e,r,n,s),l.clear(a)},i.prototype.initFramebuffer=function(e){var r=this.gl,n=new nP(r.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n},i.prototype.resizeFramebuffer=function(e){var r=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.RGBA8,e.width,e.height)),n.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height));var s=e.colorTextures,a=s.length;r.drawBuffers||(a=Math.min(a,1));for(var l=0;l<a;l++){var c=s[l],h=c.parentTextureArray||c;this.renderer.texture.bind(h,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},i.prototype.updateFramebuffer=function(e,r){var n=this.gl,s=e.glFramebuffers[this.CONTEXT_UID],a=e.colorTextures,l=a.length;n.drawBuffers||(l=Math.min(l,1)),s.multisample>1&&this.canMultisampleFramebuffer(e)?(s.msaaBuffer=s.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,s.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,s.multisample,n.RGBA8,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,s.msaaBuffer)):s.msaaBuffer&&(n.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));for(var c=[],h=0;h<l;h++){var _=a[h],m=_.parentTextureArray||_;this.renderer.texture.bind(m,0),!(h===0&&s.msaaBuffer)&&(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+h,_.target,m._glTextures[this.CONTEXT_UID].texture,r),c.push(n.COLOR_ATTACHMENT0+h))}if(c.length>1&&n.drawBuffers(c),e.depthTexture){var f=this.writeDepthTexture;if(f){var p=e.depthTexture;this.renderer.texture.bind(p,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,p._glTextures[this.CONTEXT_UID].texture,r)}}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(s.stencil=s.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,s.stencil),s.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,s.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,s.stencil)):s.stencil&&(n.deleteRenderbuffer(s.stencil),s.stencil=null)},i.prototype.canMultisampleFramebuffer=function(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture},i.prototype.detectSamples=function(e){var r=this.msaaSamples,n=tr.NONE;if(e<=1||r===null)return n;for(var s=0;s<r.length;s++)if(r[s]<=e){n=r[s];break}return n===1&&(n=tr.NONE),n},i.prototype.blit=function(e,r,n){var s=this,a=s.current,l=s.renderer,c=s.gl,h=s.CONTEXT_UID;if(l.context.webGLVersion===2&&a){var _=a.glFramebuffers[h];if(_){if(!e){if(!_.msaaBuffer)return;var m=a.colorTextures[0];if(!m)return;_.blitFramebuffer||(_.blitFramebuffer=new N_(a.width,a.height),_.blitFramebuffer.addColorTexture(0,m)),e=_.blitFramebuffer,e.colorTextures[0]!==m&&(e.colorTextures[0]=m,e.dirtyId++,e.dirtyFormat++),(e.width!==a.width||e.height!==a.height)&&(e.width=a.width,e.height=a.height,e.dirtyId++,e.dirtySize++)}r||(r=iP,r.width=a.width,r.height=a.height),n||(n=r);var f=r.width===n.width&&r.height===n.height;this.bind(e),c.bindFramebuffer(c.READ_FRAMEBUFFER,_.framebuffer),c.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,c.COLOR_BUFFER_BIT,f?c.NEAREST:c.LINEAR)}}},i.prototype.disposeFramebuffer=function(e,r){var n=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var a=this.managedFramebuffers.indexOf(e);a>=0&&this.managedFramebuffers.splice(a,1),e.disposeRunner.remove(this),r||(s.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&s.deleteRenderbuffer(n.msaaBuffer),n.stencil&&s.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},i.prototype.disposeAll=function(e){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<r.length;n++)this.disposeFramebuffer(r[n],e)},i.prototype.forceStencil=function(){var e=this.current;if(e){var r=e.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){e.stencil=!0;var n=e.width,s=e.height,a=this.gl,l=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,l),r.msaaBuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,r.multisample,a.DEPTH24_STENCIL8,n,s):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,n,s),r.stencil=l,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,l)}}},i.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new mt},i.prototype.destroy=function(){this.renderer=null},i}(),Ov={5126:4,5123:2,5121:1},aP=function(){function i(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return i.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;Xe.PREFER_ENV===Fs.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(a){return n.bindVertexArrayOES(a)},e.deleteVertexArray=function(a){return n.deleteVertexArrayOES(a)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var s=e.getExtension("ANGLE_instanced_arrays");s?(e.vertexAttribDivisor=function(a,l){return s.vertexAttribDivisorANGLE(a,l)},e.drawElementsInstanced=function(a,l,c,h,_){return s.drawElementsInstancedANGLE(a,l,c,h,_)},e.drawArraysInstanced=function(a,l,c,h){return s.drawArraysInstancedANGLE(a,l,c,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},i.prototype.bind=function(e,r){r=r||this.renderer.shader.shader;var n=this.gl,s=e.glVertexArrayObjects[this.CONTEXT_UID],a=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},a=!0);var l=s[r.program.id]||this.initGeometryVao(e,r,a);this._activeGeometry=e,this._activeVao!==l&&(this._activeVao=l,this.hasVao?n.bindVertexArray(l):this.activateVao(e,r.program)),this.updateBuffers()},i.prototype.reset=function(){this.unbind()},i.prototype.updateBuffers=function(){for(var e=this._activeGeometry,r=this.renderer.buffer,n=0;n<e.buffers.length;n++){var s=e.buffers[n];r.update(s)}},i.prototype.checkCompatibility=function(e,r){var n=e.attributes,s=r.attributeData;for(var a in s)if(!n[a])throw new Error('shader and geometry incompatible, geometry missing the "'+a+'" attribute')},i.prototype.getSignature=function(e,r){var n=e.attributes,s=r.attributeData,a=["g",e.id];for(var l in n)s[l]&&a.push(l,s[l].location);return a.join("-")},i.prototype.initGeometryVao=function(e,r,n){n===void 0&&(n=!0);var s=this.gl,a=this.CONTEXT_UID,l=this.renderer.buffer,c=r.program;c.glPrograms[a]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,c);var h=this.getSignature(e,c),_=e.glVertexArrayObjects[this.CONTEXT_UID],m=_[h];if(m)return _[c.id]=m,m;var f=e.buffers,p=e.attributes,y={},b={};for(var T in f)y[T]=0,b[T]=0;for(var T in p)!p[T].size&&c.attributeData[T]?p[T].size=c.attributeData[T].size:p[T].size||console.warn("PIXI Geometry attribute '"+T+"' size cannot be determined (likely the bound shader does not have the attribute)"),y[p[T].buffer]+=p[T].size*Ov[p[T].type];for(var T in p){var S=p[T],A=S.size;S.stride===void 0&&(y[S.buffer]===A*Ov[S.type]?S.stride=0:S.stride=y[S.buffer]),S.start===void 0&&(S.start=b[S.buffer],b[S.buffer]+=A*Ov[S.type])}m=s.createVertexArray(),s.bindVertexArray(m);for(var R=0;R<f.length;R++){var L=f[R];l.bind(L),n&&L._glBuffers[a].refCount++}return this.activateVao(e,c),this._activeVao=m,_[c.id]=m,_[h]=m,m},i.prototype.disposeGeometry=function(e,r){var n;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var s=e.glVertexArrayObjects[this.CONTEXT_UID],a=this.gl,l=e.buffers,c=(n=this.renderer)===null||n===void 0?void 0:n.buffer;if(e.disposeRunner.remove(this),!!s){if(c)for(var h=0;h<l.length;h++){var _=l[h]._glBuffers[this.CONTEXT_UID];_&&(_.refCount--,_.refCount===0&&!r&&c.dispose(l[h],r))}if(!r){for(var m in s)if(m[0]==="g"){var f=s[m];this._activeVao===f&&this.unbind(),a.deleteVertexArray(f)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},i.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedGeometries),n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],e)},i.prototype.activateVao=function(e,r){var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,l=e.buffers,c=e.attributes;e.indexBuffer&&a.bind(e.indexBuffer);var h=null;for(var _ in c){var m=c[_],f=l[m.buffer],p=f._glBuffers[s];if(r.attributeData[_]){h!==p&&(a.bind(f),h=p);var y=r.attributeData[_].location;if(n.enableVertexAttribArray(y),n.vertexAttribPointer(y,m.size,m.type||n.FLOAT,m.normalized,m.stride,m.start),m.instance)if(this.hasInstance)n.vertexAttribDivisor(y,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},i.prototype.draw=function(e,r,n,s){var a=this.gl,l=this._activeGeometry;if(l.indexBuffer){var c=l.indexBuffer.data.BYTES_PER_ELEMENT,h=c===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;c===2||c===4&&this.canUseUInt32ElementIndex?l.instanced?a.drawElementsInstanced(e,r||l.indexBuffer.data.length,h,(n||0)*c,s||1):a.drawElements(e,r||l.indexBuffer.data.length,h,(n||0)*c):console.warn("unsupported index buffer type: uint32")}else l.instanced?a.drawArraysInstanced(e,n,r||l.getSize(),s||1):a.drawArrays(e,n,r||l.getSize());return this},i.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},i.prototype.destroy=function(){this.renderer=null},i}(),oP=function(){function i(e){e===void 0&&(e=null),this.type=Tr.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Xe.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(i.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Tr.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},i.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},i}();function Ex(i,e,r){var n=i.createShader(e);return i.shaderSource(n,r),i.compileShader(n),n}function Cx(i,e){var r=i.getShaderSource(e).split(`
`).map(function(_,m){return m+": "+_}),n=i.getShaderInfoLog(e),s=n.split(`
`),a={},l=s.map(function(_){return parseFloat(_.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(_){return _&&!a[_]?(a[_]=!0,!0):!1}),c=[""];l.forEach(function(_){r[_-1]="%c"+r[_-1]+"%c",c.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=r.join(`
`);c[0]=h,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,c),console.groupEnd()}function lP(i,e,r,n){i.getProgramParameter(e,i.LINK_STATUS)||(i.getShaderParameter(r,i.COMPILE_STATUS)||Cx(i,r),i.getShaderParameter(n,i.COMPILE_STATUS)||Cx(i,n),console.error("PixiJS Error: Could not initialize shader."),i.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(e)))}function Rv(i){for(var e=new Array(i),r=0;r<e.length;r++)e[r]=!1;return e}function bb(i,e){switch(i){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Rv(2*e);case"bvec3":return Rv(3*e);case"bvec4":return Rv(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var wb={},Tu=wb;function uP(){if(Tu===wb||Tu&&Tu.isContextLost()){var i=Xe.ADAPTER.createCanvas(),e=void 0;Xe.PREFER_ENV>=Fs.WEBGL2&&(e=i.getContext("webgl2",{})),e||(e=i.getContext("webgl",{})||i.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Tu=e}return Tu}var zh;function cP(){if(!zh){zh=jn.MEDIUM;var i=uP();if(i&&i.getShaderPrecisionFormat){var e=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);zh=e.precision?jn.HIGH:jn.MEDIUM}}return zh}function Ax(i,e,r){if(i.substring(0,9)!=="precision"){var n=e;return e===jn.HIGH&&r!==jn.HIGH&&(n=jn.MEDIUM),"precision "+n+` float;
`+i}else if(r!==jn.HIGH&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}var hP={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Tb(i){return hP[i]}var Xh=null,Px={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Sb(i,e){if(!Xh){var r=Object.keys(Px);Xh={};for(var n=0;n<r.length;++n){var s=r[n];Xh[i[s]]=Px[s]}}return Xh[e]}var Rl=[{test:function(i){return i.type==="float"&&i.size===1&&!i.isArray},code:function(i){return`
            if(uv["`+i+'"] !== ud["'+i+`"].value)
            {
                ud["`+i+'"].value = uv["'+i+`"]
                gl.uniform1f(ud["`+i+'"].location, uv["'+i+`"])
            }
            `}},{test:function(i,e){return(i.type==="sampler2D"||i.type==="samplerCube"||i.type==="sampler2DArray")&&i.size===1&&!i.isArray&&(e==null||e.castToBaseTexture!==void 0)},code:function(i){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+i+`"], t);

            if(ud["`+i+`"].value !== t)
            {
                ud["`+i+`"].value = t;
                gl.uniform1i(ud["`+i+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(i,e){return i.type==="mat3"&&i.size===1&&!i.isArray&&e.a!==void 0},code:function(i){return`
            gl.uniformMatrix3fv(ud["`+i+'"].location, false, uv["'+i+`"].toArray(true));
            `},codeUbo:function(i){return`
                var `+i+"_matrix = uv."+i+`.toArray(true);

                data[offset] = `+i+`_matrix[0];
                data[offset+1] = `+i+`_matrix[1];
                data[offset+2] = `+i+`_matrix[2];
        
                data[offset + 4] = `+i+`_matrix[3];
                data[offset + 5] = `+i+`_matrix[4];
                data[offset + 6] = `+i+`_matrix[5];
        
                data[offset + 8] = `+i+`_matrix[6];
                data[offset + 9] = `+i+`_matrix[7];
                data[offset + 10] = `+i+`_matrix[8];
            `}},{test:function(i,e){return i.type==="vec2"&&i.size===1&&!i.isArray&&e.x!==void 0},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+i+`"].location, v.x, v.y);
                }`},codeUbo:function(i){return`
                v = uv.`+i+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(i){return i.type==="vec2"&&i.size===1&&!i.isArray},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+i+`"].location, v[0], v[1]);
                }
            `}},{test:function(i,e){return i.type==="vec4"&&i.size===1&&!i.isArray&&e.width!==void 0},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+i+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(i){return`
                    v = uv.`+i+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(i){return i.type==="vec4"&&i.size===1&&!i.isArray},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+i+`"].location, v[0], v[1], v[2], v[3])
                }`}}],fP={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},dP={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function pP(i,e){var r,n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var s in i.uniforms){var a=e[s];if(!a){!((r=i.uniforms[s])===null||r===void 0)&&r.group&&(i.uniforms[s].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+s+", '"+s+`');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.`+s+`, syncData);
                    `));continue}for(var l=i.uniforms[s],c=!1,h=0;h<Rl.length;h++)if(Rl[h].test(a,l)){n.push(Rl[h].code(s,l)),c=!0;break}if(!c){var _=a.size===1&&!a.isArray?fP:dP,m=_[a.type].replace("location",'ud["'+s+'"].location');n.push(`
            cu = ud["`+s+`"];
            cv = cu.value;
            v = uv["`+s+`"];
            `+m+";")}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}var vP=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function _P(i){for(var e="",r=0;r<i;++r)r>0&&(e+=`
else `),r<i-1&&(e+="if(test == "+r+".0){}");return e}function mP(i,e){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var n=vP.replace(/%forloop%/gi,_P(i));if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))i=i/2|0;else break}return i}var Su;function yP(){if(typeof Su=="boolean")return Su;try{var i=new Function("param1","param2","param3","return param1[param2] === param3;");Su=i({a:"b"},"a","b")===!0}catch{Su=!1}return Su}var gP=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,xP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,bP=0,Vh={},Io=function(){function i(e,r,n){n===void 0&&(n="pixi-shader"),this.id=bP++,this.vertexSrc=e||i.defaultVertexSrc,this.fragmentSrc=r||i.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Vh[n]?(Vh[n]++,n+="-"+Vh[n]):Vh[n]=1,this.vertexSrc="#define SHADER_NAME "+n+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+`
`+this.fragmentSrc,this.vertexSrc=Ax(this.vertexSrc,Xe.PRECISION_VERTEX,jn.HIGH),this.fragmentSrc=Ax(this.fragmentSrc,Xe.PRECISION_FRAGMENT,cP())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(i,"defaultVertexSrc",{get:function(){return xP},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentSrc",{get:function(){return gP},enumerable:!1,configurable:!0}),i.from=function(e,r,n){var s=e+r,a=yx[s];return a||(yx[s]=a=new i(e,r,n)),a},i}(),Qi=function(){function i(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof go?this.uniformGroup=r:this.uniformGroup=new go(r):this.uniformGroup=new go({}),this.disposeRunner=new $r("disposeShader")}return i.prototype.checkUniformExists=function(e,r){if(r.uniforms[e])return!0;for(var n in r.uniforms){var s=r.uniforms[n];if(s.group&&this.checkUniformExists(e,s))return!0}return!1},i.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(i.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),i.from=function(e,r,n){var s=Io.from(e,r);return new i(s,n)},i}(),Mv=0,kv=1,Dv=2,Nv=3,Fv=4,Lv=5,Oo=function(){function i(){this.data=0,this.blendMode=ct.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(i.prototype,"blend",{get:function(){return!!(this.data&1<<Mv)},set:function(e){!!(this.data&1<<Mv)!==e&&(this.data^=1<<Mv)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offsets",{get:function(){return!!(this.data&1<<kv)},set:function(e){!!(this.data&1<<kv)!==e&&(this.data^=1<<kv)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"culling",{get:function(){return!!(this.data&1<<Dv)},set:function(e){!!(this.data&1<<Dv)!==e&&(this.data^=1<<Dv)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"depthTest",{get:function(){return!!(this.data&1<<Nv)},set:function(e){!!(this.data&1<<Nv)!==e&&(this.data^=1<<Nv)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"depthMask",{get:function(){return!!(this.data&1<<Lv)},set:function(e){!!(this.data&1<<Lv)!==e&&(this.data^=1<<Lv)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<Fv)},set:function(e){!!(this.data&1<<Fv)!==e&&(this.data^=1<<Fv)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==ct.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),i.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},i.for2d=function(){var e=new i;return e.depthTest=!1,e.blend=!0,e},i}(),wP=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,TP=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,js=function(i){Vt(e,i);function e(r,n,s){var a=this,l=Io.from(r||e.defaultVertexSrc,n||e.defaultFragmentSrc);return a=i.call(this,l,s)||this,a.padding=0,a.resolution=Xe.FILTER_RESOLUTION,a.multisample=Xe.FILTER_MULTISAMPLE,a.enabled=!0,a.autoFit=!0,a.state=new Oo,a}return e.prototype.apply=function(r,n,s,a,l){r.applyFilter(this,n,s,a)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return TP},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return wP},enumerable:!1,configurable:!0}),e}(Qi),SP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,EP=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Ix=new rr,_c=function(){function i(e,r){this._texture=e,this.mapCoord=new rr,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}return Object.defineProperty(i.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),i.prototype.multiplyUvs=function(e,r){r===void 0&&(r=e);for(var n=this.mapCoord,s=0;s<e.length;s+=2){var a=e[s],l=e[s+1];r[s]=a*n.a+l*n.c+n.tx,r[s+1]=a*n.b+l*n.d+n.ty}return r},i.prototype.update=function(e){var r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;var n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var s=r.orig,a=r.trim;a&&(Ix.set(s.width/a.width,0,0,s.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(Ix));var l=r.baseTexture,c=this.uClampFrame,h=this.clampMargin/l.resolution,_=this.clampOffset;return c[0]=(r._frame.x+h+_)/l.width,c[1]=(r._frame.y+h+_)/l.height,c[2]=(r._frame.x+r._frame.width-h+_)/l.width,c[3]=(r._frame.y+r._frame.height-h+_)/l.height,this.uClampOffset[0]=_/l.realWidth,this.uClampOffset[1]=_/l.realHeight,this.isSimple=r._frame.width===l.width&&r._frame.height===l.height&&r.rotate===0,!0},i}(),CP=function(i){Vt(e,i);function e(r,n,s){var a=this,l=null;return typeof r!="string"&&n===void 0&&s===void 0&&(l=r,r=void 0,n=void 0,s=void 0),a=i.call(this,r||SP,n||EP,s)||this,a.maskSprite=l,a.maskMatrix=new rr,a}return Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(r){this._maskSprite=r,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(r,n,s,a){var l=this._maskSprite,c=l._texture;c.valid&&(c.uvMatrix||(c.uvMatrix=new _c(c,0)),c.uvMatrix.update(),this.uniforms.npmAlpha=c.baseTexture.alphaMode?0:1,this.uniforms.mask=c,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,l).prepend(c.uvMatrix.mapCoord),this.uniforms.alpha=l.worldAlpha,this.uniforms.maskClamp=c.uvMatrix.uClampFrame,r.applyFilter(this,n,s,a))},e}(js),Eb=function(){function i(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return i.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},i.prototype.push=function(e,r){var n=r;if(!n.isMaskData){var s=this.maskDataPool.pop()||new oP;s.pooled=!0,s.maskObject=r,n=s}var a=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(a),n._colorMask=a?a._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==Tr.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Tr.SCISSOR:this.renderer.scissor.push(n);break;case Tr.STENCIL:this.renderer.stencil.push(n);break;case Tr.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case Tr.COLOR:this.pushColorMask(n);break}n.type===Tr.SPRITE&&this.maskStack.push(n)},i.prototype.pop=function(e){var r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case Tr.SCISSOR:this.renderer.scissor.pop(r);break;case Tr.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Tr.SPRITE:this.popSpriteMask(r);break;case Tr.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){var n=this.maskStack[this.maskStack.length-1];n.type===Tr.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},i.prototype.detect=function(e){var r=e.maskObject;r?r.isSprite?e.type=Tr.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Tr.SCISSOR:e.type=Tr.STENCIL:e.type=Tr.COLOR},i.prototype.pushSpriteMask=function(e){var r,n,s=e.maskObject,a=e._target,l=e._filters;l||(l=this.alphaMaskPool[this.alphaMaskIndex],l||(l=this.alphaMaskPool[this.alphaMaskIndex]=[new CP]));var c=this.renderer,h=c.renderTexture,_,m;if(h.current){var f=h.current;_=e.resolution||f.resolution,m=(r=e.multisample)!==null&&r!==void 0?r:f.multisample}else _=e.resolution||c.resolution,m=(n=e.multisample)!==null&&n!==void 0?n:c.multisample;l[0].resolution=_,l[0].multisample=m,l[0].maskSprite=s;var p=a.filterArea;a.filterArea=s.getBounds(!0),c.filter.push(a,l),a.filterArea=p,e._filters||this.alphaMaskIndex++},i.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},i.prototype.pushColorMask=function(e){var r=e._colorMask,n=e._colorMask=r&e.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)},i.prototype.popColorMask=function(e){var r=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)},i.prototype.destroy=function(){this.renderer=null},i}(),Cb=function(){function i(e){this.renderer=e,this.maskStack=[],this.glConst=0}return i.prototype.getStackLength=function(){return this.maskStack.length},i.prototype.setMaskStack=function(e){var r=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var s=this.getStackLength();s!==n&&(s===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},i.prototype._useCurrent=function(){},i.prototype.destroy=function(){this.renderer=null,this.maskStack=null},i}(),Ox=new rr,Rx=[],AP=function(i){Vt(e,i);function e(r){var n=i.call(this,r)||this;return n.glConst=Xe.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,n}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0},e.prototype.calcScissorRect=function(r){var n;if(!r._scissorRectLocal){var s=r._scissorRect,a=r.maskObject,l=this.renderer,c=l.renderTexture,h=a.getBounds(!0,(n=Rx.pop())!==null&&n!==void 0?n:new mt);this.roundFrameToPixels(h,c.current?c.current.resolution:l.resolution,c.sourceFrame,c.destinationFrame,l.projection.transform),s&&h.fit(s),r._scissorRectLocal=h}},e.isMatrixRotated=function(r){if(!r)return!1;var n=r.a,s=r.b,a=r.c,l=r.d;return(Math.abs(s)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(l)>1e-4)},e.prototype.testScissor=function(r){var n=r.maskObject;if(!n.isFastRect||!n.isFastRect()||e.isMatrixRotated(n.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(r);var s=r._scissorRectLocal;return s.width>0&&s.height>0},e.prototype.roundFrameToPixels=function(r,n,s,a,l){e.isMatrixRotated(l)||(l=l?Ox.copyFrom(l):Ox.identity(),l.translate(-s.x,-s.y).scale(a.width/s.width,a.height/s.height).translate(a.x,a.y),this.renderer.filter.transformAABB(l,r),r.fit(a),r.x=Math.round(r.x*n),r.y=Math.round(r.y*n),r.width=Math.round(r.width*n),r.height=Math.round(r.height*n))},e.prototype.push=function(r){r._scissorRectLocal||this.calcScissorRect(r);var n=this.renderer.gl;r._scissorRect||n.enable(n.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=r._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(r){var n=this.renderer.gl;r&&Rx.push(r._scissorRectLocal),this.getStackLength()>0?this._useCurrent():n.disable(n.SCISSOR_TEST)},e.prototype._useCurrent=function(){var r=this.maskStack[this.maskStack.length-1]._scissorRect,n;this.renderer.renderTexture.current?n=r.y:n=this.renderer.height-r.height-r.y,this.renderer.gl.scissor(r.x,n,r.width,r.height)},e}(Cb),PP=function(i){Vt(e,i);function e(r){var n=i.call(this,r)||this;return n.glConst=Xe.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,n}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._stencilCounter:0},e.prototype.push=function(r){var n=r.maskObject,s=this.renderer.gl,a=r._stencilCounter;a===0&&(this.renderer.framebuffer.forceStencil(),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST)),r._stencilCounter++;var l=r._colorMask;l!==0&&(r._colorMask=0,s.colorMask(!1,!1,!1,!1)),s.stencilFunc(s.EQUAL,a,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,l!==0&&(r._colorMask=l,s.colorMask((l&1)!==0,(l&2)!==0,(l&4)!==0,(l&8)!==0)),this._useCurrent()},e.prototype.pop=function(r){var n=this.renderer.gl;if(this.getStackLength()===0)n.disable(n.STENCIL_TEST);else{var s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,a=s?s._colorMask:15;a!==0&&(s._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,a!==0&&(s._colorMask=a,n.colorMask((a&1)!==0,(a&2)!==0,(a&4)!==0,(a&8)!==0)),this._useCurrent()}},e.prototype._useCurrent=function(){var r=this.renderer.gl;r.stencilFunc(r.EQUAL,this.getStackLength(),4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},e}(Cb),IP=function(){function i(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new rr,this.transform=null}return i.prototype.update=function(e,r,n,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,s),this.transform&&this.projectionMatrix.append(this.transform);var a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)},i.prototype.calculateProjection=function(e,r,n,s){var a=this.projectionMatrix,l=s?-1:1;a.identity(),a.a=1/r.width*2,a.d=l*(1/r.height*2),a.tx=-1-r.x*a.a,a.ty=-l-r.y*a.d},i.prototype.setTransform=function(e){},i.prototype.destroy=function(){this.renderer=null},i}(),ro=new mt,Eu=new mt,OP=function(){function i(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new mt,this.destinationFrame=new mt,this.viewportFrame=new mt}return i.prototype.bind=function(e,r,n){e===void 0&&(e=null);var s=this.renderer;this.current=e;var a,l,c;e?(a=e.baseTexture,c=a.resolution,r||(ro.width=e.frame.width,ro.height=e.frame.height,r=ro),n||(Eu.x=e.frame.x,Eu.y=e.frame.y,Eu.width=r.width,Eu.height=r.height,n=Eu),l=a.framebuffer):(c=s.resolution,r||(ro.width=s.screen.width,ro.height=s.screen.height,r=ro),n||(n=ro,n.width=r.width,n.height=r.height));var h=this.viewportFrame;h.x=n.x*c,h.y=n.y*c,h.width=n.width*c,h.height=n.height*c,e||(h.y=s.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(l,h),this.renderer.projection.update(n,r,c,!l),e?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)},i.prototype.clear=function(e,r){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.clearColor;var n=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer.screen,a=n.width!==s.width||n.height!==s.height;if(a){var l=this.viewportFrame,c=l.x,h=l.y,_=l.width,m=l.height;c=Math.round(c),h=Math.round(h),_=Math.round(_),m=Math.round(m),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(c,h,_,m)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],r),a&&this.renderer.scissor.pop()},i.prototype.resize=function(){this.bind(null)},i.prototype.reset=function(){this.bind(null)},i.prototype.destroy=function(){this.renderer=null},i}();function RP(i,e,r,n,s){r.buffer.update(s)}var MP={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Ab={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function kP(i){for(var e=i.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),r=0,n=0,s=0,a=0;a<e.length;a++){var l=e[a];if(r=Ab[l.data.type],l.data.size>1&&(r=Math.max(r,16)*l.data.size),l.dataLen=r,n%r!==0&&n<16){var c=n%r%16;n+=c,s+=c}n+r>16?(s=Math.ceil(s/16)*16,l.offset=s,s+=r,n=r):(l.offset=s,n+=r,s+=r)}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}function DP(i,e){var r=[];for(var n in i)e[n]&&r.push(e[n]);return r.sort(function(s,a){return s.index-a.index}),r}function NP(i,e){if(!i.autoManage)return{size:0,syncFunc:RP};for(var r=DP(i.uniforms,e),n=kP(r),s=n.uboElements,a=n.size,l=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],c=0;c<s.length;c++){for(var h=s[c],_=i.uniforms[h.data.name],m=h.data.name,f=!1,p=0;p<Rl.length;p++){var y=Rl[p];if(y.codeUbo&&y.test(h.data,_)){l.push("offset = "+h.offset/4+";",Rl[p].codeUbo(h.data.name,_)),f=!0;break}}if(!f)if(h.data.size>1){var b=Tb(h.data.type),T=Math.max(Ab[h.data.type]/16,1),S=b/T,A=(4-S%4)%4;l.push(`
                cv = ud.`+m+`.value;
                v = uv.`+m+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*T+`; i++)
                {
                    for(var j = 0; j < `+S+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+A+`;
                }

                `)}else{var R=MP[h.data.type];l.push(`
                cv = ud.`+m+`.value;
                v = uv.`+m+`;
                offset = `+h.offset/4+`;
                `+R+`;
                `)}}return l.push(`
       renderer.buffer.update(buffer);
    `),{size:a,syncFunc:new Function("ud","uv","renderer","syncData","buffer",l.join(`
`))}}var FP=function(){function i(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return i.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},i}();function LP(i,e){for(var r={},n=e.getProgramParameter(i,e.ACTIVE_ATTRIBUTES),s=0;s<n;s++){var a=e.getActiveAttrib(i,s);if(a.name.indexOf("gl_")!==0){var l=Sb(e,a.type),c={type:l,name:a.name,size:Tb(l),location:e.getAttribLocation(i,a.name)};r[a.name]=c}}return r}function BP(i,e){for(var r={},n=e.getProgramParameter(i,e.ACTIVE_UNIFORMS),s=0;s<n;s++){var a=e.getActiveUniform(i,s),l=a.name.replace(/\[.*?\]$/,""),c=!!a.name.match(/\[.*?\]$/),h=Sb(e,a.type);r[l]={name:l,index:s,type:h,size:a.size,isArray:c,value:bb(h,a.size)}}return r}function jP(i,e){var r=Ex(i,i.VERTEX_SHADER,e.vertexSrc),n=Ex(i,i.FRAGMENT_SHADER,e.fragmentSrc),s=i.createProgram();if(i.attachShader(s,r),i.attachShader(s,n),i.linkProgram(s),i.getProgramParameter(s,i.LINK_STATUS)||lP(i,s,r,n),e.attributeData=LP(s,i),e.uniformData=BP(s,i),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var a=Object.keys(e.attributeData);a.sort(function(m,f){return m>f?1:-1});for(var l=0;l<a.length;l++)e.attributeData[a[l]].location=l,i.bindAttribLocation(s,l,a[l]);i.linkProgram(s)}i.deleteShader(r),i.deleteShader(n);var c={};for(var l in e.uniformData){var h=e.uniformData[l];c[l]={location:i.getUniformLocation(s,l),value:bb(h.type,h.size)}}var _=new FP(s,c);return _}var UP=0,qh={textureCount:0,uboCount:0},GP=function(){function i(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UP++}return i.prototype.systemCheck=function(){if(!yP())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},i.prototype.contextChange=function(e){this.gl=e,this.reset()},i.prototype.bind=function(e,r){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,s=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(s.program)),r||(qh.textureCount=0,qh.uboCount=0,this.syncUniformGroup(e.uniformGroup,qh)),s},i.prototype.setUniforms=function(e){var r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,e,this.renderer)},i.prototype.syncUniformGroup=function(e,r){var n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,r))},i.prototype.syncUniforms=function(e,r,n){var s=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);s(r.uniformData,e.uniforms,this.renderer,n)},i.prototype.createSyncGroups=function(e){var r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=pP(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]},i.prototype.syncUniformBufferGroup=function(e,r){var n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;var s=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,r);e.buffer.update(),s(n.uniformData,e.uniforms,this.renderer,qh,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[r])},i.prototype.createSyncBufferGroup=function(e,r,n){var s=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var a=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,s.uniformBlockBinding(r.program,a,this.shader.uniformBindCount),this.shader.uniformBindCount++;var l=this.getSignature(e,this.shader.program.uniformData,"ubo"),c=this._uboCache[l];if(c||(c=this._uboCache[l]=NP(e,this.shader.program.uniformData)),e.autoManage){var h=new Float32Array(c.size/4);e.buffer.update(h)}return r.uniformGroups[e.id]=c.syncFunc,r.uniformGroups[e.id]},i.prototype.getSignature=function(e,r,n){var s=e.uniforms,a=[n+"-"];for(var l in s)a.push(l),r[l]&&a.push(r[l].type);return a.join("-")},i.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},i.prototype.generateProgram=function(e){var r=this.gl,n=e.program,s=jP(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=s,s},i.prototype.reset=function(){this.program=null,this.shader=null},i.prototype.disposeShader=function(e){this.shader===e&&(this.shader=null)},i.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},i}();function HP(i,e){return e===void 0&&(e=[]),e[ct.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.ADD]=[i.ONE,i.ONE],e[ct.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.NONE]=[0,0],e[ct.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],e[ct.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.SRC_IN]=[i.DST_ALPHA,i.ZERO],e[ct.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],e[ct.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],e[ct.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],e[ct.DST_IN]=[i.ZERO,i.SRC_ALPHA],e[ct.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],e[ct.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],e[ct.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],e[ct.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],e}var zP=0,XP=1,VP=2,qP=3,WP=4,$P=5,YP=function(){function i(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ct.NONE,this._blendEq=!1,this.map=[],this.map[zP]=this.setBlend,this.map[XP]=this.setOffset,this.map[VP]=this.setCullFace,this.map[qP]=this.setDepthTest,this.map[WP]=this.setFrontFace,this.map[$P]=this.setDepthMask,this.checks=[],this.defaultState=new Oo,this.defaultState.blend=!0}return i.prototype.contextChange=function(e){this.gl=e,this.blendModes=HP(e),this.set(this.defaultState),this.reset()},i.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var r=this.stateId^e.data,n=0;r;)r&1&&this.map[n].call(this,!!(e.data&1<<n)),r=r>>1,n++;this.stateId=e.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,e)},i.prototype.forceState=function(e){e=e||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data},i.prototype.setBlend=function(e){this.updateCheck(i.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},i.prototype.setOffset=function(e){this.updateCheck(i.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},i.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},i.prototype.setDepthMask=function(e){this.gl.depthMask(e)},i.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},i.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},i.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var r=this.blendModes[e],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},i.prototype.setPolygonOffset=function(e,r){this.gl.polygonOffset(e,r)},i.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},i.prototype.updateCheck=function(e,r){var n=this.checks.indexOf(e);r&&n===-1?this.checks.push(e):!r&&n!==-1&&this.checks.splice(n,1)},i.checkBlendMode=function(e,r){e.setBlendMode(r.blendMode)},i.checkPolygonOffset=function(e,r){e.setPolygonOffset(1,r.polygonOffset)},i.prototype.destroy=function(){this.gl=null},i}(),KP=function(){function i(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Xe.GC_MAX_IDLE,this.checkCountMax=Xe.GC_MAX_CHECK_COUNT,this.mode=Xe.GC_MODE}return i.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Rf.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},i.prototype.run=function(){for(var e=this.renderer.texture,r=e.managedTextures,n=!1,s=0;s<r.length;s++){var a=r[s];!a.framebuffer&&this.count-a.touched>this.maxIdle&&(e.destroyTexture(a,!0),r[s]=null,n=!0)}if(n){for(var l=0,s=0;s<r.length;s++)r[s]!==null&&(r[l++]=r[s]);r.length=l}},i.prototype.unload=function(e){var r=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&r.destroyTexture(n);for(var s=e.children.length-1;s>=0;s--)this.unload(e.children[s])},i.prototype.destroy=function(){this.renderer=null},i}();function QP(i){var e,r,n,s,a,l,c,h,_,m,f,p,y,b,T,S,A,R,L,V,M,H,g;return"WebGL2RenderingContext"in globalThis&&i instanceof globalThis.WebGL2RenderingContext?g=(e={},e[Ze.UNSIGNED_BYTE]=(r={},r[Le.RGBA]=i.RGBA8,r[Le.RGB]=i.RGB8,r[Le.RG]=i.RG8,r[Le.RED]=i.R8,r[Le.RGBA_INTEGER]=i.RGBA8UI,r[Le.RGB_INTEGER]=i.RGB8UI,r[Le.RG_INTEGER]=i.RG8UI,r[Le.RED_INTEGER]=i.R8UI,r[Le.ALPHA]=i.ALPHA,r[Le.LUMINANCE]=i.LUMINANCE,r[Le.LUMINANCE_ALPHA]=i.LUMINANCE_ALPHA,r),e[Ze.BYTE]=(n={},n[Le.RGBA]=i.RGBA8_SNORM,n[Le.RGB]=i.RGB8_SNORM,n[Le.RG]=i.RG8_SNORM,n[Le.RED]=i.R8_SNORM,n[Le.RGBA_INTEGER]=i.RGBA8I,n[Le.RGB_INTEGER]=i.RGB8I,n[Le.RG_INTEGER]=i.RG8I,n[Le.RED_INTEGER]=i.R8I,n),e[Ze.UNSIGNED_SHORT]=(s={},s[Le.RGBA_INTEGER]=i.RGBA16UI,s[Le.RGB_INTEGER]=i.RGB16UI,s[Le.RG_INTEGER]=i.RG16UI,s[Le.RED_INTEGER]=i.R16UI,s[Le.DEPTH_COMPONENT]=i.DEPTH_COMPONENT16,s),e[Ze.SHORT]=(a={},a[Le.RGBA_INTEGER]=i.RGBA16I,a[Le.RGB_INTEGER]=i.RGB16I,a[Le.RG_INTEGER]=i.RG16I,a[Le.RED_INTEGER]=i.R16I,a),e[Ze.UNSIGNED_INT]=(l={},l[Le.RGBA_INTEGER]=i.RGBA32UI,l[Le.RGB_INTEGER]=i.RGB32UI,l[Le.RG_INTEGER]=i.RG32UI,l[Le.RED_INTEGER]=i.R32UI,l[Le.DEPTH_COMPONENT]=i.DEPTH_COMPONENT24,l),e[Ze.INT]=(c={},c[Le.RGBA_INTEGER]=i.RGBA32I,c[Le.RGB_INTEGER]=i.RGB32I,c[Le.RG_INTEGER]=i.RG32I,c[Le.RED_INTEGER]=i.R32I,c),e[Ze.FLOAT]=(h={},h[Le.RGBA]=i.RGBA32F,h[Le.RGB]=i.RGB32F,h[Le.RG]=i.RG32F,h[Le.RED]=i.R32F,h[Le.DEPTH_COMPONENT]=i.DEPTH_COMPONENT32F,h),e[Ze.HALF_FLOAT]=(_={},_[Le.RGBA]=i.RGBA16F,_[Le.RGB]=i.RGB16F,_[Le.RG]=i.RG16F,_[Le.RED]=i.R16F,_),e[Ze.UNSIGNED_SHORT_5_6_5]=(m={},m[Le.RGB]=i.RGB565,m),e[Ze.UNSIGNED_SHORT_4_4_4_4]=(f={},f[Le.RGBA]=i.RGBA4,f),e[Ze.UNSIGNED_SHORT_5_5_5_1]=(p={},p[Le.RGBA]=i.RGB5_A1,p),e[Ze.UNSIGNED_INT_2_10_10_10_REV]=(y={},y[Le.RGBA]=i.RGB10_A2,y[Le.RGBA_INTEGER]=i.RGB10_A2UI,y),e[Ze.UNSIGNED_INT_10F_11F_11F_REV]=(b={},b[Le.RGB]=i.R11F_G11F_B10F,b),e[Ze.UNSIGNED_INT_5_9_9_9_REV]=(T={},T[Le.RGB]=i.RGB9_E5,T),e[Ze.UNSIGNED_INT_24_8]=(S={},S[Le.DEPTH_STENCIL]=i.DEPTH24_STENCIL8,S),e[Ze.FLOAT_32_UNSIGNED_INT_24_8_REV]=(A={},A[Le.DEPTH_STENCIL]=i.DEPTH32F_STENCIL8,A),e):g=(R={},R[Ze.UNSIGNED_BYTE]=(L={},L[Le.RGBA]=i.RGBA,L[Le.RGB]=i.RGB,L[Le.ALPHA]=i.ALPHA,L[Le.LUMINANCE]=i.LUMINANCE,L[Le.LUMINANCE_ALPHA]=i.LUMINANCE_ALPHA,L),R[Ze.UNSIGNED_SHORT_5_6_5]=(V={},V[Le.RGB]=i.RGB,V),R[Ze.UNSIGNED_SHORT_4_4_4_4]=(M={},M[Le.RGBA]=i.RGBA,M),R[Ze.UNSIGNED_SHORT_5_5_5_1]=(H={},H[Le.RGBA]=i.RGBA,H),R),g}var Bv=function(){function i(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Ze.UNSIGNED_BYTE,this.internalFormat=Le.RGBA,this.samplerType=0}return i}(),ZP=function(){function i(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Pt,this.hasIntegerTextures=!1}return i.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=QP(e);var r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var n=0;n<r;n++)this.boundTextures[n]=null;this.emptyTextures={};var s=new Bv(e.createTexture());e.bindTexture(e.TEXTURE_2D,s.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=s,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Bv(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},i.prototype.bind=function(e,r){r===void 0&&(r=0);var n=this.gl;if(e=e?.castToBaseTexture(),e&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(e)):s.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null},i.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},i.prototype.unbind=function(e){var r=this,n=r.gl,s=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var a=0;a<s.length;a++)s[a]===this.unknownTexture&&this.bind(null,a)}for(var a=0;a<s.length;a++)s[a]===e&&(this.currentLocation!==a&&(n.activeTexture(n.TEXTURE0+a),this.currentLocation=a),n.bindTexture(e.target,this.emptyTextures[e.target].texture),s[a]=null)},i.prototype.ensureSamplerType=function(e){var r=this,n=r.boundTextures,s=r.hasIntegerTextures,a=r.CONTEXT_UID;if(s)for(var l=e-1;l>=0;--l){var c=n[l];if(c){var h=c._glTextures[a];h.samplerType!==Of.FLOAT&&this.renderer.texture.unbind(c)}}},i.prototype.initTexture=function(e){var r=new Bv(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r},i.prototype.initTextureType=function(e,r){var n,s;r.internalFormat=(s=(n=this.internalFormats[e.type])===null||n===void 0?void 0:n[e.format])!==null&&s!==void 0?s:e.format,this.webGLVersion===2&&e.type===Ze.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type},i.prototype.updateTexture=function(e){var r=e._glTextures[this.CONTEXT_UID];if(r){var n=this.renderer;if(this.initTextureType(e,r),e.resource&&e.resource.upload(n,e,r))r.samplerType!==Of.FLOAT&&(this.hasIntegerTextures=!0);else{var s=e.realWidth,a=e.realHeight,l=n.gl;(r.width!==s||r.height!==a||r.dirtyId<0)&&(r.width=s,r.height=a,l.texImage2D(e.target,0,r.internalFormat,s,a,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}},i.prototype.destroyTexture=function(e,r){var n=this.gl;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){var s=this.managedTextures.indexOf(e);s!==-1&&Ol(this.managedTextures,s,1)}},i.prototype.updateTextureStyle=function(e){var r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===Ci.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=Gn.CLAMP:r.wrapMode=e.wrapMode,e.resource&&e.resource.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)},i.prototype.setStyle=function(e,r){var n=this.gl;if(r.mipmap&&e.mipmap!==Ci.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Wi.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===Wi.LINEAR){var a=Math.min(e.anisotropicLevel,n.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Wi.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Wi.LINEAR?n.LINEAR:n.NEAREST)},i.prototype.destroy=function(){this.renderer=null},i}(),jv=new rr,JP=function(i){Vt(e,i);function e(r,n){r===void 0&&(r=rc.UNKNOWN);var s=i.call(this)||this;return n=Object.assign({},Xe.RENDER_OPTIONS,n),s.options=n,s.type=r,s.screen=new mt(0,0,n.width,n.height),s.view=n.view||Xe.ADAPTER.createCanvas(),s.resolution=n.resolution||Xe.RESOLUTION,s.useContextAlpha=n.useContextAlpha,s.autoDensity=!!n.autoDensity,s.preserveDrawingBuffer=n.preserveDrawingBuffer,s.clearBeforeRender=n.clearBeforeRender,s._backgroundColor=0,s._backgroundColorRgba=[0,0,0,1],s._backgroundColorString="#000000",s.backgroundColor=n.backgroundColor||s._backgroundColor,s.backgroundAlpha=n.backgroundAlpha,n.transparent!==void 0&&(Si("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),s.useContextAlpha=n.transparent,s.backgroundAlpha=n.transparent?0:1),s._lastObjectRendered=null,s.plugins={},s}return e.prototype.initPlugins=function(r){for(var n in r)this.plugins[n]=new r[n](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,n){this.view.width=Math.round(r*this.resolution),this.view.height=Math.round(n*this.resolution);var s=this.view.width/this.resolution,a=this.view.height/this.resolution;this.screen.width=s,this.screen.height=a,this.autoDensity&&(this.view.style.width=s+"px",this.view.style.height=a+"px"),this.emit("resize",s,a)},e.prototype.generateTexture=function(r,n,s,a){n===void 0&&(n={}),typeof n=="number"&&(Si("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),n={scaleMode:n,resolution:s,region:a});var l=n.region,c=FA(n,["region"]);a=l||r.getLocalBounds(null,!0),a.width===0&&(a.width=1),a.height===0&&(a.height=1);var h=To.create(D_({width:a.width,height:a.height},c));return jv.tx=-a.x,jv.ty=-a.y,this.render(r,{renderTexture:h,clear:!1,transform:jv,skipUpdateTransform:!!r.parent}),h},e.prototype.destroy=function(r){for(var n in this.plugins)this.plugins[n].destroy(),this.plugins[n]=null;r&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var s=this;s.plugins=null,s.type=rc.UNKNOWN,s.view=null,s.screen=null,s._tempDisplayObjectParent=null,s.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._backgroundColorString=hb(r),Dl(r,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(r){this._backgroundColorRgba[3]=r},enumerable:!1,configurable:!0}),e}(fc),eI=function(){function i(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return i}(),tI=function(){function i(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return i.prototype.destroy=function(){this.renderer=null},i.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},i.prototype.bind=function(e){var r=this,n=r.gl,s=r.CONTEXT_UID,a=e._glBuffers[s]||this.createGLBuffer(e);n.bindBuffer(e.type,a.buffer)},i.prototype.bindBufferBase=function(e,r){var n=this,s=n.gl,a=n.CONTEXT_UID;if(this.boundBufferBases[r]!==e){var l=e._glBuffers[a]||this.createGLBuffer(e);this.boundBufferBases[r]=e,s.bindBufferBase(s.UNIFORM_BUFFER,r,l.buffer)}},i.prototype.bindBufferRange=function(e,r,n){var s=this,a=s.gl,l=s.CONTEXT_UID;n=n||0;var c=e._glBuffers[l]||this.createGLBuffer(e);a.bindBufferRange(a.UNIFORM_BUFFER,r||0,c.buffer,n*256,256)},i.prototype.update=function(e){var r=this,n=r.gl,s=r.CONTEXT_UID,a=e._glBuffers[s];if(e._updateID!==a.updateID)if(a.updateID=e._updateID,n.bindBuffer(e.type,a.buffer),a.byteLength>=e.data.byteLength)n.bufferSubData(e.type,0,e.data);else{var l=e.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;a.byteLength=e.data.byteLength,n.bufferData(e.type,e.data,l)}},i.prototype.dispose=function(e,r){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),n&&(r||s.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}},i.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedBuffers),n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],e)},i.prototype.createGLBuffer=function(e){var r=this,n=r.CONTEXT_UID,s=r.gl;return e._glBuffers[n]=new eI(s.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[n]},i}(),mc=function(i){Vt(e,i);function e(r){var n=i.call(this,rc.WEBGL,r)||this;return r=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new $r("destroy"),contextChange:new $r("contextChange"),reset:new $r("reset"),update:new $r("update"),postrender:new $r("postrender"),prerender:new $r("prerender"),resize:new $r("resize")},n.runners.contextChange.add(n),n.globalUniforms=new go({projectionMatrix:new rr},!0),n.addSystem(Eb,"mask").addSystem(rP,"context").addSystem(YP,"state").addSystem(GP,"shader").addSystem(ZP,"texture").addSystem(tI,"buffer").addSystem(aP,"geometry").addSystem(sP,"framebuffer").addSystem(AP,"scissor").addSystem(PP,"stencil").addSystem(IP,"projection").addSystem(KP,"textureGC").addSystem(eP,"filter").addSystem(OP,"renderTexture").addSystem(tP,"batch"),n.initPlugins(e.__plugins),n.multisample=void 0,r.context?n.context.initFromContext(r.context):n.context.initFromOptions({alpha:!!n.useContextAlpha,antialias:r.antialias,premultipliedAlpha:n.useContextAlpha&&n.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,kE(n.context.webGLVersion===2?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return e.create=function(r){if(DE())return new e(r);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var r=this.gl,n;if(this.context.webGLVersion===1){var s=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,null),n=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,s)}else{var s=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),n=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,s)}n>=tr.HIGH?this.multisample=tr.HIGH:n>=tr.MEDIUM?this.multisample=tr.MEDIUM:n>=tr.LOW?this.multisample=tr.LOW:this.multisample=tr.NONE},e.prototype.addSystem=function(r,n){var s=new r(this);if(this[n])throw new Error('Whoops! The name "'+n+'" is already in use');this[n]=s;for(var a in this.runners)this.runners[a].add(s);return this},e.prototype.render=function(r,n){var s,a,l,c;if(n&&(n instanceof To?(Si("6.0.0","Renderer#render arguments changed, use options instead."),s=n,a=arguments[2],l=arguments[3],c=arguments[4]):(s=n.renderTexture,a=n.clear,l=n.transform,c=n.skipUpdateTransform)),this.renderingToScreen=!s,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=l,!this.context.isLost){if(s||(this._lastObjectRendered=r),!c){var h=r.enableTempParent();r.updateTransform(),r.disableTempParent(h)}this.renderTexture.bind(s),this.batch.currentRenderer.start(),(a!==void 0?a:this.clearBeforeRender)&&this.renderTexture.clear(),r.render(this),this.batch.currentRenderer.flush(),s&&s.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(r,n,s,a){n===void 0&&(n={});var l=i.prototype.generateTexture.call(this,r,n,s,a);return this.framebuffer.blit(),l},e.prototype.resize=function(r,n){i.prototype.resize.call(this,r,n),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(r){this.runners.destroy.emit();for(var n in this.runners)this.runners[n].destroy();i.prototype.destroy.call(this,r),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return Si("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(r,n){Si("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),Bs.add({name:r,type:Ht.RendererPlugin,ref:n})},e.__plugins={},e}(JP);Bs.handleByMap(Ht.RendererPlugin,mc.__plugins);function rI(i){return mc.create(i)}var nI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,iI=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,sI=nI,Pb=iI,F_=function(){function i(){this.texArray=null,this.blend=0,this.type=ti.TRIANGLES,this.start=0,this.size=0,this.data=null}return i}(),L_=function(){function i(){this.elements=[],this.ids=[],this.count=0}return i.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},i}(),B_=function(){function i(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(i.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),i.prototype.view=function(e){return this[e+"View"]},i.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},i.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},i}(),Vu=function(i){Vt(e,i);function e(r){var n=i.call(this,r)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Oo.for2d(),n.size=Xe.SPRITE_BATCH_SIZE*4,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),r.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return e.prototype.contextChange=function(){var r=this.renderer.gl;Xe.PREFER_ENV===Fs.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),Xe.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=mP(this.MAX_TEXTURES,r)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var r=e._drawCallPool,n=e._textureArrayPool,s=this.size/4,a=Math.floor(s/this.MAX_TEXTURES)+1;r.length<s;)r.push(new F_);for(;n.length<a;)n.push(new L_);for(var l=0;l<this.MAX_TEXTURES;l++)this._tempBoundTextures[l]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(r){r._texture.valid&&(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)},e.prototype.buildTexturesAndDrawCalls=function(){var r=this,n=r._bufferedTextures,s=r.MAX_TEXTURES,a=e._textureArrayPool,l=this.renderer.batch,c=this._tempBoundTextures,h=this.renderer.textureGC.count,_=++Pt._globalBatch,m=0,f=a[0],p=0;l.copyBoundTextures(c,s);for(var y=0;y<this._bufferSize;++y){var b=n[y];n[y]=null,b._batchEnabled!==_&&(f.count>=s&&(l.boundArray(f,c,_,s),this.buildDrawCalls(f,p,y),p=y,f=a[++m],++_),b._batchEnabled=_,b.touched=h,f.elements[f.count++]=b)}f.count>0&&(l.boundArray(f,c,_,s),this.buildDrawCalls(f,p,this._bufferSize),++m,++_);for(var y=0;y<c.length;y++)c[y]=null;Pt._globalBatch=_},e.prototype.buildDrawCalls=function(r,n,s){var a=this,l=a._bufferedElements,c=a._attributeBuffer,h=a._indexBuffer,_=a.vertexSize,m=e._drawCallPool,f=this._dcIndex,p=this._aIndex,y=this._iIndex,b=m[f];b.start=this._iIndex,b.texArray=r;for(var T=n;T<s;++T){var S=l[T],A=S._texture.baseTexture,R=Am[A.alphaMode?1:0][S.blendMode];l[T]=null,n<T&&b.blend!==R&&(b.size=y-b.start,n=T,b=m[++f],b.texArray=r,b.start=y),this.packInterleavedGeometry(S,c,h,p,y),p+=S.vertexData.length/2*_,y+=S.indices.length,b.blend=R}n<s&&(b.size=y-b.start,++f),this._dcIndex=f,this._aIndex=p,this._iIndex=y},e.prototype.bindAndClearTexArray=function(r){for(var n=this.renderer.texture,s=0;s<r.count;s++)n.bind(r.elements[s],r.ids[s]),r.elements[s]=null;r.count=0},e.prototype.updateGeometry=function(){var r=this,n=r._packedGeometries,s=r._attributeBuffer,a=r._indexBuffer;Xe.CAN_UPLOAD_SAME_BUFFER?(n[this._flushId]._buffer.update(s.rawBinaryData),n[this._flushId]._indexBuffer.update(a),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,n[this._flushId]=new this.geometryClass),n[this._flushId]._buffer.update(s.rawBinaryData),n[this._flushId]._indexBuffer.update(a),this.renderer.geometry.bind(n[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var r=this._dcIndex,n=this.renderer,s=n.gl,a=n.state,l=e._drawCallPool,c=null,h=0;h<r;h++){var _=l[h],m=_.texArray,f=_.type,p=_.size,y=_.start,b=_.blend;c!==m&&(c=m,this.bindAndClearTexArray(m)),this.state.blendMode=b,a.set(this.state),s.drawElements(f,p,s.UNSIGNED_SHORT,y*2)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Xe.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),i.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(r){var n=Mf(Math.ceil(r/8)),s=_x(n),a=n*8;this._aBuffers.length<=s&&(this._iBuffers.length=s+1);var l=this._aBuffers[a];return l||(this._aBuffers[a]=l=new B_(a*this.vertexSize*4)),l},e.prototype.getIndexBuffer=function(r){var n=Mf(Math.ceil(r/12)),s=_x(n),a=n*12;this._iBuffers.length<=s&&(this._iBuffers.length=s+1);var l=this._iBuffers[s];return l||(this._iBuffers[s]=l=new Uint16Array(a)),l},e.prototype.packInterleavedGeometry=function(r,n,s,a,l){for(var c=n.uint32View,h=n.float32View,_=a/this.vertexSize,m=r.uvs,f=r.indices,p=r.vertexData,y=r._texture.baseTexture._batchLocation,b=Math.min(r.worldAlpha,1),T=b<1&&r._texture.baseTexture.alphaMode?dc(r._tintRGB,b):r._tintRGB+(b*255<<24),S=0;S<p.length;S+=2)h[a++]=p[S],h[a++]=p[S+1],h[a++]=m[S],h[a++]=m[S+1],c[a++]=T,h[a++]=y;for(var S=0;S<f.length;S++)s[l++]=_+f[S]},e._drawCallPool=[],e._textureArrayPool=[],e}(vc),Mm=function(){function i(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},r.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(r.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return i.prototype.generateShader=function(e){if(!this.programCache[e]){for(var r=new Int32Array(e),n=0;n<e;n++)r[n]=n;this.defaultGroupCache[e]=go.from({uSamplers:r},!0);var s=this.fragTemplate;s=s.replace(/%count%/gi,""+e),s=s.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Io(this.vertexSrc,s)}var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new rr,default:this.defaultGroupCache[e]};return new Qi(this.programCache[e],a)},i.prototype.generateSampleSrc=function(e){var r="";r+=`
`,r+=`
`;for(var n=0;n<e;n++)n>0&&(r+=`
else `),n<e-1&&(r+="if(vTextureId < "+n+".5)"),r+=`
{`,r+=`
	color = texture2D(uSamplers[`+n+"], vTextureCoord);",r+=`
}`;return r+=`
`,r+=`
`,r},i}(),Ib=function(i){Vt(e,i);function e(r){r===void 0&&(r=!1);var n=i.call(this)||this;return n._buffer=new or(null,r,!1),n._indexBuffer=new or(null,r,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,Ze.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,Ze.FLOAT).addAttribute("aColor",n._buffer,4,!0,Ze.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,Ze.FLOAT).addIndex(n._indexBuffer),n}return e}(Po),Mx=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,kx=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,aI=function(){function i(){}return i.create=function(e){var r=Object.assign({vertex:Mx,fragment:kx,geometryClass:Ib,vertexSize:6},e),n=r.vertex,s=r.fragment,a=r.vertexSize,l=r.geometryClass;return function(c){Vt(h,c);function h(_){var m=c.call(this,_)||this;return m.shaderGenerator=new Mm(n,s),m.geometryClass=l,m.vertexSize=a,m}return h}(Vu)},Object.defineProperty(i,"defaultVertexSrc",{get:function(){return Mx},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentTemplate",{get:function(){return kx},enumerable:!1,configurable:!0}),i}(),Ob=aI.create();Object.assign(Ob,{extension:{name:"batch",type:Ht.RendererPlugin}});/*!
 * @pixi/accessibility - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var oI={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};yr.mixin(oI);var lI=9,Wh=100,uI=0,cI=0,Dx=2,Nx=1,hI=-1e3,fI=-1e3,dI=2,pI=function(){function i(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,($i.tablet||$i.phone)&&this.createTouchHook();var r=document.createElement("div");r.style.width=Wh+"px",r.style.height=Wh+"px",r.style.position="absolute",r.style.top=uI+"px",r.style.left=cI+"px",r.style.zIndex=Dx.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(i.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),i.prototype.createTouchHook=function(){var e=this,r=document.createElement("button");r.style.width=Nx+"px",r.style.height=Nx+"px",r.style.position="absolute",r.style.top=hI+"px",r.style.left=fI+"px",r.style.zIndex=dI.toString(),r.style.backgroundColor="#FF0000",r.title="select to enable accessibility for this content",r.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(r),this._hookDiv=r},i.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},i.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)===null||e===void 0||e.appendChild(this.div))},i.prototype.deactivate=function(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)===null||e===void 0||e.removeChild(this.div))},i.prototype.updateAccessibleObjects=function(e){if(!(!e.visible||!e.accessibleChildren)){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var r=e.children;if(r)for(var n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}},i.prototype.update=function(){var e=performance.now();if(!($i.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var r=this.renderer.view.getBoundingClientRect(),n=r.left,s=r.top,a=r.width,l=r.height,c=this.renderer,h=c.width,_=c.height,m=c.resolution,f=a/h*m,p=l/_*m,y=this.div;y.style.left=n+"px",y.style.top=s+"px",y.style.width=h+"px",y.style.height=_+"px";for(var b=0;b<this.children.length;b++){var T=this.children[b];if(T.renderId!==this.renderId)T._accessibleActive=!1,Ol(this.children,b,1),this.div.removeChild(T._accessibleDiv),this.pool.push(T._accessibleDiv),T._accessibleDiv=null,b--;else{y=T._accessibleDiv;var S=T.hitArea,A=T.worldTransform;T.hitArea?(y.style.left=(A.tx+S.x*A.a)*f+"px",y.style.top=(A.ty+S.y*A.d)*p+"px",y.style.width=S.width*A.a*f+"px",y.style.height=S.height*A.d*p+"px"):(S=T.getBounds(),this.capHitArea(S),y.style.left=S.x*f+"px",y.style.top=S.y*p+"px",y.style.width=S.width*f+"px",y.style.height=S.height*p+"px",y.title!==T.accessibleTitle&&T.accessibleTitle!==null&&(y.title=T.accessibleTitle),y.getAttribute("aria-label")!==T.accessibleHint&&T.accessibleHint!==null&&y.setAttribute("aria-label",T.accessibleHint)),(T.accessibleTitle!==y.title||T.tabIndex!==y.tabIndex)&&(y.title=T.accessibleTitle,y.tabIndex=T.tabIndex,this.debug&&this.updateDebugHTML(y))}}this.renderId++}},i.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},i.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var r=this.renderer,n=r.width,s=r.height;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>s&&(e.height=s-e.y)},i.prototype.addChild=function(e){var r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=Wh+"px",r.style.height=Wh+"px",r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=Dx.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title="displayObject "+e.tabIndex),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},i.prototype._onClick=function(e){var r=this.renderer.plugins.interaction,n=e.target.displayObject,s=r.eventData;r.dispatchEvent(n,"click",s),r.dispatchEvent(n,"pointertap",s),r.dispatchEvent(n,"tap",s)},i.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var r=this.renderer.plugins.interaction,n=e.target.displayObject,s=r.eventData;r.dispatchEvent(n,"mouseover",s)},i.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var r=this.renderer.plugins.interaction,n=e.target.displayObject,s=r.eventData;r.dispatchEvent(n,"mouseout",s)},i.prototype._onKeyDown=function(e){e.keyCode===lI&&this.activate()},i.prototype._onMouseMove=function(e){e.movementX===0&&e.movementY===0||this.deactivate()},i.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},i.extension={name:"accessibility",type:[Ht.RendererPlugin,Ht.CanvasRendererPlugin]},i}();/*!
 * @pixi/interaction - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Fx=function(){function i(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new yt,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(i.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),i.prototype.getLocalPosition=function(e,r,n){return e.worldTransform.applyInverse(n||this.global,r)},i.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var r="buttons"in e&&e.buttons;this.buttons=Number.isInteger(r)?r:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},i.prototype.reset=function(){this.isPrimary=!1},i}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var j_=function(i,e){return j_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},j_(i,e)};function vI(i,e){j_(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var _I=function(){function i(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return i.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},i.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},i}(),Uv=function(){function i(e){this._pointerId=e,this._flags=i.FLAGS.NONE}return i.prototype._doSet=function(e,r){r?this._flags=this._flags|e:this._flags=this._flags&~e},Object.defineProperty(i.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"none",{get:function(){return this._flags===i.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"over",{get:function(){return(this._flags&i.FLAGS.OVER)!==0},set:function(e){this._doSet(i.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightDown",{get:function(){return(this._flags&i.FLAGS.RIGHT_DOWN)!==0},set:function(e){this._doSet(i.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftDown",{get:function(){return(this._flags&i.FLAGS.LEFT_DOWN)!==0},set:function(e){this._doSet(i.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),i}(),mI=function(){function i(){this._tempPoint=new yt}return i.prototype.recursiveFindHit=function(e,r,n,s,a){var l;if(!r||!r.visible)return!1;var c=e.data.global;a=r.interactive||a;var h=!1,_=a,m=!0;if(r.hitArea)s&&(r.worldTransform.applyInverse(c,this._tempPoint),r.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?h=!0:(s=!1,m=!1)),_=!1;else if(r._mask&&s){var f=r._mask.isMaskData?r._mask.maskObject:r._mask;f&&!(!((l=f.containsPoint)===null||l===void 0)&&l.call(f,c))&&(s=!1)}if(m&&r.interactiveChildren&&r.children)for(var p=r.children,y=p.length-1;y>=0;y--){var b=p[y],T=this.recursiveFindHit(e,b,n,s,_);if(T){if(!b.parent)continue;_=!1,T&&(e.target&&(s=!1),h=!0)}}return a&&(s&&!e.target&&!r.hitArea&&r.containsPoint&&r.containsPoint(c)&&(h=!0),r.interactive&&(h&&!e.target&&(e.target=r),n&&n(e,r,!!h))),h},i.prototype.findHit=function(e,r,n,s){this.recursiveFindHit(e,r,n,s,!1)},i}(),yI={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(i){i?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};yr.mixin(yI);var $h=1,Yh={target:null,data:{global:null}},gI=function(i){vI(e,i);function e(r,n){var s=i.call(this)||this;return n=n||{},s.renderer=r,s.autoPreventDefault=n.autoPreventDefault!==void 0?n.autoPreventDefault:!0,s.interactionFrequency=n.interactionFrequency||10,s.mouse=new Fx,s.mouse.identifier=$h,s.mouse.global.set(-999999),s.activeInteractionData={},s.activeInteractionData[$h]=s.mouse,s.interactionDataPool=[],s.eventData=new _I,s.interactionDOMElement=null,s.moveWhenInside=!1,s.eventsAdded=!1,s.tickerAdded=!1,s.mouseOverRenderer=!("PointerEvent"in globalThis),s.supportsTouchEvents="ontouchstart"in globalThis,s.supportsPointerEvents=!!globalThis.PointerEvent,s.onPointerUp=s.onPointerUp.bind(s),s.processPointerUp=s.processPointerUp.bind(s),s.onPointerCancel=s.onPointerCancel.bind(s),s.processPointerCancel=s.processPointerCancel.bind(s),s.onPointerDown=s.onPointerDown.bind(s),s.processPointerDown=s.processPointerDown.bind(s),s.onPointerMove=s.onPointerMove.bind(s),s.processPointerMove=s.processPointerMove.bind(s),s.onPointerOut=s.onPointerOut.bind(s),s.processPointerOverOut=s.processPointerOverOut.bind(s),s.onPointerOver=s.onPointerOver.bind(s),s.cursorStyles={default:"inherit",pointer:"pointer"},s.currentCursorMode=null,s.cursor=null,s.resolution=1,s.delayedEvents=[],s.search=new mI,s._tempDisplayObject=new vb,s._eventListenerOptions={capture:!0,passive:!1},s._useSystemTicker=n.useSystemTicker!==void 0?n.useSystemTicker:!0,s.setTargetElement(s.renderer.view,s.renderer.resolution),s}return Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(r){this._useSystemTicker=r,r?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(r,n){return Yh.target=null,Yh.data.global=r,n||(n=this.lastObjectRendered),this.processInteractive(Yh,n,null,!0),Yh.target},e.prototype.setTargetElement=function(r,n){n===void 0&&(n=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=r,this.resolution=n,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Yr.system.add(this.tickerUpdate,this,Ls.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(Yr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="none",r.msTouchAction="none"):this.supportsPointerEvents&&(r.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="",r.msTouchAction=""):this.supportsPointerEvents&&(r.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(r){this._deltaTime+=r,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var r in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(r)){var n=this.activeInteractionData[r];if(n.originalEvent&&n.pointerType!=="touch"){var s=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(r){r=r||"default";var n=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(n=!1),this.currentCursorMode!==r){this.currentCursorMode=r;var s=this.cursorStyles[r];if(s)switch(typeof s){case"string":n&&(this.interactionDOMElement.style.cursor=s);break;case"function":s(r);break;case"object":n&&Object.assign(this.interactionDOMElement.style,s);break}else n&&typeof r=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,r)&&(this.interactionDOMElement.style.cursor=r)}},e.prototype.dispatchEvent=function(r,n,s){(!s.stopPropagationHint||r===s.stopsPropagatingAt)&&(s.currentTarget=r,s.type=n,r.emit(n,s),r[n]&&r[n](s))},e.prototype.delayDispatchEvent=function(r,n,s){this.delayedEvents.push({displayObject:r,eventString:n,eventData:s})},e.prototype.mapPositionToPoint=function(r,n,s){var a;this.interactionDOMElement.parentElement?a=this.interactionDOMElement.getBoundingClientRect():a={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var l=1/this.resolution;r.x=(n-a.left)*(this.interactionDOMElement.width/a.width)*l,r.y=(s-a.top)*(this.interactionDOMElement.height/a.height)*l},e.prototype.processInteractive=function(r,n,s,a){var l=this.search.findHit(r,n,s,a),c=this.delayedEvents;if(!c.length)return l;r.stopPropagationHint=!1;var h=c.length;this.delayedEvents=[];for(var _=0;_<h;_++){var m=c[_],f=m.displayObject,p=m.eventString,y=m.eventData;y.stopsPropagatingAt===f&&(y.stopPropagationHint=!0),this.dispatchEvent(f,p,y)}return l},e.prototype.onPointerDown=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r);if(this.autoPreventDefault&&n[0].isNormalized){var s=r.cancelable||!("cancelable"in r);s&&r.preventDefault()}for(var a=n.length,l=0;l<a;l++){var c=n[l],h=this.getInteractionDataForPointerId(c),_=this.configureInteractionEventForDOMEvent(this.eventData,c,h);if(_.data.originalEvent=r,this.processInteractive(_,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",_),c.pointerType==="touch")this.emit("touchstart",_);else if(c.pointerType==="mouse"||c.pointerType==="pen"){var m=c.button===2;this.emit(m?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(r,n,s){var a=r.data,l=r.data.identifier;if(s){if(n.trackedPointers[l]||(n.trackedPointers[l]=new Uv(l)),this.dispatchEvent(n,"pointerdown",r),a.pointerType==="touch")this.dispatchEvent(n,"touchstart",r);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var c=a.button===2;c?n.trackedPointers[l].rightDown=!0:n.trackedPointers[l].leftDown=!0,this.dispatchEvent(n,c?"rightdown":"mousedown",r)}}},e.prototype.onPointerComplete=function(r,n,s){var a=this.normalizeToPointerData(r),l=a.length,c=r.target;r.composedPath&&r.composedPath().length>0&&(c=r.composedPath()[0]);for(var h=c!==this.interactionDOMElement?"outside":"",_=0;_<l;_++){var m=a[_],f=this.getInteractionDataForPointerId(m),p=this.configureInteractionEventForDOMEvent(this.eventData,m,f);if(p.data.originalEvent=r,this.processInteractive(p,this.lastObjectRendered,s,n||!h),this.emit(n?"pointercancel":"pointerup"+h,p),m.pointerType==="mouse"||m.pointerType==="pen"){var y=m.button===2;this.emit(y?"rightup"+h:"mouseup"+h,p)}else m.pointerType==="touch"&&(this.emit(n?"touchcancel":"touchend"+h,p),this.releaseInteractionDataForPointerId(m.pointerId))}},e.prototype.onPointerCancel=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(r,n){var s=r.data,a=r.data.identifier;n.trackedPointers[a]!==void 0&&(delete n.trackedPointers[a],this.dispatchEvent(n,"pointercancel",r),s.pointerType==="touch"&&this.dispatchEvent(n,"touchcancel",r))},e.prototype.onPointerUp=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!1,this.processPointerUp)},e.prototype.processPointerUp=function(r,n,s){var a=r.data,l=r.data.identifier,c=n.trackedPointers[l],h=a.pointerType==="touch",_=a.pointerType==="mouse"||a.pointerType==="pen",m=!1;if(_){var f=a.button===2,p=Uv.FLAGS,y=f?p.RIGHT_DOWN:p.LEFT_DOWN,b=c!==void 0&&c.flags&y;s?(this.dispatchEvent(n,f?"rightup":"mouseup",r),b&&(this.dispatchEvent(n,f?"rightclick":"click",r),m=!0)):b&&this.dispatchEvent(n,f?"rightupoutside":"mouseupoutside",r),c&&(f?c.rightDown=!1:c.leftDown=!1)}s?(this.dispatchEvent(n,"pointerup",r),h&&this.dispatchEvent(n,"touchend",r),c&&((!_||m)&&this.dispatchEvent(n,"pointertap",r),h&&(this.dispatchEvent(n,"tap",r),c.over=!1))):c&&(this.dispatchEvent(n,"pointerupoutside",r),h&&this.dispatchEvent(n,"touchendoutside",r)),c&&c.none&&delete n.trackedPointers[l]},e.prototype.onPointerMove=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r);(n[0].pointerType==="mouse"||n[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var s=n.length,a=0;a<s;a++){var l=n[a],c=this.getInteractionDataForPointerId(l),h=this.configureInteractionEventForDOMEvent(this.eventData,l,c);h.data.originalEvent=r,this.processInteractive(h,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",h),l.pointerType==="touch"&&this.emit("touchmove",h),(l.pointerType==="mouse"||l.pointerType==="pen")&&this.emit("mousemove",h)}n[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(r,n,s){var a=r.data,l=a.pointerType==="touch",c=a.pointerType==="mouse"||a.pointerType==="pen";c&&this.processPointerOverOut(r,n,s),(!this.moveWhenInside||s)&&(this.dispatchEvent(n,"pointermove",r),l&&this.dispatchEvent(n,"touchmove",r),c&&this.dispatchEvent(n,"mousemove",r))},e.prototype.onPointerOut=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r),s=n[0];s.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var a=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,a);l.data.originalEvent=s,this.processInteractive(l,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",l),s.pointerType==="mouse"||s.pointerType==="pen"?this.emit("mouseout",l):this.releaseInteractionDataForPointerId(a.identifier)}},e.prototype.processPointerOverOut=function(r,n,s){var a=r.data,l=r.data.identifier,c=a.pointerType==="mouse"||a.pointerType==="pen",h=n.trackedPointers[l];s&&!h&&(h=n.trackedPointers[l]=new Uv(l)),h!==void 0&&(s&&this.mouseOverRenderer?(h.over||(h.over=!0,this.delayDispatchEvent(n,"pointerover",r),c&&this.delayDispatchEvent(n,"mouseover",r)),c&&this.cursor===null&&(this.cursor=n.cursor)):h.over&&(h.over=!1,this.dispatchEvent(n,"pointerout",this.eventData),c&&this.dispatchEvent(n,"mouseout",r),h.none&&delete n.trackedPointers[l]))},e.prototype.onPointerOver=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r),s=n[0],a=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,a);l.data.originalEvent=s,s.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",l),(s.pointerType==="mouse"||s.pointerType==="pen")&&this.emit("mouseover",l)}},e.prototype.getInteractionDataForPointerId=function(r){var n=r.pointerId,s;return n===$h||r.pointerType==="mouse"?s=this.mouse:this.activeInteractionData[n]?s=this.activeInteractionData[n]:(s=this.interactionDataPool.pop()||new Fx,s.identifier=n,this.activeInteractionData[n]=s),s.copyEvent(r),s},e.prototype.releaseInteractionDataForPointerId=function(r){var n=this.activeInteractionData[r];n&&(delete this.activeInteractionData[r],n.reset(),this.interactionDataPool.push(n))},e.prototype.configureInteractionEventForDOMEvent=function(r,n,s){return r.data=s,this.mapPositionToPoint(s.global,n.clientX,n.clientY),n.pointerType==="touch"&&(n.globalX=s.global.x,n.globalY=s.global.y),s.originalEvent=n,r.reset(),r},e.prototype.normalizeToPointerData=function(r){var n=[];if(this.supportsTouchEvents&&r instanceof TouchEvent)for(var s=0,a=r.changedTouches.length;s<a;s++){var l=r.changedTouches[s];typeof l.button>"u"&&(l.button=r.touches.length?1:0),typeof l.buttons>"u"&&(l.buttons=r.touches.length?1:0),typeof l.isPrimary>"u"&&(l.isPrimary=r.touches.length===1&&r.type==="touchstart"),typeof l.width>"u"&&(l.width=l.radiusX||1),typeof l.height>"u"&&(l.height=l.radiusY||1),typeof l.tiltX>"u"&&(l.tiltX=0),typeof l.tiltY>"u"&&(l.tiltY=0),typeof l.pointerType>"u"&&(l.pointerType="touch"),typeof l.pointerId>"u"&&(l.pointerId=l.identifier||0),typeof l.pressure>"u"&&(l.pressure=l.force||.5),typeof l.twist>"u"&&(l.twist=0),typeof l.tangentialPressure>"u"&&(l.tangentialPressure=0),typeof l.layerX>"u"&&(l.layerX=l.offsetX=l.clientX),typeof l.layerY>"u"&&(l.layerY=l.offsetY=l.clientY),l.isNormalized=!0,n.push(l)}else if(!globalThis.MouseEvent||r instanceof MouseEvent&&(!this.supportsPointerEvents||!(r instanceof globalThis.PointerEvent))){var c=r;typeof c.isPrimary>"u"&&(c.isPrimary=!0),typeof c.width>"u"&&(c.width=1),typeof c.height>"u"&&(c.height=1),typeof c.tiltX>"u"&&(c.tiltX=0),typeof c.tiltY>"u"&&(c.tiltY=0),typeof c.pointerType>"u"&&(c.pointerType="mouse"),typeof c.pointerId>"u"&&(c.pointerId=$h),typeof c.pressure>"u"&&(c.pressure=.5),typeof c.twist>"u"&&(c.twist=0),typeof c.tangentialPressure>"u"&&(c.tangentialPressure=0),c.isNormalized=!0,n.push(c)}else n.push(r);return n},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[Ht.RendererPlugin,Ht.CanvasRendererPlugin]},e}(fc);/*!
 * @pixi/extract - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var xI=new mt,bI=4,wI=function(){function i(e){this.renderer=e}return i.prototype.image=function(e,r,n){var s=new Image;return s.src=this.base64(e,r,n),s},i.prototype.base64=function(e,r,n){return this.canvas(e).toDataURL(r,n)},i.prototype.canvas=function(e,r){var n=this._rawPixels(e,r),s=n.pixels,a=n.width,l=n.height,c=n.flipY,h=new gx(a,l,1),_=h.context.getImageData(0,0,a,l);if(i.arrayPostDivide(s,_.data),h.context.putImageData(_,0,0),c){var m=new gx(h.width,h.height,1);m.context.scale(1,-1),m.context.drawImage(h.canvas,0,-l),h.destroy(),h=m}return h.canvas},i.prototype.pixels=function(e,r){var n=this._rawPixels(e,r).pixels;return i.arrayPostDivide(n,n),n},i.prototype._rawPixels=function(e,r){var n=this.renderer,s,a=!1,l,c=!1;if(e)if(e instanceof To)l=e;else{var h=n.context.webGLVersion>=2?n.multisample:tr.NONE;if(l=this.renderer.generateTexture(e,{multisample:h}),h!==tr.NONE){var _=To.create({width:l.width,height:l.height});n.framebuffer.bind(l.framebuffer),n.framebuffer.blit(_.framebuffer),n.framebuffer.bind(null),l.destroy(!0),l=_}c=!0}l?(s=l.baseTexture.resolution,r=r??l.frame,a=!1,n.renderTexture.bind(l)):(s=n.resolution,r||(r=xI,r.width=n.width,r.height=n.height),a=!0,n.renderTexture.bind(null));var m=Math.round(r.width*s),f=Math.round(r.height*s),p=new Uint8Array(bI*m*f),y=n.gl;return y.readPixels(Math.round(r.x*s),Math.round(r.y*s),m,f,y.RGBA,y.UNSIGNED_BYTE,p),c&&l.destroy(!0),{pixels:p,width:m,height:f,flipY:a}},i.prototype.destroy=function(){this.renderer=null},i.arrayPostDivide=function(e,r){for(var n=0;n<e.length;n+=4){var s=r[n+3]=e[n+3];s!==0?(r[n]=Math.round(Math.min(e[n]*255/s,255)),r[n+1]=Math.round(Math.min(e[n+1]*255/s,255)),r[n+2]=Math.round(Math.min(e[n+2]*255/s,255))):(r[n]=e[n],r[n+1]=e[n+1],r[n+2]=e[n+2])}},i.extension={name:"extract",type:Ht.RendererPlugin},i}();/*!
 * @pixi/loaders - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Kh=function(){function i(e,r,n){r===void 0&&(r=!1),this._fn=e,this._once=r,this._thisArg=n,this._next=this._prev=this._owner=null}return i.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},i}();function Lx(i,e){return i._head?(i._tail._next=e,e._prev=i._tail,i._tail=e):(i._head=e,i._tail=e),e._owner=i,e}var Is=function(){function i(){this._head=this._tail=void 0}return i.prototype.handlers=function(e){e===void 0&&(e=!1);var r=this._head;if(e)return!!r;for(var n=[];r;)n.push(r),r=r._next;return n},i.prototype.has=function(e){if(!(e instanceof Kh))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},i.prototype.dispatch=function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];var s=this._head;if(!s)return!1;for(;s;)s._once&&this.detach(s),s._fn.apply(s._thisArg,r),s=s._next;return!0},i.prototype.add=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return Lx(this,new Kh(e,!1,r))},i.prototype.once=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return Lx(this,new Kh(e,!0,r))},i.prototype.detach=function(e){if(!(e instanceof Kh))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,e._next===null&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)},i.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},i}();function Rb(i,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[e.strictMode?"strict":"loose"].exec(i),s={},a=14;a--;)s[r.key[a]]=n[a]||"";return s[r.q.name]={},s[r.key[12]].replace(r.q.parser,function(l,c,h){c&&(s[r.q.name][c]=h)}),s}var Gv,Qh=null,TI=0,Bx=200,SI=204,EI=1223,CI=2;function jx(){}function Ux(i,e,r){e&&e.indexOf(".")===0&&(e=e.substring(1)),e&&(i[e]=r)}function Hv(i){return i.toString().replace("object ","")}var cr=function(){function i(e,r,n){if(this._dequeue=jx,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof e!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(i.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=i.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=jx,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Is,this.onProgress=new Is,this.onComplete=new Is,this.onAfterMiddleware=new Is}return i.setExtensionLoadType=function(e,r){Ux(i._loadTypeMap,e,r)},i.setExtensionXhrType=function(e,r){Ux(i._xhrTypeMap,e,r)},Object.defineProperty(i.prototype,"isDataUrl",{get:function(){return this._hasFlag(i.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isComplete",{get:function(){return this._hasFlag(i.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isLoading",{get:function(){return this._hasFlag(i.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),i.prototype.complete=function(){this._clearEvents(),this._finish()},i.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=i.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},i.prototype.load=function(e){var r=this;if(!this.isLoading){if(this.isComplete){e&&setTimeout(function(){return e(r)},1);return}else e&&this.onComplete.once(e);switch(this._setFlag(i.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case i.LOAD_TYPE.IMAGE:this.type=i.TYPE.IMAGE,this._loadElement("image");break;case i.LOAD_TYPE.AUDIO:this.type=i.TYPE.AUDIO,this._loadSourceElement("audio");break;case i.LOAD_TYPE.VIDEO:this.type=i.TYPE.VIDEO,this._loadSourceElement("video");break;case i.LOAD_TYPE.XHR:default:typeof Gv>"u"&&(Gv=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),Gv&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},i.prototype._hasFlag=function(e){return(this._flags&e)!==0},i.prototype._setFlag=function(e,r){this._flags=r?this._flags|e:this._flags&~e},i.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},i.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(i.STATUS_FLAGS.COMPLETE,!0),this._setFlag(i.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},i.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:e==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},i.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:e==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(e),this.data===null){this.abort("Unsupported element: "+e);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(e,this.url[n],Array.isArray(r)?r[n]:r));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},i.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===i.XHR_RESPONSE_TYPE.JSON||this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=i.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},i.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},i.prototype._createSource=function(e,r,n){n||(n=e+"/"+this._getExtension(r));var s=document.createElement("source");return s.src=r,s.type=n,s},i.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},i.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},i.prototype._onTimeout=function(){this.abort("Load timed out.")},i.prototype._xhrOnError=function(){var e=this.xhr;this.abort(Hv(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},i.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(Hv(e)+" Request timed out.")},i.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(Hv(e)+" Request was aborted by the user.")},i.prototype._xhrOnLoad=function(){var e=this.xhr,r="",n=typeof e.status>"u"?Bx:e.status;(e.responseType===""||e.responseType==="text"||typeof e.responseType>"u")&&(r=e.responseText),n===TI&&(r.length>0||e.responseType===i.XHR_RESPONSE_TYPE.BUFFER)?n=Bx:n===EI&&(n=SI);var s=n/100|0;if(s===CI)if(this.xhrType===i.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=i.TYPE.TEXT;else if(this.xhrType===i.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=i.TYPE.JSON}catch(c){this.abort("Error trying to parse loaded json: "+c);return}else if(this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var a=new DOMParser;this.data=a.parseFromString(r,"text/xml")}else{var l=document.createElement("div");l.innerHTML=r,this.data=l}this.type=i.TYPE.XML}catch(c){this.abort("Error trying to parse loaded xml: "+c);return}else this.data=e.response||r;else{this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);return}this.complete()},i.prototype._determineCrossOrigin=function(e,r){if(e.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";r=r||globalThis.location,Qh||(Qh=document.createElement("a")),Qh.href=e;var n=Rb(Qh.href,{strictMode:!0}),s=!n.port&&r.port===""||n.port===r.port,a=n.protocol?n.protocol+":":"";return n.host!==r.hostname||!s||a!==r.protocol?"anonymous":""},i.prototype._determineXhrType=function(){return i._xhrTypeMap[this.extension]||i.XHR_RESPONSE_TYPE.TEXT},i.prototype._determineLoadType=function(){return i._loadTypeMap[this.extension]||i.LOAD_TYPE.XHR},i.prototype._getExtension=function(e){e===void 0&&(e=this.url);var r="";if(this.isDataUrl){var n=e.indexOf("/");r=e.substring(n+1,e.indexOf(";",n))}else{var s=e.indexOf("?"),a=e.indexOf("#"),l=Math.min(s>-1?s:e.length,a>-1?a:e.length);e=e.substring(0,l),r=e.substring(e.lastIndexOf(".")+1)}return r.toLowerCase()},i.prototype._getMimeFromXhrType=function(e){switch(e){case i.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case i.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case i.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case i.XHR_RESPONSE_TYPE.JSON:return"application/json";case i.XHR_RESPONSE_TYPE.DEFAULT:case i.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},i}();(function(i){(function(e){e[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING"})(i.STATUS_FLAGS||(i.STATUS_FLAGS={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JSON=1]="JSON",e[e.XML=2]="XML",e[e.IMAGE=3]="IMAGE",e[e.AUDIO=4]="AUDIO",e[e.VIDEO=5]="VIDEO",e[e.TEXT=6]="TEXT"}(i.TYPE||(i.TYPE={})),function(e){e[e.XHR=1]="XHR",e[e.IMAGE=2]="IMAGE",e[e.AUDIO=3]="AUDIO",e[e.VIDEO=4]="VIDEO"}(i.LOAD_TYPE||(i.LOAD_TYPE={})),function(e){e.DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text"}(i.XHR_RESPONSE_TYPE||(i.XHR_RESPONSE_TYPE={})),i._loadTypeMap={gif:i.LOAD_TYPE.IMAGE,png:i.LOAD_TYPE.IMAGE,bmp:i.LOAD_TYPE.IMAGE,jpg:i.LOAD_TYPE.IMAGE,jpeg:i.LOAD_TYPE.IMAGE,tif:i.LOAD_TYPE.IMAGE,tiff:i.LOAD_TYPE.IMAGE,webp:i.LOAD_TYPE.IMAGE,tga:i.LOAD_TYPE.IMAGE,avif:i.LOAD_TYPE.IMAGE,svg:i.LOAD_TYPE.IMAGE,"svg+xml":i.LOAD_TYPE.IMAGE,mp3:i.LOAD_TYPE.AUDIO,ogg:i.LOAD_TYPE.AUDIO,wav:i.LOAD_TYPE.AUDIO,mp4:i.LOAD_TYPE.VIDEO,webm:i.LOAD_TYPE.VIDEO},i._xhrTypeMap={xhtml:i.XHR_RESPONSE_TYPE.DOCUMENT,html:i.XHR_RESPONSE_TYPE.DOCUMENT,htm:i.XHR_RESPONSE_TYPE.DOCUMENT,xml:i.XHR_RESPONSE_TYPE.DOCUMENT,tmx:i.XHR_RESPONSE_TYPE.DOCUMENT,svg:i.XHR_RESPONSE_TYPE.DOCUMENT,tsx:i.XHR_RESPONSE_TYPE.DOCUMENT,gif:i.XHR_RESPONSE_TYPE.BLOB,png:i.XHR_RESPONSE_TYPE.BLOB,bmp:i.XHR_RESPONSE_TYPE.BLOB,jpg:i.XHR_RESPONSE_TYPE.BLOB,jpeg:i.XHR_RESPONSE_TYPE.BLOB,tif:i.XHR_RESPONSE_TYPE.BLOB,tiff:i.XHR_RESPONSE_TYPE.BLOB,webp:i.XHR_RESPONSE_TYPE.BLOB,tga:i.XHR_RESPONSE_TYPE.BLOB,avif:i.XHR_RESPONSE_TYPE.BLOB,json:i.XHR_RESPONSE_TYPE.JSON,text:i.XHR_RESPONSE_TYPE.TEXT,txt:i.XHR_RESPONSE_TYPE.TEXT,ttf:i.XHR_RESPONSE_TYPE.BUFFER,otf:i.XHR_RESPONSE_TYPE.BUFFER},i.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(cr||(cr={}));function no(){}function AI(i){return function(){for(var r=arguments,n=[],s=0;s<arguments.length;s++)n[s]=r[s];if(i===null)throw new Error("Callback was already called.");var a=i;i=null,a.apply(this,n)}}var PI=function(){function i(e,r){this.data=e,this.callback=r}return i}(),zv=function(){function i(e,r){var n=this;if(r===void 0&&(r=1),this.workers=0,this.saturated=no,this.unsaturated=no,this.empty=no,this.drain=no,this.error=no,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(s,a,l){if(l&&typeof l!="function")throw new Error("task callback must be a function");if(n.started=!0,s==null&&n.idle()){setTimeout(function(){return n.drain()},1);return}var c=new PI(s,typeof l=="function"?l:no);a?n._tasks.unshift(c):n._tasks.push(c),setTimeout(n.process,1)},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var s=n._tasks.shift();n._tasks.length===0&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(s.data,AI(n._next(s)))}},this._worker=e,r===0)throw new Error("Concurrency must not be zero");this.concurrency=r,this.buffer=r/4}return i.prototype._next=function(e){var r=this;return function(){for(var n=arguments,s=[],a=0;a<arguments.length;a++)s[a]=n[a];r.workers-=1,e.callback.apply(e,s),s[0]!=null&&r.error(s[0],e.data),r.workers<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}},i.prototype.push=function(e,r){this._insert(e,!1,r)},i.prototype.kill=function(){this.workers=0,this.drain=no,this.started=!1,this._tasks=[]},i.prototype.unshift=function(e,r){this._insert(e,!0,r)},i.prototype.length=function(){return this._tasks.length},i.prototype.running=function(){return this.workers},i.prototype.idle=function(){return this._tasks.length+this.workers===0},i.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},i.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},i.eachSeries=function(e,r,n,s){var a=0,l=e.length;function c(h){if(h||a===l){n&&n(h);return}s?setTimeout(function(){r(e[a++],c)},1):r(e[a++],c)}c()},i.queue=function(e,r){return new i(e,r)},i}(),Xv=100,II=/(#[\w-]+)?$/,Ff=function(){function i(e,r){var n=this;e===void 0&&(e=""),r===void 0&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(h,_){return n._loadResource(h,_)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(h,_){return n._loadResource(h,_)},this._queue=zv.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new Is,this.onError=new Is,this.onLoad=new Is,this.onStart=new Is,this.onComplete=new Is;for(var s=0;s<i._plugins.length;++s){var a=i._plugins[s],l=a.pre,c=a.use;l&&this.pre(l),c&&this.use(c)}this._protected=!1}return i.prototype._add=function(e,r,n,s){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(r=this._prepareUrl(r),this.resources[e]=new cr(e,r,n),typeof s=="function"&&this.resources[e].onAfterMiddleware.once(s),this.loading){for(var a=n.parentResource,l=[],c=0;c<a.children.length;++c)a.children[c].isComplete||l.push(a.children[c]);var h=a.progressChunk*(l.length+1),_=h/(l.length+2);a.children.push(this.resources[e]),a.progressChunk=_;for(var c=0;c<l.length;++c)l[c].progressChunk=_;this.resources[e].progressChunk=_}return this._queue.push(this.resources[e]),this},i.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},i.prototype.use=function(e){return this._afterMiddleware.push(e),this},i.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var r=this.resources[e];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort("loader reset")}return this.resources={},this},i.prototype.load=function(e){if(Si("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof e=="function"&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,n=Xv/r,s=0;s<this._queue._tasks.length;++s)this._queue._tasks[s].data.progressChunk=n;this._onStart(),this._queue.resume()}return this},Object.defineProperty(i.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),i.prototype._prepareUrl=function(e){var r=Rb(e,{strictMode:!0}),n;if(r.protocol||!r.path||e.indexOf("//")===0?n=e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&e.charAt(0)!=="/"?n=this.baseUrl+"/"+e:n=this.baseUrl+e,this.defaultQueryString){var s=II.exec(n)[0];n=n.slice(0,n.length-s.length),n.indexOf("?")!==-1?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=s}return n},i.prototype._loadResource=function(e,r){var n=this;e._dequeue=r,zv.eachSeries(this._beforeMiddleware,function(s,a){s.call(n,e,function(){a(e.isComplete?{}:null)})},function(){e.isComplete?n._onLoad(e):(e._onLoadBinding=e.onComplete.once(n._onLoad,n),e.load())},!0)},i.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},i.prototype._onComplete=function(){this.progress=Xv,this.loading=!1,this.onComplete.dispatch(this,this.resources)},i.prototype._onLoad=function(e){var r=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),zv.eachSeries(this._afterMiddleware,function(n,s){n.call(r,e,s)},function(){e.onAfterMiddleware.dispatch(e),r.progress=Math.min(Xv,r.progress+e.progressChunk),r.onProgress.dispatch(r,e),e.error?r.onError.dispatch(e.error,r,e):r.onLoad.dispatch(r,e),r._resourcesParsing.splice(r._resourcesParsing.indexOf(e),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},i.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(i,"shared",{get:function(){var e=i._shared;return e||(e=new i,e._protected=!0,i._shared=e),e},enumerable:!1,configurable:!0}),i.registerPlugin=function(e){return Si("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),Bs.add({type:Ht.Loader,ref:e}),i},i._plugins=[],i}();Bs.handleByList(Ht.Loader,Ff._plugins);Ff.prototype.add=function(e,r,n,s){if(Array.isArray(e)){for(var a=0;a<e.length;++a)this.add(e[a]);return this}if(typeof e=="object"&&(n=e,s=r||n.callback||n.onComplete,r=n.url,e=n.name||n.key||n.url),typeof r!="string"&&(s=n,n=r,r=e),typeof r!="string")throw new Error("No url passed to add resource to loader.");return typeof n=="function"&&(s=n,n=null),this._add(e,r,n,s)};var OI=function(){function i(){}return i.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?Ff.shared:new Ff},i.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},i.extension=Ht.Application,i}(),RI=function(){function i(){}return i.add=function(){cr.setExtensionLoadType("svg",cr.LOAD_TYPE.XHR),cr.setExtensionXhrType("svg",cr.XHR_RESPONSE_TYPE.TEXT)},i.use=function(e,r){if(e.data&&(e.type===cr.TYPE.IMAGE||e.extension==="svg")){var n=e.data,s=e.url,a=e.name,l=e.metadata;it.fromLoader(n,s,a,l).then(function(c){e.texture=c,r()}).catch(r)}else r()},i.extension=Ht.Loader,i}(),MI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function kI(i){for(var e="",r=0;r<i.length;){for(var n=[0,0,0],s=[0,0,0,0],a=0;a<n.length;++a)r<i.length?n[a]=i.charCodeAt(r++)&255:n[a]=0;s[0]=n[0]>>2,s[1]=(n[0]&3)<<4|n[1]>>4,s[2]=(n[1]&15)<<2|n[2]>>6,s[3]=n[2]&63;var l=r-(i.length-1);switch(l){case 2:s[3]=64,s[2]=64;break;case 1:s[3]=64;break}for(var a=0;a<s.length;++a)e+=MI.charAt(s[a])}return e}function DI(i,e){if(!i.data){e();return}if(i.xhr&&i.xhrType===cr.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof i.data=="string"){var r=i.xhr.getResponseHeader("content-type");if(r&&r.indexOf("image")===0){i.data=new Image,i.data.src="data:"+r+";base64,"+kI(i.xhr.responseText),i.type=cr.TYPE.IMAGE,i.data.onload=function(){i.data.onload=null,e()};return}}else if(i.data.type.indexOf("image")===0){var n=globalThis.URL||globalThis.webkitURL,s=n.createObjectURL(i.data);i.blob=i.data,i.data=new Image,i.data.src=s,i.type=cr.TYPE.IMAGE,i.data.onload=function(){n.revokeObjectURL(s),i.data.onload=null,e()};return}}e()}var NI=function(){function i(){}return i.extension=Ht.Loader,i.use=DI,i}();Bs.add(RI,NI);/*!
 * @pixi/compressed-textures - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Bt,bt;(function(i){i[i.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",i[i.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",i[i.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",i[i.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",i[i.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",i[i.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",i[i.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",i[i.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",i[i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",i[i.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",i[i.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",i[i.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",i[i.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",i[i.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"})(bt||(bt={}));var Lf=(Bt={},Bt[bt.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,Bt[bt.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,Bt[bt.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,Bt[bt.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,Bt[bt.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,Bt[bt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,Bt[bt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,Bt[bt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,Bt[bt.COMPRESSED_R11_EAC]=.5,Bt[bt.COMPRESSED_SIGNED_R11_EAC]=.5,Bt[bt.COMPRESSED_RG11_EAC]=1,Bt[bt.COMPRESSED_SIGNED_RG11_EAC]=1,Bt[bt.COMPRESSED_RGB8_ETC2]=.5,Bt[bt.COMPRESSED_RGBA8_ETC2_EAC]=1,Bt[bt.COMPRESSED_SRGB8_ETC2]=.5,Bt[bt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,Bt[bt.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Bt[bt.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Bt[bt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,Bt[bt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,Bt[bt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,Bt[bt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,Bt[bt.COMPRESSED_RGB_ETC1_WEBGL]=.5,Bt[bt.COMPRESSED_RGB_ATC_WEBGL]=.5,Bt[bt.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,Bt[bt.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,Bt[bt.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,Bt);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var U_=function(i,e){return U_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},U_(i,e)};function Mb(i,e){U_(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function FI(i,e,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(m){try{_(n.next(m))}catch(f){l(f)}}function h(m){try{_(n.throw(m))}catch(f){l(f)}}function _(m){m.done?a(m.value):s(m.value).then(c,h)}_((n=n.apply(i,[])).next())})}function LI(i,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,s,a,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(_){return function(m){return h([_,m])}}function h(_){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(a=_[0]&2?s.return:_[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,_[1])).done)return a;switch(s=0,a&&(_=[_[0]&2,a.value]),_[0]){case 0:case 1:a=_;break;case 4:return r.label++,{value:_[1],done:!1};case 5:r.label++,s=_[1],_=[0];continue;case 7:_=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(_[0]===6||_[0]===2)){r=0;continue}if(_[0]===3&&(!a||_[1]>a[0]&&_[1]<a[3])){r.label=_[1];break}if(_[0]===6&&r.label<a[1]){r.label=a[1],a=_;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(_);break}a[2]&&r.ops.pop(),r.trys.pop();continue}_=e.call(i,r)}catch(m){_=[6,m],s=0}finally{n=a=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}var BI=function(i){Mb(e,i);function e(r,n){n===void 0&&(n={width:1,height:1,autoLoad:!0});var s=this,a,l;return typeof r=="string"?(a=r,l=new Uint8Array):(a=null,l=r),s=i.call(this,l,n)||this,s.origin=a,s.buffer=l?new B_(l):null,s.origin&&n.autoLoad!==!1&&s.load(),l&&l.length&&(s.loaded=!0,s.onBlobLoaded(s.buffer.rawBinaryData)),s}return e.prototype.onBlobLoaded=function(r){},e.prototype.load=function(){return FI(this,void 0,Promise,function(){var r,n,s;return LI(this,function(a){switch(a.label){case 0:return[4,fetch(this.origin)];case 1:return r=a.sent(),[4,r.blob()];case 2:return n=a.sent(),[4,n.arrayBuffer()];case 3:return s=a.sent(),this.data=new Uint32Array(s),this.buffer=new B_(s),this.loaded=!0,this.onBlobLoaded(s),this.update(),[2,this]}})})},e}(pc),G_=function(i){Mb(e,i);function e(r,n){var s=i.call(this,r,n)||this;return s.format=n.format,s.levels=n.levels||1,s._width=n.width,s._height=n.height,s._extension=e._formatToExtension(s.format),(n.levelBuffers||s.buffer)&&(s._levelBuffers=n.levelBuffers||e._createLevelBuffers(r instanceof Uint8Array?r:s.buffer.uint8View,s.format,s.levels,4,4,s.width,s.height)),s}return e.prototype.upload=function(r,n,s){var a=r.gl,l=r.context.extensions[this._extension];if(!l)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var c=0,h=this.levels;c<h;c++){var _=this._levelBuffers[c],m=_.levelID,f=_.levelWidth,p=_.levelHeight,y=_.levelBuffer;a.compressedTexImage2D(a.TEXTURE_2D,m,this.format,f,p,0,y)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(r){if(r>=33776&&r<=33779)return"s3tc";if(r>=37488&&r<=37497)return"etc";if(r>=35840&&r<=35843)return"pvrtc";if(r>=36196)return"etc1";if(r>=35986&&r<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(r,n,s,a,l,c,h){for(var _=new Array(s),m=r.byteOffset,f=c,p=h,y=f+a-1&~(a-1),b=p+l-1&~(l-1),T=y*b*Lf[n],S=0;S<s;S++)_[S]={levelID:S,levelWidth:s>1?f:y,levelHeight:s>1?p:b,levelBuffer:new Uint8Array(r.buffer,m,T)},m+=T,f=f>>1||1,p=p>>1||1,y=f+a-1&~(a-1),b=p+l-1&~(l-1),T=y*b*Lf[n];return _},e}(BI),jI=function(){function i(){}return i.use=function(e,r){var n=e.data,s=this;if(e.type===cr.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var a=n.textures,l=void 0,c=void 0,h=0,_=a.length;h<_;h++){var m=a[h],f=m.src,p=m.format;if(p||(c=f),i.textureFormats[p]){l=f;break}}if(l=l||c,!l){r(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));return}if(l===e.url){r(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var y={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},b=Tl.resolve(e.url.replace(s.baseUrl,""),l),T=n.cacheID;s.add(T,b,y,function(S){if(S.error){r(S.error);return}var A=S.texture,R=A===void 0?null:A,L=S.textures,V=L===void 0?{}:L;Object.assign(e,{texture:R,textures:V}),r()})}else r()},Object.defineProperty(i,"textureExtensions",{get:function(){if(!i._textureExtensions){var e=Xe.ADAPTER.createCanvas(),r=e.getContext("webgl");if(!r)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var n={s3tc:r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:r.getExtension("WEBGL_compressed_texture_etc"),etc1:r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:r.getExtension("WEBGL_compressed_texture_atc"),astc:r.getExtension("WEBGL_compressed_texture_astc")};i._textureExtensions=n}return i._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(i,"textureFormats",{get:function(){if(!i._textureFormats){var e=i.textureExtensions;i._textureFormats={};for(var r in e){var n=e[r];n&&Object.assign(i._textureFormats,Object.getPrototypeOf(n))}}return i._textureFormats},enumerable:!1,configurable:!0}),i.extension=Ht.Loader,i}();function kb(i,e,r){var n={textures:{},texture:null};if(!e)return n;var s=e.map(function(a){return new it(new Pt(a,Object.assign({mipmap:Ci.OFF,alphaMode:Ai.NO_PREMULTIPLIED_ALPHA},r)))});return s.forEach(function(a,l){var c=a.baseTexture,h=i+"-"+(l+1);Pt.addToCache(c,h),it.addToCache(a,h),l===0&&(Pt.addToCache(c,i),it.addToCache(a,i),n.texture=a),n.textures[h]=a}),n}var Cu,mi,Vv=4,Zh=124,UI=32,Gx=20,GI=542327876,Jh={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},HI={FOURCC:2},ef={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},gi;(function(i){i[i.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",i[i.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",i[i.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",i[i.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",i[i.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",i[i.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",i[i.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",i[i.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",i[i.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",i[i.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",i[i.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",i[i.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",i[i.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",i[i.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",i[i.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",i[i.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",i[i.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",i[i.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",i[i.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",i[i.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",i[i.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",i[i.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",i[i.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",i[i.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",i[i.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",i[i.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",i[i.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",i[i.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",i[i.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",i[i.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",i[i.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",i[i.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",i[i.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",i[i.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",i[i.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",i[i.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",i[i.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",i[i.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",i[i.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",i[i.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",i[i.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",i[i.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",i[i.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",i[i.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",i[i.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",i[i.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",i[i.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",i[i.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",i[i.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",i[i.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",i[i.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",i[i.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",i[i.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",i[i.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",i[i.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",i[i.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",i[i.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",i[i.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",i[i.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",i[i.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",i[i.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",i[i.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",i[i.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",i[i.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",i[i.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",i[i.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",i[i.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",i[i.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",i[i.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",i[i.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",i[i.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",i[i.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",i[i.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",i[i.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",i[i.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",i[i.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",i[i.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",i[i.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",i[i.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",i[i.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",i[i.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",i[i.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",i[i.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",i[i.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",i[i.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",i[i.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",i[i.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",i[i.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",i[i.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",i[i.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",i[i.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",i[i.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",i[i.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",i[i.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",i[i.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",i[i.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",i[i.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",i[i.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",i[i.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",i[i.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",i[i.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",i[i.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",i[i.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",i[i.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",i[i.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",i[i.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",i[i.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",i[i.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",i[i.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",i[i.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",i[i.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",i[i.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",i[i.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",i[i.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",i[i.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",i[i.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",i[i.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",i[i.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",i[i.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",i[i.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",i[i.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",i[i.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(gi||(gi={}));var H_;(function(i){i[i.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",i[i.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",i[i.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(H_||(H_={}));var zI=1,XI=2,VI=4,qI=64,WI=512,$I=131072,YI=827611204,KI=861165636,QI=894720068,ZI=808540228,JI=4,eO=(Cu={},Cu[YI]=bt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Cu[KI]=bt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Cu[QI]=bt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Cu),tO=(mi={},mi[gi.DXGI_FORMAT_BC1_TYPELESS]=bt.COMPRESSED_RGBA_S3TC_DXT1_EXT,mi[gi.DXGI_FORMAT_BC1_UNORM]=bt.COMPRESSED_RGBA_S3TC_DXT1_EXT,mi[gi.DXGI_FORMAT_BC2_TYPELESS]=bt.COMPRESSED_RGBA_S3TC_DXT3_EXT,mi[gi.DXGI_FORMAT_BC2_UNORM]=bt.COMPRESSED_RGBA_S3TC_DXT3_EXT,mi[gi.DXGI_FORMAT_BC3_TYPELESS]=bt.COMPRESSED_RGBA_S3TC_DXT5_EXT,mi[gi.DXGI_FORMAT_BC3_UNORM]=bt.COMPRESSED_RGBA_S3TC_DXT5_EXT,mi[gi.DXGI_FORMAT_BC1_UNORM_SRGB]=bt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,mi[gi.DXGI_FORMAT_BC2_UNORM_SRGB]=bt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,mi[gi.DXGI_FORMAT_BC3_UNORM_SRGB]=bt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,mi);function rO(i){var e=new Uint32Array(i),r=e[0];if(r!==GI)throw new Error("Invalid DDS file magic word");var n=new Uint32Array(i,0,Zh/Uint32Array.BYTES_PER_ELEMENT),s=n[Jh.HEIGHT],a=n[Jh.WIDTH],l=n[Jh.MIPMAP_COUNT],c=new Uint32Array(i,Jh.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,UI/Uint32Array.BYTES_PER_ELEMENT),h=c[zI];if(h&VI){var _=c[HI.FOURCC];if(_!==ZI){var m=eO[_],f=Vv+Zh,p=new Uint8Array(i,f),y=new G_(p,{format:m,width:a,height:s,levels:l});return[y]}var b=Vv+Zh,T=new Uint32Array(e.buffer,b,Gx/Uint32Array.BYTES_PER_ELEMENT),S=T[ef.DXGI_FORMAT],A=T[ef.RESOURCE_DIMENSION],R=T[ef.MISC_FLAG],L=T[ef.ARRAY_SIZE],V=tO[S];if(V===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+S);if(R===JI)throw new Error("DDSParser does not support cubemap textures");if(A===H_.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var M=new Array,H=Vv+Zh+Gx;if(L===1)M.push(new Uint8Array(i,H));else{for(var g=Lf[V],ne=0,B=a,Y=s,se=0;se<l;se++){var re=Math.max(1,B+3&-4),he=Math.max(1,Y+3&-4),xe=re*he*g;ne+=xe,B=B>>>1,Y=Y>>>1}for(var Z=H,se=0;se<L;se++)M.push(new Uint8Array(i,Z,ne)),Z+=ne}return M.map(function(U){return new G_(U,{format:V,width:a,height:s,levels:l})})}throw h&qI?new Error("DDSParser does not support uncompressed texture data."):h&WI?new Error("DDSParser does not supported YUV uncompressed texture data."):h&$I?new Error("DDSParser does not support single-channel (lumninance) texture data!"):h&XI?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var va,Ss,Au,Hx=[171,75,84,88,32,49,49,187,13,10,26,10],nO=67305985,yi={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},z_=64,zx=(va={},va[Ze.UNSIGNED_BYTE]=1,va[Ze.UNSIGNED_SHORT]=2,va[Ze.INT]=4,va[Ze.UNSIGNED_INT]=4,va[Ze.FLOAT]=4,va[Ze.HALF_FLOAT]=8,va),iO=(Ss={},Ss[Le.RGBA]=4,Ss[Le.RGB]=3,Ss[Le.RG]=2,Ss[Le.RED]=1,Ss[Le.LUMINANCE]=1,Ss[Le.LUMINANCE_ALPHA]=2,Ss[Le.ALPHA]=1,Ss),sO=(Au={},Au[Ze.UNSIGNED_SHORT_4_4_4_4]=2,Au[Ze.UNSIGNED_SHORT_5_5_5_1]=2,Au[Ze.UNSIGNED_SHORT_5_6_5]=2,Au);function aO(i,e,r){r===void 0&&(r=!1);var n=new DataView(e);if(!oO(i,n))return null;var s=n.getUint32(yi.ENDIANNESS,!0)===nO,a=n.getUint32(yi.GL_TYPE,s),l=n.getUint32(yi.GL_FORMAT,s),c=n.getUint32(yi.GL_INTERNAL_FORMAT,s),h=n.getUint32(yi.PIXEL_WIDTH,s),_=n.getUint32(yi.PIXEL_HEIGHT,s)||1,m=n.getUint32(yi.PIXEL_DEPTH,s)||1,f=n.getUint32(yi.NUMBER_OF_ARRAY_ELEMENTS,s)||1,p=n.getUint32(yi.NUMBER_OF_FACES,s),y=n.getUint32(yi.NUMBER_OF_MIPMAP_LEVELS,s),b=n.getUint32(yi.BYTES_OF_KEY_VALUE_DATA,s);if(_===0||m!==1)throw new Error("Only 2D textures are supported");if(p!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");var T=4,S=4,A=h+3&-4,R=_+3&-4,L=new Array(f),V=h*_;a===0&&(V=A*R);var M;if(a!==0?zx[a]?M=zx[a]*iO[l]:M=sO[a]:M=Lf[c],M===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var H=r?uO(n,b,s):null,g=V*M,ne=g,B=h,Y=_,se=A,re=R,he=z_+b,xe=0;xe<y;xe++){for(var Z=n.getUint32(he,s),U=he+4,W=0;W<f;W++){var z=L[W];z||(z=L[W]=new Array(y)),z[xe]={levelID:xe,levelWidth:y>1||a!==0?B:se,levelHeight:y>1||a!==0?Y:re,levelBuffer:new Uint8Array(e,U,ne)},U+=ne}he+=Z+4,he=he%4!==0?he+4-he%4:he,B=B>>1||1,Y=Y>>1||1,se=B+T-1&-4,re=Y+S-1&-4,ne=se*re*M}return a!==0?{uncompressed:L.map(function(Q){var $=Q[0].levelBuffer,j=!1;return a===Ze.FLOAT?$=new Float32Array(Q[0].levelBuffer.buffer,Q[0].levelBuffer.byteOffset,Q[0].levelBuffer.byteLength/4):a===Ze.UNSIGNED_INT?(j=!0,$=new Uint32Array(Q[0].levelBuffer.buffer,Q[0].levelBuffer.byteOffset,Q[0].levelBuffer.byteLength/4)):a===Ze.INT&&(j=!0,$=new Int32Array(Q[0].levelBuffer.buffer,Q[0].levelBuffer.byteOffset,Q[0].levelBuffer.byteLength/4)),{resource:new pc($,{width:Q[0].levelWidth,height:Q[0].levelHeight}),type:a,format:j?lO(l):l}}),kvData:H}:{compressed:L.map(function(Q){return new G_(null,{format:c,width:h,height:_,levels:y,levelBuffers:Q})}),kvData:H}}function oO(i,e){for(var r=0;r<Hx.length;r++)if(e.getUint8(r)!==Hx[r])return console.error(i+" is not a valid *.ktx file!"),!1;return!0}function lO(i){switch(i){case Le.RGBA:return Le.RGBA_INTEGER;case Le.RGB:return Le.RGB_INTEGER;case Le.RG:return Le.RG_INTEGER;case Le.RED:return Le.RED_INTEGER;default:return i}}function uO(i,e,r){for(var n=new Map,s=0;s<e;){var a=i.getUint32(z_+s,r),l=z_+s+4,c=3-(a+3)%4;if(a===0||a>e-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var h=0;h<a&&i.getUint8(l+h)!==0;h++);if(h===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var _=new TextDecoder().decode(new Uint8Array(i.buffer,l,h)),m=new DataView(i.buffer,l+h+1,a-h-1);n.set(_,m),s+=4+a+c}return n}cr.setExtensionXhrType("dds",cr.XHR_RESPONSE_TYPE.BUFFER);var cO=function(){function i(){}return i.use=function(e,r){if(e.extension==="dds"&&e.data)try{Object.assign(e,kb(e.name||e.url,rO(e.data),e.metadata))}catch(n){r(n);return}r()},i.extension=Ht.Loader,i}();cr.setExtensionXhrType("ktx",cr.XHR_RESPONSE_TYPE.BUFFER);var hO=function(){function i(){}return i.use=function(e,r){if(e.extension==="ktx"&&e.data)try{var n=e.name||e.url,s=aO(n,e.data,this.loadKeyValueData),a=s.compressed,l=s.uncompressed,c=s.kvData;if(a){var h=kb(n,a,e.metadata);if(c&&h.textures)for(var _ in h.textures)h.textures[_].baseTexture.ktxKeyValueData=c;Object.assign(e,h)}else if(l){var m={};l.forEach(function(f,p){var y=new it(new Pt(f.resource,{mipmap:Ci.OFF,alphaMode:Ai.NO_PREMULTIPLIED_ALPHA,type:f.type,format:f.format})),b=n+"-"+(p+1);c&&(y.baseTexture.ktxKeyValueData=c),Pt.addToCache(y.baseTexture,b),it.addToCache(y,b),p===0&&(m[n]=y,Pt.addToCache(y.baseTexture,n),it.addToCache(y,n)),m[b]=y}),Object.assign(e,{textures:m})}}catch(f){r(f);return}r()},i.extension=Ht.Loader,i.loadKeyValueData=!1,i}();/*!
 * @pixi/particle-container - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var X_=function(i,e){return X_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},X_(i,e)};function Db(i,e){X_(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(function(i){Db(e,i);function e(r,n,s,a){r===void 0&&(r=1500),s===void 0&&(s=16384),a===void 0&&(a=!1);var l=i.call(this)||this,c=16384;return s>c&&(s=c),l._properties=[!1,!0,!1,!1,!1],l._maxSize=r,l._batchSize=s,l._buffers=null,l._bufferUpdateIDs=[],l._updateID=0,l.interactiveChildren=!1,l.blendMode=ct.NORMAL,l.autoResize=a,l.roundPixels=!0,l.baseTexture=null,l.setProperties(n),l._tint=0,l.tintRgb=new Float32Array(4),l.tint=16777215,l}return e.prototype.setProperties=function(r){r&&(this._properties[0]="vertices"in r||"scale"in r?!!r.vertices||!!r.scale:this._properties[0],this._properties[1]="position"in r?!!r.position:this._properties[1],this._properties[2]="rotation"in r?!!r.rotation:this._properties[2],this._properties[3]="uvs"in r?!!r.uvs:this._properties[3],this._properties[4]="tint"in r||"alpha"in r?!!r.tint||!!r.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,Dl(r,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(r){var n=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return n.onChildrenChange(0)})),r.batch.setObjectRenderer(r.plugins.particle),r.plugins.particle.render(this))},e.prototype.onChildrenChange=function(r){for(var n=Math.floor(r/this._batchSize);this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._buffers=null}},e.prototype.destroy=function(r){i.prototype.destroy.call(this,r),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e})(gr);var Xx=function(){function i(e,r,n){this.geometry=new Po,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var s=0;s<e.length;++s){var a=e[s];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||Ze.FLOAT,offset:a.offset},r[s]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return i.prototype.initBuffers=function(){var e=this.geometry,r=0;this.indexBuffer=new or(SA(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var s=this.dynamicProperties[n];s.offset=r,r+=s.size,this.dynamicStride+=s.size}var a=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(a),this.dynamicDataUint32=new Uint32Array(a),this.dynamicBuffer=new or(this.dynamicData,!1,!1);var l=0;this.staticStride=0;for(var n=0;n<this.staticProperties.length;++n){var s=this.staticProperties[n];s.offset=l,l+=s.size,this.staticStride+=s.size}var c=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(c),this.staticDataUint32=new Uint32Array(c),this.staticBuffer=new or(this.staticData,!0,!1);for(var n=0;n<this.dynamicProperties.length;++n){var s=this.dynamicProperties[n];e.addAttribute(s.attributeName,this.dynamicBuffer,0,s.type===Ze.UNSIGNED_BYTE,s.type,this.dynamicStride*4,s.offset*4)}for(var n=0;n<this.staticProperties.length;++n){var s=this.staticProperties[n];e.addAttribute(s.attributeName,this.staticBuffer,0,s.type===Ze.UNSIGNED_BYTE,s.type,this.staticStride*4,s.offset*4)}},i.prototype.uploadDynamic=function(e,r,n){for(var s=0;s<this.dynamicProperties.length;s++){var a=this.dynamicProperties[s];a.uploadFunction(e,r,n,a.type===Ze.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++},i.prototype.uploadStatic=function(e,r,n){for(var s=0;s<this.staticProperties.length;s++){var a=this.staticProperties[s];a.uploadFunction(e,r,n,a.type===Ze.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++},i.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},i}(),fO=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,dO=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,pO=function(i){Db(e,i);function e(r){var n=i.call(this,r)||this;return n.shader=null,n.properties=null,n.tempMatrix=new rr,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Ze.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=Qi.from(dO,fO,{}),n.state=Oo.for2d(),n}return e.prototype.render=function(r){var n=r.children,s=r._maxSize,a=r._batchSize,l=this.renderer,c=n.length;if(c!==0){c>s&&!r.autoResize&&(c=s);var h=r._buffers;h||(h=r._buffers=this.generateBuffers(r));var _=n[0]._texture.baseTexture,m=_.alphaMode>0;this.state.blendMode=Pm(r.blendMode,m),l.state.set(this.state);var f=l.gl,p=r.worldTransform.copyTo(this.tempMatrix);p.prepend(l.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=p.toArray(!0),this.shader.uniforms.uColor=TA(r.tintRgb,r.worldAlpha,this.shader.uniforms.uColor,m),this.shader.uniforms.uSampler=_,this.renderer.shader.bind(this.shader);for(var y=!1,b=0,T=0;b<c;b+=a,T+=1){var S=c-b;S>a&&(S=a),T>=h.length&&h.push(this._generateOneMoreBuffer(r));var A=h[T];A.uploadDynamic(n,b,S);var R=r._bufferUpdateIDs[T]||0;y=y||A._updateID<R,y&&(A._updateID=r._updateID,A.uploadStatic(n,b,S)),l.geometry.bind(A.geometry),f.drawElements(f.TRIANGLES,S*6,f.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(r){for(var n=[],s=r._maxSize,a=r._batchSize,l=r._properties,c=0;c<s;c+=a)n.push(new Xx(this.properties,l,a));return n},e.prototype._generateOneMoreBuffer=function(r){var n=r._batchSize,s=r._properties;return new Xx(this.properties,s,n)},e.prototype.uploadVertices=function(r,n,s,a,l,c){for(var h=0,_=0,m=0,f=0,p=0;p<s;++p){var y=r[n+p],b=y._texture,T=y.scale.x,S=y.scale.y,A=b.trim,R=b.orig;A?(_=A.x-y.anchor.x*R.width,h=_+A.width,f=A.y-y.anchor.y*R.height,m=f+A.height):(h=R.width*(1-y.anchor.x),_=R.width*-y.anchor.x,m=R.height*(1-y.anchor.y),f=R.height*-y.anchor.y),a[c]=_*T,a[c+1]=f*S,a[c+l]=h*T,a[c+l+1]=f*S,a[c+l*2]=h*T,a[c+l*2+1]=m*S,a[c+l*3]=_*T,a[c+l*3+1]=m*S,c+=l*4}},e.prototype.uploadPosition=function(r,n,s,a,l,c){for(var h=0;h<s;h++){var _=r[n+h].position;a[c]=_.x,a[c+1]=_.y,a[c+l]=_.x,a[c+l+1]=_.y,a[c+l*2]=_.x,a[c+l*2+1]=_.y,a[c+l*3]=_.x,a[c+l*3+1]=_.y,c+=l*4}},e.prototype.uploadRotation=function(r,n,s,a,l,c){for(var h=0;h<s;h++){var _=r[n+h].rotation;a[c]=_,a[c+l]=_,a[c+l*2]=_,a[c+l*3]=_,c+=l*4}},e.prototype.uploadUvs=function(r,n,s,a,l,c){for(var h=0;h<s;++h){var _=r[n+h]._texture._uvs;_?(a[c]=_.x0,a[c+1]=_.y0,a[c+l]=_.x1,a[c+l+1]=_.y1,a[c+l*2]=_.x2,a[c+l*2+1]=_.y2,a[c+l*3]=_.x3,a[c+l*3+1]=_.y3,c+=l*4):(a[c]=0,a[c+1]=0,a[c+l]=0,a[c+l+1]=0,a[c+l*2]=0,a[c+l*2+1]=0,a[c+l*3]=0,a[c+l*3+1]=0,c+=l*4)}},e.prototype.uploadTint=function(r,n,s,a,l,c){for(var h=0;h<s;++h){var _=r[n+h],m=_._texture.baseTexture.alphaMode>0,f=_.alpha,p=f<1&&m?dc(_._tintRGB,f):_._tintRGB+(f*255<<24);a[c]=p,a[c+l]=p,a[c+l*2]=p,a[c+l*3]=p,c+=l*4}},e.prototype.destroy=function(){i.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e.extension={name:"particle",type:Ht.RendererPlugin},e}(vc);/*!
 * @pixi/graphics - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Os;(function(i){i.MITER="miter",i.BEVEL="bevel",i.ROUND="round"})(Os||(Os={}));var ba;(function(i){i.BUTT="butt",i.ROUND="round",i.SQUARE="square"})(ba||(ba={}));var ic={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(i,e){if(e===void 0&&(e=20),!this.adaptive||!i||isNaN(i))return e;var r=Math.ceil(i/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},Nb=function(){function i(){this.color=16777215,this.alpha=1,this.texture=it.WHITE,this.matrix=null,this.visible=!1,this.reset()}return i.prototype.clone=function(){var e=new i;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},i.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=it.WHITE,this.matrix=null,this.visible=!1},i.prototype.destroy=function(){this.texture=null,this.matrix=null},i}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var V_=function(i,e){return V_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},V_(i,e)};function km(i,e){V_(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Vx(i,e){var r,n;e===void 0&&(e=!1);var s=i.length;if(!(s<6)){for(var a=0,l=0,c=i[s-2],h=i[s-1];l<s;l+=2){var _=i[l],m=i[l+1];a+=(_-c)*(m+h),c=_,h=m}if(!e&&a>0||e&&a<=0)for(var f=s/2,l=f+f%2;l<s;l+=2){var p=s-l-2,y=s-l-1,b=l,T=l+1;r=[i[b],i[p]],i[p]=r[0],i[b]=r[1],n=[i[T],i[y]],i[y]=n[0],i[T]=n[1]}}}var Fb={build:function(i){i.points=i.shape.points.slice()},triangulate:function(i,e){var r=i.points,n=i.holes,s=e.points,a=e.indices;if(r.length>=6){Vx(r,!1);for(var l=[],c=0;c<n.length;c++){var h=n[c];Vx(h.points,!0),l.push(r.length/2),r=r.concat(h.points)}var _=eb(r,l,2);if(!_)return;for(var m=s.length/2,c=0;c<_.length;c+=3)a.push(_[c]+m),a.push(_[c+1]+m),a.push(_[c+2]+m);for(var c=0;c<r.length;c++)s.push(r[c])}}},Bf={build:function(i){var e=i.points,r,n,s,a,l,c;if(i.type===Gr.CIRC){var h=i.shape;r=h.x,n=h.y,l=c=h.radius,s=a=0}else if(i.type===Gr.ELIP){var _=i.shape;r=_.x,n=_.y,l=_.width,c=_.height,s=a=0}else{var m=i.shape,f=m.width/2,p=m.height/2;r=m.x+f,n=m.y+p,l=c=Math.max(0,Math.min(m.radius,Math.min(f,p))),s=f-l,a=p-c}if(!(l>=0&&c>=0&&s>=0&&a>=0)){e.length=0;return}var y=Math.ceil(2.3*Math.sqrt(l+c)),b=y*8+(s?4:0)+(a?4:0);if(e.length=b,b!==0){if(y===0){e.length=8,e[0]=e[6]=r+s,e[1]=e[3]=n+a,e[2]=e[4]=r-s,e[5]=e[7]=n-a;return}var T=0,S=y*4+(s?2:0)+2,A=S,R=b;{var L=s+l,V=a,M=r+L,H=r-L,g=n+V;if(e[T++]=M,e[T++]=g,e[--S]=g,e[--S]=H,a){var ne=n-V;e[A++]=H,e[A++]=ne,e[--R]=ne,e[--R]=M}}for(var B=1;B<y;B++){var Y=Math.PI/2*(B/y),L=s+Math.cos(Y)*l,V=a+Math.sin(Y)*c,M=r+L,H=r-L,g=n+V,ne=n-V;e[T++]=M,e[T++]=g,e[--S]=g,e[--S]=H,e[A++]=H,e[A++]=ne,e[--R]=ne,e[--R]=M}{var L=s,V=a+c,M=r+L,H=r-L,g=n+V,ne=n-V;e[T++]=M,e[T++]=g,e[--R]=ne,e[--R]=M,s&&(e[T++]=H,e[T++]=g,e[--R]=ne,e[--R]=H)}}},triangulate:function(i,e){var r=i.points,n=e.points,s=e.indices;if(r.length!==0){var a=n.length/2,l=a,c,h;if(i.type!==Gr.RREC){var _=i.shape;c=_.x,h=_.y}else{var m=i.shape;c=m.x+m.width/2,h=m.y+m.height/2}var f=i.matrix;n.push(i.matrix?f.a*c+f.c*h+f.tx:c,i.matrix?f.b*c+f.d*h+f.ty:h),a++,n.push(r[0],r[1]);for(var p=2;p<r.length;p+=2)n.push(r[p],r[p+1]),s.push(a++,l,a);s.push(l+1,l,a)}}},vO={build:function(i){var e=i.shape,r=e.x,n=e.y,s=e.width,a=e.height,l=i.points;l.length=0,l.push(r,n,r+s,n,r+s,n+a,r,n+a)},triangulate:function(i,e){var r=i.points,n=e.points,s=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(s,s+1,s+2,s+1,s+2,s+3)}};function ml(i,e,r){var n=e-i;return i+n*r}function tf(i,e,r,n,s,a,l){l===void 0&&(l=[]);for(var c=20,h=l,_=0,m=0,f=0,p=0,y=0,b=0,T=0,S=0;T<=c;++T)S=T/c,_=ml(i,r,S),m=ml(e,n,S),f=ml(r,s,S),p=ml(n,a,S),y=ml(_,f,S),b=ml(m,p,S),!(T===0&&h[h.length-2]===y&&h[h.length-1]===b)&&h.push(y,b);return h}var _O={build:function(i){if(wa.nextRoundedRectBehavior){Bf.build(i);return}var e=i.shape,r=i.points,n=e.x,s=e.y,a=e.width,l=e.height,c=Math.max(0,Math.min(e.radius,Math.min(a,l)/2));r.length=0,c?(tf(n,s+c,n,s,n+c,s,r),tf(n+a-c,s,n+a,s,n+a,s+c,r),tf(n+a,s+l-c,n+a,s+l,n+a-c,s+l,r),tf(n+c,s+l,n,s+l,n,s+l-c,r)):r.push(n,s,n+a,s,n+a,s+l,n,s+l)},triangulate:function(i,e){if(wa.nextRoundedRectBehavior){Bf.triangulate(i,e);return}for(var r=i.points,n=e.points,s=e.indices,a=n.length/2,l=eb(r,null,2),c=0,h=l.length;c<h;c+=3)s.push(l[c]+a),s.push(l[c+1]+a),s.push(l[c+2]+a);for(var c=0,h=r.length;c<h;c++)n.push(r[c],r[++c])}};function qx(i,e,r,n,s,a,l,c){var h=i-r*s,_=e-n*s,m=i+r*a,f=e+n*a,p,y;l?(p=n,y=-r):(p=-n,y=r);var b=h+p,T=_+y,S=m+p,A=f+y;return c.push(b,T),c.push(S,A),2}function io(i,e,r,n,s,a,l,c){var h=r-i,_=n-e,m=Math.atan2(h,_),f=Math.atan2(s-i,a-e);c&&m<f?m+=Math.PI*2:!c&&m>f&&(f+=Math.PI*2);var p=m,y=f-m,b=Math.abs(y),T=Math.sqrt(h*h+_*_),S=(15*b*Math.sqrt(T)/Math.PI>>0)+1,A=y/S;if(p+=A,c){l.push(i,e),l.push(r,n);for(var R=1,L=p;R<S;R++,L+=A)l.push(i,e),l.push(i+Math.sin(L)*T,e+Math.cos(L)*T);l.push(i,e),l.push(s,a)}else{l.push(r,n),l.push(i,e);for(var R=1,L=p;R<S;R++,L+=A)l.push(i+Math.sin(L)*T,e+Math.cos(L)*T),l.push(i,e);l.push(s,a),l.push(i,e)}return S*2}function mO(i,e){var r=i.shape,n=i.points||r.points.slice(),s=e.closePointEps;if(n.length!==0){var a=i.lineStyle,l=new yt(n[0],n[1]),c=new yt(n[n.length-2],n[n.length-1]),h=r.type!==Gr.POLY||r.closeStroke,_=Math.abs(l.x-c.x)<s&&Math.abs(l.y-c.y)<s;if(h){n=n.slice(),_&&(n.pop(),n.pop(),c.set(n[n.length-2],n[n.length-1]));var m=(l.x+c.x)*.5,f=(c.y+l.y)*.5;n.unshift(m,f),n.push(m,f)}var p=e.points,y=n.length/2,b=n.length,T=p.length/2,S=a.width/2,A=S*S,R=a.miterLimit*a.miterLimit,L=n[0],V=n[1],M=n[2],H=n[3],g=0,ne=0,B=-(V-H),Y=L-M,se=0,re=0,he=Math.sqrt(B*B+Y*Y);B/=he,Y/=he,B*=S,Y*=S;var xe=a.alignment,Z=(1-xe)*2,U=xe*2;h||(a.cap===ba.ROUND?b+=io(L-B*(Z-U)*.5,V-Y*(Z-U)*.5,L-B*Z,V-Y*Z,L+B*U,V+Y*U,p,!0)+2:a.cap===ba.SQUARE&&(b+=qx(L,V,B,Y,Z,U,!0,p))),p.push(L-B*Z,V-Y*Z),p.push(L+B*U,V+Y*U);for(var W=1;W<y-1;++W){L=n[(W-1)*2],V=n[(W-1)*2+1],M=n[W*2],H=n[W*2+1],g=n[(W+1)*2],ne=n[(W+1)*2+1],B=-(V-H),Y=L-M,he=Math.sqrt(B*B+Y*Y),B/=he,Y/=he,B*=S,Y*=S,se=-(H-ne),re=M-g,he=Math.sqrt(se*se+re*re),se/=he,re/=he,se*=S,re*=S;var z=M-L,Q=V-H,$=M-g,j=ne-H,N=z*$+Q*j,q=Q*$-j*z,oe=q<0;if(Math.abs(q)<.001*Math.abs(N)){p.push(M-B*Z,H-Y*Z),p.push(M+B*U,H+Y*U),N>=0&&(a.join===Os.ROUND?b+=io(M,H,M-B*Z,H-Y*Z,M-se*Z,H-re*Z,p,!1)+4:b+=2,p.push(M-se*U,H-re*U),p.push(M+se*Z,H+re*Z));continue}var de=(-B+L)*(-Y+H)-(-B+M)*(-Y+V),Te=(-se+g)*(-re+H)-(-se+M)*(-re+ne),Ae=(z*Te-$*de)/q,Ie=(j*de-Q*Te)/q,ke=(Ae-M)*(Ae-M)+(Ie-H)*(Ie-H),Ce=M+(Ae-M)*Z,He=H+(Ie-H)*Z,Ge=M-(Ae-M)*U,rt=H-(Ie-H)*U,qe=Math.min(z*z+Q*Q,$*$+j*j),Ve=oe?Z:U,Ue=qe+Ve*Ve*A,nt=ke<=Ue;nt?a.join===Os.BEVEL||ke/A>R?(oe?(p.push(Ce,He),p.push(M+B*U,H+Y*U),p.push(Ce,He),p.push(M+se*U,H+re*U)):(p.push(M-B*Z,H-Y*Z),p.push(Ge,rt),p.push(M-se*Z,H-re*Z),p.push(Ge,rt)),b+=2):a.join===Os.ROUND?oe?(p.push(Ce,He),p.push(M+B*U,H+Y*U),b+=io(M,H,M+B*U,H+Y*U,M+se*U,H+re*U,p,!0)+4,p.push(Ce,He),p.push(M+se*U,H+re*U)):(p.push(M-B*Z,H-Y*Z),p.push(Ge,rt),b+=io(M,H,M-B*Z,H-Y*Z,M-se*Z,H-re*Z,p,!1)+4,p.push(M-se*Z,H-re*Z),p.push(Ge,rt)):(p.push(Ce,He),p.push(Ge,rt)):(p.push(M-B*Z,H-Y*Z),p.push(M+B*U,H+Y*U),a.join===Os.ROUND?oe?b+=io(M,H,M+B*U,H+Y*U,M+se*U,H+re*U,p,!0)+2:b+=io(M,H,M-B*Z,H-Y*Z,M-se*Z,H-re*Z,p,!1)+2:a.join===Os.MITER&&ke/A<=R&&(oe?(p.push(Ge,rt),p.push(Ge,rt)):(p.push(Ce,He),p.push(Ce,He)),b+=2),p.push(M-se*Z,H-re*Z),p.push(M+se*U,H+re*U),b+=2)}L=n[(y-2)*2],V=n[(y-2)*2+1],M=n[(y-1)*2],H=n[(y-1)*2+1],B=-(V-H),Y=L-M,he=Math.sqrt(B*B+Y*Y),B/=he,Y/=he,B*=S,Y*=S,p.push(M-B*Z,H-Y*Z),p.push(M+B*U,H+Y*U),h||(a.cap===ba.ROUND?b+=io(M-B*(Z-U)*.5,H-Y*(Z-U)*.5,M-B*Z,H-Y*Z,M+B*U,H+Y*U,p,!1)+2:a.cap===ba.SQUARE&&(b+=qx(M,H,B,Y,Z,U,!1,p)));for(var Tt=e.indices,Er=ic.epsilon*ic.epsilon,W=T;W<b+T-2;++W)L=p[W*2],V=p[W*2+1],M=p[(W+1)*2],H=p[(W+1)*2+1],g=p[(W+2)*2],ne=p[(W+2)*2+1],!(Math.abs(L*(H-ne)+M*(ne-V)+g*(V-H))<Er)&&Tt.push(W,W+1,W+2)}}function yO(i,e){var r=0,n=i.shape,s=i.points||n.points,a=n.type!==Gr.POLY||n.closeStroke;if(s.length!==0){var l=e.points,c=e.indices,h=s.length/2,_=l.length/2,m=_;for(l.push(s[0],s[1]),r=1;r<h;r++)l.push(s[r*2],s[r*2+1]),c.push(m,m+1),m++;a&&c.push(m,_)}}function Wx(i,e){i.lineStyle.native?yO(i,e):mO(i,e)}var $x=function(){function i(){}return i.curveTo=function(e,r,n,s,a,l){var c=l[l.length-2],h=l[l.length-1],_=h-r,m=c-e,f=s-r,p=n-e,y=Math.abs(_*p-m*f);if(y<1e-8||a===0)return(l[l.length-2]!==e||l[l.length-1]!==r)&&l.push(e,r),null;var b=_*_+m*m,T=f*f+p*p,S=_*f+m*p,A=a*Math.sqrt(b)/y,R=a*Math.sqrt(T)/y,L=A*S/b,V=R*S/T,M=A*p+R*m,H=A*f+R*_,g=m*(R+L),ne=_*(R+L),B=p*(A+V),Y=f*(A+V),se=Math.atan2(ne-H,g-M),re=Math.atan2(Y-H,B-M);return{cx:M+e,cy:H+r,radius:a,startAngle:se,endAngle:re,anticlockwise:m*f>p*_}},i.arc=function(e,r,n,s,a,l,c,h,_){for(var m=c-l,f=ic._segmentsCount(Math.abs(m)*a,Math.ceil(Math.abs(m)/Df)*40),p=m/(f*2),y=p*2,b=Math.cos(p),T=Math.sin(p),S=f-1,A=S%1/S,R=0;R<=S;++R){var L=R+A*R,V=p+l+y*L,M=Math.cos(V),H=-Math.sin(V);_.push((b*M+T*H)*a+n,(b*-H+T*M)*a+s)}},i}(),gO=function(){function i(){}return i.curveLength=function(e,r,n,s,a,l,c,h){for(var _=10,m=0,f=0,p=0,y=0,b=0,T=0,S=0,A=0,R=0,L=0,V=0,M=e,H=r,g=1;g<=_;++g)f=g/_,p=f*f,y=p*f,b=1-f,T=b*b,S=T*b,A=S*e+3*T*f*n+3*b*p*a+y*c,R=S*r+3*T*f*s+3*b*p*l+y*h,L=M-A,V=H-R,M=A,H=R,m+=Math.sqrt(L*L+V*V);return m},i.curveTo=function(e,r,n,s,a,l,c){var h=c[c.length-2],_=c[c.length-1];c.length-=2;var m=ic._segmentsCount(i.curveLength(h,_,e,r,n,s,a,l)),f=0,p=0,y=0,b=0,T=0;c.push(h,_);for(var S=1,A=0;S<=m;++S)A=S/m,f=1-A,p=f*f,y=p*f,b=A*A,T=b*A,c.push(y*h+3*p*A*e+3*f*b*n+T*a,y*_+3*p*A*r+3*f*b*s+T*l)},i}(),xO=function(){function i(){}return i.curveLength=function(e,r,n,s,a,l){var c=e-2*n+a,h=r-2*s+l,_=2*n-2*e,m=2*s-2*r,f=4*(c*c+h*h),p=4*(c*_+h*m),y=_*_+m*m,b=2*Math.sqrt(f+p+y),T=Math.sqrt(f),S=2*f*T,A=2*Math.sqrt(y),R=p/T;return(S*b+T*p*(b-A)+(4*y*f-p*p)*Math.log((2*T+R+b)/(R+A)))/(4*S)},i.curveTo=function(e,r,n,s,a){for(var l=a[a.length-2],c=a[a.length-1],h=ic._segmentsCount(i.curveLength(l,c,e,r,n,s)),_=0,m=0,f=1;f<=h;++f){var p=f/h;_=l+(e-l)*p,m=c+(r-c)*p,a.push(_+(e+(n-e)*p-_)*p,m+(r+(s-r)*p-m)*p)}},i}(),bO=function(){function i(){this.reset()}return i.prototype.begin=function(e,r,n){this.reset(),this.style=e,this.start=r,this.attribStart=n},i.prototype.end=function(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start},i.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},i}(),so,qv=(so={},so[Gr.POLY]=Fb,so[Gr.CIRC]=Bf,so[Gr.ELIP]=Bf,so[Gr.RECT]=vO,so[Gr.RREC]=_O,so),Yx=[],rf=[],Kx=function(){function i(e,r,n,s){r===void 0&&(r=null),n===void 0&&(n=null),s===void 0&&(s=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=r,this.matrix=s,this.type=e.type}return i.prototype.clone=function(){return new i(this.shape,this.fillStyle,this.lineStyle,this.matrix)},i.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},i}(),yl=new yt,wO=function(i){km(e,i);function e(){var r=i.call(this)||this;return r.closePointEps=1e-4,r.boundsPadding=0,r.uvsFloat32=null,r.indicesUint16=null,r.batchable=!1,r.points=[],r.colors=[],r.uvs=[],r.indices=[],r.textureIds=[],r.graphicsData=[],r.drawCalls=[],r.batchDirty=-1,r.batches=[],r.dirty=0,r.cacheDirty=-1,r.clearDirty=0,r.shapeIndex=0,r._bounds=new Nf,r.boundsDirty=-1,r}return Object.defineProperty(e.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),rf.push(this.drawCalls[r]);this.drawCalls.length=0;for(var r=0;r<this.batches.length;r++){var n=this.batches[r];n.reset(),Yx.push(n)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(r,n,s,a){n===void 0&&(n=null),s===void 0&&(s=null),a===void 0&&(a=null);var l=new Kx(r,n,s,a);return this.graphicsData.push(l),this.dirty++,this},e.prototype.drawHole=function(r,n){if(n===void 0&&(n=null),!this.graphicsData.length)return null;var s=new Kx(r,null,null,n),a=this.graphicsData[this.graphicsData.length-1];return s.lineStyle=a.lineStyle,a.holes.push(s),this.dirty++,this},e.prototype.destroy=function(){i.prototype.destroy.call(this);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(r){for(var n=this.graphicsData,s=0;s<n.length;++s){var a=n[s];if(a.fillStyle.visible&&a.shape&&(a.matrix?a.matrix.applyInverse(r,yl):yl.copyFrom(r),a.shape.contains(yl.x,yl.y))){var l=!1;if(a.holes)for(var c=0;c<a.holes.length;c++){var h=a.holes[c];if(h.shape.contains(yl.x,yl.y)){l=!0;break}}if(!l)return!0}}return!1},e.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var r=this.uvs,n=this.graphicsData,s=null,a=null;this.batches.length>0&&(s=this.batches[this.batches.length-1],a=s.style);for(var l=this.shapeIndex;l<n.length;l++){this.shapeIndex++;var c=n[l],h=c.fillStyle,_=c.lineStyle,m=qv[c.type];m.build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(h.visible||_.visible)&&this.processHoles(c.holes);for(var f=0;f<2;f++){var p=f===0?h:_;if(p.visible){var y=p.texture.baseTexture,b=this.indices.length,T=this.points.length/2;y.wrapMode=Gn.REPEAT,f===0?this.processFill(c):this.processLine(c);var S=this.points.length/2-T;S!==0&&(s&&!this._compareStyles(a,p)&&(s.end(b,T),s=null),s||(s=Yx.pop()||new bO,s.begin(p,b,T),this.batches.push(s),a=p),this.addUvs(this.points,r,p.texture,T,S,p.matrix))}}}var A=this.indices.length,R=this.points.length/2;if(s&&s.end(A,R),this.batches.length===0){this.batchable=!0;return}var L=R>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&L===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=L?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},e.prototype._compareStyles=function(r,n){return!(!r||!n||r.texture.baseTexture!==n.texture.baseTexture||r.color+r.alpha!==n.color+n.alpha||!!r.native!=!!n.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var r=0,n=this.graphicsData.length;r<n;r++){var s=this.graphicsData[r],a=s.fillStyle,l=s.lineStyle;if(a&&!a.texture.baseTexture.valid||l&&!l.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var r=this.batches,n=0,s=r.length;n<s;n++)for(var a=r[n],l=0;l<a.size;l++){var c=a.start+l;this.indicesUint16[c]=this.indicesUint16[c]-a.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var r=this.batches,n=0;n<r.length;n++)if(r[n].style.native)return!1;return this.points.length<e.BATCHABLE_SIZE*2},e.prototype.buildDrawCalls=function(){for(var r=++Pt._globalBatch,n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),rf.push(this.drawCalls[n]);this.drawCalls.length=0;var s=this.colors,a=this.textureIds,l=rf.pop();l||(l=new F_,l.texArray=new L_),l.texArray.count=0,l.start=0,l.size=0,l.type=ti.TRIANGLES;var c=0,h=null,_=0,m=!1,f=ti.TRIANGLES,p=0;this.drawCalls.push(l);for(var n=0;n<this.batches.length;n++){var y=this.batches[n],b=8,T=y.style,S=T.texture.baseTexture;m!==!!T.native&&(m=!!T.native,f=m?ti.LINES:ti.TRIANGLES,h=null,c=b,r++),h!==S&&(h=S,S._batchEnabled!==r&&(c===b&&(r++,c=0,l.size>0&&(l=rf.pop(),l||(l=new F_,l.texArray=new L_),this.drawCalls.push(l)),l.start=p,l.size=0,l.texArray.count=0,l.type=f),S.touched=1,S._batchEnabled=r,S._batchLocation=c,S.wrapMode=Gn.REPEAT,l.texArray.elements[l.texArray.count++]=S,c++)),l.size+=y.size,p+=y.size,_=S._batchLocation,this.addColors(s,T.color,T.alpha,y.attribSize,y.attribStart),this.addTextureIds(a,_,y.attribSize,y.attribStart)}Pt._globalBatch=r,this.packAttributes()},e.prototype.packAttributes=function(){for(var r=this.points,n=this.uvs,s=this.colors,a=this.textureIds,l=new ArrayBuffer(r.length*3*4),c=new Float32Array(l),h=new Uint32Array(l),_=0,m=0;m<r.length/2;m++)c[_++]=r[m*2],c[_++]=r[m*2+1],c[_++]=n[m*2],c[_++]=n[m*2+1],h[_++]=s[m],c[_++]=a[m];this._buffer.update(l),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(r){if(r.holes.length)Fb.triangulate(r,this);else{var n=qv[r.type];n.triangulate(r,this)}},e.prototype.processLine=function(r){Wx(r,this);for(var n=0;n<r.holes.length;n++)Wx(r.holes[n],this)},e.prototype.processHoles=function(r){for(var n=0;n<r.length;n++){var s=r[n],a=qv[s.type];a.build(s),s.matrix&&this.transformPoints(s.points,s.matrix)}},e.prototype.calculateBounds=function(){var r=this._bounds;r.clear(),r.addVertexData(this.points,0,this.points.length),r.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(r,n){for(var s=0;s<r.length/2;s++){var a=r[s*2],l=r[s*2+1];r[s*2]=n.a*a+n.c*l+n.tx,r[s*2+1]=n.b*a+n.d*l+n.ty}},e.prototype.addColors=function(r,n,s,a,l){l===void 0&&(l=0);var c=(n>>16)+(n&65280)+((n&255)<<16),h=dc(c,s);r.length=Math.max(r.length,l+a);for(var _=0;_<a;_++)r[l+_]=h},e.prototype.addTextureIds=function(r,n,s,a){a===void 0&&(a=0),r.length=Math.max(r.length,a+s);for(var l=0;l<s;l++)r[a+l]=n},e.prototype.addUvs=function(r,n,s,a,l,c){c===void 0&&(c=null);for(var h=0,_=n.length,m=s.frame;h<l;){var f=r[(a+h)*2],p=r[(a+h)*2+1];if(c){var y=c.a*f+c.c*p+c.tx;p=c.b*f+c.d*p+c.ty,f=y}h++,n.push(f/m.width,p/m.height)}var b=s.baseTexture;(m.width<b.width||m.height<b.height)&&this.adjustUvs(n,s,_,l)},e.prototype.adjustUvs=function(r,n,s,a){for(var l=n.baseTexture,c=1e-6,h=s+a*2,_=n.frame,m=_.width/l.width,f=_.height/l.height,p=_.x/_.width,y=_.y/_.height,b=Math.floor(r[s]+c),T=Math.floor(r[s+1]+c),S=s+2;S<h;S+=2)b=Math.min(b,Math.floor(r[S]+c)),T=Math.min(T,Math.floor(r[S+1]+c));p-=b,y-=T;for(var S=s;S<h;S+=2)r[S]=(r[S]+p)*m,r[S+1]=(r[S+1]+y)*f},e.BATCHABLE_SIZE=100,e}(Ib),TO=function(i){km(e,i);function e(){var r=i!==null&&i.apply(this,arguments)||this;return r.width=0,r.alignment=.5,r.native=!1,r.cap=ba.BUTT,r.join=Os.MITER,r.miterLimit=10,r}return e.prototype.clone=function(){var r=new e;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r.width=this.width,r.alignment=this.alignment,r.native=this.native,r.cap=this.cap,r.join=this.join,r.miterLimit=this.miterLimit,r},e.prototype.reset=function(){i.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(Nb),SO=new Float32Array(3),Wv={},wa=function(i){km(e,i);function e(r){r===void 0&&(r=null);var n=i.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new Nb,n._lineStyle=new TO,n._matrix=null,n._holeMode=!1,n.state=Oo.for2d(),n._geometry=r||new wO,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=ct.NORMAL,n}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(r,n,s,a,l){return r===void 0&&(r=null),n===void 0&&(n=0),s===void 0&&(s=1),a===void 0&&(a=.5),l===void 0&&(l=!1),typeof r=="number"&&(r={width:r,color:n,alpha:s,alignment:a,native:l}),this.lineTextureStyle(r)},e.prototype.lineTextureStyle=function(r){r=Object.assign({width:0,texture:it.WHITE,color:r&&r.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:ba.BUTT,join:Os.MITER,miterLimit:10},r),this.currentPath&&this.startPoly();var n=r.width>0&&r.alpha>0;return n?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._lineStyle,{visible:n},r)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var r=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new vf,this.currentPath.closeStroke=!1,this.currentPath.points.push(r[n-2],r[n-1]))}else this.currentPath=new vf,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(r,n){return this.startPoly(),this.currentPath.points[0]=r,this.currentPath.points[1]=n,this},e.prototype.lineTo=function(r,n){this.currentPath||this.moveTo(0,0);var s=this.currentPath.points,a=s[s.length-2],l=s[s.length-1];return(a!==r||l!==n)&&s.push(r,n),this},e.prototype._initCurve=function(r,n){r===void 0&&(r=0),n===void 0&&(n=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[r,n]):this.moveTo(r,n)},e.prototype.quadraticCurveTo=function(r,n,s,a){this._initCurve();var l=this.currentPath.points;return l.length===0&&this.moveTo(0,0),xO.curveTo(r,n,s,a,l),this},e.prototype.bezierCurveTo=function(r,n,s,a,l,c){return this._initCurve(),gO.curveTo(r,n,s,a,l,c,this.currentPath.points),this},e.prototype.arcTo=function(r,n,s,a,l){this._initCurve(r,n);var c=this.currentPath.points,h=$x.curveTo(r,n,s,a,l,c);if(h){var _=h.cx,m=h.cy,f=h.radius,p=h.startAngle,y=h.endAngle,b=h.anticlockwise;this.arc(_,m,f,p,y,b)}return this},e.prototype.arc=function(r,n,s,a,l,c){if(c===void 0&&(c=!1),a===l)return this;!c&&l<=a?l+=Df:c&&a<=l&&(a+=Df);var h=l-a;if(h===0)return this;var _=r+Math.cos(a)*s,m=n+Math.sin(a)*s,f=this._geometry.closePointEps,p=this.currentPath?this.currentPath.points:null;if(p){var y=Math.abs(p[p.length-2]-_),b=Math.abs(p[p.length-1]-m);y<f&&b<f||p.push(_,m)}else this.moveTo(_,m),p=this.currentPath.points;return $x.arc(_,m,r,n,s,a,l,c,p),this},e.prototype.beginFill=function(r,n){return r===void 0&&(r=0),n===void 0&&(n=1),this.beginTextureFill({texture:it.WHITE,color:r,alpha:n})},e.prototype.beginTextureFill=function(r){r=Object.assign({texture:it.WHITE,color:16777215,alpha:1,matrix:null},r),this.currentPath&&this.startPoly();var n=r.alpha>0;return n?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._fillStyle,{visible:n},r)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(r,n,s,a){return this.drawShape(new mt(r,n,s,a))},e.prototype.drawRoundedRect=function(r,n,s,a,l){return this.drawShape(new MA(r,n,s,a,l))},e.prototype.drawCircle=function(r,n,s){return this.drawShape(new OA(r,n,s))},e.prototype.drawEllipse=function(r,n,s,a){return this.drawShape(new RA(r,n,s,a))},e.prototype.drawPolygon=function(){for(var r=arguments,n=[],s=0;s<arguments.length;s++)n[s]=r[s];var a,l=!0,c=n[0];c.points?(l=c.closeStroke,a=c.points):Array.isArray(n[0])?a=n[0]:a=n;var h=new vf(a);return h.closeStroke=l,this.drawShape(h),this},e.prototype.drawShape=function(r){return this._holeMode?this._geometry.drawHole(r,this._matrix):this._geometry.drawShape(r,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var r=this._geometry.graphicsData;return r.length===1&&r[0].shape.type===Gr.RECT&&!r[0].matrix&&!r[0].holes.length&&!(r[0].lineStyle.visible&&r[0].lineStyle.width)},e.prototype._render=function(r){this.finishPoly();var n=this._geometry;n.updateBatches(),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(r)):(r.batch.flush(),this._renderDirect(r))},e.prototype._populateBatches=function(){var r=this._geometry,n=this.blendMode,s=r.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=r.batchDirty,this.batches.length=s,this.vertexData=new Float32Array(r.points);for(var a=0;a<s;a++){var l=r.batches[a],c=l.style.color,h=new Float32Array(this.vertexData.buffer,l.attribStart*4*2,l.attribSize*2),_=new Float32Array(r.uvsFloat32.buffer,l.attribStart*4*2,l.attribSize*2),m=new Uint16Array(r.indicesUint16.buffer,l.start*2,l.size),f={vertexData:h,blendMode:n,indices:m,uvs:_,_batchRGB:Dl(c),_tintRGB:c,_texture:l.style.texture,alpha:l.style.alpha,worldAlpha:1};this.batches[a]=f}},e.prototype._renderBatched=function(r){if(this.batches.length){r.batch.setObjectRenderer(r.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var n=0,s=this.batches.length;n<s;n++){var a=this.batches[n];a.worldAlpha=this.worldAlpha*a.alpha,r.plugins[this.pluginName].render(a)}}},e.prototype._renderDirect=function(r){var n=this._resolveDirectShader(r),s=this._geometry,a=this.tint,l=this.worldAlpha,c=n.uniforms,h=s.drawCalls;c.translationMatrix=this.transform.worldTransform,c.tint[0]=(a>>16&255)/255*l,c.tint[1]=(a>>8&255)/255*l,c.tint[2]=(a&255)/255*l,c.tint[3]=l,r.shader.bind(n),r.geometry.bind(s,n),r.state.set(this.state);for(var _=0,m=h.length;_<m;_++)this._renderDrawCallDirect(r,s.drawCalls[_])},e.prototype._renderDrawCallDirect=function(r,n){for(var s=n.texArray,a=n.type,l=n.size,c=n.start,h=s.count,_=0;_<h;_++)r.texture.bind(s.elements[_],_);r.geometry.draw(a,l,c)},e.prototype._resolveDirectShader=function(r){var n=this.shader,s=this.pluginName;if(!n){if(!Wv[s]){for(var a=r.plugins[s].MAX_TEXTURES,l=new Int32Array(a),c=0;c<a;c++)l[c]=c;var h={tint:new Float32Array([1,1,1,1]),translationMatrix:new rr,default:go.from({uSamplers:l},!0)},_=r.plugins[s]._shader.program;Wv[s]=new Qi(_,h)}n=Wv[s]}return n},e.prototype._calculateBounds=function(){this.finishPoly();var r=this._geometry;if(r.graphicsData.length){var n=r.bounds,s=n.minX,a=n.minY,l=n.maxX,c=n.maxY;this._bounds.addFrame(this.transform,s,a,l,c)}},e.prototype.containsPoint=function(r){return this.worldTransform.applyInverse(r,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var r=Dl(this.tint,SO),n=0;n<this.batches.length;n++){var s=this.batches[n],a=s._batchRGB,l=r[0]*a[0]*255,c=r[1]*a[1]*255,h=r[2]*a[2]*255,_=(l<<16)+(c<<8)+(h|0);s._tintRGB=(_>>16)+(_&65280)+((_&255)<<16)}}},e.prototype.calculateVertices=function(){var r=this.transform._worldID;if(this._transformID!==r){this._transformID=r;for(var n=this.transform.worldTransform,s=n.a,a=n.b,l=n.c,c=n.d,h=n.tx,_=n.ty,m=this._geometry.points,f=this.vertexData,p=0,y=0;y<m.length;y+=2){var b=m[y],T=m[y+1];f[p++]=s*b+l*T+h,f[p++]=c*T+a*b+_}}},e.prototype.closePath=function(){var r=this.currentPath;return r&&(r.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(r){return this._matrix=r,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(r){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,i.prototype.destroy.call(this,r)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new yt,e}(gr);/*!
 * @pixi/sprite - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var q_=function(i,e){return q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},q_(i,e)};function EO(i,e){q_(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Pu=new yt,CO=new Uint16Array([0,1,2,0,2,3]),Mr=function(i){EO(e,i);function e(r){var n=i.call(this)||this;return n._anchor=new xa(n._onAnchorUpdate,n,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=ct.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=r||it.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=CO,n.pluginName="batch",n.isSprite=!0,n._roundPixels=Xe.ROUND_PIXELS,n}return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Sl(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Sl(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var r=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===r._updateID)){this._textureID!==r._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=r._updateID;var n=this.transform.worldTransform,s=n.a,a=n.b,l=n.c,c=n.d,h=n.tx,_=n.ty,m=this.vertexData,f=r.trim,p=r.orig,y=this._anchor,b=0,T=0,S=0,A=0;if(f?(T=f.x-y._x*p.width,b=T+f.width,A=f.y-y._y*p.height,S=A+f.height):(T=-y._x*p.width,b=T+p.width,A=-y._y*p.height,S=A+p.height),m[0]=s*T+l*A+h,m[1]=c*A+a*T+_,m[2]=s*b+l*A+h,m[3]=c*A+a*b+_,m[4]=s*b+l*S+h,m[5]=c*S+a*b+_,m[6]=s*T+l*S+h,m[7]=c*S+a*T+_,this._roundPixels)for(var R=Xe.RESOLUTION,L=0;L<m.length;++L)m[L]=Math.round((m[L]*R|0)/R)}},e.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this._texture,n=this.vertexTrimmedData,s=r.orig,a=this._anchor,l=this.transform.worldTransform,c=l.a,h=l.b,_=l.c,m=l.d,f=l.tx,p=l.ty,y=-a._x*s.width,b=y+s.width,T=-a._y*s.height,S=T+s.height;n[0]=c*y+_*T+f,n[1]=m*T+h*y+p,n[2]=c*b+_*T+f,n[3]=m*T+h*b+p,n[4]=c*b+_*S+f,n[5]=m*S+h*b+p,n[6]=c*y+_*S+f,n[7]=m*S+h*y+p},e.prototype._render=function(r){this.calculateVertices(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var r=this._texture.trim,n=this._texture.orig;!r||r.width===n.width&&r.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(r){return this.children.length===0?(this._localBounds||(this._localBounds=new Nf),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new mt),r=this._localBoundsRect),this._localBounds.getRectangle(r)):i.prototype.getLocalBounds.call(this,r)},e.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,Pu);var n=this._texture.orig.width,s=this._texture.orig.height,a=-n*this.anchor.x,l=0;return Pu.x>=a&&Pu.x<a+n&&(l=-s*this.anchor.y,Pu.y>=l&&Pu.y<l+s)},e.prototype.destroy=function(r){i.prototype.destroy.call(this,r),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var n=typeof r=="boolean"?r:r&&r.texture;if(n){var s=typeof r=="boolean"?r:r&&r.baseTexture;this._texture.destroy(!!s)}this._texture=null},e.from=function(r,n){var s=r instanceof it?r:it.from(r,n);return new e(s)},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){var n=Sl(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){var n=Sl(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(r){this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture!==r&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=r||it.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,r&&(r.baseTexture.valid?this._onTextureUpdate():r.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(gr);/*!
 * @pixi/text - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var W_=function(i,e){return W_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},W_(i,e)};function AO(i,e){W_(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var sc;(function(i){i[i.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",i[i.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(sc||(sc={}));var $v={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:sc.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},PO=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Nl=function(){function i(e){this.styleID=0,this.reset(),Kv(this,e,e)}return i.prototype.clone=function(){var e={};return Kv(e,this,$v),new i(e)},i.prototype.reset=function(){Kv(this,$v,$v)},Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var r=Yv(e);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this._fill},set:function(e){var r=Yv(e);this._fill!==r&&(this._fill=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){IO(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var r=Yv(e);this._stroke!==r&&(this._stroke=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),i.prototype.toFontString=function(){var e=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(var n=r.length-1;n>=0;n--){var s=r[n].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&PO.indexOf(s)<0&&(s='"'+s+'"'),r[n]=s}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+r.join(",")},i}();function Qx(i){return typeof i=="number"?hb(i):(typeof i=="string"&&i.indexOf("0x")===0&&(i=i.replace("0x","#")),i)}function Yv(i){if(Array.isArray(i)){for(var e=0;e<i.length;++e)i[e]=Qx(i[e]);return i}else return Qx(i)}function IO(i,e){if(!Array.isArray(i)||!Array.isArray(e)||i.length!==e.length)return!1;for(var r=0;r<i.length;++r)if(i[r]!==e[r])return!1;return!0}function Kv(i,e,r){for(var n in r)Array.isArray(e[n])?i[n]=e[n].slice():i[n]=e[n]}var nf={willReadFrequently:!0},es=function(){function i(e,r,n,s,a,l,c,h,_){this.text=e,this.style=r,this.width=n,this.height=s,this.lines=a,this.lineWidths=l,this.lineHeight=c,this.maxLineWidth=h,this.fontProperties=_}return i.measureText=function(e,r,n,s){s===void 0&&(s=i._canvas),n=n??r.wordWrap;var a=r.toFontString(),l=i.measureFont(a);l.fontSize===0&&(l.fontSize=r.fontSize,l.ascent=r.fontSize);var c=s.getContext("2d",nf);c.font=a;for(var h=n?i.wordWrap(e,r,s):e,_=h.split(/(?:\r\n|\r|\n)/),m=new Array(_.length),f=0,p=0;p<_.length;p++){var y=c.measureText(_[p]).width+(_[p].length-1)*r.letterSpacing;m[p]=y,f=Math.max(f,y)}var b=f+r.strokeThickness;r.dropShadow&&(b+=r.dropShadowDistance);var T=r.lineHeight||l.fontSize+r.strokeThickness,S=Math.max(T,l.fontSize+r.strokeThickness)+(_.length-1)*(T+r.leading);return r.dropShadow&&(S+=r.dropShadowDistance),new i(e,r,b,S,_,m,T+r.leading,f,l)},i.wordWrap=function(e,r,n){n===void 0&&(n=i._canvas);for(var s=n.getContext("2d",nf),a=0,l="",c="",h=Object.create(null),_=r.letterSpacing,m=r.whiteSpace,f=i.collapseSpaces(m),p=i.collapseNewlines(m),y=!f,b=r.wordWrapWidth+_,T=i.tokenize(e),S=0;S<T.length;S++){var A=T[S];if(i.isNewline(A)){if(!p){c+=i.addLine(l),y=!f,l="",a=0;continue}A=" "}if(f){var R=i.isBreakingSpace(A),L=i.isBreakingSpace(l[l.length-1]);if(R&&L)continue}var V=i.getFromCache(A,_,h,s);if(V>b)if(l!==""&&(c+=i.addLine(l),l="",a=0),i.canBreakWords(A,r.breakWords))for(var M=i.wordWrapSplit(A),H=0;H<M.length;H++){for(var g=M[H],ne=1;M[H+ne];){var B=M[H+ne],Y=g[g.length-1];if(!i.canBreakChars(Y,B,A,H,r.breakWords))g+=B;else break;ne++}H+=g.length-1;var se=i.getFromCache(g,_,h,s);se+a>b&&(c+=i.addLine(l),y=!1,l="",a=0),l+=g,a+=se}else{l.length>0&&(c+=i.addLine(l),l="",a=0);var re=S===T.length-1;c+=i.addLine(A,!re),y=!1,l="",a=0}else V+a>b&&(y=!1,c+=i.addLine(l),l="",a=0),(l.length>0||!i.isBreakingSpace(A)||y)&&(l+=A,a+=V)}return c+=i.addLine(l,!1),c},i.addLine=function(e,r){return r===void 0&&(r=!0),e=i.trimRight(e),e=r?e+`
`:e,e},i.getFromCache=function(e,r,n,s){var a=n[e];if(typeof a!="number"){var l=e.length*r;a=s.measureText(e).width+l,n[e]=a}return a},i.collapseSpaces=function(e){return e==="normal"||e==="pre-line"},i.collapseNewlines=function(e){return e==="normal"},i.trimRight=function(e){if(typeof e!="string")return"";for(var r=e.length-1;r>=0;r--){var n=e[r];if(!i.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},i.isNewline=function(e){return typeof e!="string"?!1:i._newlines.indexOf(e.charCodeAt(0))>=0},i.isBreakingSpace=function(e,r){return typeof e!="string"?!1:i._breakingSpaces.indexOf(e.charCodeAt(0))>=0},i.tokenize=function(e){var r=[],n="";if(typeof e!="string")return r;for(var s=0;s<e.length;s++){var a=e[s],l=e[s+1];if(i.isBreakingSpace(a,l)||i.isNewline(a)){n!==""&&(r.push(n),n=""),r.push(a);continue}n+=a}return n!==""&&r.push(n),r},i.canBreakWords=function(e,r){return r},i.canBreakChars=function(e,r,n,s,a){return!0},i.wordWrapSplit=function(e){return e.split("")},i.measureFont=function(e){if(i._fonts[e])return i._fonts[e];var r={ascent:0,descent:0,fontSize:0},n=i._canvas,s=i._context;s.font=e;var a=i.METRICS_STRING+i.BASELINE_SYMBOL,l=Math.ceil(s.measureText(a).width),c=Math.ceil(s.measureText(i.BASELINE_SYMBOL).width),h=Math.ceil(i.HEIGHT_MULTIPLIER*c);c=c*i.BASELINE_MULTIPLIER|0,n.width=l,n.height=h,s.fillStyle="#f00",s.fillRect(0,0,l,h),s.font=e,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(a,0,c);var _=s.getImageData(0,0,l,h).data,m=_.length,f=l*4,p=0,y=0,b=!1;for(p=0;p<c;++p){for(var T=0;T<f;T+=4)if(_[y+T]!==255){b=!0;break}if(!b)y+=f;else break}for(r.ascent=c-p,y=m-f,b=!1,p=h;p>c;--p){for(var T=0;T<f;T+=4)if(_[y+T]!==255){b=!0;break}if(!b)y-=f;else break}return r.descent=p-c,r.fontSize=r.ascent+r.descent,i._fonts[e]=r,r},i.clearMetrics=function(e){e===void 0&&(e=""),e?delete i._fonts[e]:i._fonts={}},Object.defineProperty(i,"_canvas",{get:function(){if(!i.__canvas){var e=void 0;try{var r=new OffscreenCanvas(0,0),n=r.getContext("2d",nf);if(n&&n.measureText)return i.__canvas=r,r;e=Xe.ADAPTER.createCanvas()}catch{e=Xe.ADAPTER.createCanvas()}e.width=e.height=10,i.__canvas=e}return i.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(i,"_context",{get:function(){return i.__context||(i.__context=i._canvas.getContext("2d",nf)),i.__context},enumerable:!1,configurable:!0}),i}();es._fonts={};es.METRICS_STRING="|ÉqÅ";es.BASELINE_SYMBOL="M";es.BASELINE_MULTIPLIER=1.4;es.HEIGHT_MULTIPLIER=2;es._newlines=[10,13];es._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var OO={texture:!0,children:!1,baseTexture:!0},So=function(i){AO(e,i);function e(r,n,s){var a=this,l=!1;s||(s=Xe.ADAPTER.createCanvas(),l=!0),s.width=3,s.height=3;var c=it.from(s);return c.orig=new mt,c.trim=new mt,a=i.call(this,c)||this,a._ownCanvas=l,a.canvas=s,a.context=s.getContext("2d",{willReadFrequently:!0}),a._resolution=Xe.RESOLUTION,a._autoResolution=!0,a._text=null,a._style=null,a._styleListener=null,a._font="",a.text=r,a.style=n,a.localStyleID=-1,a}return e.prototype.updateText=function(r){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!(!this.dirty&&r)){this._font=this._style.toFontString();var s=this.context,a=es.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),l=a.width,c=a.height,h=a.lines,_=a.lineHeight,m=a.lineWidths,f=a.maxLineWidth,p=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,l)+n.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,c)+n.padding*2)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=n.strokeThickness,s.textBaseline=n.textBaseline,s.lineJoin=n.lineJoin,s.miterLimit=n.miterLimit;for(var y,b,T=n.dropShadow?2:1,S=0;S<T;++S){var A=n.dropShadow&&S===0,R=A?Math.ceil(Math.max(1,c)+n.padding*2):0,L=R*this._resolution;if(A){s.fillStyle="black",s.strokeStyle="black";var V=n.dropShadowColor,M=Dl(typeof V=="number"?V:fb(V)),H=n.dropShadowBlur*this._resolution,g=n.dropShadowDistance*this._resolution;s.shadowColor="rgba("+M[0]*255+","+M[1]*255+","+M[2]*255+","+n.dropShadowAlpha+")",s.shadowBlur=H,s.shadowOffsetX=Math.cos(n.dropShadowAngle)*g,s.shadowOffsetY=Math.sin(n.dropShadowAngle)*g+L}else s.fillStyle=this._generateFillStyle(n,h,a),s.strokeStyle=n.stroke,s.shadowColor="black",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0;var ne=(_-p.fontSize)/2;(!e.nextLineHeightBehavior||_-p.fontSize<0)&&(ne=0);for(var B=0;B<h.length;B++)y=n.strokeThickness/2,b=n.strokeThickness/2+B*_+p.ascent+ne,n.align==="right"?y+=f-m[B]:n.align==="center"&&(y+=(f-m[B])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(h[B],y+n.padding,b+n.padding-R,!0),n.fill&&this.drawLetterSpacing(h[B],y+n.padding,b+n.padding-R)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(r,n,s,a){a===void 0&&(a=!1);var l=this._style,c=l.letterSpacing,h=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(c===0||h){h&&(this.context.letterSpacing=c,this.context.textLetterSpacing=c),a?this.context.strokeText(r,n,s):this.context.fillText(r,n,s);return}for(var _=n,m=Array.from?Array.from(r):r.split(""),f=this.context.measureText(r).width,p=0,y=0;y<m.length;++y){var b=m[y];a?this.context.strokeText(b,_,s):this.context.fillText(b,_,s);for(var T="",S=y+1;S<m.length;++S)T+=m[S];p=this.context.measureText(T).width,_+=f-p+c,f=p}},e.prototype.updateTexture=function(){var r=this.canvas;if(this._style.trim){var n=CA(r);n.data&&(r.width=n.width,r.height=n.height,this.context.putImageData(n.data,0,0))}var s=this._texture,a=this._style,l=a.trim?0:a.padding,c=s.baseTexture;s.trim.width=s._frame.width=r.width/this._resolution,s.trim.height=s._frame.height=r.height/this._resolution,s.trim.x=-l,s.trim.y=-l,s.orig.width=s._frame.width-l*2,s.orig.height=s._frame.height-l*2,this._onTextureUpdate(),c.setRealSize(r.width,r.height,this._resolution),s.updateUvs(),this.dirty=!1},e.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0),this.updateText(!0),i.prototype._render.call(this,r)},e.prototype.updateTransform=function(){this.updateText(!0),i.prototype.updateTransform.call(this)},e.prototype.getBounds=function(r,n){return this.updateText(!0),this._textureID===-1&&(r=!1),i.prototype.getBounds.call(this,r,n)},e.prototype.getLocalBounds=function(r){return this.updateText(!0),i.prototype.getLocalBounds.call(this,r)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(r,n,s){var a=r.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var l,c=r.dropShadow?r.dropShadowDistance:0,h=r.padding||0,_=this.canvas.width/this._resolution-c-h*2,m=this.canvas.height/this._resolution-c-h*2,f=a.slice(),p=r.fillGradientStops.slice();if(!p.length)for(var y=f.length+1,b=1;b<y;++b)p.push(b/y);if(f.unshift(a[0]),p.unshift(0),f.push(a[a.length-1]),p.push(1),r.fillGradientType===sc.LINEAR_VERTICAL){l=this.context.createLinearGradient(_/2,h,_/2,m+h);for(var T=s.fontProperties.fontSize+r.strokeThickness,b=0;b<n.length;b++){var S=s.lineHeight*(b-1)+T,A=s.lineHeight*b,R=A;b>0&&S>A&&(R=(A+S)/2);var L=A+T,V=s.lineHeight*(b+1),M=L;b+1<n.length&&V<L&&(M=(L+V)/2);for(var H=(M-R)/m,g=0;g<f.length;g++){var ne=0;typeof p[g]=="number"?ne=p[g]:ne=g/f.length;var B=Math.min(1,Math.max(0,R/m+ne*H));B=Number(B.toFixed(5)),l.addColorStop(B,f[g])}}}else{l=this.context.createLinearGradient(h,m/2,_+h,m/2);for(var Y=f.length+1,se=1,b=0;b<f.length;b++){var re=void 0;typeof p[b]=="number"?re=p[b]:re=se/Y,l.addColorStop(re,f[b]),se++}}return l},e.prototype.destroy=function(r){typeof r=="boolean"&&(r={children:r}),r=Object.assign({},OO,r),i.prototype.destroy.call(this,r),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){this.updateText(!0);var n=Sl(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){this.updateText(!0);var n=Sl(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(r){r=r||{},r instanceof Nl?this._style=r:this._style=new Nl(r),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(Mr);/*!
 * @pixi/prepare - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Xe.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $_=function(i,e){return $_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},$_(i,e)};function RO(i,e){$_(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var MO=function(){function i(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return i.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},i.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},i}();function kO(i,e){var r=!1;if(i&&i._textures&&i._textures.length){for(var n=0;n<i._textures.length;n++)if(i._textures[n]instanceof it){var s=i._textures[n].baseTexture;e.indexOf(s)===-1&&(e.push(s),r=!0)}}return r}function DO(i,e){if(i.baseTexture instanceof Pt){var r=i.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function NO(i,e){if(i._texture&&i._texture instanceof it){var r=i._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function FO(i,e){return e instanceof So?(e.updateText(!0),!0):!1}function LO(i,e){if(e instanceof Nl){var r=e.toFontString();return es.measureFont(r),!0}return!1}function BO(i,e){if(i instanceof So){e.indexOf(i.style)===-1&&e.push(i.style),e.indexOf(i)===-1&&e.push(i);var r=i._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function jO(i,e){return i instanceof Nl?(e.indexOf(i)===-1&&e.push(i),!0):!1}var UO=function(){function i(e){var r=this;this.limiter=new MO(Xe.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){r.queue&&r.prepareItems()},this.registerFindHook(BO),this.registerFindHook(jO),this.registerFindHook(kO),this.registerFindHook(DO),this.registerFindHook(NO),this.registerUploadHook(FO),this.registerUploadHook(LO)}return i.prototype.upload=function(e,r){var n=this;return typeof e=="function"&&(r=e,e=null),r&&Si("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(s){e&&n.add(e);var a=function(){r?.(),s()};n.queue.length?(n.completes.push(a),n.ticking||(n.ticking=!0,Yr.system.addOnce(n.tick,n,Ls.UTILITY))):a()})},i.prototype.tick=function(){setTimeout(this.delayedTick,0)},i.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],r=!1;if(e&&!e._destroyed){for(var n=0,s=this.uploadHooks.length;n<s;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)Yr.system.addOnce(this.tick,this,Ls.UTILITY);else{this.ticking=!1;var a=this.completes.slice(0);this.completes.length=0;for(var n=0,s=a.length;n<s;n++)a[n]()}},i.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},i.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},i.prototype.add=function(e){for(var r=0,n=this.addHooks.length;r<n&&!this.addHooks[r](e,this.queue);r++);if(e instanceof gr)for(var r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this},i.prototype.destroy=function(){this.ticking&&Yr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},i}();function Lb(i,e){return e instanceof Pt?(e._glTextures[i.CONTEXT_UID]||i.texture.bind(e),!0):!1}function GO(i,e){if(!(e instanceof wa))return!1;var r=e.geometry;e.finishPoly(),r.updateBatches();for(var n=r.batches,s=0;s<n.length;s++){var a=n[s].style.texture;a&&Lb(i,a.baseTexture)}return r.batchable||i.geometry.bind(r,e._resolveDirectShader(i)),!0}function HO(i,e){return i instanceof wa?(e.push(i),!0):!1}var zO=function(i){RO(e,i);function e(r){var n=i.call(this,r)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(HO),n.registerUploadHook(Lb),n.registerUploadHook(GO),n}return e.extension={name:"prepare",type:Ht.RendererPlugin},e}(UO);/*!
 * @pixi/spritesheet - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var XO=function(){function i(e,r,n){n===void 0&&(n=null),this.linkedSheets=[],this._texture=e instanceof it?e:null,this.baseTexture=e instanceof Pt?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;var s=this.baseTexture.resource;this.resolution=this._updateResolution(n||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return i.prototype._updateResolution=function(e){e===void 0&&(e=null);var r=this.data.meta.scale,n=kf(e,null);return n===null&&(n=r!==void 0?parseFloat(r):1),n!==1&&this.baseTexture.setResolution(n),n},i.prototype.parse=function(e){var r=this;return e&&Si("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(n){r._callback=function(s){e?.(s),n(s)},r._batchIndex=0,r._frameKeys.length<=i.BATCH_SIZE?(r._processFrames(0),r._processAnimations(),r._parseComplete()):r._nextBatch()})},i.prototype._processFrames=function(e){for(var r=e,n=i.BATCH_SIZE;r-e<n&&r<this._frameKeys.length;){var s=this._frameKeys[r],a=this._frames[s],l=a.frame;if(l){var c=null,h=null,_=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,m=new mt(0,0,Math.floor(_.w)/this.resolution,Math.floor(_.h)/this.resolution);a.rotated?c=new mt(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.h)/this.resolution,Math.floor(l.w)/this.resolution):c=new mt(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(h=new mt(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution)),this.textures[s]=new it(this.baseTexture,c,m,h,a.rotated?2:0,a.anchor),it.addToCache(this.textures[s],s)}r++}},i.prototype._processAnimations=function(){var e=this.data.animations||{};for(var r in e){this.animations[r]=[];for(var n=0;n<e[r].length;n++){var s=e[r][n];this.animations[r].push(this.textures[s])}}},i.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},i.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*i.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*i.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},i.prototype.destroy=function(e){var r;e===void 0&&(e=!1);for(var n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)===null||r===void 0||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},i.BATCH_SIZE=1e3,i}(),VO=function(){function i(){}return i.use=function(e,r){var n,s,a=this,l=e.name+"_image";if(!e.data||e.type!==cr.TYPE.JSON||!e.data.frames||a.resources[l]){r();return}var c=(s=(n=e.data)===null||n===void 0?void 0:n.meta)===null||s===void 0?void 0:s.related_multi_packs;if(Array.isArray(c))for(var h=function(b){if(typeof b!="string")return"continue";var T=b.replace(".json",""),S=Tl.resolve(e.url.replace(a.baseUrl,""),b);if(a.resources[T]||Object.values(a.resources).some(function(R){return Tl.format(Tl.parse(R.url))===S}))return"continue";var A={crossOrigin:e.crossOrigin,loadType:cr.LOAD_TYPE.XHR,xhrType:cr.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};a.add(T,S,A)},_=0,m=c;_<m.length;_++){var f=m[_];h(f)}var p={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},y=i.getResourcePath(e,a.baseUrl);a.add(l,y,p,function(T){if(T.error){r(T.error);return}var S=new XO(T.texture,e.data,e.url);S.parse().then(function(){e.spritesheet=S,e.textures=S.textures,r()})})},i.getResourcePath=function(e,r){return e.isDataUrl?e.data.meta.image:Tl.resolve(e.url.replace(r,""),e.data.meta.image)},i.extension=Ht.Loader,i}();/*!
 * @pixi/sprite-tiling - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Y_=function(i,e){return Y_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},Y_(i,e)};function Bb(i,e){Y_(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Iu=new yt,jb=function(i){Bb(e,i);function e(r,n,s){n===void 0&&(n=100),s===void 0&&(s=100);var a=i.call(this,r)||this;return a.tileTransform=new Ul,a._width=n,a._height=s,a.uvMatrix=a.texture.uvMatrix||new _c(r),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(r){this.uvMatrix.clampMargin=r,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(r){this.tileTransform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(r){this.tileTransform.position.copyFrom(r)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(r){var n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var r=this._width*-this._anchor._x,n=this._height*-this._anchor._y,s=this._width*(1-this._anchor._x),a=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,r,n,s,a)},e.prototype.getLocalBounds=function(r){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new mt),r=this._localBoundsRect),this._bounds.getRectangle(r)):i.prototype.getLocalBounds.call(this,r)},e.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,Iu);var n=this._width,s=this._height,a=-n*this.anchor._x;if(Iu.x>=a&&Iu.x<a+n){var l=-s*this.anchor._y;if(Iu.y>=l&&Iu.y<l+s)return!0}return!1},e.prototype.destroy=function(r){i.prototype.destroy.call(this,r),this.tileTransform=null,this.uvMatrix=null},e.from=function(r,n){var s=r instanceof it?r:it.from(r,n);return new e(s,n.width,n.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r},enumerable:!1,configurable:!0}),e}(Mr),qO=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,Zx=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,WO=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,$O=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,YO=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,sf=new rr,KO=function(i){Bb(e,i);function e(r){var n=i.call(this,r)||this;return r.runners.contextChange.add(n),n.quad=new Rm,n.state=Oo.for2d(),n}return e.prototype.contextChange=function(){var r=this.renderer,n={globals:r.globalUniforms};this.simpleShader=Qi.from(Zx,qO,n),this.shader=r.context.webGLVersion>1?Qi.from($O,YO,n):Qi.from(Zx,WO,n)},e.prototype.render=function(r){var n=this.renderer,s=this.quad,a=s.vertices;a[0]=a[6]=r._width*-r.anchor.x,a[1]=a[3]=r._height*-r.anchor.y,a[2]=a[4]=r._width*(1-r.anchor.x),a[5]=a[7]=r._height*(1-r.anchor.y);var l=r.uvRespectAnchor?r.anchor.x:0,c=r.uvRespectAnchor?r.anchor.y:0;a=s.uvs,a[0]=a[6]=-l,a[1]=a[3]=-c,a[2]=a[4]=1-l,a[5]=a[7]=1-c,s.invalidate();var h=r._texture,_=h.baseTexture,m=_.alphaMode>0,f=r.tileTransform.localTransform,p=r.uvMatrix,y=_.isPowerOfTwo&&h.frame.width===_.width&&h.frame.height===_.height;y&&(_._glTextures[n.CONTEXT_UID]?y=_.wrapMode!==Gn.CLAMP:_.wrapMode===Gn.CLAMP&&(_.wrapMode=Gn.REPEAT));var b=y?this.simpleShader:this.shader,T=h.width,S=h.height,A=r._width,R=r._height;sf.set(f.a*T/A,f.b*T/R,f.c*S/A,f.d*S/R,f.tx/A,f.ty/R),sf.invert(),y?sf.prepend(p.mapCoord):(b.uniforms.uMapCoord=p.mapCoord.toArray(!0),b.uniforms.uClampFrame=p.uClampFrame,b.uniforms.uClampOffset=p.uClampOffset),b.uniforms.uTransform=sf.toArray(!0),b.uniforms.uColor=Im(r.tint,r.worldAlpha,b.uniforms.uColor,m),b.uniforms.translationMatrix=r.transform.worldTransform.toArray(!0),b.uniforms.uSampler=h,n.shader.bind(b),n.geometry.bind(s),this.state.blendMode=Pm(r.blendMode,m),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e.extension={name:"tilingSprite",type:Ht.RendererPlugin},e}(vc);/*!
 * @pixi/mesh - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var K_=function(i,e){return K_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},K_(i,e)};function Dm(i,e){K_(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var QO=function(){function i(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return i.prototype.update=function(e){if(!(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}},i}(),Qv=new yt,Jx=new vf,Eo=function(i){Dm(e,i);function e(r,n,s,a){a===void 0&&(a=ti.TRIANGLES);var l=i.call(this)||this;return l.geometry=r,l.shader=n,l.state=s||Oo.for2d(),l.drawMode=a,l.start=0,l.size=0,l.uvs=null,l.indices=null,l.vertexData=new Float32Array(1),l.vertexDirty=-1,l._transformID=-1,l._roundPixels=Xe.ROUND_PIXELS,l.batchUvs=null,l}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(r){this._geometry!==r&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=r,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(r){this.shader=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(r){this.shader.tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(r){this.shader.texture=r},enumerable:!1,configurable:!0}),e.prototype._render=function(r){var n=this.geometry.buffers[0].data,s=this.shader;s.batchable&&this.drawMode===ti.TRIANGLES&&n.length<e.BATCHABLE_SIZE*2?this._renderToBatch(r):this._renderDefault(r)},e.prototype._renderDefault=function(r){var n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),r.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),r.shader.bind(n),r.state.set(this.state),r.geometry.bind(this.geometry,n),r.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(r){var n=this.geometry,s=this.shader;s.uvMatrix&&(s.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=s._tintRGB,this._texture=s.texture;var a=this.material.pluginName;r.batch.setObjectRenderer(r.plugins[a]),r.plugins[a].render(this)},e.prototype.calculateVertices=function(){var r=this.geometry,n=r.buffers[0],s=n.data,a=n._updateID;if(!(a===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==s.length&&(this.vertexData=new Float32Array(s.length));for(var l=this.transform.worldTransform,c=l.a,h=l.b,_=l.c,m=l.d,f=l.tx,p=l.ty,y=this.vertexData,b=0;b<y.length/2;b++){var T=s[b*2],S=s[b*2+1];y[b*2]=c*T+_*S+f,y[b*2+1]=h*T+m*S+p}if(this._roundPixels)for(var A=Xe.RESOLUTION,b=0;b<y.length;++b)y[b]=Math.round((y[b]*A|0)/A);this.vertexDirty=a}},e.prototype.calculateUvs=function(){var r=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=r.data:(this.batchUvs||(this.batchUvs=new QO(r,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(r){if(!this.getBounds().contains(r.x,r.y))return!1;this.worldTransform.applyInverse(r,Qv);for(var n=this.geometry.getBuffer("aVertexPosition").data,s=Jx.points,a=this.geometry.getIndex().data,l=a.length,c=this.drawMode===4?3:1,h=0;h+2<l;h+=c){var _=a[h]*2,m=a[h+1]*2,f=a[h+2]*2;if(s[0]=n[_],s[1]=n[_+1],s[2]=n[m],s[3]=n[m+1],s[4]=n[f],s[5]=n[f+1],Jx.contains(Qv.x,Qv.y))return!0}return!1},e.prototype.destroy=function(r){i.prototype.destroy.call(this,r),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(gr),ZO=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,JO=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,Co=function(i){Dm(e,i);function e(r,n){var s=this,a={uSampler:r,alpha:1,uTextureMatrix:rr.IDENTITY,uColor:new Float32Array([1,1,1,1])};return n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(a,n.uniforms),s=i.call(this,n.program||Io.from(JO,ZO),a)||this,s._colorDirty=!1,s.uvMatrix=new _c(r),s.batchable=n.program===void 0,s.pluginName=n.pluginName,s.tint=n.tint,s.alpha=n.alpha,s}return Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(r){this.uniforms.uSampler!==r&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!r.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=r,this.uvMatrix.texture=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(r){r!==this._alpha&&(this._alpha=r,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){r!==this._tint&&(this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var r=this.texture.baseTexture;Im(this._tint,this._alpha,this.uniforms.uColor,r.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(Qi),$f=function(i){Dm(e,i);function e(r,n,s){var a=i.call(this)||this,l=new or(r),c=new or(n,!0),h=new or(s,!0,!0);return a.addAttribute("aVertexPosition",l,2,!1,Ze.FLOAT).addAttribute("aTextureCoord",c,2,!1,Ze.FLOAT).addIndex(h),a._updateId=-1,a}return Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(Po);/*!
 * @pixi/text-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Q_=function(i,e){return Q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},Q_(i,e)};function eR(i,e){Q_(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var jf=function(){function i(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return i}(),tR=function(){function i(){}return i.test=function(e){return typeof e=="string"&&e.indexOf("info face=")===0},i.parse=function(e){var r=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var s in r){var a=r[s].match(/^[a-z]+/gm)[0],l=r[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),c={};for(var h in l){var _=l[h].split("="),m=_[0],f=_[1].replace(/"/gm,""),p=parseFloat(f),y=isNaN(p)?f:p;c[m]=y}n[a].push(c)}var b=new jf;return n.info.forEach(function(T){return b.info.push({face:T.face,size:parseInt(T.size,10)})}),n.common.forEach(function(T){return b.common.push({lineHeight:parseInt(T.lineHeight,10)})}),n.page.forEach(function(T){return b.page.push({id:parseInt(T.id,10),file:T.file})}),n.char.forEach(function(T){return b.char.push({id:parseInt(T.id,10),page:parseInt(T.page,10),x:parseInt(T.x,10),y:parseInt(T.y,10),width:parseInt(T.width,10),height:parseInt(T.height,10),xoffset:parseInt(T.xoffset,10),yoffset:parseInt(T.yoffset,10),xadvance:parseInt(T.xadvance,10)})}),n.kerning.forEach(function(T){return b.kerning.push({first:parseInt(T.first,10),second:parseInt(T.second,10),amount:parseInt(T.amount,10)})}),n.distanceField.forEach(function(T){return b.distanceField.push({distanceRange:parseInt(T.distanceRange,10),fieldType:T.fieldType})}),b},i}(),Z_=function(){function i(){}return i.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},i.parse=function(e){for(var r=new jf,n=e.getElementsByTagName("info"),s=e.getElementsByTagName("common"),a=e.getElementsByTagName("page"),l=e.getElementsByTagName("char"),c=e.getElementsByTagName("kerning"),h=e.getElementsByTagName("distanceField"),_=0;_<n.length;_++)r.info.push({face:n[_].getAttribute("face"),size:parseInt(n[_].getAttribute("size"),10)});for(var _=0;_<s.length;_++)r.common.push({lineHeight:parseInt(s[_].getAttribute("lineHeight"),10)});for(var _=0;_<a.length;_++)r.page.push({id:parseInt(a[_].getAttribute("id"),10)||0,file:a[_].getAttribute("file")});for(var _=0;_<l.length;_++){var m=l[_];r.char.push({id:parseInt(m.getAttribute("id"),10),page:parseInt(m.getAttribute("page"),10)||0,x:parseInt(m.getAttribute("x"),10),y:parseInt(m.getAttribute("y"),10),width:parseInt(m.getAttribute("width"),10),height:parseInt(m.getAttribute("height"),10),xoffset:parseInt(m.getAttribute("xoffset"),10),yoffset:parseInt(m.getAttribute("yoffset"),10),xadvance:parseInt(m.getAttribute("xadvance"),10)})}for(var _=0;_<c.length;_++)r.kerning.push({first:parseInt(c[_].getAttribute("first"),10),second:parseInt(c[_].getAttribute("second"),10),amount:parseInt(c[_].getAttribute("amount"),10)});for(var _=0;_<h.length;_++)r.distanceField.push({fieldType:h[_].getAttribute("fieldType"),distanceRange:parseInt(h[_].getAttribute("distanceRange"),10)});return r},i}(),rR=function(){function i(){}return i.test=function(e){if(typeof e=="string"&&e.indexOf("<font>")>-1){var r=new globalThis.DOMParser().parseFromString(e,"text/xml");return Z_.test(r)}return!1},i.parse=function(e){var r=new globalThis.DOMParser().parseFromString(e,"text/xml");return Z_.parse(r)},i}(),Zv=[tR,Z_,rR];function Ub(i){for(var e=0;e<Zv.length;e++)if(Zv[e].test(i))return Zv[e];return null}function nR(i,e,r,n,s,a){var l=r.fill;if(Array.isArray(l)){if(l.length===1)return l[0]}else return l;var c,h=r.dropShadow?r.dropShadowDistance:0,_=r.padding||0,m=i.width/n-h-_*2,f=i.height/n-h-_*2,p=l.slice(),y=r.fillGradientStops.slice();if(!y.length)for(var b=p.length+1,T=1;T<b;++T)y.push(T/b);if(p.unshift(l[0]),y.unshift(0),p.push(l[l.length-1]),y.push(1),r.fillGradientType===sc.LINEAR_VERTICAL){c=e.createLinearGradient(m/2,_,m/2,f+_);for(var S=0,A=a.fontProperties.fontSize+r.strokeThickness,R=A/f,T=0;T<s.length;T++)for(var L=a.lineHeight*T,V=0;V<p.length;V++){var M=0;typeof y[V]=="number"?M=y[V]:M=V/p.length;var H=L/f+M*R,g=Math.max(S,H);g=Math.min(g,1),c.addColorStop(g,p[V]),S=g}}else{c=e.createLinearGradient(_,f/2,m+_,f/2);for(var ne=p.length+1,B=1,T=0;T<p.length;T++){var Y=void 0;typeof y[T]=="number"?Y=y[T]:Y=B/ne,c.addColorStop(Y,p[T]),B++}}return c}function iR(i,e,r,n,s,a,l){var c=r.text,h=r.fontProperties;e.translate(n,s),e.scale(a,a);var _=l.strokeThickness/2,m=-(l.strokeThickness/2);if(e.font=l.toFontString(),e.lineWidth=l.strokeThickness,e.textBaseline=l.textBaseline,e.lineJoin=l.lineJoin,e.miterLimit=l.miterLimit,e.fillStyle=nR(i,e,l,a,[c],r),e.strokeStyle=l.stroke,l.dropShadow){var f=l.dropShadowColor,p=Dl(typeof f=="number"?f:fb(f)),y=l.dropShadowBlur*a,b=l.dropShadowDistance*a;e.shadowColor="rgba("+p[0]*255+","+p[1]*255+","+p[2]*255+","+l.dropShadowAlpha+")",e.shadowBlur=y,e.shadowOffsetX=Math.cos(l.dropShadowAngle)*b,e.shadowOffsetY=Math.sin(l.dropShadowAngle)*b}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;l.stroke&&l.strokeThickness&&e.strokeText(c,_,m+r.lineHeight-h.descent),l.fill&&e.fillText(c,_,m+r.lineHeight-h.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Gb(i){return Array.from?Array.from(i):i.split("")}function sR(i){typeof i=="string"&&(i=[i]);for(var e=[],r=0,n=i.length;r<n;r++){var s=i[r];if(Array.isArray(s)){if(s.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+s.length+".");var a=s[0].charCodeAt(0),l=s[1].charCodeAt(0);if(l<a)throw new Error("[BitmapFont]: Invalid character range.");for(var c=a,h=l;c<=h;c++)e.push(String.fromCharCode(c))}else e.push.apply(e,Gb(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}function _f(i){return i.codePointAt?i.codePointAt(0):i.charCodeAt(0)}var Vi=function(){function i(e,r,n){var s,a,l=e.info[0],c=e.common[0],h=e.page[0],_=e.distanceField[0],m=kf(h.file),f={};this._ownsTextures=n,this.font=l.face,this.size=l.size,this.lineHeight=c.lineHeight/m,this.chars={},this.pageTextures=f;for(var p=0;p<e.page.length;p++){var y=e.page[p],b=y.id,T=y.file;f[b]=r instanceof Array?r[p]:r[T],_?.fieldType&&_.fieldType!=="none"&&(f[b].baseTexture.alphaMode=Ai.NO_PREMULTIPLIED_ALPHA,f[b].baseTexture.mipmap=Ci.OFF)}for(var p=0;p<e.char.length;p++){var S=e.char[p],b=S.id,A=S.page,R=e.char[p],L=R.x,V=R.y,M=R.width,H=R.height,g=R.xoffset,ne=R.yoffset,B=R.xadvance;L/=m,V/=m,M/=m,H/=m,g/=m,ne/=m,B/=m;var Y=new mt(L+f[A].frame.x/m,V+f[A].frame.y/m,M,H);this.chars[b]={xOffset:g,yOffset:ne,xAdvance:B,kerning:{},texture:new it(f[A].baseTexture,Y),page:A}}for(var p=0;p<e.kerning.length;p++){var se=e.kerning[p],re=se.first,he=se.second,xe=se.amount;re/=m,he/=m,xe/=m,this.chars[he]&&(this.chars[he].kerning[re]=xe)}this.distanceFieldRange=_?.distanceRange,this.distanceFieldType=(a=(s=_?.fieldType)===null||s===void 0?void 0:s.toLowerCase())!==null&&a!==void 0?a:"none"}return i.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},i.install=function(e,r,n){var s;if(e instanceof jf)s=e;else{var a=Ub(e);if(!a)throw new Error("Unrecognized data format for font.");s=a.parse(e)}r instanceof it&&(r=[r]);var l=new i(s,r,n);return i.available[l.font]=l,l},i.uninstall=function(e){var r=i.available[e];if(!r)throw new Error("No font found named '"+e+"'");r.destroy(),delete i.available[e]},i.from=function(e,r,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var s=Object.assign({},i.defaultOptions,n),a=s.chars,l=s.padding,c=s.resolution,h=s.textureWidth,_=s.textureHeight,m=sR(a),f=r instanceof Nl?r:new Nl(r),p=h,y=new jf;y.info[0]={face:f.fontFamily,size:f.fontSize},y.common[0]={lineHeight:f.fontSize};for(var b=0,T=0,S,A,R,L=0,V=[],M=0;M<m.length;M++){S||(S=Xe.ADAPTER.createCanvas(),S.width=h,S.height=_,A=S.getContext("2d"),R=new Pt(S,{resolution:c}),V.push(new it(R)),y.page.push({id:V.length-1,file:""}));var H=m[M],g=es.measureText(H,f,!1,S),ne=g.width,B=Math.ceil(g.height),Y=Math.ceil((f.fontStyle==="italic"?2:1)*ne);if(T>=_-B*c){if(T===0)throw new Error("[BitmapFont] textureHeight "+_+"px is too small "+("(fontFamily: '"+f.fontFamily+"', fontSize: "+f.fontSize+"px, char: '"+H+"')"));--M,S=null,A=null,R=null,T=0,b=0,L=0;continue}if(L=Math.max(B+g.fontProperties.descent,L),Y*c+b>=p){if(b===0)throw new Error("[BitmapFont] textureWidth "+h+"px is too small "+("(fontFamily: '"+f.fontFamily+"', fontSize: "+f.fontSize+"px, char: '"+H+"')"));--M,T+=L*c,T=Math.ceil(T),b=0,L=0;continue}iR(S,A,g,b,T,c,f);var se=_f(g.text);y.char.push({id:se,page:V.length-1,x:b/c,y:T/c,width:Y,height:B,xoffset:0,yoffset:0,xadvance:Math.ceil(ne-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),b+=(Y+2*l)*c,b=Math.ceil(b)}if(!n?.skipKerning)for(var M=0,re=m.length;M<re;M++)for(var he=m[M],xe=0;xe<re;xe++){var Z=m[xe],U=A.measureText(he).width,W=A.measureText(Z).width,z=A.measureText(he+Z).width,Q=z-(U+W);Q&&y.kerning.push({first:_f(he),second:_f(Z),amount:Q})}var $=new i(y,V,!0);return i.available[e]!==void 0&&i.uninstall(e),i.available[e]=$,$},i.ALPHA=[["a","z"],["A","Z"]," "],i.NUMERIC=[["0","9"]],i.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],i.ASCII=[[" ","~"]],i.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:i.ALPHANUMERIC},i.available={},i}(),aR=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,oR=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,e1=[],t1=[],r1=[],af=function(i){eR(e,i);function e(r,n){n===void 0&&(n={});var s=i.call(this)||this;s._tint=16777215;var a=Object.assign({},e.styleDefaults,n),l=a.align,c=a.tint,h=a.maxWidth,_=a.letterSpacing,m=a.fontName,f=a.fontSize;if(!Vi.available[m])throw new Error('Missing BitmapFont "'+m+'"');return s._activePagesMeshData=[],s._textWidth=0,s._textHeight=0,s._align=l,s._tint=c,s._font=void 0,s._fontName=m,s._fontSize=f,s.text=r,s._maxWidth=h,s._maxLineHeight=0,s._letterSpacing=_,s._anchor=new xa(function(){s.dirty=!0},s,0,0),s._roundPixels=Xe.ROUND_PIXELS,s.dirty=!0,s._resolution=Xe.RESOLUTION,s._autoResolution=!0,s._textureCache={},s}return e.prototype.updateText=function(){for(var r,n=Vi.available[this._fontName],s=this.fontSize,a=s/n.size,l=new yt,c=[],h=[],_=[],m=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",f=Gb(m),p=this._maxWidth*n.size/s,y=n.distanceFieldType==="none"?e1:t1,b=null,T=0,S=0,A=0,R=-1,L=0,V=0,M=0,H=0,g=0;g<f.length;g++){var ne=f[g],B=_f(ne);if(/(?:\s)/.test(ne)&&(R=g,L=T,H++),ne==="\r"||ne===`
`){h.push(T),_.push(-1),S=Math.max(S,T),++A,++V,l.x=0,l.y+=n.lineHeight,b=null,H=0;continue}var Y=n.chars[B];if(Y){b&&Y.kerning[b]&&(l.x+=Y.kerning[b]);var se=r1.pop()||{texture:it.EMPTY,line:0,charCode:0,prevSpaces:0,position:new yt};se.texture=Y.texture,se.line=A,se.charCode=B,se.position.x=l.x+Y.xOffset+this._letterSpacing/2,se.position.y=l.y+Y.yOffset,se.prevSpaces=H,c.push(se),T=se.position.x+Math.max(Y.xAdvance-Y.xOffset,Y.texture.orig.width),l.x+=Y.xAdvance+this._letterSpacing,M=Math.max(M,Y.yOffset+Y.texture.height),b=B,R!==-1&&p>0&&l.x>p&&(++V,Ol(c,1+R-V,1+g-R),g=R,R=-1,h.push(L),_.push(c.length>0?c[c.length-1].prevSpaces:0),S=Math.max(S,L),A++,l.x=0,l.y+=n.lineHeight,b=null,H=0)}}var re=f[f.length-1];re!=="\r"&&re!==`
`&&(/(?:\s)/.test(re)&&(T=L),h.push(T),S=Math.max(S,T),_.push(-1));for(var he=[],g=0;g<=A;g++){var xe=0;this._align==="right"?xe=S-h[g]:this._align==="center"?xe=(S-h[g])/2:this._align==="justify"&&(xe=_[g]<0?0:(S-h[g])/_[g]),he.push(xe)}var Z=c.length,U={},W=[],z=this._activePagesMeshData;y.push.apply(y,z);for(var g=0;g<Z;g++){var Q=c[g].texture,$=Q.baseTexture.uid;if(!U[$]){var j=y.pop();if(!j){var N=new $f,q=void 0,oe=void 0;n.distanceFieldType==="none"?(q=new Co(it.EMPTY),oe=ct.NORMAL):(q=new Co(it.EMPTY,{program:Io.from(oR,aR),uniforms:{uFWidth:0}}),oe=ct.NORMAL_NPM);var de=new Eo(N,q);de.blendMode=oe,j={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:de,vertices:null,uvs:null,indices:null}}j.index=0,j.indexCount=0,j.vertexCount=0,j.uvsCount=0,j.total=0;var Te=this._textureCache;Te[$]=Te[$]||new it(Q.baseTexture),j.mesh.texture=Te[$],j.mesh.tint=this._tint,W.push(j),U[$]=j}U[$].total++}for(var g=0;g<z.length;g++)W.indexOf(z[g])===-1&&this.removeChild(z[g].mesh);for(var g=0;g<W.length;g++)W[g].mesh.parent!==this&&this.addChild(W[g].mesh);this._activePagesMeshData=W;for(var g in U){var j=U[g],Ae=j.total;if(!(((r=j.indices)===null||r===void 0?void 0:r.length)>6*Ae)||j.vertices.length<Eo.BATCHABLE_SIZE*2)j.vertices=new Float32Array(4*2*Ae),j.uvs=new Float32Array(4*2*Ae),j.indices=new Uint16Array(6*Ae);else for(var Ie=j.total,ke=j.vertices,Ce=Ie*4*2;Ce<ke.length;Ce++)ke[Ce]=0;j.mesh.size=6*Ae}for(var g=0;g<Z;g++){var ne=c[g],He=ne.position.x+he[ne.line]*(this._align==="justify"?ne.prevSpaces:1);this._roundPixels&&(He=Math.round(He));var Ge=He*a,rt=ne.position.y*a,Q=ne.texture,qe=U[Q.baseTexture.uid],Ve=Q.frame,Ue=Q._uvs,nt=qe.index++;qe.indices[nt*6+0]=0+nt*4,qe.indices[nt*6+1]=1+nt*4,qe.indices[nt*6+2]=2+nt*4,qe.indices[nt*6+3]=0+nt*4,qe.indices[nt*6+4]=2+nt*4,qe.indices[nt*6+5]=3+nt*4,qe.vertices[nt*8+0]=Ge,qe.vertices[nt*8+1]=rt,qe.vertices[nt*8+2]=Ge+Ve.width*a,qe.vertices[nt*8+3]=rt,qe.vertices[nt*8+4]=Ge+Ve.width*a,qe.vertices[nt*8+5]=rt+Ve.height*a,qe.vertices[nt*8+6]=Ge,qe.vertices[nt*8+7]=rt+Ve.height*a,qe.uvs[nt*8+0]=Ue.x0,qe.uvs[nt*8+1]=Ue.y0,qe.uvs[nt*8+2]=Ue.x1,qe.uvs[nt*8+3]=Ue.y1,qe.uvs[nt*8+4]=Ue.x2,qe.uvs[nt*8+5]=Ue.y2,qe.uvs[nt*8+6]=Ue.x3,qe.uvs[nt*8+7]=Ue.y3}this._textWidth=S*a,this._textHeight=(l.y+n.lineHeight)*a;for(var g in U){var j=U[g];if(this.anchor.x!==0||this.anchor.y!==0)for(var Tt=0,Er=this._textWidth*this.anchor.x,hr=this._textHeight*this.anchor.y,nr=0;nr<j.total;nr++)j.vertices[Tt++]-=Er,j.vertices[Tt++]-=hr,j.vertices[Tt++]-=Er,j.vertices[Tt++]-=hr,j.vertices[Tt++]-=Er,j.vertices[Tt++]-=hr,j.vertices[Tt++]-=Er,j.vertices[Tt++]-=hr;this._maxLineHeight=M*a;var Yt=j.mesh.geometry.getBuffer("aVertexPosition"),Dr=j.mesh.geometry.getBuffer("aTextureCoord"),Nr=j.mesh.geometry.getIndex();Yt.data=j.vertices,Dr.data=j.uvs,Nr.data=j.indices,Yt.update(),Dr.update(),Nr.update()}for(var g=0;g<c.length;g++)r1.push(c[g]);this._font=n,this.dirty=!1},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0);var n=Vi.available[this._fontName],s=n.distanceFieldRange,a=n.distanceFieldType,l=n.size;if(a!=="none")for(var c=this.worldTransform,h=c.a,_=c.b,m=c.c,f=c.d,p=Math.sqrt(h*h+_*_),y=Math.sqrt(m*m+f*f),b=(Math.abs(p)+Math.abs(y))/2,T=this.fontSize/l,S=0,A=this._activePagesMeshData;S<A.length;S++){var R=A[S];R.mesh.shader.uniforms.uFWidth=b*s*T*this._resolution}i.prototype._render.call(this,r)},e.prototype.getLocalBounds=function(){return this.validate(),i.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){var r=Vi.available[this._fontName];if(!r)throw new Error('Missing BitmapFont "'+this._fontName+'"');this._font!==r&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){if(this._tint!==r){this._tint=r;for(var n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(r){if(!Vi.available[r])throw new Error('Missing BitmapFont "'+r+'"');this._fontName!==r&&(this._fontName=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){var r;return(r=this._fontSize)!==null&&r!==void 0?r:Vi.available[this._fontName].size},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(r){typeof r=="number"?this._anchor.set(r):this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(r){this._maxWidth!==r&&(this._maxWidth=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){r!==this._roundPixels&&(this._roundPixels=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(r){var n=this._textureCache,s=Vi.available[this._fontName],a=s.distanceFieldType==="none"?e1:t1;a.push.apply(a,this._activePagesMeshData);for(var l=0,c=this._activePagesMeshData;l<c.length;l++){var h=c[l];this.removeChild(h.mesh)}this._activePagesMeshData=[],a.filter(function(f){return n[f.mesh.texture.baseTexture.uid]}).forEach(function(f){f.mesh.texture=it.EMPTY});for(var _ in n){var m=n[_];m.destroy(),delete n[_]}this._font=null,this._textureCache=null,i.prototype.destroy.call(this,r)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(gr),lR=function(){function i(){}return i.add=function(){cr.setExtensionXhrType("fnt",cr.XHR_RESPONSE_TYPE.TEXT)},i.use=function(e,r){var n=Ub(e.data);if(!n){r();return}for(var s=i.getBaseUrl(this,e),a=n.parse(e.data),l={},c=function(T){l[T.metadata.pageFile]=T.texture,Object.keys(l).length===a.page.length&&(e.bitmapFont=Vi.install(a,l,!0),r())},h=0;h<a.page.length;++h){var _=a.page[h].file,m=s+_,f=!1;for(var p in this.resources){var y=this.resources[p];if(y.url===m){y.metadata.pageFile=_,y.texture?c(y):y.onAfterMiddleware.add(c),f=!0;break}}if(!f){var b={crossOrigin:e.crossOrigin,loadType:cr.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:_},e.metadata.imageMetadata),parentResource:e};this.add(m,b,c)}}},i.getBaseUrl=function(e,r){var n=r.isDataUrl?"":i.dirname(r.url);return r.isDataUrl&&(n==="."&&(n=""),e.baseUrl&&n&&e.baseUrl.charAt(e.baseUrl.length-1)==="/"&&(n+="/")),n=n.replace(e.baseUrl,""),n&&n.charAt(n.length-1)!=="/"&&(n+="/"),n},i.dirname=function(e){var r=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return r===e?".":r===""?"/":r},i.extension=Ht.Loader,i}();/*!
 * @pixi/filter-alpha - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var J_=function(i,e){return J_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},J_(i,e)};function uR(i,e){J_(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var cR=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;(function(i){uR(e,i);function e(r){r===void 0&&(r=1);var n=i.call(this,sI,cR,{uAlpha:1})||this;return n.alpha=r,n}return Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),e})(js);/*!
 * @pixi/filter-blur - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var em=function(i,e){return em=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},em(i,e)};function Hb(i,e){em(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var hR=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function fR(i,e){var r=Math.ceil(i/2),n=hR,s="",a;e?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var l=0;l<i;l++){var c=a.replace("%index%",l.toString());c=c.replace("%sampleIndex%",l-(r-1)+".0"),s+=c,s+=`
`}return n=n.replace("%blur%",s),n=n.replace("%size%",i.toString()),n}var dR={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},pR=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function vR(i){for(var e=dR[i],r=e.length,n=pR,s="",a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",l,c=0;c<i;c++){var h=a.replace("%index%",c.toString());l=c,c>=r&&(l=i-c-1),h=h.replace("%value%",e[l].toString()),s+=h,s+=`
`}return n=n.replace("%blur%",s),n=n.replace("%size%",i.toString()),n}var n1=function(i){Hb(e,i);function e(r,n,s,a,l){n===void 0&&(n=8),s===void 0&&(s=4),a===void 0&&(a=Xe.FILTER_RESOLUTION),l===void 0&&(l=5);var c=this,h=fR(l,r),_=vR(l);return c=i.call(this,h,_)||this,c.horizontal=r,c.resolution=a,c._quality=0,c.quality=s,c.blur=n,c}return e.prototype.apply=function(r,n,s,a){if(s?this.horizontal?this.uniforms.strength=1/s.width*(s.width/n.width):this.uniforms.strength=1/s.height*(s.height/n.height):this.horizontal?this.uniforms.strength=1/r.renderer.width*(r.renderer.width/n.width):this.uniforms.strength=1/r.renderer.height*(r.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)r.applyFilter(this,n,s,a);else{var l=r.getFilterTexture(),c=r.renderer,h=n,_=l;this.state.blend=!1,r.applyFilter(this,h,_,xi.CLEAR);for(var m=1;m<this.passes-1;m++){r.bindAndClear(h,xi.BLIT),this.uniforms.uSampler=_;var f=_;_=h,h=f,c.shader.bind(this),c.geometry.draw(5)}this.state.blend=!0,r.applyFilter(this,_,s,a),r.returnFilterTexture(l)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(r){this.padding=1+Math.abs(r)*2,this.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=r,this.passes=r},enumerable:!1,configurable:!0}),e}(js),_R=function(i){Hb(e,i);function e(r,n,s,a){r===void 0&&(r=8),n===void 0&&(n=4),s===void 0&&(s=Xe.FILTER_RESOLUTION),a===void 0&&(a=5);var l=i.call(this)||this;return l.blurXFilter=new n1(!0,r,n,s,a),l.blurYFilter=new n1(!1,r,n,s,a),l.resolution=s,l.quality=n,l.blur=r,l.repeatEdgePixels=!1,l}return e.prototype.apply=function(r,n,s,a){var l=Math.abs(this.blurXFilter.strength),c=Math.abs(this.blurYFilter.strength);if(l&&c){var h=r.getFilterTexture();this.blurXFilter.apply(r,n,h,xi.CLEAR),this.blurYFilter.apply(r,h,s,a),r.returnFilterTexture(h)}else c?this.blurYFilter.apply(r,n,s,a):this.blurXFilter.apply(r,n,s,a)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(r){this.blurXFilter.quality=this.blurYFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(r){this.blurYFilter.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(r){this._repeatEdgePixels=r,this.updatePadding()},enumerable:!1,configurable:!0}),e}(js);/*!
 * @pixi/filter-color-matrix - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tm=function(i,e){return tm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},tm(i,e)};function mR(i,e){tm(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var yR=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,i1=function(i){mR(e,i);function e(){var r=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return r=i.call(this,Pb,yR,n)||this,r.alpha=1,r}return e.prototype._loadMatrix=function(r,n){n===void 0&&(n=!1);var s=r;n&&(this._multiply(s,this.uniforms.m,r),s=this._colorMatrix(s)),this.uniforms.m=s},e.prototype._multiply=function(r,n,s){return r[0]=n[0]*s[0]+n[1]*s[5]+n[2]*s[10]+n[3]*s[15],r[1]=n[0]*s[1]+n[1]*s[6]+n[2]*s[11]+n[3]*s[16],r[2]=n[0]*s[2]+n[1]*s[7]+n[2]*s[12]+n[3]*s[17],r[3]=n[0]*s[3]+n[1]*s[8]+n[2]*s[13]+n[3]*s[18],r[4]=n[0]*s[4]+n[1]*s[9]+n[2]*s[14]+n[3]*s[19]+n[4],r[5]=n[5]*s[0]+n[6]*s[5]+n[7]*s[10]+n[8]*s[15],r[6]=n[5]*s[1]+n[6]*s[6]+n[7]*s[11]+n[8]*s[16],r[7]=n[5]*s[2]+n[6]*s[7]+n[7]*s[12]+n[8]*s[17],r[8]=n[5]*s[3]+n[6]*s[8]+n[7]*s[13]+n[8]*s[18],r[9]=n[5]*s[4]+n[6]*s[9]+n[7]*s[14]+n[8]*s[19]+n[9],r[10]=n[10]*s[0]+n[11]*s[5]+n[12]*s[10]+n[13]*s[15],r[11]=n[10]*s[1]+n[11]*s[6]+n[12]*s[11]+n[13]*s[16],r[12]=n[10]*s[2]+n[11]*s[7]+n[12]*s[12]+n[13]*s[17],r[13]=n[10]*s[3]+n[11]*s[8]+n[12]*s[13]+n[13]*s[18],r[14]=n[10]*s[4]+n[11]*s[9]+n[12]*s[14]+n[13]*s[19]+n[14],r[15]=n[15]*s[0]+n[16]*s[5]+n[17]*s[10]+n[18]*s[15],r[16]=n[15]*s[1]+n[16]*s[6]+n[17]*s[11]+n[18]*s[16],r[17]=n[15]*s[2]+n[16]*s[7]+n[17]*s[12]+n[18]*s[17],r[18]=n[15]*s[3]+n[16]*s[8]+n[17]*s[13]+n[18]*s[18],r[19]=n[15]*s[4]+n[16]*s[9]+n[17]*s[14]+n[18]*s[19]+n[19],r},e.prototype._colorMatrix=function(r){var n=new Float32Array(r);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n},e.prototype.brightness=function(r,n){var s=[r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(s,n)},e.prototype.tint=function(r,n){var s=r>>16&255,a=r>>8&255,l=r&255,c=[s/255,0,0,0,0,0,a/255,0,0,0,0,0,l/255,0,0,0,0,0,1,0];this._loadMatrix(c,n)},e.prototype.greyscale=function(r,n){var s=[r,r,r,0,0,r,r,r,0,0,r,r,r,0,0,0,0,0,1,0];this._loadMatrix(s,n)},e.prototype.blackAndWhite=function(r){var n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.hue=function(r,n){r=(r||0)/180*Math.PI;var s=Math.cos(r),a=Math.sin(r),l=Math.sqrt,c=1/3,h=l(c),_=s+(1-s)*c,m=c*(1-s)-h*a,f=c*(1-s)+h*a,p=c*(1-s)+h*a,y=s+c*(1-s),b=c*(1-s)-h*a,T=c*(1-s)-h*a,S=c*(1-s)+h*a,A=s+c*(1-s),R=[_,m,f,0,0,p,y,b,0,0,T,S,A,0,0,0,0,0,1,0];this._loadMatrix(R,n)},e.prototype.contrast=function(r,n){var s=(r||0)+1,a=-.5*(s-1),l=[s,0,0,0,a,0,s,0,0,a,0,0,s,0,a,0,0,0,1,0];this._loadMatrix(l,n)},e.prototype.saturate=function(r,n){r===void 0&&(r=0);var s=r*2/3+1,a=(s-1)*-.5,l=[s,a,a,0,0,a,s,a,0,0,a,a,s,0,0,0,0,0,1,0];this._loadMatrix(l,n)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(r){var n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.sepia=function(r){var n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.technicolor=function(r){var n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.polaroid=function(r){var n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.toBGR=function(r){var n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.kodachrome=function(r){var n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.browni=function(r){var n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.vintage=function(r){var n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.colorTone=function(r,n,s,a,l){r=r||.2,n=n||.15,s=s||16770432,a=a||3375104;var c=(s>>16&255)/255,h=(s>>8&255)/255,_=(s&255)/255,m=(a>>16&255)/255,f=(a>>8&255)/255,p=(a&255)/255,y=[.3,.59,.11,0,0,c,h,_,r,0,m,f,p,n,0,c-m,h-f,_-p,0,0];this._loadMatrix(y,l)},e.prototype.night=function(r,n){r=r||.1;var s=[r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0];this._loadMatrix(s,n)},e.prototype.predator=function(r,n){var s=[11.224130630493164*r,-4.794486999511719*r,-2.8746118545532227*r,0*r,.40342438220977783*r,-3.6330697536468506*r,9.193157196044922*r,-2.951810836791992*r,0*r,-1.316135048866272*r,-3.2184197902679443*r,-4.2375030517578125*r,7.476448059082031*r,0*r,.8044459223747253*r,0,0,0,1,0];this._loadMatrix(s,n)},e.prototype.lsd=function(r){var n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.reset=function(){var r=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(r,!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(r){this.uniforms.m=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),e}(js);i1.prototype.grayscale=i1.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rm=function(i,e){return rm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},rm(i,e)};function gR(i,e){rm(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var xR=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,bR=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;(function(i){gR(e,i);function e(r,n){var s=this,a=new rr;return r.renderable=!1,s=i.call(this,bR,xR,{mapSampler:r._texture,filterMatrix:a,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,s.maskSprite=r,s.maskMatrix=a,n==null&&(n=20),s.scale=new yt(n,n),s}return e.prototype.apply=function(r,n,s,a){this.uniforms.filterMatrix=r.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var l=this.maskSprite.worldTransform,c=Math.sqrt(l.a*l.a+l.b*l.b),h=Math.sqrt(l.c*l.c+l.d*l.d);c!==0&&h!==0&&(this.uniforms.rotation[0]=l.a/c,this.uniforms.rotation[1]=l.b/c,this.uniforms.rotation[2]=l.c/h,this.uniforms.rotation[3]=l.d/h),r.applyFilter(this,n,s,a)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(r){this.uniforms.mapSampler=r},enumerable:!1,configurable:!0}),e})(js);/*!
 * @pixi/filter-fxaa - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nm=function(i,e){return nm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},nm(i,e)};function wR(i,e){nm(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var TR=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,SR=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;(function(i){wR(e,i);function e(){return i.call(this,TR,SR)||this}return e})(js);/*!
 * @pixi/filter-noise - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var im=function(i,e){return im=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},im(i,e)};function ER(i,e){im(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var CR=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;(function(i){ER(e,i);function e(r,n){r===void 0&&(r=.5),n===void 0&&(n=Math.random());var s=i.call(this,Pb,CR,{uNoise:0,uSeed:0})||this;return s.noise=r,s.seed=n,s}return Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(r){this.uniforms.uNoise=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(r){this.uniforms.uSeed=r},enumerable:!1,configurable:!0}),e})(js);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var zb=new rr;yr.prototype._cacheAsBitmap=!1;yr.prototype._cacheData=null;yr.prototype._cacheAsBitmapResolution=null;yr.prototype._cacheAsBitmapMultisample=tr.NONE;var AR=function(){function i(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return i}();Object.defineProperties(yr.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(i){i!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(i){i!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(i){if(this._cacheAsBitmap!==i){this._cacheAsBitmap=i;var e;i?(this._cacheData||(this._cacheData=new AR),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}});yr.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};yr.prototype._initCachedDisplayObject=function(e){var r;if(!(this._cacheData&&this._cacheData.sprite)){var n=this.alpha;this.alpha=1,e.batch.flush();var s=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var a=this.filters[0].padding;s.pad(a)}s.ceil(Xe.RESOLUTION);var l=e.renderTexture.current,c=e.renderTexture.sourceFrame.clone(),h=e.renderTexture.destinationFrame.clone(),_=e.projection.transform,m=To.create({width:s.width,height:s.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:(r=this.cacheAsBitmapMultisample)!==null&&r!==void 0?r:e.multisample}),f="cacheAsBitmap_"+wo();this._cacheData.textureCacheId=f,Pt.addToCache(m.baseTexture,f),it.addToCache(m,f);var p=this.transform.localTransform.copyTo(zb).invert().translate(-s.x,-s.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:m,clear:!0,transform:p,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=_,e.renderTexture.bind(l,c,h),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var y=new Mr(m);y.transform.worldTransform=this.transform.worldTransform,y.anchor.x=-(s.x/s.width),y.anchor.y=-(s.y/s.height),y.alpha=n,y._bounds=this._bounds,this._cacheData.sprite=y,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=y.containsPoint.bind(y)}};yr.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};yr.prototype._initCachedDisplayObjectCanvas=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var r=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var s=e.context,a=e._projTransform;r.ceil(Xe.RESOLUTION);var l=To.create({width:r.width,height:r.height}),c="cacheAsBitmap_"+wo();this._cacheData.textureCacheId=c,Pt.addToCache(l.baseTexture,c),it.addToCache(l,c);var h=zb;this.transform.localTransform.copyTo(h),h.invert(),h.tx-=r.x,h.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:l,clear:!0,transform:h,skipUpdateTransform:!1}),e.context=s,e._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var _=new Mr(l);_.transform.worldTransform=this.transform.worldTransform,_.anchor.x=-(r.x/r.width),_.anchor.y=-(r.y/r.height),_.alpha=n,_._bounds=this._bounds,this._cacheData.sprite=_,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=_.containsPoint.bind(_)}};yr.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};yr.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};yr.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Pt.removeFromCache(this._cacheData.textureCacheId),it.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};yr.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */yr.prototype.name=null;gr.prototype.getChildByName=function(e,r){for(var n=0,s=this.children.length;n<s;n++)if(this.children[n].name===e)return this.children[n];if(r)for(var n=0,s=this.children.length;n<s;n++){var a=this.children[n];if(a.getChildByName){var l=a.getChildByName(e,!0);if(l)return l}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */yr.prototype.getGlobalPosition=function(e,r){return e===void 0&&(e=new yt),r===void 0&&(r=!1),this.parent?this.parent.toGlobal(this.position,e,r):(e.x=this.position.x,e.y=this.position.y),e};/*!
 * @pixi/app - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var PR=function(){function i(){}return i.init=function(e){var r=this;Object.defineProperty(this,"resizeTo",{set:function(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){r._resizeTo&&(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){if(r._resizeTo){r.cancelResize();var n,s;if(r._resizeTo===globalThis.window)n=globalThis.innerWidth,s=globalThis.innerHeight;else{var a=r._resizeTo,l=a.clientWidth,c=a.clientHeight;n=l,s=c}r.renderer.resize(n,s)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},i.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},i.extension=Ht.Application,i}(),Xb=function(){function i(e){var r=this;this.stage=new gr,e=Object.assign({forceCanvas:!1},e),this.renderer=rI(e),i._plugins.forEach(function(n){n.init.call(r,e)})}return i.registerPlugin=function(e){Si("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),Bs.add({type:Ht.Application,ref:e})},i.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(i.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),i.prototype.destroy=function(e,r){var n=this,s=i._plugins.slice(0);s.reverse(),s.forEach(function(a){a.destroy.call(n)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null},i._plugins=[],i}();Bs.handleByList(Ht.Application,Xb._plugins);Bs.add(PR);/*!
 * @pixi/mesh-extras - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sm=function(i,e){return sm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},sm(i,e)};function Gl(i,e){sm(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var IR=function(i){Gl(e,i);function e(r,n,s,a){r===void 0&&(r=100),n===void 0&&(n=100),s===void 0&&(s=10),a===void 0&&(a=10);var l=i.call(this)||this;return l.segWidth=s,l.segHeight=a,l.width=r,l.height=n,l.build(),l}return e.prototype.build=function(){for(var r=this.segWidth*this.segHeight,n=[],s=[],a=[],l=this.segWidth-1,c=this.segHeight-1,h=this.width/l,_=this.height/c,m=0;m<r;m++){var f=m%this.segWidth,p=m/this.segWidth|0;n.push(f*h,p*_),s.push(f/l,p/c)}for(var y=l*c,m=0;m<y;m++){var b=m%l,T=m/l|0,S=T*this.segWidth+b,A=T*this.segWidth+b+1,R=(T+1)*this.segWidth+b,L=(T+1)*this.segWidth+b+1;a.push(S,A,R,A,L,R)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(s),this.indexBuffer.data=new Uint16Array(a),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}($f),OR=function(i){Gl(e,i);function e(r,n,s){r===void 0&&(r=200),s===void 0&&(s=0);var a=i.call(this,new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6))||this;return a.points=n,a._width=r,a.textureScale=s,a.build(),a}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var r=this.points;if(r){var n=this.getBuffer("aVertexPosition"),s=this.getBuffer("aTextureCoord"),a=this.getIndex();if(!(r.length<1)){n.data.length/4!==r.length&&(n.data=new Float32Array(r.length*4),s.data=new Float32Array(r.length*4),a.data=new Uint16Array((r.length-1)*6));var l=s.data,c=a.data;l[0]=0,l[1]=0,l[2]=0,l[3]=1;for(var h=0,_=r[0],m=this._width*this.textureScale,f=r.length,p=0;p<f;p++){var y=p*4;if(this.textureScale>0){var b=_.x-r[p].x,T=_.y-r[p].y,S=Math.sqrt(b*b+T*T);_=r[p],h+=S/m}else h=p/(f-1);l[y]=h,l[y+1]=0,l[y+2]=h,l[y+3]=1}for(var A=0,p=0;p<f-1;p++){var y=p*2;c[A++]=y,c[A++]=y+1,c[A++]=y+2,c[A++]=y+2,c[A++]=y+1,c[A++]=y+3}s.update(),a.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var r=this.points;if(!(r.length<1)){for(var n=r[0],s,a=0,l=0,c=this.buffers[0].data,h=r.length,_=0;_<h;_++){var m=r[_],f=_*4;_<r.length-1?s=r[_+1]:s=m,l=-(s.x-n.x),a=s.y-n.y;var p=Math.sqrt(a*a+l*l),y=this.textureScale>0?this.textureScale*this._width/2:this._width/2;a/=p,l/=p,a*=y,l*=y,c[f]=m.x+a,c[f+1]=m.y+l,c[f+2]=m.x-a,c[f+3]=m.y-l,n=m}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}($f),Vb=function(i){Gl(e,i);function e(r,n,s){s===void 0&&(s=0);var a=this,l=new OR(r.height,n,s),c=new Co(r);return s>0&&(r.baseTexture.wrapMode=Gn.REPEAT),a=i.call(this,l,c)||this,a.autoUpdate=!0,a}return e.prototype._render=function(r){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),i.prototype._render.call(this,r)},e}(Eo),Bu=function(i){Gl(e,i);function e(r,n,s){var a=this,l=new IR(r.width,r.height,n,s),c=new Co(it.WHITE);return a=i.call(this,l,c)||this,a.texture=r,a.autoResize=!0,a}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var r=this.geometry,n=this.shader.texture,s=n.width,a=n.height;this.autoResize&&(r.width!==s||r.height!==a)&&(r.width=this.shader.texture.width,r.height=this.shader.texture.height,r.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(r){this.shader.texture!==r&&(this.shader.texture=r,this._textureID=-1,r.baseTexture.valid?this.textureUpdated():r.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(r){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),i.prototype._render.call(this,r)},e.prototype.destroy=function(r){this.shader.texture.off("update",this.textureUpdated,this),i.prototype.destroy.call(this,r)},e}(Eo),qb=function(i){Gl(e,i);function e(r,n,s,a,l){r===void 0&&(r=it.EMPTY);var c=this,h=new $f(n,s,a);h.getBuffer("aVertexPosition").static=!1;var _=new Co(r);return c=i.call(this,h,_,null,l)||this,c.autoUpdate=!0,c}return Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),e.prototype._render=function(r){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),i.prototype._render.call(this,r)},e}(Eo),of=10;(function(i){Gl(e,i);function e(r,n,s,a,l){n===void 0&&(n=of),s===void 0&&(s=of),a===void 0&&(a=of),l===void 0&&(l=of);var c=i.call(this,it.WHITE,4,4)||this;return c._origWidth=r.orig.width,c._origHeight=r.orig.height,c._width=c._origWidth,c._height=c._origHeight,c._leftWidth=n,c._rightWidth=a,c._topHeight=s,c._bottomHeight=l,c.texture=r,c}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var r=this.vertices,n=this._getMinScale();r[9]=r[11]=r[13]=r[15]=this._topHeight*n,r[17]=r[19]=r[21]=r[23]=this._height-this._bottomHeight*n,r[25]=r[27]=r[29]=r[31]=this._height},e.prototype.updateVerticalVertices=function(){var r=this.vertices,n=this._getMinScale();r[2]=r[10]=r[18]=r[26]=this._leftWidth*n,r[4]=r[12]=r[20]=r[28]=this._width-this._rightWidth*n,r[6]=r[14]=r[22]=r[30]=this._width},e.prototype._getMinScale=function(){var r=this._leftWidth+this._rightWidth,n=this._width>r?1:this._width/r,s=this._topHeight+this._bottomHeight,a=this._height>s?1:this._height/s,l=Math.min(n,a);return l},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(r){this._leftWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(r){this._rightWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(r){this._topHeight=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(r){this._bottomHeight=r,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var r=this.texture,n=this.geometry.buffers[1].data;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var s=1/this._origWidth,a=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=s*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-s*this._rightWidth,n[9]=n[11]=n[13]=n[15]=a*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-a*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e})(Bu);/*!
 * @pixi/sprite-animated - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var am=function(i,e){return am=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},am(i,e)};function RR(i,e){am(i,e);function r(){this.constructor=i}i.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(function(i){RR(e,i);function e(r,n){n===void 0&&(n=!0);var s=i.call(this,r[0]instanceof it?r[0]:r[0].texture)||this;return s._textures=null,s._durations=null,s._autoUpdate=n,s._isConnectedToTicker=!1,s.animationSpeed=1,s.loop=!0,s.updateAnchor=!1,s.onComplete=null,s.onFrameChange=null,s.onLoop=null,s._currentTime=0,s._playing=!1,s._previousFrame=null,s.textures=r,s}return e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Yr.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Yr.shared.add(this.update,this,Ls.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(r){this.stop();var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(r){var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(r){if(this._playing){var n=this.animationSpeed*r,s=this.currentFrame;if(this._durations!==null){var a=this._currentTime%1*this._durations[this.currentFrame];for(a+=n/60*1e3;a<0;)this._currentTime--,a+=this._durations[this.currentFrame];var l=Math.sign(this.animationSpeed*r);for(this._currentTime=Math.floor(this._currentTime);a>=this._durations[this.currentFrame];)a-=this._durations[this.currentFrame]*l,this._currentTime+=l;this._currentTime+=a/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):s!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<s?this.onLoop():this.animationSpeed<0&&this.currentFrame>s&&this.onLoop()),this.updateTexture())}},e.prototype.updateTexture=function(){var r=this.currentFrame;this._previousFrame!==r&&(this._previousFrame=r,this._texture=this._textures[r],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(r){this.stop(),i.prototype.destroy.call(this,r),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(r){for(var n=[],s=0;s<r.length;++s)n.push(it.from(r[s]));return new e(n)},e.fromImages=function(r){for(var n=[],s=0;s<r.length;++s)n.push(it.from(r[s]));return new e(n)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(r){if(r[0]instanceof it)this._textures=r,this._durations=null;else{this._textures=[],this._durations=[];for(var n=0;n<r.length;n++)this._textures.push(r[n].texture),this._durations.push(r[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var r=Math.floor(this._currentTime)%this._textures.length;return r<0&&(r+=this._textures.length),r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(Yr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Yr.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e})(Mr);/*!
 * pixi.js - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Bs.add(pI,wI,gI,pO,zO,Ob,KO,lR,jI,cO,hO,VO,NA,OI);var MR={BlurFilter:_R},mf={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var kR=mf.exports,s1;function DR(){return s1||(s1=1,function(i){(function(e,r){i.exports=e.document?r(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return r(n)}})(typeof window<"u"?window:kR,function(e,r){var n=[],s=Object.getPrototypeOf,a=n.slice,l=n.flat?function(v){return n.flat.call(v)}:function(v){return n.concat.apply([],v)},c=n.push,h=n.indexOf,_={},m=_.toString,f=_.hasOwnProperty,p=f.toString,y=p.call(Object),b={},T=function(w){return typeof w=="function"&&typeof w.nodeType!="number"&&typeof w.item!="function"},S=function(w){return w!=null&&w===w.window},A=e.document,R={type:!0,src:!0,nonce:!0,noModule:!0};function L(v,w,P){P=P||A;var O,k,D=P.createElement("script");if(D.text=v,w)for(O in R)k=w[O]||w.getAttribute&&w.getAttribute(O),k&&D.setAttribute(O,k);P.head.appendChild(D).parentNode.removeChild(D)}function V(v){return v==null?v+"":typeof v=="object"||typeof v=="function"?_[m.call(v)]||"object":typeof v}var M="3.7.1",H=/HTML$/i,g=function(v,w){return new g.fn.init(v,w)};g.fn=g.prototype={jquery:M,constructor:g,length:0,toArray:function(){return a.call(this)},get:function(v){return v==null?a.call(this):v<0?this[v+this.length]:this[v]},pushStack:function(v){var w=g.merge(this.constructor(),v);return w.prevObject=this,w},each:function(v){return g.each(this,v)},map:function(v){return this.pushStack(g.map(this,function(w,P){return v.call(w,P,w)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(g.grep(this,function(v,w){return(w+1)%2}))},odd:function(){return this.pushStack(g.grep(this,function(v,w){return w%2}))},eq:function(v){var w=this.length,P=+v+(v<0?w:0);return this.pushStack(P>=0&&P<w?[this[P]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:n.sort,splice:n.splice},g.extend=g.fn.extend=function(){var v,w,P,O,k,D,X=arguments[0]||{},te=1,J=arguments.length,ue=!1;for(typeof X=="boolean"&&(ue=X,X=arguments[te]||{},te++),typeof X!="object"&&!T(X)&&(X={}),te===J&&(X=this,te--);te<J;te++)if((v=arguments[te])!=null)for(w in v)O=v[w],!(w==="__proto__"||X===O)&&(ue&&O&&(g.isPlainObject(O)||(k=Array.isArray(O)))?(P=X[w],k&&!Array.isArray(P)?D=[]:!k&&!g.isPlainObject(P)?D={}:D=P,k=!1,X[w]=g.extend(ue,D,O)):O!==void 0&&(X[w]=O));return X},g.extend({expando:"jQuery"+(M+Math.random()).replace(/\D/g,""),isReady:!0,error:function(v){throw new Error(v)},noop:function(){},isPlainObject:function(v){var w,P;return!v||m.call(v)!=="[object Object]"?!1:(w=s(v),w?(P=f.call(w,"constructor")&&w.constructor,typeof P=="function"&&p.call(P)===y):!0)},isEmptyObject:function(v){var w;for(w in v)return!1;return!0},globalEval:function(v,w,P){L(v,{nonce:w&&w.nonce},P)},each:function(v,w){var P,O=0;if(ne(v))for(P=v.length;O<P&&w.call(v[O],O,v[O])!==!1;O++);else for(O in v)if(w.call(v[O],O,v[O])===!1)break;return v},text:function(v){var w,P="",O=0,k=v.nodeType;if(!k)for(;w=v[O++];)P+=g.text(w);return k===1||k===11?v.textContent:k===9?v.documentElement.textContent:k===3||k===4?v.nodeValue:P},makeArray:function(v,w){var P=w||[];return v!=null&&(ne(Object(v))?g.merge(P,typeof v=="string"?[v]:v):c.call(P,v)),P},inArray:function(v,w,P){return w==null?-1:h.call(w,v,P)},isXMLDoc:function(v){var w=v&&v.namespaceURI,P=v&&(v.ownerDocument||v).documentElement;return!H.test(w||P&&P.nodeName||"HTML")},merge:function(v,w){for(var P=+w.length,O=0,k=v.length;O<P;O++)v[k++]=w[O];return v.length=k,v},grep:function(v,w,P){for(var O,k=[],D=0,X=v.length,te=!P;D<X;D++)O=!w(v[D],D),O!==te&&k.push(v[D]);return k},map:function(v,w,P){var O,k,D=0,X=[];if(ne(v))for(O=v.length;D<O;D++)k=w(v[D],D,P),k!=null&&X.push(k);else for(D in v)k=w(v[D],D,P),k!=null&&X.push(k);return l(X)},guid:1,support:b}),typeof Symbol=="function"&&(g.fn[Symbol.iterator]=n[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(v,w){_["[object "+w+"]"]=w.toLowerCase()});function ne(v){var w=!!v&&"length"in v&&v.length,P=V(v);return T(v)||S(v)?!1:P==="array"||w===0||typeof w=="number"&&w>0&&w-1 in v}function B(v,w){return v.nodeName&&v.nodeName.toLowerCase()===w.toLowerCase()}var Y=n.pop,se=n.sort,re=n.splice,he="[\\x20\\t\\r\\n\\f]",xe=new RegExp("^"+he+"+|((?:^|[^\\\\])(?:\\\\.)*)"+he+"+$","g");g.contains=function(v,w){var P=w&&w.parentNode;return v===P||!!(P&&P.nodeType===1&&(v.contains?v.contains(P):v.compareDocumentPosition&&v.compareDocumentPosition(P)&16))};var Z=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function U(v,w){return w?v==="\0"?"�":v.slice(0,-1)+"\\"+v.charCodeAt(v.length-1).toString(16)+" ":"\\"+v}g.escapeSelector=function(v){return(v+"").replace(Z,U)};var W=A,z=c;(function(){var v,w,P,O,k,D=z,X,te,J,ue,we,Ee=g.expando,me=0,Re=0,ft=ja(),At=ja(),gt=ja(),Pr=ja(),pr=function(K,ae){return K===ae&&(k=!0),0},Xn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Mn="(?:\\\\[\\da-fA-F]{1,6}"+he+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Et="\\["+he+"*("+Mn+")(?:"+he+"*([*^$|!~]?=)"+he+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Mn+"))|)"+he+"*\\]",ls=":("+Mn+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Et+")*)|.*)\\)|)",It=new RegExp(he+"+","g"),Zt=new RegExp("^"+he+"*,"+he+"*"),us=new RegExp("^"+he+"*([>+~]|"+he+")"+he+"*"),$l=new RegExp(he+"|>"),Vn=new RegExp(ls),La=new RegExp("^"+Mn+"$"),kn={ID:new RegExp("^#("+Mn+")"),CLASS:new RegExp("^\\.("+Mn+")"),TAG:new RegExp("^("+Mn+"|[*])"),ATTR:new RegExp("^"+Et),PSEUDO:new RegExp("^"+ls),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+he+"*(even|odd|(([+-]|)(\\d*)n|)"+he+"*(?:([+-]|)"+he+"*(\\d+)|))"+he+"*\\)|)","i"),bool:new RegExp("^(?:"+Xn+")$","i"),needsContext:new RegExp("^"+he+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+he+"*((?:-\\d)?\\d*)"+he+"*\\)|)(?=[^-]|$)","i")},Di=/^(?:input|select|textarea|button)$/i,Ni=/^h\d$/i,mn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Yl=/[+~]/,ci=new RegExp("\\\\[\\da-fA-F]{1,6}"+he+"?|\\\\([^\\r\\n\\f])","g"),hi=function(K,ae){var pe="0x"+K.slice(1)-65536;return ae||(pe<0?String.fromCharCode(pe+65536):String.fromCharCode(pe>>10|55296,pe&1023|56320))},td=function(){Fi()},Kl=Bi(function(K){return K.disabled===!0&&B(K,"fieldset")},{dir:"parentNode",next:"legend"});function Ba(){try{return X.activeElement}catch{}}try{D.apply(n=a.call(W.childNodes),W.childNodes),n[W.childNodes.length].nodeType}catch{D={apply:function(ae,pe){z.apply(ae,a.call(pe))},call:function(ae){z.apply(ae,a.call(arguments,1))}}}function Lt(K,ae,pe,be){var Se,Fe,Be,$e,je,wt,ht,dt=ae&&ae.ownerDocument,xt=ae?ae.nodeType:9;if(pe=pe||[],typeof K!="string"||!K||xt!==1&&xt!==9&&xt!==11)return pe;if(!be&&(Fi(ae),ae=ae||X,J)){if(xt!==11&&(je=mn.exec(K)))if(Se=je[1]){if(xt===9)if(Be=ae.getElementById(Se)){if(Be.id===Se)return D.call(pe,Be),pe}else return pe;else if(dt&&(Be=dt.getElementById(Se))&&Lt.contains(ae,Be)&&Be.id===Se)return D.call(pe,Be),pe}else{if(je[2])return D.apply(pe,ae.getElementsByTagName(K)),pe;if((Se=je[3])&&ae.getElementsByClassName)return D.apply(pe,ae.getElementsByClassName(Se)),pe}if(!Pr[K+" "]&&(!ue||!ue.test(K))){if(ht=K,dt=ae,xt===1&&($l.test(K)||us.test(K))){for(dt=Yl.test(K)&&Ql(ae.parentNode)||ae,(dt!=ae||!b.scope)&&(($e=ae.getAttribute("id"))?$e=g.escapeSelector($e):ae.setAttribute("id",$e=Ee)),wt=ea(K),Fe=wt.length;Fe--;)wt[Fe]=($e?"#"+$e:":scope")+" "+Li(wt[Fe]);ht=wt.join(",")}try{return D.apply(pe,dt.querySelectorAll(ht)),pe}catch{Pr(K,!0)}finally{$e===Ee&&ae.removeAttribute("id")}}}return tu(K.replace(xe,"$1"),ae,pe,be)}function ja(){var K=[];function ae(pe,be){return K.push(pe+" ")>w.cacheLength&&delete ae[K.shift()],ae[pe+" "]=be}return ae}function yn(K){return K[Ee]=!0,K}function cs(K){var ae=X.createElement("fieldset");try{return!!K(ae)}catch{return!1}finally{ae.parentNode&&ae.parentNode.removeChild(ae),ae=null}}function Fc(K){return function(ae){return B(ae,"input")&&ae.type===K}}function Lc(K){return function(ae){return(B(ae,"input")||B(ae,"button"))&&ae.type===K}}function hs(K){return function(ae){return"form"in ae?ae.parentNode&&ae.disabled===!1?"label"in ae?"label"in ae.parentNode?ae.parentNode.disabled===K:ae.disabled===K:ae.isDisabled===K||ae.isDisabled!==!K&&Kl(ae)===K:ae.disabled===K:"label"in ae?ae.disabled===K:!1}}function fs(K){return yn(function(ae){return ae=+ae,yn(function(pe,be){for(var Se,Fe=K([],pe.length,ae),Be=Fe.length;Be--;)pe[Se=Fe[Be]]&&(pe[Se]=!(be[Se]=pe[Se]))})})}function Ql(K){return K&&typeof K.getElementsByTagName<"u"&&K}function Fi(K){var ae,pe=K?K.ownerDocument||K:W;return pe==X||pe.nodeType!==9||!pe.documentElement||(X=pe,te=X.documentElement,J=!g.isXMLDoc(X),we=te.matches||te.webkitMatchesSelector||te.msMatchesSelector,te.msMatchesSelector&&W!=X&&(ae=X.defaultView)&&ae.top!==ae&&ae.addEventListener("unload",td),b.getById=cs(function(be){return te.appendChild(be).id=g.expando,!X.getElementsByName||!X.getElementsByName(g.expando).length}),b.disconnectedMatch=cs(function(be){return we.call(be,"*")}),b.scope=cs(function(){return X.querySelectorAll(":scope")}),b.cssHas=cs(function(){try{return X.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),b.getById?(w.filter.ID=function(be){var Se=be.replace(ci,hi);return function(Fe){return Fe.getAttribute("id")===Se}},w.find.ID=function(be,Se){if(typeof Se.getElementById<"u"&&J){var Fe=Se.getElementById(be);return Fe?[Fe]:[]}}):(w.filter.ID=function(be){var Se=be.replace(ci,hi);return function(Fe){var Be=typeof Fe.getAttributeNode<"u"&&Fe.getAttributeNode("id");return Be&&Be.value===Se}},w.find.ID=function(be,Se){if(typeof Se.getElementById<"u"&&J){var Fe,Be,$e,je=Se.getElementById(be);if(je){if(Fe=je.getAttributeNode("id"),Fe&&Fe.value===be)return[je];for($e=Se.getElementsByName(be),Be=0;je=$e[Be++];)if(Fe=je.getAttributeNode("id"),Fe&&Fe.value===be)return[je]}return[]}}),w.find.TAG=function(be,Se){return typeof Se.getElementsByTagName<"u"?Se.getElementsByTagName(be):Se.querySelectorAll(be)},w.find.CLASS=function(be,Se){if(typeof Se.getElementsByClassName<"u"&&J)return Se.getElementsByClassName(be)},ue=[],cs(function(be){var Se;te.appendChild(be).innerHTML="<a id='"+Ee+"' href='' disabled='disabled'></a><select id='"+Ee+"-\r\\' disabled='disabled'><option selected=''></option></select>",be.querySelectorAll("[selected]").length||ue.push("\\["+he+"*(?:value|"+Xn+")"),be.querySelectorAll("[id~="+Ee+"-]").length||ue.push("~="),be.querySelectorAll("a#"+Ee+"+*").length||ue.push(".#.+[+~]"),be.querySelectorAll(":checked").length||ue.push(":checked"),Se=X.createElement("input"),Se.setAttribute("type","hidden"),be.appendChild(Se).setAttribute("name","D"),te.appendChild(be).disabled=!0,be.querySelectorAll(":disabled").length!==2&&ue.push(":enabled",":disabled"),Se=X.createElement("input"),Se.setAttribute("name",""),be.appendChild(Se),be.querySelectorAll("[name='']").length||ue.push("\\["+he+"*name"+he+"*="+he+`*(?:''|"")`)}),b.cssHas||ue.push(":has"),ue=ue.length&&new RegExp(ue.join("|")),pr=function(be,Se){if(be===Se)return k=!0,0;var Fe=!be.compareDocumentPosition-!Se.compareDocumentPosition;return Fe||(Fe=(be.ownerDocument||be)==(Se.ownerDocument||Se)?be.compareDocumentPosition(Se):1,Fe&1||!b.sortDetached&&Se.compareDocumentPosition(be)===Fe?be===X||be.ownerDocument==W&&Lt.contains(W,be)?-1:Se===X||Se.ownerDocument==W&&Lt.contains(W,Se)?1:O?h.call(O,be)-h.call(O,Se):0:Fe&4?-1:1)}),X}Lt.matches=function(K,ae){return Lt(K,null,null,ae)},Lt.matchesSelector=function(K,ae){if(Fi(K),J&&!Pr[ae+" "]&&(!ue||!ue.test(ae)))try{var pe=we.call(K,ae);if(pe||b.disconnectedMatch||K.document&&K.document.nodeType!==11)return pe}catch{Pr(ae,!0)}return Lt(ae,X,null,[K]).length>0},Lt.contains=function(K,ae){return(K.ownerDocument||K)!=X&&Fi(K),g.contains(K,ae)},Lt.attr=function(K,ae){(K.ownerDocument||K)!=X&&Fi(K);var pe=w.attrHandle[ae.toLowerCase()],be=pe&&f.call(w.attrHandle,ae.toLowerCase())?pe(K,ae,!J):void 0;return be!==void 0?be:K.getAttribute(ae)},Lt.error=function(K){throw new Error("Syntax error, unrecognized expression: "+K)},g.uniqueSort=function(K){var ae,pe=[],be=0,Se=0;if(k=!b.sortStable,O=!b.sortStable&&a.call(K,0),se.call(K,pr),k){for(;ae=K[Se++];)ae===K[Se]&&(be=pe.push(Se));for(;be--;)re.call(K,pe[be],1)}return O=null,K},g.fn.uniqueSort=function(){return this.pushStack(g.uniqueSort(a.apply(this)))},w=g.expr={cacheLength:50,createPseudo:yn,match:kn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(K){return K[1]=K[1].replace(ci,hi),K[3]=(K[3]||K[4]||K[5]||"").replace(ci,hi),K[2]==="~="&&(K[3]=" "+K[3]+" "),K.slice(0,4)},CHILD:function(K){return K[1]=K[1].toLowerCase(),K[1].slice(0,3)==="nth"?(K[3]||Lt.error(K[0]),K[4]=+(K[4]?K[5]+(K[6]||1):2*(K[3]==="even"||K[3]==="odd")),K[5]=+(K[7]+K[8]||K[3]==="odd")):K[3]&&Lt.error(K[0]),K},PSEUDO:function(K){var ae,pe=!K[6]&&K[2];return kn.CHILD.test(K[0])?null:(K[3]?K[2]=K[4]||K[5]||"":pe&&Vn.test(pe)&&(ae=ea(pe,!0))&&(ae=pe.indexOf(")",pe.length-ae)-pe.length)&&(K[0]=K[0].slice(0,ae),K[2]=pe.slice(0,ae)),K.slice(0,3))}},filter:{TAG:function(K){var ae=K.replace(ci,hi).toLowerCase();return K==="*"?function(){return!0}:function(pe){return B(pe,ae)}},CLASS:function(K){var ae=ft[K+" "];return ae||(ae=new RegExp("(^|"+he+")"+K+"("+he+"|$)"))&&ft(K,function(pe){return ae.test(typeof pe.className=="string"&&pe.className||typeof pe.getAttribute<"u"&&pe.getAttribute("class")||"")})},ATTR:function(K,ae,pe){return function(be){var Se=Lt.attr(be,K);return Se==null?ae==="!=":ae?(Se+="",ae==="="?Se===pe:ae==="!="?Se!==pe:ae==="^="?pe&&Se.indexOf(pe)===0:ae==="*="?pe&&Se.indexOf(pe)>-1:ae==="$="?pe&&Se.slice(-pe.length)===pe:ae==="~="?(" "+Se.replace(It," ")+" ").indexOf(pe)>-1:ae==="|="?Se===pe||Se.slice(0,pe.length+1)===pe+"-":!1):!0}},CHILD:function(K,ae,pe,be,Se){var Fe=K.slice(0,3)!=="nth",Be=K.slice(-4)!=="last",$e=ae==="of-type";return be===1&&Se===0?function(je){return!!je.parentNode}:function(je,wt,ht){var dt,xt,st,Gt,vr,xr=Fe!==Be?"nextSibling":"previousSibling",Lr=je.parentNode,gn=$e&&je.nodeName.toLowerCase(),ds=!ht&&!$e,br=!1;if(Lr){if(Fe){for(;xr;){for(st=je;st=st[xr];)if($e?B(st,gn):st.nodeType===1)return!1;vr=xr=K==="only"&&!vr&&"nextSibling"}return!0}if(vr=[Be?Lr.firstChild:Lr.lastChild],Be&&ds){for(xt=Lr[Ee]||(Lr[Ee]={}),dt=xt[K]||[],Gt=dt[0]===me&&dt[1],br=Gt&&dt[2],st=Gt&&Lr.childNodes[Gt];st=++Gt&&st&&st[xr]||(br=Gt=0)||vr.pop();)if(st.nodeType===1&&++br&&st===je){xt[K]=[me,Gt,br];break}}else if(ds&&(xt=je[Ee]||(je[Ee]={}),dt=xt[K]||[],Gt=dt[0]===me&&dt[1],br=Gt),br===!1)for(;(st=++Gt&&st&&st[xr]||(br=Gt=0)||vr.pop())&&!(($e?B(st,gn):st.nodeType===1)&&++br&&(ds&&(xt=st[Ee]||(st[Ee]={}),xt[K]=[me,br]),st===je)););return br-=Se,br===be||br%be===0&&br/be>=0}}},PSEUDO:function(K,ae){var pe,be=w.pseudos[K]||w.setFilters[K.toLowerCase()]||Lt.error("unsupported pseudo: "+K);return be[Ee]?be(ae):be.length>1?(pe=[K,K,"",ae],w.setFilters.hasOwnProperty(K.toLowerCase())?yn(function(Se,Fe){for(var Be,$e=be(Se,ae),je=$e.length;je--;)Be=h.call(Se,$e[je]),Se[Be]=!(Fe[Be]=$e[je])}):function(Se){return be(Se,0,pe)}):be}},pseudos:{not:yn(function(K){var ae=[],pe=[],be=Yo(K.replace(xe,"$1"));return be[Ee]?yn(function(Se,Fe,Be,$e){for(var je,wt=be(Se,null,$e,[]),ht=Se.length;ht--;)(je=wt[ht])&&(Se[ht]=!(Fe[ht]=je))}):function(Se,Fe,Be){return ae[0]=Se,be(ae,null,Be,pe),ae[0]=null,!pe.pop()}}),has:yn(function(K){return function(ae){return Lt(K,ae).length>0}}),contains:yn(function(K){return K=K.replace(ci,hi),function(ae){return(ae.textContent||g.text(ae)).indexOf(K)>-1}}),lang:yn(function(K){return La.test(K||"")||Lt.error("unsupported lang: "+K),K=K.replace(ci,hi).toLowerCase(),function(ae){var pe;do if(pe=J?ae.lang:ae.getAttribute("xml:lang")||ae.getAttribute("lang"))return pe=pe.toLowerCase(),pe===K||pe.indexOf(K+"-")===0;while((ae=ae.parentNode)&&ae.nodeType===1);return!1}}),target:function(K){var ae=e.location&&e.location.hash;return ae&&ae.slice(1)===K.id},root:function(K){return K===te},focus:function(K){return K===Ba()&&X.hasFocus()&&!!(K.type||K.href||~K.tabIndex)},enabled:hs(!1),disabled:hs(!0),checked:function(K){return B(K,"input")&&!!K.checked||B(K,"option")&&!!K.selected},selected:function(K){return K.parentNode&&K.parentNode.selectedIndex,K.selected===!0},empty:function(K){for(K=K.firstChild;K;K=K.nextSibling)if(K.nodeType<6)return!1;return!0},parent:function(K){return!w.pseudos.empty(K)},header:function(K){return Ni.test(K.nodeName)},input:function(K){return Di.test(K.nodeName)},button:function(K){return B(K,"input")&&K.type==="button"||B(K,"button")},text:function(K){var ae;return B(K,"input")&&K.type==="text"&&((ae=K.getAttribute("type"))==null||ae.toLowerCase()==="text")},first:fs(function(){return[0]}),last:fs(function(K,ae){return[ae-1]}),eq:fs(function(K,ae,pe){return[pe<0?pe+ae:pe]}),even:fs(function(K,ae){for(var pe=0;pe<ae;pe+=2)K.push(pe);return K}),odd:fs(function(K,ae){for(var pe=1;pe<ae;pe+=2)K.push(pe);return K}),lt:fs(function(K,ae,pe){var be;for(pe<0?be=pe+ae:pe>ae?be=ae:be=pe;--be>=0;)K.push(be);return K}),gt:fs(function(K,ae,pe){for(var be=pe<0?pe+ae:pe;++be<ae;)K.push(be);return K})}},w.pseudos.nth=w.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[v]=Fc(v);for(v in{submit:!0,reset:!0})w.pseudos[v]=Lc(v);function Zl(){}Zl.prototype=w.filters=w.pseudos,w.setFilters=new Zl;function ea(K,ae){var pe,be,Se,Fe,Be,$e,je,wt=At[K+" "];if(wt)return ae?0:wt.slice(0);for(Be=K,$e=[],je=w.preFilter;Be;){(!pe||(be=Zt.exec(Be)))&&(be&&(Be=Be.slice(be[0].length)||Be),$e.push(Se=[])),pe=!1,(be=us.exec(Be))&&(pe=be.shift(),Se.push({value:pe,type:be[0].replace(xe," ")}),Be=Be.slice(pe.length));for(Fe in w.filter)(be=kn[Fe].exec(Be))&&(!je[Fe]||(be=je[Fe](be)))&&(pe=be.shift(),Se.push({value:pe,type:Fe,matches:be}),Be=Be.slice(pe.length));if(!pe)break}return ae?Be.length:Be?Lt.error(K):At(K,$e).slice(0)}function Li(K){for(var ae=0,pe=K.length,be="";ae<pe;ae++)be+=K[ae].value;return be}function Bi(K,ae,pe){var be=ae.dir,Se=ae.next,Fe=Se||be,Be=pe&&Fe==="parentNode",$e=Re++;return ae.first?function(je,wt,ht){for(;je=je[be];)if(je.nodeType===1||Be)return K(je,wt,ht);return!1}:function(je,wt,ht){var dt,xt,st=[me,$e];if(ht){for(;je=je[be];)if((je.nodeType===1||Be)&&K(je,wt,ht))return!0}else for(;je=je[be];)if(je.nodeType===1||Be)if(xt=je[Ee]||(je[Ee]={}),Se&&B(je,Se))je=je[be]||je;else{if((dt=xt[Fe])&&dt[0]===me&&dt[1]===$e)return st[2]=dt[2];if(xt[Fe]=st,st[2]=K(je,wt,ht))return!0}return!1}}function Jl(K){return K.length>1?function(ae,pe,be){for(var Se=K.length;Se--;)if(!K[Se](ae,pe,be))return!1;return!0}:K[0]}function qo(K,ae,pe){for(var be=0,Se=ae.length;be<Se;be++)Lt(K,ae[be],pe);return pe}function Wo(K,ae,pe,be,Se){for(var Fe,Be=[],$e=0,je=K.length,wt=ae!=null;$e<je;$e++)(Fe=K[$e])&&(!pe||pe(Fe,be,Se))&&(Be.push(Fe),wt&&ae.push($e));return Be}function $o(K,ae,pe,be,Se,Fe){return be&&!be[Ee]&&(be=$o(be)),Se&&!Se[Ee]&&(Se=$o(Se,Fe)),yn(function(Be,$e,je,wt){var ht,dt,xt,st,Gt=[],vr=[],xr=$e.length,Lr=Be||qo(ae||"*",je.nodeType?[je]:je,[]),gn=K&&(Be||!ae)?Wo(Lr,Gt,K,je,wt):Lr;if(pe?(st=Se||(Be?K:xr||be)?[]:$e,pe(gn,st,je,wt)):st=gn,be)for(ht=Wo(st,vr),be(ht,[],je,wt),dt=ht.length;dt--;)(xt=ht[dt])&&(st[vr[dt]]=!(gn[vr[dt]]=xt));if(Be){if(Se||K){if(Se){for(ht=[],dt=st.length;dt--;)(xt=st[dt])&&ht.push(gn[dt]=xt);Se(null,st=[],ht,wt)}for(dt=st.length;dt--;)(xt=st[dt])&&(ht=Se?h.call(Be,xt):Gt[dt])>-1&&(Be[ht]=!($e[ht]=xt))}}else st=Wo(st===$e?st.splice(xr,st.length):st),Se?Se(null,$e,st,wt):D.apply($e,st)})}function Ua(K){for(var ae,pe,be,Se=K.length,Fe=w.relative[K[0].type],Be=Fe||w.relative[" "],$e=Fe?1:0,je=Bi(function(dt){return dt===ae},Be,!0),wt=Bi(function(dt){return h.call(ae,dt)>-1},Be,!0),ht=[function(dt,xt,st){var Gt=!Fe&&(st||xt!=P)||((ae=xt).nodeType?je(dt,xt,st):wt(dt,xt,st));return ae=null,Gt}];$e<Se;$e++)if(pe=w.relative[K[$e].type])ht=[Bi(Jl(ht),pe)];else{if(pe=w.filter[K[$e].type].apply(null,K[$e].matches),pe[Ee]){for(be=++$e;be<Se&&!w.relative[K[be].type];be++);return $o($e>1&&Jl(ht),$e>1&&Li(K.slice(0,$e-1).concat({value:K[$e-2].type===" "?"*":""})).replace(xe,"$1"),pe,$e<be&&Ua(K.slice($e,be)),be<Se&&Ua(K=K.slice(be)),be<Se&&Li(K))}ht.push(pe)}return Jl(ht)}function eu(K,ae){var pe=ae.length>0,be=K.length>0,Se=function(Fe,Be,$e,je,wt){var ht,dt,xt,st=0,Gt="0",vr=Fe&&[],xr=[],Lr=P,gn=Fe||be&&w.find.TAG("*",wt),ds=me+=Lr==null?1:Math.random()||.1,br=gn.length;for(wt&&(P=Be==X||Be||wt);Gt!==br&&(ht=gn[Gt])!=null;Gt++){if(be&&ht){for(dt=0,!Be&&ht.ownerDocument!=X&&(Fi(ht),$e=!J);xt=K[dt++];)if(xt(ht,Be||X,$e)){D.call(je,ht);break}wt&&(me=ds)}pe&&((ht=!xt&&ht)&&st--,Fe&&vr.push(ht))}if(st+=Gt,pe&&Gt!==st){for(dt=0;xt=ae[dt++];)xt(vr,xr,Be,$e);if(Fe){if(st>0)for(;Gt--;)vr[Gt]||xr[Gt]||(xr[Gt]=Y.call(je));xr=Wo(xr)}D.apply(je,xr),wt&&!Fe&&xr.length>0&&st+ae.length>1&&g.uniqueSort(je)}return wt&&(me=ds,P=Lr),vr};return pe?yn(Se):Se}function Yo(K,ae){var pe,be=[],Se=[],Fe=gt[K+" "];if(!Fe){for(ae||(ae=ea(K)),pe=ae.length;pe--;)Fe=Ua(ae[pe]),Fe[Ee]?be.push(Fe):Se.push(Fe);Fe=gt(K,eu(Se,be)),Fe.selector=K}return Fe}function tu(K,ae,pe,be){var Se,Fe,Be,$e,je,wt=typeof K=="function"&&K,ht=!be&&ea(K=wt.selector||K);if(pe=pe||[],ht.length===1){if(Fe=ht[0]=ht[0].slice(0),Fe.length>2&&(Be=Fe[0]).type==="ID"&&ae.nodeType===9&&J&&w.relative[Fe[1].type]){if(ae=(w.find.ID(Be.matches[0].replace(ci,hi),ae)||[])[0],ae)wt&&(ae=ae.parentNode);else return pe;K=K.slice(Fe.shift().value.length)}for(Se=kn.needsContext.test(K)?0:Fe.length;Se--&&(Be=Fe[Se],!w.relative[$e=Be.type]);)if((je=w.find[$e])&&(be=je(Be.matches[0].replace(ci,hi),Yl.test(Fe[0].type)&&Ql(ae.parentNode)||ae))){if(Fe.splice(Se,1),K=be.length&&Li(Fe),!K)return D.apply(pe,be),pe;break}}return(wt||Yo(K,ht))(be,ae,!J,pe,!ae||Yl.test(K)&&Ql(ae.parentNode)||ae),pe}b.sortStable=Ee.split("").sort(pr).join("")===Ee,Fi(),b.sortDetached=cs(function(K){return K.compareDocumentPosition(X.createElement("fieldset"))&1}),g.find=Lt,g.expr[":"]=g.expr.pseudos,g.unique=g.uniqueSort,Lt.compile=Yo,Lt.select=tu,Lt.setDocument=Fi,Lt.tokenize=ea,Lt.escape=g.escapeSelector,Lt.getText=g.text,Lt.isXML=g.isXMLDoc,Lt.selectors=g.expr,Lt.support=g.support,Lt.uniqueSort=g.uniqueSort})();var Q=function(v,w,P){for(var O=[],k=P!==void 0;(v=v[w])&&v.nodeType!==9;)if(v.nodeType===1){if(k&&g(v).is(P))break;O.push(v)}return O},$=function(v,w){for(var P=[];v;v=v.nextSibling)v.nodeType===1&&v!==w&&P.push(v);return P},j=g.expr.match.needsContext,N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function q(v,w,P){return T(w)?g.grep(v,function(O,k){return!!w.call(O,k,O)!==P}):w.nodeType?g.grep(v,function(O){return O===w!==P}):typeof w!="string"?g.grep(v,function(O){return h.call(w,O)>-1!==P}):g.filter(w,v,P)}g.filter=function(v,w,P){var O=w[0];return P&&(v=":not("+v+")"),w.length===1&&O.nodeType===1?g.find.matchesSelector(O,v)?[O]:[]:g.find.matches(v,g.grep(w,function(k){return k.nodeType===1}))},g.fn.extend({find:function(v){var w,P,O=this.length,k=this;if(typeof v!="string")return this.pushStack(g(v).filter(function(){for(w=0;w<O;w++)if(g.contains(k[w],this))return!0}));for(P=this.pushStack([]),w=0;w<O;w++)g.find(v,k[w],P);return O>1?g.uniqueSort(P):P},filter:function(v){return this.pushStack(q(this,v||[],!1))},not:function(v){return this.pushStack(q(this,v||[],!0))},is:function(v){return!!q(this,typeof v=="string"&&j.test(v)?g(v):v||[],!1).length}});var oe,de=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Te=g.fn.init=function(v,w,P){var O,k;if(!v)return this;if(P=P||oe,typeof v=="string")if(v[0]==="<"&&v[v.length-1]===">"&&v.length>=3?O=[null,v,null]:O=de.exec(v),O&&(O[1]||!w))if(O[1]){if(w=w instanceof g?w[0]:w,g.merge(this,g.parseHTML(O[1],w&&w.nodeType?w.ownerDocument||w:A,!0)),N.test(O[1])&&g.isPlainObject(w))for(O in w)T(this[O])?this[O](w[O]):this.attr(O,w[O]);return this}else return k=A.getElementById(O[2]),k&&(this[0]=k,this.length=1),this;else return!w||w.jquery?(w||P).find(v):this.constructor(w).find(v);else{if(v.nodeType)return this[0]=v,this.length=1,this;if(T(v))return P.ready!==void 0?P.ready(v):v(g)}return g.makeArray(v,this)};Te.prototype=g.fn,oe=g(A);var Ae=/^(?:parents|prev(?:Until|All))/,Ie={children:!0,contents:!0,next:!0,prev:!0};g.fn.extend({has:function(v){var w=g(v,this),P=w.length;return this.filter(function(){for(var O=0;O<P;O++)if(g.contains(this,w[O]))return!0})},closest:function(v,w){var P,O=0,k=this.length,D=[],X=typeof v!="string"&&g(v);if(!j.test(v)){for(;O<k;O++)for(P=this[O];P&&P!==w;P=P.parentNode)if(P.nodeType<11&&(X?X.index(P)>-1:P.nodeType===1&&g.find.matchesSelector(P,v))){D.push(P);break}}return this.pushStack(D.length>1?g.uniqueSort(D):D)},index:function(v){return v?typeof v=="string"?h.call(g(v),this[0]):h.call(this,v.jquery?v[0]:v):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(v,w){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(v,w))))},addBack:function(v){return this.add(v==null?this.prevObject:this.prevObject.filter(v))}});function ke(v,w){for(;(v=v[w])&&v.nodeType!==1;);return v}g.each({parent:function(v){var w=v.parentNode;return w&&w.nodeType!==11?w:null},parents:function(v){return Q(v,"parentNode")},parentsUntil:function(v,w,P){return Q(v,"parentNode",P)},next:function(v){return ke(v,"nextSibling")},prev:function(v){return ke(v,"previousSibling")},nextAll:function(v){return Q(v,"nextSibling")},prevAll:function(v){return Q(v,"previousSibling")},nextUntil:function(v,w,P){return Q(v,"nextSibling",P)},prevUntil:function(v,w,P){return Q(v,"previousSibling",P)},siblings:function(v){return $((v.parentNode||{}).firstChild,v)},children:function(v){return $(v.firstChild)},contents:function(v){return v.contentDocument!=null&&s(v.contentDocument)?v.contentDocument:(B(v,"template")&&(v=v.content||v),g.merge([],v.childNodes))}},function(v,w){g.fn[v]=function(P,O){var k=g.map(this,w,P);return v.slice(-5)!=="Until"&&(O=P),O&&typeof O=="string"&&(k=g.filter(O,k)),this.length>1&&(Ie[v]||g.uniqueSort(k),Ae.test(v)&&k.reverse()),this.pushStack(k)}});var Ce=/[^\x20\t\r\n\f]+/g;function He(v){var w={};return g.each(v.match(Ce)||[],function(P,O){w[O]=!0}),w}g.Callbacks=function(v){v=typeof v=="string"?He(v):g.extend({},v);var w,P,O,k,D=[],X=[],te=-1,J=function(){for(k=k||v.once,O=w=!0;X.length;te=-1)for(P=X.shift();++te<D.length;)D[te].apply(P[0],P[1])===!1&&v.stopOnFalse&&(te=D.length,P=!1);v.memory||(P=!1),w=!1,k&&(P?D=[]:D="")},ue={add:function(){return D&&(P&&!w&&(te=D.length-1,X.push(P)),function we(Ee){g.each(Ee,function(me,Re){T(Re)?(!v.unique||!ue.has(Re))&&D.push(Re):Re&&Re.length&&V(Re)!=="string"&&we(Re)})}(arguments),P&&!w&&J()),this},remove:function(){return g.each(arguments,function(we,Ee){for(var me;(me=g.inArray(Ee,D,me))>-1;)D.splice(me,1),me<=te&&te--}),this},has:function(we){return we?g.inArray(we,D)>-1:D.length>0},empty:function(){return D&&(D=[]),this},disable:function(){return k=X=[],D=P="",this},disabled:function(){return!D},lock:function(){return k=X=[],!P&&!w&&(D=P=""),this},locked:function(){return!!k},fireWith:function(we,Ee){return k||(Ee=Ee||[],Ee=[we,Ee.slice?Ee.slice():Ee],X.push(Ee),w||J()),this},fire:function(){return ue.fireWith(this,arguments),this},fired:function(){return!!O}};return ue};function Ge(v){return v}function rt(v){throw v}function qe(v,w,P,O){var k;try{v&&T(k=v.promise)?k.call(v).done(w).fail(P):v&&T(k=v.then)?k.call(v,w,P):w.apply(void 0,[v].slice(O))}catch(D){P.apply(void 0,[D])}}g.extend({Deferred:function(v){var w=[["notify","progress",g.Callbacks("memory"),g.Callbacks("memory"),2],["resolve","done",g.Callbacks("once memory"),g.Callbacks("once memory"),0,"resolved"],["reject","fail",g.Callbacks("once memory"),g.Callbacks("once memory"),1,"rejected"]],P="pending",O={state:function(){return P},always:function(){return k.done(arguments).fail(arguments),this},catch:function(D){return O.then(null,D)},pipe:function(){var D=arguments;return g.Deferred(function(X){g.each(w,function(te,J){var ue=T(D[J[4]])&&D[J[4]];k[J[1]](function(){var we=ue&&ue.apply(this,arguments);we&&T(we.promise)?we.promise().progress(X.notify).done(X.resolve).fail(X.reject):X[J[0]+"With"](this,ue?[we]:arguments)})}),D=null}).promise()},then:function(D,X,te){var J=0;function ue(we,Ee,me,Re){return function(){var ft=this,At=arguments,gt=function(){var pr,Xn;if(!(we<J)){if(pr=me.apply(ft,At),pr===Ee.promise())throw new TypeError("Thenable self-resolution");Xn=pr&&(typeof pr=="object"||typeof pr=="function")&&pr.then,T(Xn)?Re?Xn.call(pr,ue(J,Ee,Ge,Re),ue(J,Ee,rt,Re)):(J++,Xn.call(pr,ue(J,Ee,Ge,Re),ue(J,Ee,rt,Re),ue(J,Ee,Ge,Ee.notifyWith))):(me!==Ge&&(ft=void 0,At=[pr]),(Re||Ee.resolveWith)(ft,At))}},Pr=Re?gt:function(){try{gt()}catch(pr){g.Deferred.exceptionHook&&g.Deferred.exceptionHook(pr,Pr.error),we+1>=J&&(me!==rt&&(ft=void 0,At=[pr]),Ee.rejectWith(ft,At))}};we?Pr():(g.Deferred.getErrorHook?Pr.error=g.Deferred.getErrorHook():g.Deferred.getStackHook&&(Pr.error=g.Deferred.getStackHook()),e.setTimeout(Pr))}}return g.Deferred(function(we){w[0][3].add(ue(0,we,T(te)?te:Ge,we.notifyWith)),w[1][3].add(ue(0,we,T(D)?D:Ge)),w[2][3].add(ue(0,we,T(X)?X:rt))}).promise()},promise:function(D){return D!=null?g.extend(D,O):O}},k={};return g.each(w,function(D,X){var te=X[2],J=X[5];O[X[1]]=te.add,J&&te.add(function(){P=J},w[3-D][2].disable,w[3-D][3].disable,w[0][2].lock,w[0][3].lock),te.add(X[3].fire),k[X[0]]=function(){return k[X[0]+"With"](this===k?void 0:this,arguments),this},k[X[0]+"With"]=te.fireWith}),O.promise(k),v&&v.call(k,k),k},when:function(v){var w=arguments.length,P=w,O=Array(P),k=a.call(arguments),D=g.Deferred(),X=function(te){return function(J){O[te]=this,k[te]=arguments.length>1?a.call(arguments):J,--w||D.resolveWith(O,k)}};if(w<=1&&(qe(v,D.done(X(P)).resolve,D.reject,!w),D.state()==="pending"||T(k[P]&&k[P].then)))return D.then();for(;P--;)qe(k[P],X(P),D.reject);return D.promise()}});var Ve=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;g.Deferred.exceptionHook=function(v,w){e.console&&e.console.warn&&v&&Ve.test(v.name)&&e.console.warn("jQuery.Deferred exception: "+v.message,v.stack,w)},g.readyException=function(v){e.setTimeout(function(){throw v})};var Ue=g.Deferred();g.fn.ready=function(v){return Ue.then(v).catch(function(w){g.readyException(w)}),this},g.extend({isReady:!1,readyWait:1,ready:function(v){(v===!0?--g.readyWait:g.isReady)||(g.isReady=!0,!(v!==!0&&--g.readyWait>0)&&Ue.resolveWith(A,[g]))}}),g.ready.then=Ue.then;function nt(){A.removeEventListener("DOMContentLoaded",nt),e.removeEventListener("load",nt),g.ready()}A.readyState==="complete"||A.readyState!=="loading"&&!A.documentElement.doScroll?e.setTimeout(g.ready):(A.addEventListener("DOMContentLoaded",nt),e.addEventListener("load",nt));var Tt=function(v,w,P,O,k,D,X){var te=0,J=v.length,ue=P==null;if(V(P)==="object"){k=!0;for(te in P)Tt(v,w,te,P[te],!0,D,X)}else if(O!==void 0&&(k=!0,T(O)||(X=!0),ue&&(X?(w.call(v,O),w=null):(ue=w,w=function(we,Ee,me){return ue.call(g(we),me)})),w))for(;te<J;te++)w(v[te],P,X?O:O.call(v[te],te,w(v[te],P)));return k?v:ue?w.call(v):J?w(v[0],P):D},Er=/^-ms-/,hr=/-([a-z])/g;function nr(v,w){return w.toUpperCase()}function Yt(v){return v.replace(Er,"ms-").replace(hr,nr)}var Dr=function(v){return v.nodeType===1||v.nodeType===9||!+v.nodeType};function Nr(){this.expando=g.expando+Nr.uid++}Nr.uid=1,Nr.prototype={cache:function(v){var w=v[this.expando];return w||(w={},Dr(v)&&(v.nodeType?v[this.expando]=w:Object.defineProperty(v,this.expando,{value:w,configurable:!0}))),w},set:function(v,w,P){var O,k=this.cache(v);if(typeof w=="string")k[Yt(w)]=P;else for(O in w)k[Yt(O)]=w[O];return k},get:function(v,w){return w===void 0?this.cache(v):v[this.expando]&&v[this.expando][Yt(w)]},access:function(v,w,P){return w===void 0||w&&typeof w=="string"&&P===void 0?this.get(v,w):(this.set(v,w,P),P!==void 0?P:w)},remove:function(v,w){var P,O=v[this.expando];if(O!==void 0){if(w!==void 0)for(Array.isArray(w)?w=w.map(Yt):(w=Yt(w),w=w in O?[w]:w.match(Ce)||[]),P=w.length;P--;)delete O[w[P]];(w===void 0||g.isEmptyObject(O))&&(v.nodeType?v[this.expando]=void 0:delete v[this.expando])}},hasData:function(v){var w=v[this.expando];return w!==void 0&&!g.isEmptyObject(w)}};var Je=new Nr,Cr=new Nr,Us=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Gs=/[A-Z]/g;function Pi(v){return v==="true"?!0:v==="false"?!1:v==="null"?null:v===+v+""?+v:Us.test(v)?JSON.parse(v):v}function zn(v,w,P){var O;if(P===void 0&&v.nodeType===1)if(O="data-"+w.replace(Gs,"-$&").toLowerCase(),P=v.getAttribute(O),typeof P=="string"){try{P=Pi(P)}catch{}Cr.set(v,w,P)}else P=void 0;return P}g.extend({hasData:function(v){return Cr.hasData(v)||Je.hasData(v)},data:function(v,w,P){return Cr.access(v,w,P)},removeData:function(v,w){Cr.remove(v,w)},_data:function(v,w,P){return Je.access(v,w,P)},_removeData:function(v,w){Je.remove(v,w)}}),g.fn.extend({data:function(v,w){var P,O,k,D=this[0],X=D&&D.attributes;if(v===void 0){if(this.length&&(k=Cr.get(D),D.nodeType===1&&!Je.get(D,"hasDataAttrs"))){for(P=X.length;P--;)X[P]&&(O=X[P].name,O.indexOf("data-")===0&&(O=Yt(O.slice(5)),zn(D,O,k[O])));Je.set(D,"hasDataAttrs",!0)}return k}return typeof v=="object"?this.each(function(){Cr.set(this,v)}):Tt(this,function(te){var J;if(D&&te===void 0)return J=Cr.get(D,v),J!==void 0||(J=zn(D,v),J!==void 0)?J:void 0;this.each(function(){Cr.set(this,v,te)})},null,w,arguments.length>1,null,!0)},removeData:function(v){return this.each(function(){Cr.remove(this,v)})}}),g.extend({queue:function(v,w,P){var O;if(v)return w=(w||"fx")+"queue",O=Je.get(v,w),P&&(!O||Array.isArray(P)?O=Je.access(v,w,g.makeArray(P)):O.push(P)),O||[]},dequeue:function(v,w){w=w||"fx";var P=g.queue(v,w),O=P.length,k=P.shift(),D=g._queueHooks(v,w),X=function(){g.dequeue(v,w)};k==="inprogress"&&(k=P.shift(),O--),k&&(w==="fx"&&P.unshift("inprogress"),delete D.stop,k.call(v,X,D)),!O&&D&&D.empty.fire()},_queueHooks:function(v,w){var P=w+"queueHooks";return Je.get(v,P)||Je.access(v,P,{empty:g.Callbacks("once memory").add(function(){Je.remove(v,[w+"queue",P])})})}}),g.fn.extend({queue:function(v,w){var P=2;return typeof v!="string"&&(w=v,v="fx",P--),arguments.length<P?g.queue(this[0],v):w===void 0?this:this.each(function(){var O=g.queue(this,v,w);g._queueHooks(this,v),v==="fx"&&O[0]!=="inprogress"&&g.dequeue(this,v)})},dequeue:function(v){return this.each(function(){g.dequeue(this,v)})},clearQueue:function(v){return this.queue(v||"fx",[])},promise:function(v,w){var P,O=1,k=g.Deferred(),D=this,X=this.length,te=function(){--O||k.resolveWith(D,[D])};for(typeof v!="string"&&(w=v,v=void 0),v=v||"fx";X--;)P=Je.get(D[X],v+"queueHooks"),P&&P.empty&&(O++,P.empty.add(te));return te(),k.promise(w)}});var ni=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ts=new RegExp("^(?:([+-])=|)("+ni+")([a-z%]*)$","i"),dn=["Top","Right","Bottom","Left"],pn=A.documentElement,Cn=function(v){return g.contains(v.ownerDocument,v)},ve={composed:!0};pn.getRootNode&&(Cn=function(v){return g.contains(v.ownerDocument,v)||v.getRootNode(ve)===v.ownerDocument});var ye=function(v,w){return v=w||v,v.style.display==="none"||v.style.display===""&&Cn(v)&&g.css(v,"display")==="none"};function St(v,w,P,O){var k,D,X=20,te=O?function(){return O.cur()}:function(){return g.css(v,w,"")},J=te(),ue=P&&P[3]||(g.cssNumber[w]?"":"px"),we=v.nodeType&&(g.cssNumber[w]||ue!=="px"&&+J)&&ts.exec(g.css(v,w));if(we&&we[3]!==ue){for(J=J/2,ue=ue||we[3],we=+J||1;X--;)g.style(v,w,we+ue),(1-D)*(1-(D=te()/J||.5))<=0&&(X=0),we=we/D;we=we*2,g.style(v,w,we+ue),P=P||[]}return P&&(we=+we||+J||0,k=P[1]?we+(P[1]+1)*P[2]:+P[2],O&&(O.unit=ue,O.start=we,O.end=k)),k}var Mt={};function Nt(v){var w,P=v.ownerDocument,O=v.nodeName,k=Mt[O];return k||(w=P.body.appendChild(P.createElement(O)),k=g.css(w,"display"),w.parentNode.removeChild(w),k==="none"&&(k="block"),Mt[O]=k,k)}function at(v,w){for(var P,O,k=[],D=0,X=v.length;D<X;D++)O=v[D],O.style&&(P=O.style.display,w?(P==="none"&&(k[D]=Je.get(O,"display")||null,k[D]||(O.style.display="")),O.style.display===""&&ye(O)&&(k[D]=Nt(O))):P!=="none"&&(k[D]="none",Je.set(O,"display",P)));for(D=0;D<X;D++)k[D]!=null&&(v[D].style.display=k[D]);return v}g.fn.extend({show:function(){return at(this,!0)},hide:function(){return at(this)},toggle:function(v){return typeof v=="boolean"?v?this.show():this.hide():this.each(function(){ye(this)?g(this).show():g(this).hide()})}});var fr=/^(?:checkbox|radio)$/i,An=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ar=/^$|^module$|\/(?:java|ecma)script/i;(function(){var v=A.createDocumentFragment(),w=v.appendChild(A.createElement("div")),P=A.createElement("input");P.setAttribute("type","radio"),P.setAttribute("checked","checked"),P.setAttribute("name","t"),w.appendChild(P),b.checkClone=w.cloneNode(!0).cloneNode(!0).lastChild.checked,w.innerHTML="<textarea>x</textarea>",b.noCloneChecked=!!w.cloneNode(!0).lastChild.defaultValue,w.innerHTML="<option></option>",b.option=!!w.lastChild})();var Kt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Kt.tbody=Kt.tfoot=Kt.colgroup=Kt.caption=Kt.thead,Kt.th=Kt.td,b.option||(Kt.optgroup=Kt.option=[1,"<select multiple='multiple'>","</select>"]);function dr(v,w){var P;return typeof v.getElementsByTagName<"u"?P=v.getElementsByTagName(w||"*"):typeof v.querySelectorAll<"u"?P=v.querySelectorAll(w||"*"):P=[],w===void 0||w&&B(v,w)?g.merge([v],P):P}function Pn(v,w){for(var P=0,O=v.length;P<O;P++)Je.set(v[P],"globalEval",!w||Je.get(w[P],"globalEval"))}var Hr=/<|&#?\w+;/;function Hs(v,w,P,O,k){for(var D,X,te,J,ue,we,Ee=w.createDocumentFragment(),me=[],Re=0,ft=v.length;Re<ft;Re++)if(D=v[Re],D||D===0)if(V(D)==="object")g.merge(me,D.nodeType?[D]:D);else if(!Hr.test(D))me.push(w.createTextNode(D));else{for(X=X||Ee.appendChild(w.createElement("div")),te=(An.exec(D)||["",""])[1].toLowerCase(),J=Kt[te]||Kt._default,X.innerHTML=J[1]+g.htmlPrefilter(D)+J[2],we=J[0];we--;)X=X.lastChild;g.merge(me,X.childNodes),X=Ee.firstChild,X.textContent=""}for(Ee.textContent="",Re=0;D=me[Re++];){if(O&&g.inArray(D,O)>-1){k&&k.push(D);continue}if(ue=Cn(D),X=dr(Ee.appendChild(D),"script"),ue&&Pn(X),P)for(we=0;D=X[we++];)Ar.test(D.type||"")&&P.push(D)}return Ee}var ii=/^([^.]*)(?:\.(.+)|)/;function In(){return!0}function Fr(){return!1}function rs(v,w,P,O,k,D){var X,te;if(typeof w=="object"){typeof P!="string"&&(O=O||P,P=void 0);for(te in w)rs(v,te,P,O,w[te],D);return v}if(O==null&&k==null?(k=P,O=P=void 0):k==null&&(typeof P=="string"?(k=O,O=void 0):(k=O,O=P,P=void 0)),k===!1)k=Fr;else if(!k)return v;return D===1&&(X=k,k=function(J){return g().off(J),X.apply(this,arguments)},k.guid=X.guid||(X.guid=g.guid++)),v.each(function(){g.event.add(this,w,k,O,P)})}g.event={global:{},add:function(v,w,P,O,k){var D,X,te,J,ue,we,Ee,me,Re,ft,At,gt=Je.get(v);if(Dr(v))for(P.handler&&(D=P,P=D.handler,k=D.selector),k&&g.find.matchesSelector(pn,k),P.guid||(P.guid=g.guid++),(J=gt.events)||(J=gt.events=Object.create(null)),(X=gt.handle)||(X=gt.handle=function(Pr){return typeof g<"u"&&g.event.triggered!==Pr.type?g.event.dispatch.apply(v,arguments):void 0}),w=(w||"").match(Ce)||[""],ue=w.length;ue--;)te=ii.exec(w[ue])||[],Re=At=te[1],ft=(te[2]||"").split(".").sort(),Re&&(Ee=g.event.special[Re]||{},Re=(k?Ee.delegateType:Ee.bindType)||Re,Ee=g.event.special[Re]||{},we=g.extend({type:Re,origType:At,data:O,handler:P,guid:P.guid,selector:k,needsContext:k&&g.expr.match.needsContext.test(k),namespace:ft.join(".")},D),(me=J[Re])||(me=J[Re]=[],me.delegateCount=0,(!Ee.setup||Ee.setup.call(v,O,ft,X)===!1)&&v.addEventListener&&v.addEventListener(Re,X)),Ee.add&&(Ee.add.call(v,we),we.handler.guid||(we.handler.guid=P.guid)),k?me.splice(me.delegateCount++,0,we):me.push(we),g.event.global[Re]=!0)},remove:function(v,w,P,O,k){var D,X,te,J,ue,we,Ee,me,Re,ft,At,gt=Je.hasData(v)&&Je.get(v);if(!(!gt||!(J=gt.events))){for(w=(w||"").match(Ce)||[""],ue=w.length;ue--;){if(te=ii.exec(w[ue])||[],Re=At=te[1],ft=(te[2]||"").split(".").sort(),!Re){for(Re in J)g.event.remove(v,Re+w[ue],P,O,!0);continue}for(Ee=g.event.special[Re]||{},Re=(O?Ee.delegateType:Ee.bindType)||Re,me=J[Re]||[],te=te[2]&&new RegExp("(^|\\.)"+ft.join("\\.(?:.*\\.|)")+"(\\.|$)"),X=D=me.length;D--;)we=me[D],(k||At===we.origType)&&(!P||P.guid===we.guid)&&(!te||te.test(we.namespace))&&(!O||O===we.selector||O==="**"&&we.selector)&&(me.splice(D,1),we.selector&&me.delegateCount--,Ee.remove&&Ee.remove.call(v,we));X&&!me.length&&((!Ee.teardown||Ee.teardown.call(v,ft,gt.handle)===!1)&&g.removeEvent(v,Re,gt.handle),delete J[Re])}g.isEmptyObject(J)&&Je.remove(v,"handle events")}},dispatch:function(v){var w,P,O,k,D,X,te=new Array(arguments.length),J=g.event.fix(v),ue=(Je.get(this,"events")||Object.create(null))[J.type]||[],we=g.event.special[J.type]||{};for(te[0]=J,w=1;w<arguments.length;w++)te[w]=arguments[w];if(J.delegateTarget=this,!(we.preDispatch&&we.preDispatch.call(this,J)===!1)){for(X=g.event.handlers.call(this,J,ue),w=0;(k=X[w++])&&!J.isPropagationStopped();)for(J.currentTarget=k.elem,P=0;(D=k.handlers[P++])&&!J.isImmediatePropagationStopped();)(!J.rnamespace||D.namespace===!1||J.rnamespace.test(D.namespace))&&(J.handleObj=D,J.data=D.data,O=((g.event.special[D.origType]||{}).handle||D.handler).apply(k.elem,te),O!==void 0&&(J.result=O)===!1&&(J.preventDefault(),J.stopPropagation()));return we.postDispatch&&we.postDispatch.call(this,J),J.result}},handlers:function(v,w){var P,O,k,D,X,te=[],J=w.delegateCount,ue=v.target;if(J&&ue.nodeType&&!(v.type==="click"&&v.button>=1)){for(;ue!==this;ue=ue.parentNode||this)if(ue.nodeType===1&&!(v.type==="click"&&ue.disabled===!0)){for(D=[],X={},P=0;P<J;P++)O=w[P],k=O.selector+" ",X[k]===void 0&&(X[k]=O.needsContext?g(k,this).index(ue)>-1:g.find(k,this,null,[ue]).length),X[k]&&D.push(O);D.length&&te.push({elem:ue,handlers:D})}}return ue=this,J<w.length&&te.push({elem:ue,handlers:w.slice(J)}),te},addProp:function(v,w){Object.defineProperty(g.Event.prototype,v,{enumerable:!0,configurable:!0,get:T(w)?function(){if(this.originalEvent)return w(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[v]},set:function(P){Object.defineProperty(this,v,{enumerable:!0,configurable:!0,writable:!0,value:P})}})},fix:function(v){return v[g.expando]?v:new g.Event(v)},special:{load:{noBubble:!0},click:{setup:function(v){var w=this||v;return fr.test(w.type)&&w.click&&B(w,"input")&&sn(w,"click",!0),!1},trigger:function(v){var w=this||v;return fr.test(w.type)&&w.click&&B(w,"input")&&sn(w,"click"),!0},_default:function(v){var w=v.target;return fr.test(w.type)&&w.click&&B(w,"input")&&Je.get(w,"click")||B(w,"a")}},beforeunload:{postDispatch:function(v){v.result!==void 0&&v.originalEvent&&(v.originalEvent.returnValue=v.result)}}}};function sn(v,w,P){if(!P){Je.get(v,w)===void 0&&g.event.add(v,w,In);return}Je.set(v,w,!1),g.event.add(v,w,{namespace:!1,handler:function(O){var k,D=Je.get(this,w);if(O.isTrigger&1&&this[w]){if(D)(g.event.special[w]||{}).delegateType&&O.stopPropagation();else if(D=a.call(arguments),Je.set(this,w,D),this[w](),k=Je.get(this,w),Je.set(this,w,!1),D!==k)return O.stopImmediatePropagation(),O.preventDefault(),k}else D&&(Je.set(this,w,g.event.trigger(D[0],D.slice(1),this)),O.stopPropagation(),O.isImmediatePropagationStopped=In)}})}g.removeEvent=function(v,w,P){v.removeEventListener&&v.removeEventListener(w,P)},g.Event=function(v,w){if(!(this instanceof g.Event))return new g.Event(v,w);v&&v.type?(this.originalEvent=v,this.type=v.type,this.isDefaultPrevented=v.defaultPrevented||v.defaultPrevented===void 0&&v.returnValue===!1?In:Fr,this.target=v.target&&v.target.nodeType===3?v.target.parentNode:v.target,this.currentTarget=v.currentTarget,this.relatedTarget=v.relatedTarget):this.type=v,w&&g.extend(this,w),this.timeStamp=v&&v.timeStamp||Date.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:Fr,isPropagationStopped:Fr,isImmediatePropagationStopped:Fr,isSimulated:!1,preventDefault:function(){var v=this.originalEvent;this.isDefaultPrevented=In,v&&!this.isSimulated&&v.preventDefault()},stopPropagation:function(){var v=this.originalEvent;this.isPropagationStopped=In,v&&!this.isSimulated&&v.stopPropagation()},stopImmediatePropagation:function(){var v=this.originalEvent;this.isImmediatePropagationStopped=In,v&&!this.isSimulated&&v.stopImmediatePropagation(),this.stopPropagation()}},g.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},g.event.addProp),g.each({focus:"focusin",blur:"focusout"},function(v,w){function P(O){if(A.documentMode){var k=Je.get(this,"handle"),D=g.event.fix(O);D.type=O.type==="focusin"?"focus":"blur",D.isSimulated=!0,k(O),D.target===D.currentTarget&&k(D)}else g.event.simulate(w,O.target,g.event.fix(O))}g.event.special[v]={setup:function(){var O;if(sn(this,v,!0),A.documentMode)O=Je.get(this,w),O||this.addEventListener(w,P),Je.set(this,w,(O||0)+1);else return!1},trigger:function(){return sn(this,v),!0},teardown:function(){var O;if(A.documentMode)O=Je.get(this,w)-1,O?Je.set(this,w,O):(this.removeEventListener(w,P),Je.remove(this,w));else return!1},_default:function(O){return Je.get(O.target,v)},delegateType:w},g.event.special[w]={setup:function(){var O=this.ownerDocument||this.document||this,k=A.documentMode?this:O,D=Je.get(k,w);D||(A.documentMode?this.addEventListener(w,P):O.addEventListener(v,P,!0)),Je.set(k,w,(D||0)+1)},teardown:function(){var O=this.ownerDocument||this.document||this,k=A.documentMode?this:O,D=Je.get(k,w)-1;D?Je.set(k,w,D):(A.documentMode?this.removeEventListener(w,P):O.removeEventListener(v,P,!0),Je.remove(k,w))}}}),g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(v,w){g.event.special[v]={delegateType:w,bindType:w,handle:function(P){var O,k=this,D=P.relatedTarget,X=P.handleObj;return(!D||D!==k&&!g.contains(k,D))&&(P.type=X.origType,O=X.handler.apply(this,arguments),P.type=w),O}}}),g.fn.extend({on:function(v,w,P,O){return rs(this,v,w,P,O)},one:function(v,w,P,O){return rs(this,v,w,P,O,1)},off:function(v,w,P){var O,k;if(v&&v.preventDefault&&v.handleObj)return O=v.handleObj,g(v.delegateTarget).off(O.namespace?O.origType+"."+O.namespace:O.origType,O.selector,O.handler),this;if(typeof v=="object"){for(k in v)this.off(k,w,v[k]);return this}return(w===!1||typeof w=="function")&&(P=w,w=void 0),P===!1&&(P=Fr),this.each(function(){g.event.remove(this,v,P,w)})}});var Ii=/<script|<style|<link/i,Oi=/checked\s*(?:[^=]|=\s*.checked.)/i,zs=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ia(v,w){return B(v,"table")&&B(w.nodeType!==11?w:w.firstChild,"tr")&&g(v).children("tbody")[0]||v}function Oa(v){return v.type=(v.getAttribute("type")!==null)+"/"+v.type,v}function Mo(v){return(v.type||"").slice(0,5)==="true/"?v.type=v.type.slice(5):v.removeAttribute("type"),v}function vn(v,w){var P,O,k,D,X,te,J;if(w.nodeType===1){if(Je.hasData(v)&&(D=Je.get(v),J=D.events,J)){Je.remove(w,"handle events");for(k in J)for(P=0,O=J[k].length;P<O;P++)g.event.add(w,k,J[k][P])}Cr.hasData(v)&&(X=Cr.access(v),te=g.extend({},X),Cr.set(w,te))}}function Ra(v,w){var P=w.nodeName.toLowerCase();P==="input"&&fr.test(v.type)?w.checked=v.checked:(P==="input"||P==="textarea")&&(w.defaultValue=v.defaultValue)}function si(v,w,P,O){w=l(w);var k,D,X,te,J,ue,we=0,Ee=v.length,me=Ee-1,Re=w[0],ft=T(Re);if(ft||Ee>1&&typeof Re=="string"&&!b.checkClone&&Oi.test(Re))return v.each(function(At){var gt=v.eq(At);ft&&(w[0]=Re.call(this,At,gt.html())),si(gt,w,P,O)});if(Ee&&(k=Hs(w,v[0].ownerDocument,!1,v,O),D=k.firstChild,k.childNodes.length===1&&(k=D),D||O)){for(X=g.map(dr(k,"script"),Oa),te=X.length;we<Ee;we++)J=k,we!==me&&(J=g.clone(J,!0,!0),te&&g.merge(X,dr(J,"script"))),P.call(v[we],J,we);if(te)for(ue=X[X.length-1].ownerDocument,g.map(X,Mo),we=0;we<te;we++)J=X[we],Ar.test(J.type||"")&&!Je.access(J,"globalEval")&&g.contains(ue,J)&&(J.src&&(J.type||"").toLowerCase()!=="module"?g._evalUrl&&!J.noModule&&g._evalUrl(J.src,{nonce:J.nonce||J.getAttribute("nonce")},ue):L(J.textContent.replace(zs,""),J,ue))}return v}function Xs(v,w,P){for(var O,k=w?g.filter(w,v):v,D=0;(O=k[D])!=null;D++)!P&&O.nodeType===1&&g.cleanData(dr(O)),O.parentNode&&(P&&Cn(O)&&Pn(dr(O,"script")),O.parentNode.removeChild(O));return v}g.extend({htmlPrefilter:function(v){return v},clone:function(v,w,P){var O,k,D,X,te=v.cloneNode(!0),J=Cn(v);if(!b.noCloneChecked&&(v.nodeType===1||v.nodeType===11)&&!g.isXMLDoc(v))for(X=dr(te),D=dr(v),O=0,k=D.length;O<k;O++)Ra(D[O],X[O]);if(w)if(P)for(D=D||dr(v),X=X||dr(te),O=0,k=D.length;O<k;O++)vn(D[O],X[O]);else vn(v,te);return X=dr(te,"script"),X.length>0&&Pn(X,!J&&dr(v,"script")),te},cleanData:function(v){for(var w,P,O,k=g.event.special,D=0;(P=v[D])!==void 0;D++)if(Dr(P)){if(w=P[Je.expando]){if(w.events)for(O in w.events)k[O]?g.event.remove(P,O):g.removeEvent(P,O,w.handle);P[Je.expando]=void 0}P[Cr.expando]&&(P[Cr.expando]=void 0)}}}),g.fn.extend({detach:function(v){return Xs(this,v,!0)},remove:function(v){return Xs(this,v)},text:function(v){return Tt(this,function(w){return w===void 0?g.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=w)})},null,v,arguments.length)},append:function(){return si(this,arguments,function(v){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var w=Ia(this,v);w.appendChild(v)}})},prepend:function(){return si(this,arguments,function(v){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var w=Ia(this,v);w.insertBefore(v,w.firstChild)}})},before:function(){return si(this,arguments,function(v){this.parentNode&&this.parentNode.insertBefore(v,this)})},after:function(){return si(this,arguments,function(v){this.parentNode&&this.parentNode.insertBefore(v,this.nextSibling)})},empty:function(){for(var v,w=0;(v=this[w])!=null;w++)v.nodeType===1&&(g.cleanData(dr(v,!1)),v.textContent="");return this},clone:function(v,w){return v=v??!1,w=w??v,this.map(function(){return g.clone(this,v,w)})},html:function(v){return Tt(this,function(w){var P=this[0]||{},O=0,k=this.length;if(w===void 0&&P.nodeType===1)return P.innerHTML;if(typeof w=="string"&&!Ii.test(w)&&!Kt[(An.exec(w)||["",""])[1].toLowerCase()]){w=g.htmlPrefilter(w);try{for(;O<k;O++)P=this[O]||{},P.nodeType===1&&(g.cleanData(dr(P,!1)),P.innerHTML=w);P=0}catch{}}P&&this.empty().append(w)},null,v,arguments.length)},replaceWith:function(){var v=[];return si(this,arguments,function(w){var P=this.parentNode;g.inArray(this,v)<0&&(g.cleanData(dr(this)),P&&P.replaceChild(w,this))},v)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(v,w){g.fn[v]=function(P){for(var O,k=[],D=g(P),X=D.length-1,te=0;te<=X;te++)O=te===X?this:this.clone(!0),g(D[te])[w](O),c.apply(k,O.get());return this.pushStack(k)}});var On=new RegExp("^("+ni+")(?!px)[a-z%]+$","i"),ai=/^--/,ns=function(v){var w=v.ownerDocument.defaultView;return(!w||!w.opener)&&(w=e),w.getComputedStyle(v)},Vs=function(v,w,P){var O,k,D={};for(k in w)D[k]=v.style[k],v.style[k]=w[k];O=P.call(v);for(k in w)v.style[k]=D[k];return O},Zf=new RegExp(dn.join("|"),"i");(function(){function v(){if(ue){J.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ue.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",pn.appendChild(J).appendChild(ue);var we=e.getComputedStyle(ue);P=we.top!=="1%",te=w(we.marginLeft)===12,ue.style.right="60%",D=w(we.right)===36,O=w(we.width)===36,ue.style.position="absolute",k=w(ue.offsetWidth/3)===12,pn.removeChild(J),ue=null}}function w(we){return Math.round(parseFloat(we))}var P,O,k,D,X,te,J=A.createElement("div"),ue=A.createElement("div");ue.style&&(ue.style.backgroundClip="content-box",ue.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle=ue.style.backgroundClip==="content-box",g.extend(b,{boxSizingReliable:function(){return v(),O},pixelBoxStyles:function(){return v(),D},pixelPosition:function(){return v(),P},reliableMarginLeft:function(){return v(),te},scrollboxSize:function(){return v(),k},reliableTrDimensions:function(){var we,Ee,me,Re;return X==null&&(we=A.createElement("table"),Ee=A.createElement("tr"),me=A.createElement("div"),we.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ee.style.cssText="box-sizing:content-box;border:1px solid",Ee.style.height="1px",me.style.height="9px",me.style.display="block",pn.appendChild(we).appendChild(Ee).appendChild(me),Re=e.getComputedStyle(Ee),X=parseInt(Re.height,10)+parseInt(Re.borderTopWidth,10)+parseInt(Re.borderBottomWidth,10)===Ee.offsetHeight,pn.removeChild(we)),X}}))})();function Ma(v,w,P){var O,k,D,X,te=ai.test(w),J=v.style;return P=P||ns(v),P&&(X=P.getPropertyValue(w)||P[w],te&&X&&(X=X.replace(xe,"$1")||void 0),X===""&&!Cn(v)&&(X=g.style(v,w)),!b.pixelBoxStyles()&&On.test(X)&&Zf.test(w)&&(O=J.width,k=J.minWidth,D=J.maxWidth,J.minWidth=J.maxWidth=J.width=X,X=P.width,J.width=O,J.minWidth=k,J.maxWidth=D)),X!==void 0?X+"":X}function Qt(v,w){return{get:function(){if(v()){delete this.get;return}return(this.get=w).apply(this,arguments)}}}var xc=["Webkit","Moz","ms"],ko=A.createElement("div").style,zl={};function Do(v){for(var w=v[0].toUpperCase()+v.slice(1),P=xc.length;P--;)if(v=xc[P]+w,v in ko)return v}function Xl(v){var w=g.cssProps[v]||zl[v];return w||(v in ko?v:zl[v]=Do(v)||v)}var bc=/^(none|table(?!-c[ea]).+)/,No={position:"absolute",visibility:"hidden",display:"block"},Rn={letterSpacing:"0",fontWeight:"400"};function wc(v,w,P){var O=ts.exec(w);return O?Math.max(0,O[2]-(P||0))+(O[3]||"px"):w}function an(v,w,P,O,k,D){var X=w==="width"?1:0,te=0,J=0,ue=0;if(P===(O?"border":"content"))return 0;for(;X<4;X+=2)P==="margin"&&(ue+=g.css(v,P+dn[X],!0,k)),O?(P==="content"&&(J-=g.css(v,"padding"+dn[X],!0,k)),P!=="margin"&&(J-=g.css(v,"border"+dn[X]+"Width",!0,k))):(J+=g.css(v,"padding"+dn[X],!0,k),P!=="padding"?J+=g.css(v,"border"+dn[X]+"Width",!0,k):te+=g.css(v,"border"+dn[X]+"Width",!0,k));return!O&&D>=0&&(J+=Math.max(0,Math.ceil(v["offset"+w[0].toUpperCase()+w.slice(1)]-D-J-te-.5))||0),J+ue}function Tc(v,w,P){var O=ns(v),k=!b.boxSizingReliable()||P,D=k&&g.css(v,"boxSizing",!1,O)==="border-box",X=D,te=Ma(v,w,O),J="offset"+w[0].toUpperCase()+w.slice(1);if(On.test(te)){if(!P)return te;te="auto"}return(!b.boxSizingReliable()&&D||!b.reliableTrDimensions()&&B(v,"tr")||te==="auto"||!parseFloat(te)&&g.css(v,"display",!1,O)==="inline")&&v.getClientRects().length&&(D=g.css(v,"boxSizing",!1,O)==="border-box",X=J in v,X&&(te=v[J])),te=parseFloat(te)||0,te+an(v,w,P||(D?"border":"content"),X,O,te)+"px"}g.extend({cssHooks:{opacity:{get:function(v,w){if(w){var P=Ma(v,"opacity");return P===""?"1":P}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(v,w,P,O){if(!(!v||v.nodeType===3||v.nodeType===8||!v.style)){var k,D,X,te=Yt(w),J=ai.test(w),ue=v.style;if(J||(w=Xl(te)),X=g.cssHooks[w]||g.cssHooks[te],P!==void 0){if(D=typeof P,D==="string"&&(k=ts.exec(P))&&k[1]&&(P=St(v,w,k),D="number"),P==null||P!==P)return;D==="number"&&!J&&(P+=k&&k[3]||(g.cssNumber[te]?"":"px")),!b.clearCloneStyle&&P===""&&w.indexOf("background")===0&&(ue[w]="inherit"),(!X||!("set"in X)||(P=X.set(v,P,O))!==void 0)&&(J?ue.setProperty(w,P):ue[w]=P)}else return X&&"get"in X&&(k=X.get(v,!1,O))!==void 0?k:ue[w]}},css:function(v,w,P,O){var k,D,X,te=Yt(w),J=ai.test(w);return J||(w=Xl(te)),X=g.cssHooks[w]||g.cssHooks[te],X&&"get"in X&&(k=X.get(v,!0,P)),k===void 0&&(k=Ma(v,w,O)),k==="normal"&&w in Rn&&(k=Rn[w]),P===""||P?(D=parseFloat(k),P===!0||isFinite(D)?D||0:k):k}}),g.each(["height","width"],function(v,w){g.cssHooks[w]={get:function(P,O,k){if(O)return bc.test(g.css(P,"display"))&&(!P.getClientRects().length||!P.getBoundingClientRect().width)?Vs(P,No,function(){return Tc(P,w,k)}):Tc(P,w,k)},set:function(P,O,k){var D,X=ns(P),te=!b.scrollboxSize()&&X.position==="absolute",J=te||k,ue=J&&g.css(P,"boxSizing",!1,X)==="border-box",we=k?an(P,w,k,ue,X):0;return ue&&te&&(we-=Math.ceil(P["offset"+w[0].toUpperCase()+w.slice(1)]-parseFloat(X[w])-an(P,w,"border",!1,X)-.5)),we&&(D=ts.exec(O))&&(D[3]||"px")!=="px"&&(P.style[w]=O,O=g.css(P,w)),wc(P,O,we)}}}),g.cssHooks.marginLeft=Qt(b.reliableMarginLeft,function(v,w){if(w)return(parseFloat(Ma(v,"marginLeft"))||v.getBoundingClientRect().left-Vs(v,{marginLeft:0},function(){return v.getBoundingClientRect().left}))+"px"}),g.each({margin:"",padding:"",border:"Width"},function(v,w){g.cssHooks[v+w]={expand:function(P){for(var O=0,k={},D=typeof P=="string"?P.split(" "):[P];O<4;O++)k[v+dn[O]+w]=D[O]||D[O-2]||D[0];return k}},v!=="margin"&&(g.cssHooks[v+w].set=wc)}),g.fn.extend({css:function(v,w){return Tt(this,function(P,O,k){var D,X,te={},J=0;if(Array.isArray(O)){for(D=ns(P),X=O.length;J<X;J++)te[O[J]]=g.css(P,O[J],!1,D);return te}return k!==void 0?g.style(P,O,k):g.css(P,O)},v,w,arguments.length>1)}});function Kr(v,w,P,O,k){return new Kr.prototype.init(v,w,P,O,k)}g.Tween=Kr,Kr.prototype={constructor:Kr,init:function(v,w,P,O,k,D){this.elem=v,this.prop=P,this.easing=k||g.easing._default,this.options=w,this.start=this.now=this.cur(),this.end=O,this.unit=D||(g.cssNumber[P]?"":"px")},cur:function(){var v=Kr.propHooks[this.prop];return v&&v.get?v.get(this):Kr.propHooks._default.get(this)},run:function(v){var w,P=Kr.propHooks[this.prop];return this.options.duration?this.pos=w=g.easing[this.easing](v,this.options.duration*v,0,1,this.options.duration):this.pos=w=v,this.now=(this.end-this.start)*w+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),P&&P.set?P.set(this):Kr.propHooks._default.set(this),this}},Kr.prototype.init.prototype=Kr.prototype,Kr.propHooks={_default:{get:function(v){var w;return v.elem.nodeType!==1||v.elem[v.prop]!=null&&v.elem.style[v.prop]==null?v.elem[v.prop]:(w=g.css(v.elem,v.prop,""),!w||w==="auto"?0:w)},set:function(v){g.fx.step[v.prop]?g.fx.step[v.prop](v):v.elem.nodeType===1&&(g.cssHooks[v.prop]||v.elem.style[Xl(v.prop)]!=null)?g.style(v.elem,v.prop,v.now+v.unit):v.elem[v.prop]=v.now}}},Kr.propHooks.scrollTop=Kr.propHooks.scrollLeft={set:function(v){v.elem.nodeType&&v.elem.parentNode&&(v.elem[v.prop]=v.now)}},g.easing={linear:function(v){return v},swing:function(v){return .5-Math.cos(v*Math.PI)/2},_default:"swing"},g.fx=Kr.prototype.init,g.fx.step={};var qs,is,Fo=/^(?:toggle|show|hide)$/,ka=/queueHooks$/;function Ws(){is&&(A.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Ws):e.setTimeout(Ws,g.fx.interval),g.fx.tick())}function Sc(){return e.setTimeout(function(){qs=void 0}),qs=Date.now()}function Lo(v,w){var P,O=0,k={height:v};for(w=w?1:0;O<4;O+=2-w)P=dn[O],k["margin"+P]=k["padding"+P]=v;return w&&(k.opacity=k.width=v),k}function Bo(v,w,P){for(var O,k=(zr.tweeners[w]||[]).concat(zr.tweeners["*"]),D=0,X=k.length;D<X;D++)if(O=k[D].call(P,w,v))return O}function Ec(v,w,P){var O,k,D,X,te,J,ue,we,Ee="width"in w||"height"in w,me=this,Re={},ft=v.style,At=v.nodeType&&ye(v),gt=Je.get(v,"fxshow");P.queue||(X=g._queueHooks(v,"fx"),X.unqueued==null&&(X.unqueued=0,te=X.empty.fire,X.empty.fire=function(){X.unqueued||te()}),X.unqueued++,me.always(function(){me.always(function(){X.unqueued--,g.queue(v,"fx").length||X.empty.fire()})}));for(O in w)if(k=w[O],Fo.test(k)){if(delete w[O],D=D||k==="toggle",k===(At?"hide":"show"))if(k==="show"&&gt&&gt[O]!==void 0)At=!0;else continue;Re[O]=gt&&gt[O]||g.style(v,O)}if(J=!g.isEmptyObject(w),!(!J&&g.isEmptyObject(Re))){Ee&&v.nodeType===1&&(P.overflow=[ft.overflow,ft.overflowX,ft.overflowY],ue=gt&&gt.display,ue==null&&(ue=Je.get(v,"display")),we=g.css(v,"display"),we==="none"&&(ue?we=ue:(at([v],!0),ue=v.style.display||ue,we=g.css(v,"display"),at([v]))),(we==="inline"||we==="inline-block"&&ue!=null)&&g.css(v,"float")==="none"&&(J||(me.done(function(){ft.display=ue}),ue==null&&(we=ft.display,ue=we==="none"?"":we)),ft.display="inline-block")),P.overflow&&(ft.overflow="hidden",me.always(function(){ft.overflow=P.overflow[0],ft.overflowX=P.overflow[1],ft.overflowY=P.overflow[2]})),J=!1;for(O in Re)J||(gt?"hidden"in gt&&(At=gt.hidden):gt=Je.access(v,"fxshow",{display:ue}),D&&(gt.hidden=!At),At&&at([v],!0),me.done(function(){At||at([v]),Je.remove(v,"fxshow");for(O in Re)g.style(v,O,Re[O])})),J=Bo(At?gt[O]:0,O,me),O in gt||(gt[O]=J.start,At&&(J.end=J.start,J.start=0))}}function Vl(v,w){var P,O,k,D,X;for(P in v)if(O=Yt(P),k=w[O],D=v[P],Array.isArray(D)&&(k=D[1],D=v[P]=D[0]),P!==O&&(v[O]=D,delete v[P]),X=g.cssHooks[O],X&&"expand"in X){D=X.expand(D),delete v[O];for(P in D)P in v||(v[P]=D[P],w[P]=k)}else w[O]=k}function zr(v,w,P){var O,k,D=0,X=zr.prefilters.length,te=g.Deferred().always(function(){delete J.elem}),J=function(){if(k)return!1;for(var Ee=qs||Sc(),me=Math.max(0,ue.startTime+ue.duration-Ee),Re=me/ue.duration||0,ft=1-Re,At=0,gt=ue.tweens.length;At<gt;At++)ue.tweens[At].run(ft);return te.notifyWith(v,[ue,ft,me]),ft<1&&gt?me:(gt||te.notifyWith(v,[ue,1,0]),te.resolveWith(v,[ue]),!1)},ue=te.promise({elem:v,props:g.extend({},w),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},P),originalProperties:w,originalOptions:P,startTime:qs||Sc(),duration:P.duration,tweens:[],createTween:function(Ee,me){var Re=g.Tween(v,ue.opts,Ee,me,ue.opts.specialEasing[Ee]||ue.opts.easing);return ue.tweens.push(Re),Re},stop:function(Ee){var me=0,Re=Ee?ue.tweens.length:0;if(k)return this;for(k=!0;me<Re;me++)ue.tweens[me].run(1);return Ee?(te.notifyWith(v,[ue,1,0]),te.resolveWith(v,[ue,Ee])):te.rejectWith(v,[ue,Ee]),this}}),we=ue.props;for(Vl(we,ue.opts.specialEasing);D<X;D++)if(O=zr.prefilters[D].call(ue,v,we,ue.opts),O)return T(O.stop)&&(g._queueHooks(ue.elem,ue.opts.queue).stop=O.stop.bind(O)),O;return g.map(we,Bo,ue),T(ue.opts.start)&&ue.opts.start.call(v,ue),ue.progress(ue.opts.progress).done(ue.opts.done,ue.opts.complete).fail(ue.opts.fail).always(ue.opts.always),g.fx.timer(g.extend(J,{elem:v,anim:ue,queue:ue.opts.queue})),ue}g.Animation=g.extend(zr,{tweeners:{"*":[function(v,w){var P=this.createTween(v,w);return St(P.elem,v,ts.exec(w),P),P}]},tweener:function(v,w){T(v)?(w=v,v=["*"]):v=v.match(Ce);for(var P,O=0,k=v.length;O<k;O++)P=v[O],zr.tweeners[P]=zr.tweeners[P]||[],zr.tweeners[P].unshift(w)},prefilters:[Ec],prefilter:function(v,w){w?zr.prefilters.unshift(v):zr.prefilters.push(v)}}),g.speed=function(v,w,P){var O=v&&typeof v=="object"?g.extend({},v):{complete:P||!P&&w||T(v)&&v,duration:v,easing:P&&w||w&&!T(w)&&w};return g.fx.off?O.duration=0:typeof O.duration!="number"&&(O.duration in g.fx.speeds?O.duration=g.fx.speeds[O.duration]:O.duration=g.fx.speeds._default),(O.queue==null||O.queue===!0)&&(O.queue="fx"),O.old=O.complete,O.complete=function(){T(O.old)&&O.old.call(this),O.queue&&g.dequeue(this,O.queue)},O},g.fn.extend({fadeTo:function(v,w,P,O){return this.filter(ye).css("opacity",0).show().end().animate({opacity:w},v,P,O)},animate:function(v,w,P,O){var k=g.isEmptyObject(v),D=g.speed(w,P,O),X=function(){var te=zr(this,g.extend({},v),D);(k||Je.get(this,"finish"))&&te.stop(!0)};return X.finish=X,k||D.queue===!1?this.each(X):this.queue(D.queue,X)},stop:function(v,w,P){var O=function(k){var D=k.stop;delete k.stop,D(P)};return typeof v!="string"&&(P=w,w=v,v=void 0),w&&this.queue(v||"fx",[]),this.each(function(){var k=!0,D=v!=null&&v+"queueHooks",X=g.timers,te=Je.get(this);if(D)te[D]&&te[D].stop&&O(te[D]);else for(D in te)te[D]&&te[D].stop&&ka.test(D)&&O(te[D]);for(D=X.length;D--;)X[D].elem===this&&(v==null||X[D].queue===v)&&(X[D].anim.stop(P),k=!1,X.splice(D,1));(k||!P)&&g.dequeue(this,v)})},finish:function(v){return v!==!1&&(v=v||"fx"),this.each(function(){var w,P=Je.get(this),O=P[v+"queue"],k=P[v+"queueHooks"],D=g.timers,X=O?O.length:0;for(P.finish=!0,g.queue(this,v,[]),k&&k.stop&&k.stop.call(this,!0),w=D.length;w--;)D[w].elem===this&&D[w].queue===v&&(D[w].anim.stop(!0),D.splice(w,1));for(w=0;w<X;w++)O[w]&&O[w].finish&&O[w].finish.call(this);delete P.finish})}}),g.each(["toggle","show","hide"],function(v,w){var P=g.fn[w];g.fn[w]=function(O,k,D){return O==null||typeof O=="boolean"?P.apply(this,arguments):this.animate(Lo(w,!0),O,k,D)}}),g.each({slideDown:Lo("show"),slideUp:Lo("hide"),slideToggle:Lo("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(v,w){g.fn[v]=function(P,O,k){return this.animate(w,P,O,k)}}),g.timers=[],g.fx.tick=function(){var v,w=0,P=g.timers;for(qs=Date.now();w<P.length;w++)v=P[w],!v()&&P[w]===v&&P.splice(w--,1);P.length||g.fx.stop(),qs=void 0},g.fx.timer=function(v){g.timers.push(v),g.fx.start()},g.fx.interval=13,g.fx.start=function(){is||(is=!0,Ws())},g.fx.stop=function(){is=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(v,w){return v=g.fx&&g.fx.speeds[v]||v,w=w||"fx",this.queue(w,function(P,O){var k=e.setTimeout(P,v);O.stop=function(){e.clearTimeout(k)}})},function(){var v=A.createElement("input"),w=A.createElement("select"),P=w.appendChild(A.createElement("option"));v.type="checkbox",b.checkOn=v.value!=="",b.optSelected=P.selected,v=A.createElement("input"),v.value="t",v.type="radio",b.radioValue=v.value==="t"}();var Cc,ss=g.expr.attrHandle;g.fn.extend({attr:function(v,w){return Tt(this,g.attr,v,w,arguments.length>1)},removeAttr:function(v){return this.each(function(){g.removeAttr(this,v)})}}),g.extend({attr:function(v,w,P){var O,k,D=v.nodeType;if(!(D===3||D===8||D===2)){if(typeof v.getAttribute>"u")return g.prop(v,w,P);if((D!==1||!g.isXMLDoc(v))&&(k=g.attrHooks[w.toLowerCase()]||(g.expr.match.bool.test(w)?Cc:void 0)),P!==void 0){if(P===null){g.removeAttr(v,w);return}return k&&"set"in k&&(O=k.set(v,P,w))!==void 0?O:(v.setAttribute(w,P+""),P)}return k&&"get"in k&&(O=k.get(v,w))!==null?O:(O=g.find.attr(v,w),O??void 0)}},attrHooks:{type:{set:function(v,w){if(!b.radioValue&&w==="radio"&&B(v,"input")){var P=v.value;return v.setAttribute("type",w),P&&(v.value=P),w}}}},removeAttr:function(v,w){var P,O=0,k=w&&w.match(Ce);if(k&&v.nodeType===1)for(;P=k[O++];)v.removeAttribute(P)}}),Cc={set:function(v,w,P){return w===!1?g.removeAttr(v,P):v.setAttribute(P,P),P}},g.each(g.expr.match.bool.source.match(/\w+/g),function(v,w){var P=ss[w]||g.find.attr;ss[w]=function(O,k,D){var X,te,J=k.toLowerCase();return D||(te=ss[J],ss[J]=X,X=P(O,k,D)!=null?J:null,ss[J]=te),X}});var Ft=/^(?:input|select|textarea|button)$/i,Ac=/^(?:a|area)$/i;g.fn.extend({prop:function(v,w){return Tt(this,g.prop,v,w,arguments.length>1)},removeProp:function(v){return this.each(function(){delete this[g.propFix[v]||v]})}}),g.extend({prop:function(v,w,P){var O,k,D=v.nodeType;if(!(D===3||D===8||D===2))return(D!==1||!g.isXMLDoc(v))&&(w=g.propFix[w]||w,k=g.propHooks[w]),P!==void 0?k&&"set"in k&&(O=k.set(v,P,w))!==void 0?O:v[w]=P:k&&"get"in k&&(O=k.get(v,w))!==null?O:v[w]},propHooks:{tabIndex:{get:function(v){var w=g.find.attr(v,"tabindex");return w?parseInt(w,10):Ft.test(v.nodeName)||Ac.test(v.nodeName)&&v.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),b.optSelected||(g.propHooks.selected={get:function(v){var w=v.parentNode;return w&&w.parentNode&&w.parentNode.selectedIndex,null},set:function(v){var w=v.parentNode;w&&(w.selectedIndex,w.parentNode&&w.parentNode.selectedIndex)}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){g.propFix[this.toLowerCase()]=this});function Ri(v){var w=v.match(Ce)||[];return w.join(" ")}function oi(v){return v.getAttribute&&v.getAttribute("class")||""}function jo(v){return Array.isArray(v)?v:typeof v=="string"?v.match(Ce)||[]:[]}g.fn.extend({addClass:function(v){var w,P,O,k,D,X;return T(v)?this.each(function(te){g(this).addClass(v.call(this,te,oi(this)))}):(w=jo(v),w.length?this.each(function(){if(O=oi(this),P=this.nodeType===1&&" "+Ri(O)+" ",P){for(D=0;D<w.length;D++)k=w[D],P.indexOf(" "+k+" ")<0&&(P+=k+" ");X=Ri(P),O!==X&&this.setAttribute("class",X)}}):this)},removeClass:function(v){var w,P,O,k,D,X;return T(v)?this.each(function(te){g(this).removeClass(v.call(this,te,oi(this)))}):arguments.length?(w=jo(v),w.length?this.each(function(){if(O=oi(this),P=this.nodeType===1&&" "+Ri(O)+" ",P){for(D=0;D<w.length;D++)for(k=w[D];P.indexOf(" "+k+" ")>-1;)P=P.replace(" "+k+" "," ");X=Ri(P),O!==X&&this.setAttribute("class",X)}}):this):this.attr("class","")},toggleClass:function(v,w){var P,O,k,D,X=typeof v,te=X==="string"||Array.isArray(v);return T(v)?this.each(function(J){g(this).toggleClass(v.call(this,J,oi(this),w),w)}):typeof w=="boolean"&&te?w?this.addClass(v):this.removeClass(v):(P=jo(v),this.each(function(){if(te)for(D=g(this),k=0;k<P.length;k++)O=P[k],D.hasClass(O)?D.removeClass(O):D.addClass(O);else(v===void 0||X==="boolean")&&(O=oi(this),O&&Je.set(this,"__className__",O),this.setAttribute&&this.setAttribute("class",O||v===!1?"":Je.get(this,"__className__")||""))}))},hasClass:function(v){var w,P,O=0;for(w=" "+v+" ";P=this[O++];)if(P.nodeType===1&&(" "+Ri(oi(P))+" ").indexOf(w)>-1)return!0;return!1}});var Pc=/\r/g;g.fn.extend({val:function(v){var w,P,O,k=this[0];return arguments.length?(O=T(v),this.each(function(D){var X;this.nodeType===1&&(O?X=v.call(this,D,g(this).val()):X=v,X==null?X="":typeof X=="number"?X+="":Array.isArray(X)&&(X=g.map(X,function(te){return te==null?"":te+""})),w=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()],(!w||!("set"in w)||w.set(this,X,"value")===void 0)&&(this.value=X))})):k?(w=g.valHooks[k.type]||g.valHooks[k.nodeName.toLowerCase()],w&&"get"in w&&(P=w.get(k,"value"))!==void 0?P:(P=k.value,typeof P=="string"?P.replace(Pc,""):P??"")):void 0}}),g.extend({valHooks:{option:{get:function(v){var w=g.find.attr(v,"value");return w??Ri(g.text(v))}},select:{get:function(v){var w,P,O,k=v.options,D=v.selectedIndex,X=v.type==="select-one",te=X?null:[],J=X?D+1:k.length;for(D<0?O=J:O=X?D:0;O<J;O++)if(P=k[O],(P.selected||O===D)&&!P.disabled&&(!P.parentNode.disabled||!B(P.parentNode,"optgroup"))){if(w=g(P).val(),X)return w;te.push(w)}return te},set:function(v,w){for(var P,O,k=v.options,D=g.makeArray(w),X=k.length;X--;)O=k[X],(O.selected=g.inArray(g.valHooks.option.get(O),D)>-1)&&(P=!0);return P||(v.selectedIndex=-1),D}}}}),g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(v,w){if(Array.isArray(w))return v.checked=g.inArray(g(v).val(),w)>-1}},b.checkOn||(g.valHooks[this].get=function(v){return v.getAttribute("value")===null?"on":v.value})});var $s=e.location,Uo={guid:Date.now()},Ys=/\?/;g.parseXML=function(v){var w,P;if(!v||typeof v!="string")return null;try{w=new e.DOMParser().parseFromString(v,"text/xml")}catch{}return P=w&&w.getElementsByTagName("parsererror")[0],(!w||P)&&g.error("Invalid XML: "+(P?g.map(P.childNodes,function(O){return O.textContent}).join(`
`):v)),w};var li=/^(?:focusinfocus|focusoutblur)$/,ui=function(v){v.stopPropagation()};g.extend(g.event,{trigger:function(v,w,P,O){var k,D,X,te,J,ue,we,Ee,me=[P||A],Re=f.call(v,"type")?v.type:v,ft=f.call(v,"namespace")?v.namespace.split("."):[];if(D=Ee=X=P=P||A,!(P.nodeType===3||P.nodeType===8)&&!li.test(Re+g.event.triggered)&&(Re.indexOf(".")>-1&&(ft=Re.split("."),Re=ft.shift(),ft.sort()),J=Re.indexOf(":")<0&&"on"+Re,v=v[g.expando]?v:new g.Event(Re,typeof v=="object"&&v),v.isTrigger=O?2:3,v.namespace=ft.join("."),v.rnamespace=v.namespace?new RegExp("(^|\\.)"+ft.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,v.result=void 0,v.target||(v.target=P),w=w==null?[v]:g.makeArray(w,[v]),we=g.event.special[Re]||{},!(!O&&we.trigger&&we.trigger.apply(P,w)===!1))){if(!O&&!we.noBubble&&!S(P)){for(te=we.delegateType||Re,li.test(te+Re)||(D=D.parentNode);D;D=D.parentNode)me.push(D),X=D;X===(P.ownerDocument||A)&&me.push(X.defaultView||X.parentWindow||e)}for(k=0;(D=me[k++])&&!v.isPropagationStopped();)Ee=D,v.type=k>1?te:we.bindType||Re,ue=(Je.get(D,"events")||Object.create(null))[v.type]&&Je.get(D,"handle"),ue&&ue.apply(D,w),ue=J&&D[J],ue&&ue.apply&&Dr(D)&&(v.result=ue.apply(D,w),v.result===!1&&v.preventDefault());return v.type=Re,!O&&!v.isDefaultPrevented()&&(!we._default||we._default.apply(me.pop(),w)===!1)&&Dr(P)&&J&&T(P[Re])&&!S(P)&&(X=P[J],X&&(P[J]=null),g.event.triggered=Re,v.isPropagationStopped()&&Ee.addEventListener(Re,ui),P[Re](),v.isPropagationStopped()&&Ee.removeEventListener(Re,ui),g.event.triggered=void 0,X&&(P[J]=X)),v.result}},simulate:function(v,w,P){var O=g.extend(new g.Event,P,{type:v,isSimulated:!0});g.event.trigger(O,null,w)}}),g.fn.extend({trigger:function(v,w){return this.each(function(){g.event.trigger(v,w,this)})},triggerHandler:function(v,w){var P=this[0];if(P)return g.event.trigger(v,w,P,!0)}});var Mi=/\[\]$/,Ks=/\r?\n/g,Da=/^(?:submit|button|image|reset|file)$/i,ki=/^(?:input|select|textarea|keygen)/i;function ql(v,w,P,O){var k;if(Array.isArray(w))g.each(w,function(D,X){P||Mi.test(v)?O(v,X):ql(v+"["+(typeof X=="object"&&X!=null?D:"")+"]",X,P,O)});else if(!P&&V(w)==="object")for(k in w)ql(v+"["+k+"]",w[k],P,O);else O(v,w)}g.param=function(v,w){var P,O=[],k=function(D,X){var te=T(X)?X():X;O[O.length]=encodeURIComponent(D)+"="+encodeURIComponent(te??"")};if(v==null)return"";if(Array.isArray(v)||v.jquery&&!g.isPlainObject(v))g.each(v,function(){k(this.name,this.value)});else for(P in v)ql(P,v[P],w,k);return O.join("&")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var v=g.prop(this,"elements");return v?g.makeArray(v):this}).filter(function(){var v=this.type;return this.name&&!g(this).is(":disabled")&&ki.test(this.nodeName)&&!Da.test(v)&&(this.checked||!fr.test(v))}).map(function(v,w){var P=g(this).val();return P==null?null:Array.isArray(P)?g.map(P,function(O){return{name:w.name,value:O.replace(Ks,`\r
`)}}):{name:w.name,value:P.replace(Ks,`\r
`)}}).get()}});var Ic=/%20/g,Na=/#.*$/,Jf=/([?&])_=[^&]*/,Oc=/^(.*?):[ \t]*([^\r\n]*)$/mg,Go=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Rc=/^(?:GET|HEAD)$/,ed=/^\/\//,Qs={},as={},os="*/".concat("*"),Zs=A.createElement("a");Zs.href=$s.href;function Mc(v){return function(w,P){typeof w!="string"&&(P=w,w="*");var O,k=0,D=w.toLowerCase().match(Ce)||[];if(T(P))for(;O=D[k++];)O[0]==="+"?(O=O.slice(1)||"*",(v[O]=v[O]||[]).unshift(P)):(v[O]=v[O]||[]).push(P)}}function kc(v,w,P,O){var k={},D=v===as;function X(te){var J;return k[te]=!0,g.each(v[te]||[],function(ue,we){var Ee=we(w,P,O);if(typeof Ee=="string"&&!D&&!k[Ee])return w.dataTypes.unshift(Ee),X(Ee),!1;if(D)return!(J=Ee)}),J}return X(w.dataTypes[0])||!k["*"]&&X("*")}function Fa(v,w){var P,O,k=g.ajaxSettings.flatOptions||{};for(P in w)w[P]!==void 0&&((k[P]?v:O||(O={}))[P]=w[P]);return O&&g.extend(!0,v,O),v}function Ho(v,w,P){for(var O,k,D,X,te=v.contents,J=v.dataTypes;J[0]==="*";)J.shift(),O===void 0&&(O=v.mimeType||w.getResponseHeader("Content-Type"));if(O){for(k in te)if(te[k]&&te[k].test(O)){J.unshift(k);break}}if(J[0]in P)D=J[0];else{for(k in P){if(!J[0]||v.converters[k+" "+J[0]]){D=k;break}X||(X=k)}D=D||X}if(D)return D!==J[0]&&J.unshift(D),P[D]}function Wl(v,w,P,O){var k,D,X,te,J,ue={},we=v.dataTypes.slice();if(we[1])for(X in v.converters)ue[X.toLowerCase()]=v.converters[X];for(D=we.shift();D;)if(v.responseFields[D]&&(P[v.responseFields[D]]=w),!J&&O&&v.dataFilter&&(w=v.dataFilter(w,v.dataType)),J=D,D=we.shift(),D){if(D==="*")D=J;else if(J!=="*"&&J!==D){if(X=ue[J+" "+D]||ue["* "+D],!X){for(k in ue)if(te=k.split(" "),te[1]===D&&(X=ue[J+" "+te[0]]||ue["* "+te[0]],X)){X===!0?X=ue[k]:ue[k]!==!0&&(D=te[0],we.unshift(te[1]));break}}if(X!==!0)if(X&&v.throws)w=X(w);else try{w=X(w)}catch(Ee){return{state:"parsererror",error:X?Ee:"No conversion from "+J+" to "+D}}}}return{state:"success",data:w}}g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:$s.href,type:"GET",isLocal:Go.test($s.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":os,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(v,w){return w?Fa(Fa(v,g.ajaxSettings),w):Fa(g.ajaxSettings,v)},ajaxPrefilter:Mc(Qs),ajaxTransport:Mc(as),ajax:function(v,w){typeof v=="object"&&(w=v,v=void 0),w=w||{};var P,O,k,D,X,te,J,ue,we,Ee,me=g.ajaxSetup({},w),Re=me.context||me,ft=me.context&&(Re.nodeType||Re.jquery)?g(Re):g.event,At=g.Deferred(),gt=g.Callbacks("once memory"),Pr=me.statusCode||{},pr={},Xn={},Mn="canceled",Et={readyState:0,getResponseHeader:function(It){var Zt;if(J){if(!D)for(D={};Zt=Oc.exec(k);)D[Zt[1].toLowerCase()+" "]=(D[Zt[1].toLowerCase()+" "]||[]).concat(Zt[2]);Zt=D[It.toLowerCase()+" "]}return Zt==null?null:Zt.join(", ")},getAllResponseHeaders:function(){return J?k:null},setRequestHeader:function(It,Zt){return J==null&&(It=Xn[It.toLowerCase()]=Xn[It.toLowerCase()]||It,pr[It]=Zt),this},overrideMimeType:function(It){return J==null&&(me.mimeType=It),this},statusCode:function(It){var Zt;if(It)if(J)Et.always(It[Et.status]);else for(Zt in It)Pr[Zt]=[Pr[Zt],It[Zt]];return this},abort:function(It){var Zt=It||Mn;return P&&P.abort(Zt),ls(0,Zt),this}};if(At.promise(Et),me.url=((v||me.url||$s.href)+"").replace(ed,$s.protocol+"//"),me.type=w.method||w.type||me.method||me.type,me.dataTypes=(me.dataType||"*").toLowerCase().match(Ce)||[""],me.crossDomain==null){te=A.createElement("a");try{te.href=me.url,te.href=te.href,me.crossDomain=Zs.protocol+"//"+Zs.host!=te.protocol+"//"+te.host}catch{me.crossDomain=!0}}if(me.data&&me.processData&&typeof me.data!="string"&&(me.data=g.param(me.data,me.traditional)),kc(Qs,me,w,Et),J)return Et;ue=g.event&&me.global,ue&&g.active++===0&&g.event.trigger("ajaxStart"),me.type=me.type.toUpperCase(),me.hasContent=!Rc.test(me.type),O=me.url.replace(Na,""),me.hasContent?me.data&&me.processData&&(me.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(me.data=me.data.replace(Ic,"+")):(Ee=me.url.slice(O.length),me.data&&(me.processData||typeof me.data=="string")&&(O+=(Ys.test(O)?"&":"?")+me.data,delete me.data),me.cache===!1&&(O=O.replace(Jf,"$1"),Ee=(Ys.test(O)?"&":"?")+"_="+Uo.guid+++Ee),me.url=O+Ee),me.ifModified&&(g.lastModified[O]&&Et.setRequestHeader("If-Modified-Since",g.lastModified[O]),g.etag[O]&&Et.setRequestHeader("If-None-Match",g.etag[O])),(me.data&&me.hasContent&&me.contentType!==!1||w.contentType)&&Et.setRequestHeader("Content-Type",me.contentType),Et.setRequestHeader("Accept",me.dataTypes[0]&&me.accepts[me.dataTypes[0]]?me.accepts[me.dataTypes[0]]+(me.dataTypes[0]!=="*"?", "+os+"; q=0.01":""):me.accepts["*"]);for(we in me.headers)Et.setRequestHeader(we,me.headers[we]);if(me.beforeSend&&(me.beforeSend.call(Re,Et,me)===!1||J))return Et.abort();if(Mn="abort",gt.add(me.complete),Et.done(me.success),Et.fail(me.error),P=kc(as,me,w,Et),!P)ls(-1,"No Transport");else{if(Et.readyState=1,ue&&ft.trigger("ajaxSend",[Et,me]),J)return Et;me.async&&me.timeout>0&&(X=e.setTimeout(function(){Et.abort("timeout")},me.timeout));try{J=!1,P.send(pr,ls)}catch(It){if(J)throw It;ls(-1,It)}}function ls(It,Zt,us,$l){var Vn,La,kn,Di,Ni,mn=Zt;J||(J=!0,X&&e.clearTimeout(X),P=void 0,k=$l||"",Et.readyState=It>0?4:0,Vn=It>=200&&It<300||It===304,us&&(Di=Ho(me,Et,us)),!Vn&&g.inArray("script",me.dataTypes)>-1&&g.inArray("json",me.dataTypes)<0&&(me.converters["text script"]=function(){}),Di=Wl(me,Di,Et,Vn),Vn?(me.ifModified&&(Ni=Et.getResponseHeader("Last-Modified"),Ni&&(g.lastModified[O]=Ni),Ni=Et.getResponseHeader("etag"),Ni&&(g.etag[O]=Ni)),It===204||me.type==="HEAD"?mn="nocontent":It===304?mn="notmodified":(mn=Di.state,La=Di.data,kn=Di.error,Vn=!kn)):(kn=mn,(It||!mn)&&(mn="error",It<0&&(It=0))),Et.status=It,Et.statusText=(Zt||mn)+"",Vn?At.resolveWith(Re,[La,mn,Et]):At.rejectWith(Re,[Et,mn,kn]),Et.statusCode(Pr),Pr=void 0,ue&&ft.trigger(Vn?"ajaxSuccess":"ajaxError",[Et,me,Vn?La:kn]),gt.fireWith(Re,[Et,mn]),ue&&(ft.trigger("ajaxComplete",[Et,me]),--g.active||g.event.trigger("ajaxStop")))}return Et},getJSON:function(v,w,P){return g.get(v,w,P,"json")},getScript:function(v,w){return g.get(v,void 0,w,"script")}}),g.each(["get","post"],function(v,w){g[w]=function(P,O,k,D){return T(O)&&(D=D||k,k=O,O=void 0),g.ajax(g.extend({url:P,type:w,dataType:D,data:O,success:k},g.isPlainObject(P)&&P))}}),g.ajaxPrefilter(function(v){var w;for(w in v.headers)w.toLowerCase()==="content-type"&&(v.contentType=v.headers[w]||"")}),g._evalUrl=function(v,w,P){return g.ajax({url:v,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(O){g.globalEval(O,w,P)}})},g.fn.extend({wrapAll:function(v){var w;return this[0]&&(T(v)&&(v=v.call(this[0])),w=g(v,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&w.insertBefore(this[0]),w.map(function(){for(var P=this;P.firstElementChild;)P=P.firstElementChild;return P}).append(this)),this},wrapInner:function(v){return T(v)?this.each(function(w){g(this).wrapInner(v.call(this,w))}):this.each(function(){var w=g(this),P=w.contents();P.length?P.wrapAll(v):w.append(v)})},wrap:function(v){var w=T(v);return this.each(function(P){g(this).wrapAll(w?v.call(this,P):v)})},unwrap:function(v){return this.parent(v).not("body").each(function(){g(this).replaceWith(this.childNodes)}),this}}),g.expr.pseudos.hidden=function(v){return!g.expr.pseudos.visible(v)},g.expr.pseudos.visible=function(v){return!!(v.offsetWidth||v.offsetHeight||v.getClientRects().length)},g.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Dc={0:200,1223:204},_n=g.ajaxSettings.xhr();b.cors=!!_n&&"withCredentials"in _n,b.ajax=_n=!!_n,g.ajaxTransport(function(v){var w,P;if(b.cors||_n&&!v.crossDomain)return{send:function(O,k){var D,X=v.xhr();if(X.open(v.type,v.url,v.async,v.username,v.password),v.xhrFields)for(D in v.xhrFields)X[D]=v.xhrFields[D];v.mimeType&&X.overrideMimeType&&X.overrideMimeType(v.mimeType),!v.crossDomain&&!O["X-Requested-With"]&&(O["X-Requested-With"]="XMLHttpRequest");for(D in O)X.setRequestHeader(D,O[D]);w=function(te){return function(){w&&(w=P=X.onload=X.onerror=X.onabort=X.ontimeout=X.onreadystatechange=null,te==="abort"?X.abort():te==="error"?typeof X.status!="number"?k(0,"error"):k(X.status,X.statusText):k(Dc[X.status]||X.status,X.statusText,(X.responseType||"text")!=="text"||typeof X.responseText!="string"?{binary:X.response}:{text:X.responseText},X.getAllResponseHeaders()))}},X.onload=w(),P=X.onerror=X.ontimeout=w("error"),X.onabort!==void 0?X.onabort=P:X.onreadystatechange=function(){X.readyState===4&&e.setTimeout(function(){w&&P()})},w=w("abort");try{X.send(v.hasContent&&v.data||null)}catch(te){if(w)throw te}},abort:function(){w&&w()}}}),g.ajaxPrefilter(function(v){v.crossDomain&&(v.contents.script=!1)}),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(v){return g.globalEval(v),v}}}),g.ajaxPrefilter("script",function(v){v.cache===void 0&&(v.cache=!1),v.crossDomain&&(v.type="GET")}),g.ajaxTransport("script",function(v){if(v.crossDomain||v.scriptAttrs){var w,P;return{send:function(O,k){w=g("<script>").attr(v.scriptAttrs||{}).prop({charset:v.scriptCharset,src:v.url}).on("load error",P=function(D){w.remove(),P=null,D&&k(D.type==="error"?404:200,D.type)}),A.head.appendChild(w[0])},abort:function(){P&&P()}}}});var zo=[],Js=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var v=zo.pop()||g.expando+"_"+Uo.guid++;return this[v]=!0,v}}),g.ajaxPrefilter("json jsonp",function(v,w,P){var O,k,D,X=v.jsonp!==!1&&(Js.test(v.url)?"url":typeof v.data=="string"&&(v.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Js.test(v.data)&&"data");if(X||v.dataTypes[0]==="jsonp")return O=v.jsonpCallback=T(v.jsonpCallback)?v.jsonpCallback():v.jsonpCallback,X?v[X]=v[X].replace(Js,"$1"+O):v.jsonp!==!1&&(v.url+=(Ys.test(v.url)?"&":"?")+v.jsonp+"="+O),v.converters["script json"]=function(){return D||g.error(O+" was not called"),D[0]},v.dataTypes[0]="json",k=e[O],e[O]=function(){D=arguments},P.always(function(){k===void 0?g(e).removeProp(O):e[O]=k,v[O]&&(v.jsonpCallback=w.jsonpCallback,zo.push(O)),D&&T(k)&&k(D[0]),D=k=void 0}),"script"}),b.createHTMLDocument=function(){var v=A.implementation.createHTMLDocument("").body;return v.innerHTML="<form></form><form></form>",v.childNodes.length===2}(),g.parseHTML=function(v,w,P){if(typeof v!="string")return[];typeof w=="boolean"&&(P=w,w=!1);var O,k,D;return w||(b.createHTMLDocument?(w=A.implementation.createHTMLDocument(""),O=w.createElement("base"),O.href=A.location.href,w.head.appendChild(O)):w=A),k=N.exec(v),D=!P&&[],k?[w.createElement(k[1])]:(k=Hs([v],w,D),D&&D.length&&g(D).remove(),g.merge([],k.childNodes))},g.fn.load=function(v,w,P){var O,k,D,X=this,te=v.indexOf(" ");return te>-1&&(O=Ri(v.slice(te)),v=v.slice(0,te)),T(w)?(P=w,w=void 0):w&&typeof w=="object"&&(k="POST"),X.length>0&&g.ajax({url:v,type:k||"GET",dataType:"html",data:w}).done(function(J){D=arguments,X.html(O?g("<div>").append(g.parseHTML(J)).find(O):J)}).always(P&&function(J,ue){X.each(function(){P.apply(this,D||[J.responseText,ue,J])})}),this},g.expr.pseudos.animated=function(v){return g.grep(g.timers,function(w){return v===w.elem}).length},g.offset={setOffset:function(v,w,P){var O,k,D,X,te,J,ue,we=g.css(v,"position"),Ee=g(v),me={};we==="static"&&(v.style.position="relative"),te=Ee.offset(),D=g.css(v,"top"),J=g.css(v,"left"),ue=(we==="absolute"||we==="fixed")&&(D+J).indexOf("auto")>-1,ue?(O=Ee.position(),X=O.top,k=O.left):(X=parseFloat(D)||0,k=parseFloat(J)||0),T(w)&&(w=w.call(v,P,g.extend({},te))),w.top!=null&&(me.top=w.top-te.top+X),w.left!=null&&(me.left=w.left-te.left+k),"using"in w?w.using.call(v,me):Ee.css(me)}},g.fn.extend({offset:function(v){if(arguments.length)return v===void 0?this:this.each(function(k){g.offset.setOffset(this,v,k)});var w,P,O=this[0];if(O)return O.getClientRects().length?(w=O.getBoundingClientRect(),P=O.ownerDocument.defaultView,{top:w.top+P.pageYOffset,left:w.left+P.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var v,w,P,O=this[0],k={top:0,left:0};if(g.css(O,"position")==="fixed")w=O.getBoundingClientRect();else{for(w=this.offset(),P=O.ownerDocument,v=O.offsetParent||P.documentElement;v&&(v===P.body||v===P.documentElement)&&g.css(v,"position")==="static";)v=v.parentNode;v&&v!==O&&v.nodeType===1&&(k=g(v).offset(),k.top+=g.css(v,"borderTopWidth",!0),k.left+=g.css(v,"borderLeftWidth",!0))}return{top:w.top-k.top-g.css(O,"marginTop",!0),left:w.left-k.left-g.css(O,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var v=this.offsetParent;v&&g.css(v,"position")==="static";)v=v.offsetParent;return v||pn})}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(v,w){var P=w==="pageYOffset";g.fn[v]=function(O){return Tt(this,function(k,D,X){var te;if(S(k)?te=k:k.nodeType===9&&(te=k.defaultView),X===void 0)return te?te[w]:k[D];te?te.scrollTo(P?te.pageXOffset:X,P?X:te.pageYOffset):k[D]=X},v,O,arguments.length)}}),g.each(["top","left"],function(v,w){g.cssHooks[w]=Qt(b.pixelPosition,function(P,O){if(O)return O=Ma(P,w),On.test(O)?g(P).position()[w]+"px":O})}),g.each({Height:"height",Width:"width"},function(v,w){g.each({padding:"inner"+v,content:w,"":"outer"+v},function(P,O){g.fn[O]=function(k,D){var X=arguments.length&&(P||typeof k!="boolean"),te=P||(k===!0||D===!0?"margin":"border");return Tt(this,function(J,ue,we){var Ee;return S(J)?O.indexOf("outer")===0?J["inner"+v]:J.document.documentElement["client"+v]:J.nodeType===9?(Ee=J.documentElement,Math.max(J.body["scroll"+v],Ee["scroll"+v],J.body["offset"+v],Ee["offset"+v],Ee["client"+v])):we===void 0?g.css(J,ue,te):g.style(J,ue,we,te)},w,X?k:void 0,X)}})}),g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(v,w){g.fn[w]=function(P){return this.on(w,P)}}),g.fn.extend({bind:function(v,w,P){return this.on(v,null,w,P)},unbind:function(v,w){return this.off(v,null,w)},delegate:function(v,w,P,O){return this.on(w,v,P,O)},undelegate:function(v,w,P){return arguments.length===1?this.off(v,"**"):this.off(w,v||"**",P)},hover:function(v,w){return this.on("mouseenter",v).on("mouseleave",w||v)}}),g.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(v,w){g.fn[w]=function(P,O){return arguments.length>0?this.on(w,null,P,O):this.trigger(w)}});var Nc=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;g.proxy=function(v,w){var P,O,k;if(typeof w=="string"&&(P=v[w],w=v,v=P),!!T(v))return O=a.call(arguments,2),k=function(){return v.apply(w||this,O.concat(a.call(arguments)))},k.guid=v.guid=v.guid||g.guid++,k},g.holdReady=function(v){v?g.readyWait++:g.ready(!0)},g.isArray=Array.isArray,g.parseJSON=JSON.parse,g.nodeName=B,g.isFunction=T,g.isWindow=S,g.camelCase=Yt,g.type=V,g.now=Date.now,g.isNumeric=function(v){var w=g.type(v);return(w==="number"||w==="string")&&!isNaN(v-parseFloat(v))},g.trim=function(v){return v==null?"":(v+"").replace(Nc,"$1")};var Xo=e.jQuery,Vo=e.$;return g.noConflict=function(v){return e.$===g&&(e.$=Vo),v&&e.jQuery===g&&(e.jQuery=Xo),g},typeof r>"u"&&(e.jQuery=e.$=g),g})}(mf)),mf.exports}var NR=DR();const Ne=Fl(NR);var Jv={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var a1;function FR(){return a1||(a1=1,function(i){(function(){var e=function(){this.init()};e.prototype={init:function(){var f=this||r;return f._counter=1e3,f._html5AudioPool=[],f.html5PoolSize=10,f._codecs={},f._howls=[],f._muted=!1,f._volume=1,f._canPlayEvent="canplaythrough",f._navigator=typeof window<"u"&&window.navigator?window.navigator:null,f.masterGain=null,f.noAudio=!1,f.usingWebAudio=!0,f.autoSuspend=!0,f.ctx=null,f.autoUnlock=!0,f._setup(),f},volume:function(f){var p=this||r;if(f=parseFloat(f),p.ctx||m(),typeof f<"u"&&f>=0&&f<=1){if(p._volume=f,p._muted)return p;p.usingWebAudio&&p.masterGain.gain.setValueAtTime(f,r.ctx.currentTime);for(var y=0;y<p._howls.length;y++)if(!p._howls[y]._webAudio)for(var b=p._howls[y]._getSoundIds(),T=0;T<b.length;T++){var S=p._howls[y]._soundById(b[T]);S&&S._node&&(S._node.volume=S._volume*f)}return p}return p._volume},mute:function(f){var p=this||r;p.ctx||m(),p._muted=f,p.usingWebAudio&&p.masterGain.gain.setValueAtTime(f?0:p._volume,r.ctx.currentTime);for(var y=0;y<p._howls.length;y++)if(!p._howls[y]._webAudio)for(var b=p._howls[y]._getSoundIds(),T=0;T<b.length;T++){var S=p._howls[y]._soundById(b[T]);S&&S._node&&(S._node.muted=f?!0:S._muted)}return p},stop:function(){for(var f=this||r,p=0;p<f._howls.length;p++)f._howls[p].stop();return f},unload:function(){for(var f=this||r,p=f._howls.length-1;p>=0;p--)f._howls[p].unload();return f.usingWebAudio&&f.ctx&&typeof f.ctx.close<"u"&&(f.ctx.close(),f.ctx=null,m()),f},codecs:function(f){return(this||r)._codecs[f.replace(/^x-/,"")]},_setup:function(){var f=this||r;if(f.state=f.ctx&&f.ctx.state||"suspended",f._autoSuspend(),!f.usingWebAudio)if(typeof Audio<"u")try{var p=new Audio;typeof p.oncanplaythrough>"u"&&(f._canPlayEvent="canplay")}catch{f.noAudio=!0}else f.noAudio=!0;try{var p=new Audio;p.muted&&(f.noAudio=!0)}catch{}return f.noAudio||f._setupCodecs(),f},_setupCodecs:function(){var f=this||r,p=null;try{p=typeof Audio<"u"?new Audio:null}catch{return f}if(!p||typeof p.canPlayType!="function")return f;var y=p.canPlayType("audio/mpeg;").replace(/^no$/,""),b=f._navigator?f._navigator.userAgent:"",T=b.match(/OPR\/(\d+)/g),S=T&&parseInt(T[0].split("/")[1],10)<33,A=b.indexOf("Safari")!==-1&&b.indexOf("Chrome")===-1,R=b.match(/Version\/(.*?) /),L=A&&R&&parseInt(R[1],10)<15;return f._codecs={mp3:!!(!S&&(y||p.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!y,opus:!!p.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!p.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!p.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(p.canPlayType('audio/wav; codecs="1"')||p.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!p.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!p.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(p.canPlayType("audio/x-m4a;")||p.canPlayType("audio/m4a;")||p.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(p.canPlayType("audio/x-m4b;")||p.canPlayType("audio/m4b;")||p.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(p.canPlayType("audio/x-mp4;")||p.canPlayType("audio/mp4;")||p.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!L&&p.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!L&&p.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!p.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(p.canPlayType("audio/x-flac;")||p.canPlayType("audio/flac;")).replace(/^no$/,"")},f},_unlockAudio:function(){var f=this||r;if(!(f._audioUnlocked||!f.ctx)){f._audioUnlocked=!1,f.autoUnlock=!1,!f._mobileUnloaded&&f.ctx.sampleRate!==44100&&(f._mobileUnloaded=!0,f.unload()),f._scratchBuffer=f.ctx.createBuffer(1,1,22050);var p=function(y){for(;f._html5AudioPool.length<f.html5PoolSize;)try{var b=new Audio;b._unlocked=!0,f._releaseHtml5Audio(b)}catch{f.noAudio=!0;break}for(var T=0;T<f._howls.length;T++)if(!f._howls[T]._webAudio)for(var S=f._howls[T]._getSoundIds(),A=0;A<S.length;A++){var R=f._howls[T]._soundById(S[A]);R&&R._node&&!R._node._unlocked&&(R._node._unlocked=!0,R._node.load())}f._autoResume();var L=f.ctx.createBufferSource();L.buffer=f._scratchBuffer,L.connect(f.ctx.destination),typeof L.start>"u"?L.noteOn(0):L.start(0),typeof f.ctx.resume=="function"&&f.ctx.resume(),L.onended=function(){L.disconnect(0),f._audioUnlocked=!0,document.removeEventListener("touchstart",p,!0),document.removeEventListener("touchend",p,!0),document.removeEventListener("click",p,!0),document.removeEventListener("keydown",p,!0);for(var V=0;V<f._howls.length;V++)f._howls[V]._emit("unlock")}};return document.addEventListener("touchstart",p,!0),document.addEventListener("touchend",p,!0),document.addEventListener("click",p,!0),document.addEventListener("keydown",p,!0),f}},_obtainHtml5Audio:function(){var f=this||r;if(f._html5AudioPool.length)return f._html5AudioPool.pop();var p=new Audio().play();return p&&typeof Promise<"u"&&(p instanceof Promise||typeof p.then=="function")&&p.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(f){var p=this||r;return f._unlocked&&p._html5AudioPool.push(f),p},_autoSuspend:function(){var f=this;if(!(!f.autoSuspend||!f.ctx||typeof f.ctx.suspend>"u"||!r.usingWebAudio)){for(var p=0;p<f._howls.length;p++)if(f._howls[p]._webAudio){for(var y=0;y<f._howls[p]._sounds.length;y++)if(!f._howls[p]._sounds[y]._paused)return f}return f._suspendTimer&&clearTimeout(f._suspendTimer),f._suspendTimer=setTimeout(function(){if(f.autoSuspend){f._suspendTimer=null,f.state="suspending";var b=function(){f.state="suspended",f._resumeAfterSuspend&&(delete f._resumeAfterSuspend,f._autoResume())};f.ctx.suspend().then(b,b)}},3e4),f}},_autoResume:function(){var f=this;if(!(!f.ctx||typeof f.ctx.resume>"u"||!r.usingWebAudio))return f.state==="running"&&f.ctx.state!=="interrupted"&&f._suspendTimer?(clearTimeout(f._suspendTimer),f._suspendTimer=null):f.state==="suspended"||f.state==="running"&&f.ctx.state==="interrupted"?(f.ctx.resume().then(function(){f.state="running";for(var p=0;p<f._howls.length;p++)f._howls[p]._emit("resume")}),f._suspendTimer&&(clearTimeout(f._suspendTimer),f._suspendTimer=null)):f.state==="suspending"&&(f._resumeAfterSuspend=!0),f}};var r=new e,n=function(f){var p=this;if(!f.src||f.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}p.init(f)};n.prototype={init:function(f){var p=this;return r.ctx||m(),p._autoplay=f.autoplay||!1,p._format=typeof f.format!="string"?f.format:[f.format],p._html5=f.html5||!1,p._muted=f.mute||!1,p._loop=f.loop||!1,p._pool=f.pool||5,p._preload=typeof f.preload=="boolean"||f.preload==="metadata"?f.preload:!0,p._rate=f.rate||1,p._sprite=f.sprite||{},p._src=typeof f.src!="string"?f.src:[f.src],p._volume=f.volume!==void 0?f.volume:1,p._xhr={method:f.xhr&&f.xhr.method?f.xhr.method:"GET",headers:f.xhr&&f.xhr.headers?f.xhr.headers:null,withCredentials:f.xhr&&f.xhr.withCredentials?f.xhr.withCredentials:!1},p._duration=0,p._state="unloaded",p._sounds=[],p._endTimers={},p._queue=[],p._playLock=!1,p._onend=f.onend?[{fn:f.onend}]:[],p._onfade=f.onfade?[{fn:f.onfade}]:[],p._onload=f.onload?[{fn:f.onload}]:[],p._onloaderror=f.onloaderror?[{fn:f.onloaderror}]:[],p._onplayerror=f.onplayerror?[{fn:f.onplayerror}]:[],p._onpause=f.onpause?[{fn:f.onpause}]:[],p._onplay=f.onplay?[{fn:f.onplay}]:[],p._onstop=f.onstop?[{fn:f.onstop}]:[],p._onmute=f.onmute?[{fn:f.onmute}]:[],p._onvolume=f.onvolume?[{fn:f.onvolume}]:[],p._onrate=f.onrate?[{fn:f.onrate}]:[],p._onseek=f.onseek?[{fn:f.onseek}]:[],p._onunlock=f.onunlock?[{fn:f.onunlock}]:[],p._onresume=[],p._webAudio=r.usingWebAudio&&!p._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(p),p._autoplay&&p._queue.push({event:"play",action:function(){p.play()}}),p._preload&&p._preload!=="none"&&p.load(),p},load:function(){var f=this,p=null;if(r.noAudio){f._emit("loaderror",null,"No audio support.");return}typeof f._src=="string"&&(f._src=[f._src]);for(var y=0;y<f._src.length;y++){var b,T;if(f._format&&f._format[y])b=f._format[y];else{if(T=f._src[y],typeof T!="string"){f._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}b=/^data:audio\/([^;,]+);/i.exec(T),b||(b=/\.([^.]+)$/.exec(T.split("?",1)[0])),b&&(b=b[1].toLowerCase())}if(b||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),b&&r.codecs(b)){p=f._src[y];break}}if(!p){f._emit("loaderror",null,"No codec support for selected audio sources.");return}return f._src=p,f._state="loading",window.location.protocol==="https:"&&p.slice(0,5)==="http:"&&(f._html5=!0,f._webAudio=!1),new s(f),f._webAudio&&l(f),f},play:function(f,p){var y=this,b=null;if(typeof f=="number")b=f,f=null;else{if(typeof f=="string"&&y._state==="loaded"&&!y._sprite[f])return null;if(typeof f>"u"&&(f="__default",!y._playLock)){for(var T=0,S=0;S<y._sounds.length;S++)y._sounds[S]._paused&&!y._sounds[S]._ended&&(T++,b=y._sounds[S]._id);T===1?f=null:b=null}}var A=b?y._soundById(b):y._inactiveSound();if(!A)return null;if(b&&!f&&(f=A._sprite||"__default"),y._state!=="loaded"){A._sprite=f,A._ended=!1;var R=A._id;return y._queue.push({event:"play",action:function(){y.play(R)}}),R}if(b&&!A._paused)return p||y._loadQueue("play"),A._id;y._webAudio&&r._autoResume();var L=Math.max(0,A._seek>0?A._seek:y._sprite[f][0]/1e3),V=Math.max(0,(y._sprite[f][0]+y._sprite[f][1])/1e3-L),M=V*1e3/Math.abs(A._rate),H=y._sprite[f][0]/1e3,g=(y._sprite[f][0]+y._sprite[f][1])/1e3;A._sprite=f,A._ended=!1;var ne=function(){A._paused=!1,A._seek=L,A._start=H,A._stop=g,A._loop=!!(A._loop||y._sprite[f][2])};if(L>=g){y._ended(A);return}var B=A._node;if(y._webAudio){var Y=function(){y._playLock=!1,ne(),y._refreshBuffer(A);var xe=A._muted||y._muted?0:A._volume;B.gain.setValueAtTime(xe,r.ctx.currentTime),A._playStart=r.ctx.currentTime,typeof B.bufferSource.start>"u"?A._loop?B.bufferSource.noteGrainOn(0,L,86400):B.bufferSource.noteGrainOn(0,L,V):A._loop?B.bufferSource.start(0,L,86400):B.bufferSource.start(0,L,V),M!==1/0&&(y._endTimers[A._id]=setTimeout(y._ended.bind(y,A),M)),p||setTimeout(function(){y._emit("play",A._id),y._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?Y():(y._playLock=!0,y.once("resume",Y),y._clearTimer(A._id))}else{var se=function(){B.currentTime=L,B.muted=A._muted||y._muted||r._muted||B.muted,B.volume=A._volume*r.volume(),B.playbackRate=A._rate;try{var xe=B.play();if(xe&&typeof Promise<"u"&&(xe instanceof Promise||typeof xe.then=="function")?(y._playLock=!0,ne(),xe.then(function(){y._playLock=!1,B._unlocked=!0,p?y._loadQueue():y._emit("play",A._id)}).catch(function(){y._playLock=!1,y._emit("playerror",A._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),A._ended=!0,A._paused=!0})):p||(y._playLock=!1,ne(),y._emit("play",A._id)),B.playbackRate=A._rate,B.paused){y._emit("playerror",A._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}f!=="__default"||A._loop?y._endTimers[A._id]=setTimeout(y._ended.bind(y,A),M):(y._endTimers[A._id]=function(){y._ended(A),B.removeEventListener("ended",y._endTimers[A._id],!1)},B.addEventListener("ended",y._endTimers[A._id],!1))}catch(Z){y._emit("playerror",A._id,Z)}};B.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(B.src=y._src,B.load());var re=window&&window.ejecta||!B.readyState&&r._navigator.isCocoonJS;if(B.readyState>=3||re)se();else{y._playLock=!0,y._state="loading";var he=function(){y._state="loaded",se(),B.removeEventListener(r._canPlayEvent,he,!1)};B.addEventListener(r._canPlayEvent,he,!1),y._clearTimer(A._id)}}return A._id},pause:function(f){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"pause",action:function(){p.pause(f)}}),p;for(var y=p._getSoundIds(f),b=0;b<y.length;b++){p._clearTimer(y[b]);var T=p._soundById(y[b]);if(T&&!T._paused&&(T._seek=p.seek(y[b]),T._rateSeek=0,T._paused=!0,p._stopFade(y[b]),T._node))if(p._webAudio){if(!T._node.bufferSource)continue;typeof T._node.bufferSource.stop>"u"?T._node.bufferSource.noteOff(0):T._node.bufferSource.stop(0),p._cleanBuffer(T._node)}else(!isNaN(T._node.duration)||T._node.duration===1/0)&&T._node.pause();arguments[1]||p._emit("pause",T?T._id:null)}return p},stop:function(f,p){var y=this;if(y._state!=="loaded"||y._playLock)return y._queue.push({event:"stop",action:function(){y.stop(f)}}),y;for(var b=y._getSoundIds(f),T=0;T<b.length;T++){y._clearTimer(b[T]);var S=y._soundById(b[T]);S&&(S._seek=S._start||0,S._rateSeek=0,S._paused=!0,S._ended=!0,y._stopFade(b[T]),S._node&&(y._webAudio?S._node.bufferSource&&(typeof S._node.bufferSource.stop>"u"?S._node.bufferSource.noteOff(0):S._node.bufferSource.stop(0),y._cleanBuffer(S._node)):(!isNaN(S._node.duration)||S._node.duration===1/0)&&(S._node.currentTime=S._start||0,S._node.pause(),S._node.duration===1/0&&y._clearSound(S._node))),p||y._emit("stop",S._id))}return y},mute:function(f,p){var y=this;if(y._state!=="loaded"||y._playLock)return y._queue.push({event:"mute",action:function(){y.mute(f,p)}}),y;if(typeof p>"u")if(typeof f=="boolean")y._muted=f;else return y._muted;for(var b=y._getSoundIds(p),T=0;T<b.length;T++){var S=y._soundById(b[T]);S&&(S._muted=f,S._interval&&y._stopFade(S._id),y._webAudio&&S._node?S._node.gain.setValueAtTime(f?0:S._volume,r.ctx.currentTime):S._node&&(S._node.muted=r._muted?!0:f),y._emit("mute",S._id))}return y},volume:function(){var f=this,p=arguments,y,b;if(p.length===0)return f._volume;if(p.length===1||p.length===2&&typeof p[1]>"u"){var T=f._getSoundIds(),S=T.indexOf(p[0]);S>=0?b=parseInt(p[0],10):y=parseFloat(p[0])}else p.length>=2&&(y=parseFloat(p[0]),b=parseInt(p[1],10));var A;if(typeof y<"u"&&y>=0&&y<=1){if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"volume",action:function(){f.volume.apply(f,p)}}),f;typeof b>"u"&&(f._volume=y),b=f._getSoundIds(b);for(var R=0;R<b.length;R++)A=f._soundById(b[R]),A&&(A._volume=y,p[2]||f._stopFade(b[R]),f._webAudio&&A._node&&!A._muted?A._node.gain.setValueAtTime(y,r.ctx.currentTime):A._node&&!A._muted&&(A._node.volume=y*r.volume()),f._emit("volume",A._id))}else return A=b?f._soundById(b):f._sounds[0],A?A._volume:0;return f},fade:function(f,p,y,b){var T=this;if(T._state!=="loaded"||T._playLock)return T._queue.push({event:"fade",action:function(){T.fade(f,p,y,b)}}),T;f=Math.min(Math.max(0,parseFloat(f)),1),p=Math.min(Math.max(0,parseFloat(p)),1),y=parseFloat(y),T.volume(f,b);for(var S=T._getSoundIds(b),A=0;A<S.length;A++){var R=T._soundById(S[A]);if(R){if(b||T._stopFade(S[A]),T._webAudio&&!R._muted){var L=r.ctx.currentTime,V=L+y/1e3;R._volume=f,R._node.gain.setValueAtTime(f,L),R._node.gain.linearRampToValueAtTime(p,V)}T._startFadeInterval(R,f,p,y,S[A],typeof b>"u")}}return T},_startFadeInterval:function(f,p,y,b,T,S){var A=this,R=p,L=y-p,V=Math.abs(L/.01),M=Math.max(4,V>0?b/V:b),H=Date.now();f._fadeTo=y,f._interval=setInterval(function(){var g=(Date.now()-H)/b;H=Date.now(),R+=L*g,R=Math.round(R*100)/100,L<0?R=Math.max(y,R):R=Math.min(y,R),A._webAudio?f._volume=R:A.volume(R,f._id,!0),S&&(A._volume=R),(y<p&&R<=y||y>p&&R>=y)&&(clearInterval(f._interval),f._interval=null,f._fadeTo=null,A.volume(y,f._id),A._emit("fade",f._id))},M)},_stopFade:function(f){var p=this,y=p._soundById(f);return y&&y._interval&&(p._webAudio&&y._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(y._interval),y._interval=null,p.volume(y._fadeTo,f),y._fadeTo=null,p._emit("fade",f)),p},loop:function(){var f=this,p=arguments,y,b,T;if(p.length===0)return f._loop;if(p.length===1)if(typeof p[0]=="boolean")y=p[0],f._loop=y;else return T=f._soundById(parseInt(p[0],10)),T?T._loop:!1;else p.length===2&&(y=p[0],b=parseInt(p[1],10));for(var S=f._getSoundIds(b),A=0;A<S.length;A++)T=f._soundById(S[A]),T&&(T._loop=y,f._webAudio&&T._node&&T._node.bufferSource&&(T._node.bufferSource.loop=y,y&&(T._node.bufferSource.loopStart=T._start||0,T._node.bufferSource.loopEnd=T._stop,f.playing(S[A])&&(f.pause(S[A],!0),f.play(S[A],!0)))));return f},rate:function(){var f=this,p=arguments,y,b;if(p.length===0)b=f._sounds[0]._id;else if(p.length===1){var T=f._getSoundIds(),S=T.indexOf(p[0]);S>=0?b=parseInt(p[0],10):y=parseFloat(p[0])}else p.length===2&&(y=parseFloat(p[0]),b=parseInt(p[1],10));var A;if(typeof y=="number"){if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"rate",action:function(){f.rate.apply(f,p)}}),f;typeof b>"u"&&(f._rate=y),b=f._getSoundIds(b);for(var R=0;R<b.length;R++)if(A=f._soundById(b[R]),A){f.playing(b[R])&&(A._rateSeek=f.seek(b[R]),A._playStart=f._webAudio?r.ctx.currentTime:A._playStart),A._rate=y,f._webAudio&&A._node&&A._node.bufferSource?A._node.bufferSource.playbackRate.setValueAtTime(y,r.ctx.currentTime):A._node&&(A._node.playbackRate=y);var L=f.seek(b[R]),V=(f._sprite[A._sprite][0]+f._sprite[A._sprite][1])/1e3-L,M=V*1e3/Math.abs(A._rate);(f._endTimers[b[R]]||!A._paused)&&(f._clearTimer(b[R]),f._endTimers[b[R]]=setTimeout(f._ended.bind(f,A),M)),f._emit("rate",A._id)}}else return A=f._soundById(b),A?A._rate:f._rate;return f},seek:function(){var f=this,p=arguments,y,b;if(p.length===0)f._sounds.length&&(b=f._sounds[0]._id);else if(p.length===1){var T=f._getSoundIds(),S=T.indexOf(p[0]);S>=0?b=parseInt(p[0],10):f._sounds.length&&(b=f._sounds[0]._id,y=parseFloat(p[0]))}else p.length===2&&(y=parseFloat(p[0]),b=parseInt(p[1],10));if(typeof b>"u")return 0;if(typeof y=="number"&&(f._state!=="loaded"||f._playLock))return f._queue.push({event:"seek",action:function(){f.seek.apply(f,p)}}),f;var A=f._soundById(b);if(A)if(typeof y=="number"&&y>=0){var R=f.playing(b);R&&f.pause(b,!0),A._seek=y,A._ended=!1,f._clearTimer(b),!f._webAudio&&A._node&&!isNaN(A._node.duration)&&(A._node.currentTime=y);var L=function(){R&&f.play(b,!0),f._emit("seek",b)};if(R&&!f._webAudio){var V=function(){f._playLock?setTimeout(V,0):L()};setTimeout(V,0)}else L()}else if(f._webAudio){var M=f.playing(b)?r.ctx.currentTime-A._playStart:0,H=A._rateSeek?A._rateSeek-A._seek:0;return A._seek+(H+M*Math.abs(A._rate))}else return A._node.currentTime;return f},playing:function(f){var p=this;if(typeof f=="number"){var y=p._soundById(f);return y?!y._paused:!1}for(var b=0;b<p._sounds.length;b++)if(!p._sounds[b]._paused)return!0;return!1},duration:function(f){var p=this,y=p._duration,b=p._soundById(f);return b&&(y=p._sprite[b._sprite][1]/1e3),y},state:function(){return this._state},unload:function(){for(var f=this,p=f._sounds,y=0;y<p.length;y++)p[y]._paused||f.stop(p[y]._id),f._webAudio||(f._clearSound(p[y]._node),p[y]._node.removeEventListener("error",p[y]._errorFn,!1),p[y]._node.removeEventListener(r._canPlayEvent,p[y]._loadFn,!1),p[y]._node.removeEventListener("ended",p[y]._endFn,!1),r._releaseHtml5Audio(p[y]._node)),delete p[y]._node,f._clearTimer(p[y]._id);var b=r._howls.indexOf(f);b>=0&&r._howls.splice(b,1);var T=!0;for(y=0;y<r._howls.length;y++)if(r._howls[y]._src===f._src||f._src.indexOf(r._howls[y]._src)>=0){T=!1;break}return a&&T&&delete a[f._src],r.noAudio=!1,f._state="unloaded",f._sounds=[],f=null,null},on:function(f,p,y,b){var T=this,S=T["_on"+f];return typeof p=="function"&&S.push(b?{id:y,fn:p,once:b}:{id:y,fn:p}),T},off:function(f,p,y){var b=this,T=b["_on"+f],S=0;if(typeof p=="number"&&(y=p,p=null),p||y)for(S=0;S<T.length;S++){var A=y===T[S].id;if(p===T[S].fn&&A||!p&&A){T.splice(S,1);break}}else if(f)b["_on"+f]=[];else{var R=Object.keys(b);for(S=0;S<R.length;S++)R[S].indexOf("_on")===0&&Array.isArray(b[R[S]])&&(b[R[S]]=[])}return b},once:function(f,p,y){var b=this;return b.on(f,p,y,1),b},_emit:function(f,p,y){for(var b=this,T=b["_on"+f],S=T.length-1;S>=0;S--)(!T[S].id||T[S].id===p||f==="load")&&(setTimeout(function(A){A.call(this,p,y)}.bind(b,T[S].fn),0),T[S].once&&b.off(f,T[S].fn,T[S].id));return b._loadQueue(f),b},_loadQueue:function(f){var p=this;if(p._queue.length>0){var y=p._queue[0];y.event===f&&(p._queue.shift(),p._loadQueue()),f||y.action()}return p},_ended:function(f){var p=this,y=f._sprite;if(!p._webAudio&&f._node&&!f._node.paused&&!f._node.ended&&f._node.currentTime<f._stop)return setTimeout(p._ended.bind(p,f),100),p;var b=!!(f._loop||p._sprite[y][2]);if(p._emit("end",f._id),!p._webAudio&&b&&p.stop(f._id,!0).play(f._id),p._webAudio&&b){p._emit("play",f._id),f._seek=f._start||0,f._rateSeek=0,f._playStart=r.ctx.currentTime;var T=(f._stop-f._start)*1e3/Math.abs(f._rate);p._endTimers[f._id]=setTimeout(p._ended.bind(p,f),T)}return p._webAudio&&!b&&(f._paused=!0,f._ended=!0,f._seek=f._start||0,f._rateSeek=0,p._clearTimer(f._id),p._cleanBuffer(f._node),r._autoSuspend()),!p._webAudio&&!b&&p.stop(f._id,!0),p},_clearTimer:function(f){var p=this;if(p._endTimers[f]){if(typeof p._endTimers[f]!="function")clearTimeout(p._endTimers[f]);else{var y=p._soundById(f);y&&y._node&&y._node.removeEventListener("ended",p._endTimers[f],!1)}delete p._endTimers[f]}return p},_soundById:function(f){for(var p=this,y=0;y<p._sounds.length;y++)if(f===p._sounds[y]._id)return p._sounds[y];return null},_inactiveSound:function(){var f=this;f._drain();for(var p=0;p<f._sounds.length;p++)if(f._sounds[p]._ended)return f._sounds[p].reset();return new s(f)},_drain:function(){var f=this,p=f._pool,y=0,b=0;if(!(f._sounds.length<p)){for(b=0;b<f._sounds.length;b++)f._sounds[b]._ended&&y++;for(b=f._sounds.length-1;b>=0;b--){if(y<=p)return;f._sounds[b]._ended&&(f._webAudio&&f._sounds[b]._node&&f._sounds[b]._node.disconnect(0),f._sounds.splice(b,1),y--)}}},_getSoundIds:function(f){var p=this;if(typeof f>"u"){for(var y=[],b=0;b<p._sounds.length;b++)y.push(p._sounds[b]._id);return y}else return[f]},_refreshBuffer:function(f){var p=this;return f._node.bufferSource=r.ctx.createBufferSource(),f._node.bufferSource.buffer=a[p._src],f._panner?f._node.bufferSource.connect(f._panner):f._node.bufferSource.connect(f._node),f._node.bufferSource.loop=f._loop,f._loop&&(f._node.bufferSource.loopStart=f._start||0,f._node.bufferSource.loopEnd=f._stop||0),f._node.bufferSource.playbackRate.setValueAtTime(f._rate,r.ctx.currentTime),p},_cleanBuffer:function(f){var p=this,y=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(!f.bufferSource)return p;if(r._scratchBuffer&&f.bufferSource&&(f.bufferSource.onended=null,f.bufferSource.disconnect(0),y))try{f.bufferSource.buffer=r._scratchBuffer}catch{}return f.bufferSource=null,p},_clearSound:function(f){var p=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);p||(f.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(f){this._parent=f,this.init()};s.prototype={init:function(){var f=this,p=f._parent;return f._muted=p._muted,f._loop=p._loop,f._volume=p._volume,f._rate=p._rate,f._seek=0,f._paused=!0,f._ended=!0,f._sprite="__default",f._id=++r._counter,p._sounds.push(f),f.create(),f},create:function(){var f=this,p=f._parent,y=r._muted||f._muted||f._parent._muted?0:f._volume;return p._webAudio?(f._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),f._node.gain.setValueAtTime(y,r.ctx.currentTime),f._node.paused=!0,f._node.connect(r.masterGain)):r.noAudio||(f._node=r._obtainHtml5Audio(),f._errorFn=f._errorListener.bind(f),f._node.addEventListener("error",f._errorFn,!1),f._loadFn=f._loadListener.bind(f),f._node.addEventListener(r._canPlayEvent,f._loadFn,!1),f._endFn=f._endListener.bind(f),f._node.addEventListener("ended",f._endFn,!1),f._node.src=p._src,f._node.preload=p._preload===!0?"auto":p._preload,f._node.volume=y*r.volume(),f._node.load()),f},reset:function(){var f=this,p=f._parent;return f._muted=p._muted,f._loop=p._loop,f._volume=p._volume,f._rate=p._rate,f._seek=0,f._rateSeek=0,f._paused=!0,f._ended=!0,f._sprite="__default",f._id=++r._counter,f},_errorListener:function(){var f=this;f._parent._emit("loaderror",f._id,f._node.error?f._node.error.code:0),f._node.removeEventListener("error",f._errorFn,!1)},_loadListener:function(){var f=this,p=f._parent;p._duration=Math.ceil(f._node.duration*10)/10,Object.keys(p._sprite).length===0&&(p._sprite={__default:[0,p._duration*1e3]}),p._state!=="loaded"&&(p._state="loaded",p._emit("load"),p._loadQueue()),f._node.removeEventListener(r._canPlayEvent,f._loadFn,!1)},_endListener:function(){var f=this,p=f._parent;p._duration===1/0&&(p._duration=Math.ceil(f._node.duration*10)/10,p._sprite.__default[1]===1/0&&(p._sprite.__default[1]=p._duration*1e3),p._ended(f)),f._node.removeEventListener("ended",f._endFn,!1)}};var a={},l=function(f){var p=f._src;if(a[p]){f._duration=a[p].duration,_(f);return}if(/^data:[^;]+;base64,/.test(p)){for(var y=atob(p.split(",")[1]),b=new Uint8Array(y.length),T=0;T<y.length;++T)b[T]=y.charCodeAt(T);h(b.buffer,f)}else{var S=new XMLHttpRequest;S.open(f._xhr.method,p,!0),S.withCredentials=f._xhr.withCredentials,S.responseType="arraybuffer",f._xhr.headers&&Object.keys(f._xhr.headers).forEach(function(A){S.setRequestHeader(A,f._xhr.headers[A])}),S.onload=function(){var A=(S.status+"")[0];if(A!=="0"&&A!=="2"&&A!=="3"){f._emit("loaderror",null,"Failed loading audio file with status: "+S.status+".");return}h(S.response,f)},S.onerror=function(){f._webAudio&&(f._html5=!0,f._webAudio=!1,f._sounds=[],delete a[p],f.load())},c(S)}},c=function(f){try{f.send()}catch{f.onerror()}},h=function(f,p){var y=function(){p._emit("loaderror",null,"Decoding audio data failed.")},b=function(T){T&&p._sounds.length>0?(a[p._src]=T,_(p,T)):y()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(f).then(b).catch(y):r.ctx.decodeAudioData(f,b,y)},_=function(f,p){p&&!f._duration&&(f._duration=p.duration),Object.keys(f._sprite).length===0&&(f._sprite={__default:[0,f._duration*1e3]}),f._state!=="loaded"&&(f._state="loaded",f._emit("load"),f._loadQueue())},m=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var f=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),p=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),y=p?parseInt(p[1],10):null;if(f&&y&&y<9){var b=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!b&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};i.Howler=r,i.Howl=n,typeof As<"u"?(As.HowlerGlobal=e,As.Howler=r,As.Howl=n,As.Sound=s):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=r,window.Howl=n,window.Sound=s)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var s=n._howls.length-1;s>=0;s--)n._howls[s].stereo(r);return n},HowlerGlobal.prototype.pos=function(r,n,s){var a=this;if(!a.ctx||!a.ctx.listener)return a;if(n=typeof n!="number"?a._pos[1]:n,s=typeof s!="number"?a._pos[2]:s,typeof r=="number")a._pos=[r,n,s],typeof a.ctx.listener.positionX<"u"?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]);else return a._pos;return a},HowlerGlobal.prototype.orientation=function(r,n,s,a,l,c){var h=this;if(!h.ctx||!h.ctx.listener)return h;var _=h._orientation;if(n=typeof n!="number"?_[1]:n,s=typeof s!="number"?_[2]:s,a=typeof a!="number"?_[3]:a,l=typeof l!="number"?_[4]:l,c=typeof c!="number"?_[5]:c,typeof r=="number")h._orientation=[r,n,s,a,l,c],typeof h.ctx.listener.forwardX<"u"?(h.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),h.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),h.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),h.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),h.ctx.listener.upY.setTargetAtTime(l,Howler.ctx.currentTime,.1),h.ctx.listener.upZ.setTargetAtTime(c,Howler.ctx.currentTime,.1)):h.ctx.listener.setOrientation(r,n,s,a,l,c);else return _;return h},Howl.prototype.init=function(r){return function(n){var s=this;return s._orientation=n.orientation||[1,0,0],s._stereo=n.stereo||null,s._pos=n.pos||null,s._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},s._onstereo=n.onstereo?[{fn:n.onstereo}]:[],s._onpos=n.onpos?[{fn:n.onpos}]:[],s._onorientation=n.onorientation?[{fn:n.onorientation}]:[],r.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,n){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(r,n)}}),s;var a=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof r=="number")s._stereo=r,s._pos=[r,0,0];else return s._stereo;for(var l=s._getSoundIds(n),c=0;c<l.length;c++){var h=s._soundById(l[c]);if(h)if(typeof r=="number")h._stereo=r,h._pos=[r,0,0],h._node&&(h._pannerAttr.panningModel="equalpower",(!h._panner||!h._panner.pan)&&e(h,a),a==="spatial"?typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):h._panner.setPosition(r,0,0):h._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),s._emit("stereo",h._id);else return h._stereo}return s},Howl.prototype.pos=function(r,n,s,a){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"pos",action:function(){l.pos(r,n,s,a)}}),l;if(n=typeof n!="number"?0:n,s=typeof s!="number"?-.5:s,typeof a>"u")if(typeof r=="number")l._pos=[r,n,s];else return l._pos;for(var c=l._getSoundIds(a),h=0;h<c.length;h++){var _=l._soundById(c[h]);if(_)if(typeof r=="number")_._pos=[r,n,s],_._node&&((!_._panner||_._panner.pan)&&e(_,"spatial"),typeof _._panner.positionX<"u"?(_._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),_._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),_._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):_._panner.setPosition(r,n,s)),l._emit("pos",_._id);else return _._pos}return l},Howl.prototype.orientation=function(r,n,s,a){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"orientation",action:function(){l.orientation(r,n,s,a)}}),l;if(n=typeof n!="number"?l._orientation[1]:n,s=typeof s!="number"?l._orientation[2]:s,typeof a>"u")if(typeof r=="number")l._orientation=[r,n,s];else return l._orientation;for(var c=l._getSoundIds(a),h=0;h<c.length;h++){var _=l._soundById(c[h]);if(_)if(typeof r=="number")_._orientation=[r,n,s],_._node&&(_._panner||(_._pos||(_._pos=l._pos||[0,0,-.5]),e(_,"spatial")),typeof _._panner.orientationX<"u"?(_._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),_._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),_._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):_._panner.setOrientation(r,n,s)),l._emit("orientation",_._id);else return _._orientation}return l},Howl.prototype.pannerAttr=function(){var r=this,n=arguments,s,a,l;if(!r._webAudio)return r;if(n.length===0)return r._pannerAttr;if(n.length===1)if(typeof n[0]=="object")s=n[0],typeof a>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),r._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:r._panningModel});else return l=r._soundById(parseInt(n[0],10)),l?l._pannerAttr:r._pannerAttr;else n.length===2&&(s=n[0],a=parseInt(n[1],10));for(var c=r._getSoundIds(a),h=0;h<c.length;h++)if(l=r._soundById(c[h]),l){var _=l._pannerAttr;_={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:_.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:_.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:_.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:_.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:_.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:_.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:_.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:_.panningModel};var m=l._panner;m||(l._pos||(l._pos=r._pos||[0,0,-.5]),e(l,"spatial"),m=l._panner),m.coneInnerAngle=_.coneInnerAngle,m.coneOuterAngle=_.coneOuterAngle,m.coneOuterGain=_.coneOuterGain,m.distanceModel=_.distanceModel,m.maxDistance=_.maxDistance,m.refDistance=_.refDistance,m.rolloffFactor=_.rolloffFactor,m.panningModel=_.panningModel}return r},Sound.prototype.init=function(r){return function(){var n=this,s=n._parent;n._orientation=s._orientation,n._stereo=s._stereo,n._pos=s._pos,n._pannerAttr=s._pannerAttr,r.call(this),n._stereo?s.stereo(n._stereo):n._pos&&s.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var n=this,s=n._parent;return n._orientation=s._orientation,n._stereo=s._stereo,n._pos=s._pos,n._pannerAttr=s._pannerAttr,n._stereo?s.stereo(n._stereo):n._pos?s.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,s._refreshBuffer(n)),r.call(this)}}(Sound.prototype.reset);var e=function(r,n){n=n||"spatial",n==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}})()}(Jv)),Jv}var o1=FR();let LR=class{constructor(e,r,n="en"){e in r?this.language=e:this.language=n,this.file_url=r[this.language]}load_file(){return new Promise((e,r)=>{fetch(this.file_url).then(n=>{n.ok?n.text().then(s=>{this.resource=JSON.parse(s),e()}):r()})})}translator(e){return e in this.resource.translation?this.resource.translation[e]:"##i18n error##"}get_label(e){return this.is_label_included(e)?this.resource.labels[e]:e}is_label_included(e){return e in this.resource.labels}get_translator(){return this.translator.bind(this)}get_label_getter(){return this.get_label.bind(this)}};const BR=`precision highp float;
attribute vec3 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
gl_Position.xyw = projectionMatrix * aVertexPosition;
gl_Position.z = 0.0;

vTextureCoord = aTextureCoord;
vTextureId = aTextureId;
vColor = aColor;
}
`,jR=`
varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
vec4 color;
%forloop%
gl_FragColor = color * vColor;
}`;class UR extends Po{constructor(e=!1){super(),this._buffer=new or(null,e,!1),this._indexBuffer=new or(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,3,!1,Ze.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Ze.FLOAT).addAttribute("aColor",this._buffer,4,!0,Ze.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Ze.FLOAT).addIndex(this._indexBuffer)}}class GR{static create(e){const{vertex:r,fragment:n,vertexSize:s,geometryClass:a}=Object.assign({vertex:BR,fragment:jR,geometryClass:UR,vertexSize:7},e);return class extends Vu{constructor(c){super(c),this.shaderGenerator=new Mm(r,n),this.geometryClass=a,this.vertexSize=s}packInterleavedGeometry(c,h,_,m,f){const{uint32View:p,float32View:y}=h,b=m/this.vertexSize,T=c.uvs,S=c.indices,A=c.vertexData,R=c.vertexData2d,L=c._texture.baseTexture._batchLocation,V=Math.min(c.worldAlpha,1),M=V<1&&c._texture.baseTexture.alphaMode?dc(c._tintRGB,V):c._tintRGB+(V*255<<24);if(R){let H=0;for(let g=0;g<R.length;g+=3,H+=2)y[m++]=R[g],y[m++]=R[g+1],y[m++]=R[g+2],y[m++]=T[H],y[m++]=T[H+1],p[m++]=M,y[m++]=L}else for(let H=0;H<A.length;H+=2)y[m++]=A[H],y[m++]=A[H+1],y[m++]=1,y[m++]=T[H],y[m++]=T[H+1],p[m++]=M,y[m++]=L;for(let H=0;H<S.length;H++)_[f++]=b+S[H]}}}}class Yf{constructor(e,r=!0){Yf.prototype.__init.call(this),this.legacy=e,r&&(this.enabled=!0),this.legacy.proj=this}__init(){this._enabled=!1}get enabled(){return this._enabled}set enabled(e){this._enabled=e}clear(){}}var cn;(function(i){i[i.NONE=0]="NONE";const r=4;i[i.BEFORE_PROJ=r]="BEFORE_PROJ";const n=5;i[i.PROJ=n]="PROJ";const s=9;i[i.ALL=s]="ALL"})(cn||(cn={}));var Yi;(function(i){i[i.NONE=0]="NONE";const r=1;i[i.FREE=r]="FREE";const n=2;i[i.AXIS_X=n]="AXIS_X";const s=3;i[i.AXIS_Y=s]="AXIS_Y";const a=4;i[i.POINT=a]="POINT";const l=5;i[i.AXIS_XR=l]="AXIS_XR"})(Yi||(Yi={}));function HR(i){const e=this.proj,r=this,n=i._worldID,s=r.localTransform,a=e.scaleAfterAffine&&e.affine>=2;r._localID!==r._currentLocalID&&(a?(s.a=r._cx,s.b=r._sx,s.c=r._cy,s.d=r._sy,s.tx=r.position._x,s.ty=r.position._y):(s.a=r._cx*r.scale._x,s.b=r._sx*r.scale._x,s.c=r._cy*r.scale._y,s.d=r._sy*r.scale._y,s.tx=r.position._x-(r.pivot._x*s.a+r.pivot._y*s.c),s.ty=r.position._y-(r.pivot._x*s.b+r.pivot._y*s.d)),r._currentLocalID=r._localID,e._currentProjID=-1);const l=e._projID;if(e._currentProjID!==l&&(e._currentProjID=l,e.updateLocalTransform(s),r._parentID=-1),r._parentID!==n){const c=i.proj;c&&!c._affine?e.world.setToMult(c.world,e.local):e.world.setToMultLegacy(i.worldTransform,e.local);const h=r.worldTransform;e.world.copyTo(h,e._affine,e.affinePreserveOrientation),a&&(h.a*=r.scale._x,h.b*=r.scale._x,h.c*=r.scale._y,h.d*=r.scale._y,h.tx-=r.pivot._x*h.a+r.pivot._y*h.c,h.ty-=r.pivot._x*h.b+r.pivot._y*h.d),r._parentID=n,r._worldID++}}class ga extends Yf{constructor(...e){super(...e),ga.prototype.__init.call(this),ga.prototype.__init2.call(this),ga.prototype.__init3.call(this),ga.prototype.__init4.call(this),ga.prototype.__init5.call(this)}updateLocalTransform(e){}__init(){this._projID=0}__init2(){this._currentProjID=-1}__init3(){this._affine=Yi.NONE}__init4(){this.affinePreserveOrientation=!1}__init5(){this.scaleAfterAffine=!0}set affine(e){this._affine!==e&&(this._affine=e,this._currentProjID=-1,this.legacy._currentLocalID=-1)}get affine(){return this._affine}set enabled(e){e!==this._enabled&&(this._enabled=e,e?(this.legacy.updateTransform=HR,this.legacy._parentID=-1):(this.legacy.updateTransform=Ul.prototype.updateTransform,this.legacy._parentID=-1))}clear(){this._currentProjID=-1,this._projID=0}}class Uf extends Vu{constructor(...e){super(...e),Uf.prototype.__init.call(this),Uf.prototype.__init2.call(this)}__init(){this.forceMaxTextures=0}getUniforms(e){return this.defUniforms}syncUniforms(e){if(!e)return;const r=this._shader;for(const n in e)r.uniforms[n]=e[n]}__init2(){this.defUniforms={}}buildDrawCalls(e,r,n){const s=this,{_bufferedElements:a,_attributeBuffer:l,_indexBuffer:c,vertexSize:h}=this,_=Vu._drawCallPool;let m=this._dcIndex,f=this._aIndex,p=this._iIndex,y=_[m];y.start=this._iIndex,y.texArray=e;for(let b=r;b<n;++b){const T=a[b],S=T._texture.baseTexture,A=Am[S.alphaMode?1:0][T.blendMode],R=this.getUniforms(T);a[b]=null,r<b&&(y.blend!==A||y.uniforms!==R)&&(y.size=p-y.start,r=b,y=_[++m],y.texArray=e,y.start=p),this.packInterleavedGeometry(T,l,c,f,p),f+=T.vertexData.length/2*h,p+=T.indices.length,y.blend=A,y.uniforms=R}r<n&&(y.size=p-y.start,++m),s._dcIndex=m,s._aIndex=f,s._iIndex=p}drawBatches(){const e=this._dcIndex,{gl:r,state:n,shader:s}=this.renderer,a=Vu._drawCallPool;let l=null,c=null;for(let h=0;h<e;h++){const{texArray:_,type:m,size:f,start:p,blend:y,uniforms:b}=a[h];c!==_&&(c=_,this.bindAndClearTexArray(_)),l!==b&&(l=b,this.syncUniforms(b),s.syncUniformGroup(this._shader.uniformGroup)),this.state.blendMode=y,n.set(this.state),r.drawElements(m,f,r.UNSIGNED_SHORT,p*2)}}contextChange(){if(!this.forceMaxTextures){super.contextChange(),this.syncUniforms(this.defUniforms);return}const e=this;e.MAX_TEXTURES=this.forceMaxTextures,this._shader=e.shaderGenerator.generateShader(this.MAX_TEXTURES),this.syncUniforms(this.defUniforms);for(let r=0;r<e._packedGeometryPoolSize;r++)e._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()}}mc.registerPlugin("batch2d",GR.create({}));function zR(i,e,r,n,s){const a=e.x-i.x,l=r.x-n.x,c=r.x-i.x,h=e.y-i.y,_=r.y-n.y,m=r.y-i.y,f=a*_-h*l;if(Math.abs(f)<1e-7)return s.x=a,s.y=h,0;const p=c*_-m*l,y=a*m-h*c,b=p/f,T=y/f;return T<1e-6||T-1>-1e-6?-1:(s.x=i.x+b*(e.x-i.x),s.y=i.y+b*(e.y-i.y),1)}const XR=[1,0,0,0,1,0,0,0,1];class hn{static __initStatic(){this.IDENTITY=new hn}static __initStatic2(){this.TEMP_MATRIX=new hn}__init(){this.floatArray=null}constructor(e){hn.prototype.__init.call(this),this.mat3=new Float64Array(e||XR)}get a(){return this.mat3[0]/this.mat3[8]}set a(e){this.mat3[0]=e*this.mat3[8]}get b(){return this.mat3[1]/this.mat3[8]}set b(e){this.mat3[1]=e*this.mat3[8]}get c(){return this.mat3[3]/this.mat3[8]}set c(e){this.mat3[3]=e*this.mat3[8]}get d(){return this.mat3[4]/this.mat3[8]}set d(e){this.mat3[4]=e*this.mat3[8]}get tx(){return this.mat3[6]/this.mat3[8]}set tx(e){this.mat3[6]=e*this.mat3[8]}get ty(){return this.mat3[7]/this.mat3[8]}set ty(e){this.mat3[7]=e*this.mat3[8]}set(e,r,n,s,a,l){const c=this.mat3;return c[0]=e,c[1]=r,c[2]=0,c[3]=n,c[4]=s,c[5]=0,c[6]=a,c[7]=l,c[8]=1,this}toArray(e,r){this.floatArray||(this.floatArray=new Float32Array(9));const n=r||this.floatArray,s=this.mat3;return e?(n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8]):(n[0]=s[0],n[1]=s[3],n[2]=s[6],n[3]=s[1],n[4]=s[4],n[5]=s[7],n[6]=s[2],n[7]=s[5],n[8]=s[8]),n}apply(e,r){r=r||new yt;const n=this.mat3,s=e.x,a=e.y,l=1/(n[2]*s+n[5]*a+n[8]);return r.x=l*(n[0]*s+n[3]*a+n[6]),r.y=l*(n[1]*s+n[4]*a+n[7]),r}translate(e,r){const n=this.mat3;return n[0]+=e*n[2],n[1]+=r*n[2],n[3]+=e*n[5],n[4]+=r*n[5],n[6]+=e*n[8],n[7]+=r*n[8],this}scale(e,r){const n=this.mat3;return n[0]*=e,n[1]*=r,n[3]*=e,n[4]*=r,n[6]*=e,n[7]*=r,this}scaleAndTranslate(e,r,n,s){const a=this.mat3;a[0]=e*a[0]+n*a[2],a[1]=r*a[1]+s*a[2],a[3]=e*a[3]+n*a[5],a[4]=r*a[4]+s*a[5],a[6]=e*a[6]+n*a[8],a[7]=r*a[7]+s*a[8]}applyInverse(e,r){r=r||new yt;const n=this.mat3,s=e.x,a=e.y,l=n[0],c=n[3],h=n[6],_=n[1],m=n[4],f=n[7],p=n[2],y=n[5],b=n[8],T=(b*m-f*y)*s+(-b*c+h*y)*a+(f*c-h*m),S=(-b*_+f*p)*s+(b*l-h*p)*a+(-f*l+h*_),A=(y*_-m*p)*s+(-y*l+c*p)*a+(m*l-c*_);return r.x=T/A,r.y=S/A,r}invert(){const e=this.mat3,r=e[0],n=e[1],s=e[2],a=e[3],l=e[4],c=e[5],h=e[6],_=e[7],m=e[8],f=m*l-c*_,p=-m*a+c*h,y=_*a-l*h;let b=r*f+n*p+s*y;return b?(b=1/b,e[0]=f*b,e[1]=(-m*n+s*_)*b,e[2]=(c*n-s*l)*b,e[3]=p*b,e[4]=(m*r-s*h)*b,e[5]=(-c*r+s*a)*b,e[6]=y*b,e[7]=(-_*r+n*h)*b,e[8]=(l*r-n*a)*b,this):this}identity(){const e=this.mat3;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,this}clone(){return new hn(this.mat3)}copyTo2dOr3d(e){const r=this.mat3,n=e.mat3;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],e}copyTo(e,r,n){const s=this.mat3,a=1/s[8],l=s[6]*a,c=s[7]*a;if(e.a=(s[0]-s[2]*l)*a,e.b=(s[1]-s[2]*c)*a,e.c=(s[3]-s[5]*l)*a,e.d=(s[4]-s[5]*c)*a,e.tx=l,e.ty=c,r>=2){let h=e.a*e.d-e.b*e.c;n||(h=Math.abs(h)),r===Yi.POINT?(h>0?h=1:h=-1,e.a=h,e.b=0,e.c=0,e.d=h):r===Yi.AXIS_X?(h/=Math.sqrt(e.b*e.b+e.d*e.d),e.c=0,e.d=h):r===Yi.AXIS_Y?(h/=Math.sqrt(e.a*e.a+e.c*e.c),e.a=h,e.c=0):r===Yi.AXIS_XR&&(e.a=e.d*h,e.c=-e.b*h)}return e}copyFrom(e){const r=this.mat3;return r[0]=e.a,r[1]=e.b,r[2]=0,r[3]=e.c,r[4]=e.d,r[5]=0,r[6]=e.tx,r[7]=e.ty,r[8]=1,this}setToMultLegacy(e,r){const n=this.mat3,s=r.mat3,a=e.a,l=e.b,c=e.c,h=e.d,_=e.tx,m=e.ty,f=s[0],p=s[1],y=s[2],b=s[3],T=s[4],S=s[5],A=s[6],R=s[7],L=s[8];return n[0]=f*a+p*c+y*_,n[1]=f*l+p*h+y*m,n[2]=y,n[3]=b*a+T*c+S*_,n[4]=b*l+T*h+S*m,n[5]=S,n[6]=A*a+R*c+L*_,n[7]=A*l+R*h+L*m,n[8]=L,this}setToMultLegacy2(e,r){const n=this.mat3,s=e.mat3,a=s[0],l=s[1],c=s[2],h=s[3],_=s[4],m=s[5],f=s[6],p=s[7],y=s[8],b=r.a,T=r.b,S=r.c,A=r.d,R=r.tx,L=r.ty;return n[0]=b*a+T*h,n[1]=b*l+T*_,n[2]=b*c+T*m,n[3]=S*a+A*h,n[4]=S*l+A*_,n[5]=S*c+A*m,n[6]=R*a+L*h+f,n[7]=R*l+L*_+p,n[8]=R*c+L*m+y,this}setToMult(e,r){const n=this.mat3,s=e.mat3,a=r.mat3,l=s[0],c=s[1],h=s[2],_=s[3],m=s[4],f=s[5],p=s[6],y=s[7],b=s[8],T=a[0],S=a[1],A=a[2],R=a[3],L=a[4],V=a[5],M=a[6],H=a[7],g=a[8];return n[0]=T*l+S*_+A*p,n[1]=T*c+S*m+A*y,n[2]=T*h+S*f+A*b,n[3]=R*l+L*_+V*p,n[4]=R*c+L*m+V*y,n[5]=R*h+L*f+V*b,n[6]=M*l+H*_+g*p,n[7]=M*c+H*m+g*y,n[8]=M*h+H*f+g*b,this}prepend(e){return e.mat3?this.setToMult(e,this):this.setToMultLegacy(e,this)}}hn.__initStatic();hn.__initStatic2();const l1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec3 vTextureCoord;

void main(void)
{
gl_Position.xyw = projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0);

vTextureCoord = uTransform * vec3(aTextureCoord, 1.0);
}
`,VR=`
varying vec3 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
vec2 coord = mod(vTextureCoord.xy / vTextureCoord.z - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;
coord = (uMapCoord * vec3(coord, 1.0)).xy;
coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

vec4 sample = texture2D(uSampler, coord);
gl_FragColor = sample * uColor;
}
`,qR=`
varying vec3 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
vec4 sample = texture2D(uSampler, vTextureCoord.xy / vTextureCoord.z);
gl_FragColor = sample * uColor;
}
`,ao=new hn;class Nm extends vc{constructor(e){super(e),Nm.prototype.__init.call(this);const r={globals:this.renderer.globalUniforms};this.shader=Qi.from(l1,VR,r),this.simpleShader=Qi.from(l1,qR,r)}__init(){this.quad=new Rm}render(e){const r=this.renderer,n=this.quad;let s=n.vertices;s[0]=s[6]=e._width*-e.anchor.x,s[1]=s[3]=e._height*-e.anchor.y,s[2]=s[4]=e._width*(1-e.anchor.x),s[5]=s[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&(s=n.uvs,s[0]=s[6]=-e.anchor.x,s[1]=s[3]=-e.anchor.y,s[2]=s[4]=1-e.anchor.x,s[5]=s[7]=1-e.anchor.y),n.invalidate();const a=e._texture,l=a.baseTexture,c=e.tileProj.world,h=e.uvMatrix;let _=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;_&&(l._glTextures[r.CONTEXT_UID]?_=l.wrapMode!==Gn.CLAMP:l.wrapMode===Gn.CLAMP&&(l.wrapMode=Gn.REPEAT));const m=_?this.simpleShader:this.shader;ao.identity(),ao.scale(a.width,a.height),ao.prepend(c),ao.scale(1/e._width,1/e._height),ao.invert(),_?ao.prepend(h.mapCoord):(m.uniforms.uMapCoord=h.mapCoord.toArray(!0),m.uniforms.uClampFrame=h.uClampFrame,m.uniforms.uClampOffset=h.uClampOffset),m.uniforms.uTransform=ao.toArray(!0),m.uniforms.uColor=Im(e.tint,e.worldAlpha,m.uniforms.uColor,l.premultiplyAlpha),m.uniforms.translationMatrix=e.worldTransform.toArray(!0),m.uniforms.uSampler=a,r.shader.bind(m,!1),r.geometry.bind(n,void 0),r.state.setBlendMode(Pm(e.blendMode,l.premultiplyAlpha)),r.geometry.draw(ti.TRIANGLES,6,0)}}const qr=new yt,zi=[new yt,new yt,new yt,new yt],Ou=new mt,u1=new hn;class ri extends ga{constructor(e,r){super(e,r),ri.prototype.__init.call(this),ri.prototype.__init2.call(this),ri.prototype.__init3.call(this),this.local=new hn,this.world=new hn}__init(){this.matrix=new hn}__init2(){this.pivot=new xa(this.onChange,this,0,0)}__init3(){this.reverseLocalOrder=!1}onChange(){const e=this.pivot,r=this.matrix.mat3;r[6]=-(e._x*r[0]+e._y*r[3]),r[7]=-(e._x*r[1]+e._y*r[4]),this._projID++}setAxisX(e,r=1){const n=e.x,s=e.y,a=Math.sqrt(n*n+s*s),l=this.matrix.mat3;l[0]=n/a,l[1]=s/a,l[2]=r/a,this.onChange()}setAxisY(e,r=1){const n=e.x,s=e.y,a=Math.sqrt(n*n+s*s),l=this.matrix.mat3;l[3]=n/a,l[4]=s/a,l[5]=r/a,this.onChange()}mapSprite(e,r){const n=e.texture;Ou.x=-e.anchor.x*n.orig.width,Ou.y=-e.anchor.y*n.orig.height,Ou.width=n.orig.width,Ou.height=n.orig.height,this.mapQuad(Ou,r)}mapQuad(e,r){zi[0].set(e.x,e.y),zi[1].set(e.x+e.width,e.y),zi[2].set(e.x+e.width,e.y+e.height),zi[3].set(e.x,e.y+e.height);let n=1,s=2,a=3;if(zR(r[0],r[2],r[1],r[3],qr)!==0)n=1,s=3,a=2;else return;const c=Math.sqrt((r[0].x-qr.x)*(r[0].x-qr.x)+(r[0].y-qr.y)*(r[0].y-qr.y)),h=Math.sqrt((r[n].x-qr.x)*(r[n].x-qr.x)+(r[n].y-qr.y)*(r[n].y-qr.y)),_=Math.sqrt((r[s].x-qr.x)*(r[s].x-qr.x)+(r[s].y-qr.y)*(r[s].y-qr.y)),m=Math.sqrt((r[a].x-qr.x)*(r[a].x-qr.x)+(r[a].y-qr.y)*(r[a].y-qr.y)),f=(c+m)/m,p=(h+_)/_,y=(h+_)/h;let b=this.matrix.mat3;b[0]=zi[0].x*f,b[1]=zi[0].y*f,b[2]=f,b[3]=zi[n].x*p,b[4]=zi[n].y*p,b[5]=p,b[6]=zi[s].x*y,b[7]=zi[s].y*y,b[8]=y,this.matrix.invert(),b=u1.mat3,b[0]=r[0].x,b[1]=r[0].y,b[2]=1,b[3]=r[n].x,b[4]=r[n].y,b[5]=1,b[6]=r[s].x,b[7]=r[s].y,b[8]=1,this.matrix.setToMult(u1,this.matrix),this._projID++}updateLocalTransform(e){this._projID!==0?this.reverseLocalOrder?this.local.setToMultLegacy2(this.matrix,e):this.local.setToMultLegacy(e,this.matrix):this.local.copyFrom(e)}clear(){super.clear(),this.matrix.identity(),this.pivot.set(0,0)}}function WR(){return this.proj.affine?this.transform.worldTransform:this.proj.world}class Wb extends gr{constructor(){super(),this.proj=new ri(this.transform)}toLocal(e,r,n,s,a=cn.ALL){return r&&(e=r.toGlobal(e,n,s)),s||this._recursivePostUpdateTransform(),a>=cn.PROJ?(s||this.displayObjectUpdateTransform(),this.proj.affine?this.transform.worldTransform.applyInverse(e,n):this.proj.world.applyInverse(e,n)):(this.parent?n=this.parent.worldTransform.applyInverse(e,n):(n.x=e.x,n.y=e.y),a===cn.NONE?n:this.transform.localTransform.applyInverse(n,n))}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}}const Fm=Wb.prototype.toLocal;function $R(i){let e,r=i[0],n=1;for(;n<i.length;){const s=i[n],a=i[n+1];if(n+=2,(s==="optionalAccess"||s==="optionalCall")&&r==null)return;s==="access"||s==="optionalAccess"?(e=r,r=a(r)):(s==="call"||s==="optionalCall")&&(r=a((...l)=>r.call(e,...l)),e=void 0)}return r}class bi extends Eo{static __initStatic(){this.defaultVertexShader=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
gl_Position.xyw = projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0);
gl_Position.z = 0.0;

vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`}static __initStatic2(){this.defaultFragmentShader=`
varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}`}constructor(e,r,n,s){super(e,r,n,s),bi.prototype.__init.call(this),this.proj=new ri(this.transform)}__init(){this.vertexData2d=null}calculateVertices(){if(this.proj._affine){this.vertexData2d=null,super.calculateVertices();return}const e=this.geometry,r=e.buffers[0].data,n=this;if(e.vertexDirtyId===n.vertexDirty&&n._transformID===n.transform._worldID)return;n._transformID=n.transform._worldID,n.vertexData.length!==r.length&&(n.vertexData=new Float32Array(r.length)),(!this.vertexData2d||this.vertexData2d.length!==r.length*3/2)&&(this.vertexData2d=new Float32Array(r.length*3));const s=this.proj.world.mat3,a=this.vertexData2d,l=n.vertexData;for(let c=0;c<l.length/2;c++){const h=r[c*2],_=r[c*2+1],m=s[0]*h+s[3]*_+s[6],f=s[1]*h+s[4]*_+s[7],p=s[2]*h+s[5]*_+s[8];a[c*3]=m,a[c*3+1]=f,a[c*3+2]=p,l[c*2]=m/p,l[c*2+1]=f/p}n.vertexDirty=e.vertexDirtyId}_renderDefault(e){const r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),e.batch.flush(),$R([r,"access",n=>n.program,"access",n=>n.uniformData,"optionalAccess",n=>n.translationMatrix])&&(r.uniforms.translationMatrix=this.worldTransform.toArray(!0)),e.shader.bind(r,!1),e.state.set(this.state),e.geometry.bind(this.geometry,r),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}toLocal(e,r,n,s,a=cn.ALL){return Fm.call(this,e,r,n,s,a)}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}}bi.__initStatic();bi.__initStatic2();class Ei extends Mr{constructor(e){super(e),Ei.prototype.__init.call(this),this.proj=new ri(this.transform),this.pluginName="batch2d"}__init(){this.vertexData2d=null}_calculateBounds(){this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)}calculateVertices(){const e=this._texture,r=this;if(this.proj._affine){this.vertexData2d=null,super.calculateVertices();return}this.vertexData2d||(this.vertexData2d=new Float32Array(12));const n=this.transform._worldID,s=e._updateID;if(r._transformID===n&&this._textureID===s)return;this._textureID!==s&&(this.uvs=e._uvs.uvsFloat32),r._transformID=n,this._textureID=s;const a=this.proj.world.mat3,l=this.vertexData2d,c=this.vertexData,h=e.trim,_=e.orig,m=this._anchor;let f,p,y,b;h?(p=h.x-m._x*_.width,f=p+h.width,b=h.y-m._y*_.height,y=b+h.height):(p=-m._x*_.width,f=p+_.width,b=-m._y*_.height,y=b+_.height),l[0]=a[0]*p+a[3]*b+a[6],l[1]=a[1]*p+a[4]*b+a[7],l[2]=a[2]*p+a[5]*b+a[8],l[3]=a[0]*f+a[3]*b+a[6],l[4]=a[1]*f+a[4]*b+a[7],l[5]=a[2]*f+a[5]*b+a[8],l[6]=a[0]*f+a[3]*y+a[6],l[7]=a[1]*f+a[4]*y+a[7],l[8]=a[2]*f+a[5]*y+a[8],l[9]=a[0]*p+a[3]*y+a[6],l[10]=a[1]*p+a[4]*y+a[7],l[11]=a[2]*p+a[5]*y+a[8],c[0]=l[0]/l[2],c[1]=l[1]/l[2],c[2]=l[3]/l[5],c[3]=l[4]/l[5],c[4]=l[6]/l[8],c[5]=l[7]/l[8],c[6]=l[9]/l[11],c[7]=l[10]/l[11]}calculateTrimmedVertices(){if(this.proj._affine){super.calculateTrimmedVertices();return}const e=this.transform._worldID,r=this._texture._updateID,n=this;if(!n.vertexTrimmedData)n.vertexTrimmedData=new Float32Array(8);else if(n._transformTrimmedID===e&&this._textureTrimmedID===r)return;n._transformTrimmedID=e,this._textureTrimmedID=r;const s=this._texture,a=n.vertexTrimmedData,l=s.orig,c=this.tileProj?this._width:l.width,h=this.tileProj?this._height:l.height,_=this._anchor,m=this.proj.world.mat3,f=-_._x*c,p=f+c,y=-_._y*h,b=y+h;let T=1/(m[2]*f+m[5]*y+m[8]);a[0]=T*(m[0]*f+m[3]*y+m[6]),a[1]=T*(m[1]*f+m[4]*y+m[7]),T=1/(m[2]*p+m[5]*y+m[8]),a[2]=T*(m[0]*p+m[3]*y+m[6]),a[3]=T*(m[1]*p+m[4]*y+m[7]),T=1/(m[2]*p+m[5]*b+m[8]),a[4]=T*(m[0]*p+m[3]*b+m[6]),a[5]=T*(m[1]*p+m[4]*b+m[7]),T=1/(m[2]*f+m[5]*b+m[8]),a[6]=T*(m[0]*f+m[3]*b+m[6]),a[7]=T*(m[1]*f+m[4]*b+m[7])}toLocal(e,r,n,s,a=cn.ALL){return Fm.call(this,e,r,n,s,a)}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}}const YR=new Ul;class KR extends jb{constructor(e,r,n){super(e,r,n),this.tileProj=new ri(this.tileTransform),this.tileProj.reverseLocalOrder=!0,this.proj=new ri(this.transform),this.pluginName="tilingSprite2d",this.uvRespectAnchor=!0}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}toLocal(e,r,n,s,a=cn.ALL){return Fm.call(this,e,r,n,s,a)}_render(e){const r=this._texture;!r||!r.valid||(this.tileTransform.updateTransform(YR),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}}function Kf(){this.proj||(this.proj=new ri(this.transform),this.toLocal=Wb.prototype.toLocal,Object.defineProperty(this,"worldTransform",{get:WR,enumerable:!0,configurable:!0}))}gr.prototype.convertTo2d=Kf;Mr.prototype.convertTo2d=function(){this.proj||(this.calculateVertices=Ei.prototype.calculateVertices,this.calculateTrimmedVertices=Ei.prototype.calculateTrimmedVertices,this._calculateBounds=Ei.prototype._calculateBounds,this.pluginName="batch2d",Kf.call(this))};gr.prototype.convertSubtreeTo2d=function(){this.convertTo2d();for(let e=0;e<this.children.length;e++)this.children[e].convertSubtreeTo2d()};qb.prototype.convertTo2d=Vb.prototype.convertTo2d=function(){this.proj||(this.calculateVertices=bi.prototype.calculateVertices,this._renderDefault=bi.prototype._renderDefault,this.material.pluginName!=="batch2d"&&(this.material=new Co(this.material.texture,{program:Io.from(bi.defaultVertexShader,bi.defaultFragmentShader),pluginName:"batch2d"})),Kf.call(this))};jb.prototype.convertTo2d=function(){this.proj||(this.tileProj=new ri(this.tileTransform),this.tileProj.reverseLocalOrder=!0,this.uvRespectAnchor=!0,this.calculateTrimmedVertices=Ei.prototype.calculateTrimmedVertices,this._calculateBounds=Ei.prototype._calculateBounds,this._render=KR.prototype._render,this.pluginName="tilingSprite2d",Kf.call(this))};class yc extends So{constructor(e,r,n){super(e,r,n),yc.prototype.__init.call(this),this.proj=new ri(this.transform),this.pluginName="batch2d"}__init(){this.vertexData2d=null}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}}yc.prototype.calculateVertices=Ei.prototype.calculateVertices;yc.prototype.calculateTrimmedVertices=Ei.prototype.calculateTrimmedVertices;yc.prototype._calculateBounds=Ei.prototype._calculateBounds;const QR=`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec3 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

vTextureCoord = aTextureCoord;
vMaskCoord = otherMatrix * vec3( aTextureCoord, 1.0);
}
`,ZR=`
varying vec3 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform vec4 maskClamp;

void main(void)
{
vec2 uv = vMaskCoord.xy / vMaskCoord.z;

float clip = step(3.5,
    step(maskClamp.x, uv.x) +
    step(maskClamp.y, uv.y) +
    step(uv.x, maskClamp.z) +
    step(uv.y, maskClamp.w));

vec4 original = texture2D(uSampler, vTextureCoord);
vec4 masky = texture2D(mask, uv);

original *= (masky.r * masky.a * alpha * clip);

gl_FragColor = original;
}
`,c1=new hn;class Gf extends js{constructor(e){super(QR,ZR),Gf.prototype.__init.call(this),e.renderable=!1,this.maskSprite=e}__init(){this.maskMatrix=new hn}apply(e,r,n,s){const a=this.maskSprite,l=this.maskSprite.texture;l.valid&&(l.uvMatrix||(l.uvMatrix=new _c(l,0)),l.uvMatrix.update(),this.uniforms.npmAlpha=l.baseTexture.alphaMode?0:1,this.uniforms.mask=a.texture,this.uniforms.otherMatrix=Gf.calculateSpriteMatrix(r,this.maskMatrix,a).prepend(l.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=l.uvMatrix.uClampFrame,e.applyFilter(this,r,n,s))}static calculateSpriteMatrix(e,r,n){const s=n.proj,a=e.filterFrame,l=s&&!s._affine?s.world.copyTo2dOr3d(c1):c1.copyFrom(n.transform.worldTransform),c=n.texture.orig;return r.set(e.width,0,0,e.height,a.x,a.y),l.invert(),r.setToMult(l,r),r.scaleAndTranslate(1/c.width,1/c.height,n.anchor.x,n.anchor.y),r}}Eb.prototype.pushSpriteMask=function(e){const{maskObject:r}=e,n=e._target;let s=this.alphaMaskPool[this.alphaMaskIndex];s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new Gf(r)]),s[0].resolution=this.renderer.resolution,s[0].maskSprite=r;const a=n.filterArea;n.filterArea=r.getBounds(!0),this.renderer.filter.push(n,s),n.filterArea=a,this.alphaMaskIndex++};mc.registerPlugin("tilingSprite2d",Nm);class h1 extends yt{constructor(e,r,n){super(e,r),this.z=n}set(e,r,n){return this.x=e||0,this.y=r===void 0?this.x:r||0,this.z=r===void 0?this.x:n||0,this}copyFrom(e){return this.set(e.x,e.y,e.z||0),this}copyTo(e){return e.set(this.x,this.y,this.z),e}}class qu extends xa{constructor(...e){super(...e),qu.prototype.__init.call(this)}__init(){this._z=0}get z(){return this._z}set z(e){this._z!==e&&(this._z=e,this.cb.call(this.scope))}set(e,r,n){const s=e||0,a=r===void 0?s:r||0,l=r===void 0?s:n||0;return(this._x!==s||this._y!==a||this._z!==l)&&(this._x=s,this._y=a,this._z=l,this.cb.call(this.scope)),this}copyFrom(e){return this.set(e.x,e.y,e.z||0),this}copyTo(e){return e.set(this._x,this._y,this._z),e}}class El{constructor(e,r,n){El.prototype.__init.call(this),El.prototype.__init2.call(this),El.prototype.__init3.call(this),this._x=e||0,this._y=r||0,this._z=n||0,this.quaternion=new Float64Array(4),this.quaternion[3]=1,this.update()}__init(){this._quatUpdateId=-1}__init2(){this._quatDirtyId=0}__init3(){this._sign=1}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._quatDirtyId++)}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._quatDirtyId++)}get z(){return this._z}set z(e){this._z!==e&&(this._z=e,this._quatDirtyId++)}get pitch(){return this._x}set pitch(e){this._x!==e&&(this._x=e,this._quatDirtyId++)}get yaw(){return this._y}set yaw(e){this._y!==e&&(this._y=e,this._quatDirtyId++)}get roll(){return this._z}set roll(e){this._z!==e&&(this._z=e,this._quatDirtyId++)}set(e,r,n){const s=e||0,a=r||0,l=n||0;(this._x!==s||this._y!==a||this._z!==l)&&(this._x=s,this._y=a,this._z=l,this._quatDirtyId++)}copyFrom(e){const r=e.x,n=e.y,s=e.z;return(this._x!==r||this._y!==n||this._z!==s)&&(this._x=r,this._y=n,this._z=s,this._quatDirtyId++),this}copyTo(e){return e.set(this._x,this._y,this._z),e}equals(e){return this._x===e.x&&this._y===e.y&&this._z===e.z}clone(){return new El(this._x,this._y,this._z)}update(){if(this._quatUpdateId===this._quatDirtyId)return!1;this._quatUpdateId=this._quatDirtyId;const e=Math.cos(this._x/2),r=Math.cos(this._y/2),n=Math.cos(this._z/2),s=this._sign,a=s*Math.sin(this._x/2),l=s*Math.sin(this._y/2),c=s*Math.sin(this._z/2),h=this.quaternion;return h[0]=a*r*n+e*l*c,h[1]=e*l*n-a*r*c,h[2]=e*r*c+a*l*n,h[3]=e*r*n-a*l*c,!0}}class Wu{constructor(e,r,n,s,a){this.cb=e,this.scope=r,Wu.prototype.__init.call(this),Wu.prototype.__init2.call(this),Wu.prototype.__init3.call(this),this._x=n||0,this._y=s||0,this._z=a||0,this.quaternion=new Float64Array(4),this.quaternion[3]=1,this.update()}__init(){this._quatUpdateId=-1}__init2(){this._quatDirtyId=0}__init3(){this._sign=1}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._quatDirtyId++,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._quatDirtyId++,this.cb.call(this.scope))}get z(){return this._z}set z(e){this._z!==e&&(this._z=e,this._quatDirtyId++,this.cb.call(this.scope))}get pitch(){return this._x}set pitch(e){this._x!==e&&(this._x=e,this._quatDirtyId++,this.cb.call(this.scope))}get yaw(){return this._y}set yaw(e){this._y!==e&&(this._y=e,this._quatDirtyId++,this.cb.call(this.scope))}get roll(){return this._z}set roll(e){this._z!==e&&(this._z=e,this._quatDirtyId++,this.cb.call(this.scope))}set(e,r,n){const s=e||0,a=r||0,l=n||0;return(this._x!==s||this._y!==a||this._z!==l)&&(this._x=s,this._y=a,this._z=l,this._quatDirtyId++,this.cb.call(this.scope)),this}copyFrom(e){const r=e.x,n=e.y,s=e.z;return(this._x!==r||this._y!==n||this._z!==s)&&(this._x=r,this._y=n,this._z=s,this._quatDirtyId++,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y,this._z),e}equals(e){return this._x===e.x&&this._y===e.y&&this._z===e.z}clone(){return new El(this._x,this._y,this._z)}update(){if(this._quatUpdateId===this._quatDirtyId)return!1;this._quatUpdateId=this._quatDirtyId;const e=Math.cos(this._x/2),r=Math.cos(this._y/2),n=Math.cos(this._z/2),s=this._sign,a=s*Math.sin(this._x/2),l=s*Math.sin(this._y/2),c=s*Math.sin(this._z/2),h=this.quaternion;return h[0]=a*r*n+e*l*c,h[1]=e*l*n-a*r*c,h[2]=e*r*c+a*l*n,h[3]=e*r*n-a*l*c,!0}}const JR=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];class Rr{static __initStatic(){this.IDENTITY=new Rr}static __initStatic2(){this.TEMP_MATRIX=new Rr}__init(){this.floatArray=null}__init2(){this._dirtyId=0}__init3(){this._updateId=-1}__init4(){this._mat4inv=null}__init5(){this.cacheInverse=!1}constructor(e){Rr.prototype.__init.call(this),Rr.prototype.__init2.call(this),Rr.prototype.__init3.call(this),Rr.prototype.__init4.call(this),Rr.prototype.__init5.call(this),this.mat4=new Float64Array(e||JR)}get a(){return this.mat4[0]/this.mat4[15]}set a(e){this.mat4[0]=e*this.mat4[15]}get b(){return this.mat4[1]/this.mat4[15]}set b(e){this.mat4[1]=e*this.mat4[15]}get c(){return this.mat4[4]/this.mat4[15]}set c(e){this.mat4[4]=e*this.mat4[15]}get d(){return this.mat4[5]/this.mat4[15]}set d(e){this.mat4[5]=e*this.mat4[15]}get tx(){return this.mat4[12]/this.mat4[15]}set tx(e){this.mat4[12]=e*this.mat4[15]}get ty(){return this.mat4[13]/this.mat4[15]}set ty(e){this.mat4[13]=e*this.mat4[15]}set(e,r,n,s,a,l){const c=this.mat4;return c[0]=e,c[1]=r,c[2]=0,c[3]=0,c[4]=n,c[5]=s,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=a,c[13]=l,c[14]=0,c[15]=1,this}toArray(e,r){this.floatArray||(this.floatArray=new Float32Array(9));const n=r||this.floatArray,s=this.mat4;return e?(n[0]=s[0],n[1]=s[1],n[2]=s[3],n[3]=s[4],n[4]=s[5],n[5]=s[7],n[6]=s[12],n[7]=s[13],n[8]=s[15]):(n[0]=s[0],n[1]=s[4],n[2]=s[12],n[3]=s[2],n[4]=s[6],n[5]=s[13],n[6]=s[3],n[7]=s[7],n[8]=s[15]),n}setToTranslation(e,r,n){const s=this.mat4;s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=e,s[13]=r,s[14]=n,s[15]=1}setToRotationTranslationScale(e,r,n,s,a,l,c){const h=this.mat4,_=e[0],m=e[1],f=e[2],p=e[3],y=_+_,b=m+m,T=f+f,S=_*y,A=_*b,R=_*T,L=m*b,V=m*T,M=f*T,H=p*y,g=p*b,ne=p*T;return h[0]=(1-(L+M))*a,h[1]=(A+ne)*a,h[2]=(R-g)*a,h[3]=0,h[4]=(A-ne)*l,h[5]=(1-(S+M))*l,h[6]=(V+H)*l,h[7]=0,h[8]=(R+g)*c,h[9]=(V-H)*c,h[10]=(1-(S+L))*c,h[11]=0,h[12]=r,h[13]=n,h[14]=s,h[15]=1,h}apply(e,r){r=r||new h1;const n=this.mat4,s=e.x,a=e.y,l=e.z||0,c=1/(n[3]*s+n[7]*a+n[11]*l+n[15]);return r.x=c*(n[0]*s+n[4]*a+n[8]*l+n[12]),r.y=c*(n[1]*s+n[5]*a+n[9]*l+n[13]),r.z=c*(n[2]*s+n[6]*a+n[10]*l+n[14]),r}translate(e,r,n){const s=this.mat4;return s[12]=s[0]*e+s[4]*r+s[8]*n+s[12],s[13]=s[1]*e+s[5]*r+s[9]*n+s[13],s[14]=s[2]*e+s[6]*r+s[10]*n+s[14],s[15]=s[3]*e+s[7]*r+s[11]*n+s[15],this}scale(e,r,n){const s=this.mat4;return s[0]*=e,s[1]*=e,s[2]*=e,s[3]*=e,s[4]*=r,s[5]*=r,s[6]*=r,s[7]*=r,n!==void 0&&(s[8]*=n,s[9]*=n,s[10]*=n,s[11]*=n),this}scaleAndTranslate(e,r,n,s,a,l){const c=this.mat4;c[0]=e*c[0]+s*c[3],c[1]=r*c[1]+a*c[3],c[2]=n*c[2]+l*c[3],c[4]=e*c[4]+s*c[7],c[5]=r*c[5]+a*c[7],c[6]=n*c[6]+l*c[7],c[8]=e*c[8]+s*c[11],c[9]=r*c[9]+a*c[11],c[10]=n*c[10]+l*c[11],c[12]=e*c[12]+s*c[15],c[13]=r*c[13]+a*c[15],c[14]=n*c[14]+l*c[15]}applyInverse(e,r){r=r||new h1,this._mat4inv||(this._mat4inv=new Float64Array(16));const n=this._mat4inv,s=this.mat4,a=e.x,l=e.y;let c=e.z||0;(!this.cacheInverse||this._updateId!==this._dirtyId)&&(this._updateId=this._dirtyId,Rr.glMatrixMat4Invert(n,s));const h=1/(n[3]*a+n[7]*l+n[11]*c+n[15]),_=h*(n[0]*a+n[4]*l+n[8]*c+n[12]),m=h*(n[1]*a+n[5]*l+n[9]*c+n[13]),f=h*(n[2]*a+n[6]*l+n[10]*c+n[14]);c+=1;const p=1/(n[3]*a+n[7]*l+n[11]*c+n[15]),y=p*(n[0]*a+n[4]*l+n[8]*c+n[12]),b=p*(n[1]*a+n[5]*l+n[9]*c+n[13]),T=p*(n[2]*a+n[6]*l+n[10]*c+n[14]);Math.abs(f-T)<1e-10&&r.set(NaN,NaN,0);const S=(0-f)/(T-f);return r.set((y-_)*S+_,(b-m)*S+m,0),r}invert(){return Rr.glMatrixMat4Invert(this.mat4,this.mat4),this}invertCopyTo(e){this._mat4inv||(this._mat4inv=new Float64Array(16));const r=this._mat4inv,n=this.mat4;(!this.cacheInverse||this._updateId!==this._dirtyId)&&(this._updateId=this._dirtyId,Rr.glMatrixMat4Invert(r,n)),e.mat4.set(r)}identity(){const e=this.mat4;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}clone(){return new Rr(this.mat4)}copyTo3d(e){const r=this.mat4,n=e.mat4;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],e}copyTo2d(e){const r=this.mat4,n=e.mat3;return n[0]=r[0],n[1]=r[1],n[2]=r[3],n[3]=r[4],n[4]=r[5],n[5]=r[7],n[6]=r[12],n[7]=r[13],n[8]=r[15],e}copyTo2dOr3d(e){return e instanceof hn?this.copyTo2d(e):this.copyTo3d(e)}copyTo(e,r,n){const s=this.mat4,a=1/s[15],l=s[12]*a,c=s[13]*a;if(e.a=(s[0]-s[3]*l)*a,e.b=(s[1]-s[3]*c)*a,e.c=(s[4]-s[7]*l)*a,e.d=(s[5]-s[7]*c)*a,e.tx=l,e.ty=c,r>=2){let h=e.a*e.d-e.b*e.c;n||(h=Math.abs(h)),r===Yi.POINT?(h>0?h=1:h=-1,e.a=h,e.b=0,e.c=0,e.d=h):r===Yi.AXIS_X?(h/=Math.sqrt(e.b*e.b+e.d*e.d),e.c=0,e.d=h):r===Yi.AXIS_Y&&(h/=Math.sqrt(e.a*e.a+e.c*e.c),e.a=h,e.c=0)}return e}copyFrom(e){const r=this.mat4;return r[0]=e.a,r[1]=e.b,r[2]=0,r[3]=0,r[4]=e.c,r[5]=e.d,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e.tx,r[13]=e.ty,r[14]=0,r[15]=1,this._dirtyId++,this}setToMultLegacy(e,r){const n=this.mat4,s=r.mat4,a=e.a,l=e.b,c=e.c,h=e.d,_=e.tx,m=e.ty;let f=s[0],p=s[1],y=s[2],b=s[3];return n[0]=f*a+p*c+b*_,n[1]=f*l+p*h+b*m,n[2]=y,n[3]=b,f=s[4],p=s[5],y=s[6],b=s[7],n[4]=f*a+p*c+b*_,n[5]=f*l+p*h+b*m,n[6]=y,n[7]=b,f=s[8],p=s[9],y=s[10],b=s[11],n[8]=f*a+p*c+b*_,n[9]=f*l+p*h+b*m,n[10]=y,n[11]=b,f=s[12],p=s[13],y=s[14],b=s[15],n[12]=f*a+p*c+b*_,n[13]=f*l+p*h+b*m,n[14]=y,n[15]=b,this._dirtyId++,this}setToMultLegacy2(e,r){const n=this.mat4,s=e.mat4,a=s[0],l=s[1],c=s[2],h=s[3],_=s[4],m=s[5],f=s[6],p=s[7],y=r.a,b=r.b,T=r.c,S=r.d,A=r.tx,R=r.ty;return n[0]=y*a+b*_,n[1]=y*l+b*m,n[2]=y*c+b*f,n[3]=y*h+b*p,n[4]=T*a+S*_,n[5]=T*l+S*m,n[6]=T*c+S*f,n[7]=T*h+S*p,n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=A*a+R*_+s[12],n[13]=A*l+R*m+s[13],n[14]=A*c+R*f+s[14],n[15]=A*h+R*p+s[15],this._dirtyId++,this}setToMult(e,r){return Rr.glMatrixMat4Multiply(this.mat4,e.mat4,r.mat4),this._dirtyId++,this}prepend(e){e.mat4?this.setToMult(e,this):this.setToMultLegacy(e,this)}static glMatrixMat4Invert(e,r){const n=r[0],s=r[1],a=r[2],l=r[3],c=r[4],h=r[5],_=r[6],m=r[7],f=r[8],p=r[9],y=r[10],b=r[11],T=r[12],S=r[13],A=r[14],R=r[15],L=n*h-s*c,V=n*_-a*c,M=n*m-l*c,H=s*_-a*h,g=s*m-l*h,ne=a*m-l*_,B=f*S-p*T,Y=f*A-y*T,se=f*R-b*T,re=p*A-y*S,he=p*R-b*S,xe=y*R-b*A;let Z=L*xe-V*he+M*re+H*se-g*Y+ne*B;return Z?(Z=1/Z,e[0]=(h*xe-_*he+m*re)*Z,e[1]=(a*he-s*xe-l*re)*Z,e[2]=(S*ne-A*g+R*H)*Z,e[3]=(y*g-p*ne-b*H)*Z,e[4]=(_*se-c*xe-m*Y)*Z,e[5]=(n*xe-a*se+l*Y)*Z,e[6]=(A*M-T*ne-R*V)*Z,e[7]=(f*ne-y*M+b*V)*Z,e[8]=(c*he-h*se+m*B)*Z,e[9]=(s*se-n*he-l*B)*Z,e[10]=(T*g-S*M+R*L)*Z,e[11]=(p*M-f*g-b*L)*Z,e[12]=(h*Y-c*re-_*B)*Z,e[13]=(n*re-s*Y+a*B)*Z,e[14]=(S*V-T*H-A*L)*Z,e[15]=(f*H-p*V+y*L)*Z,e):null}static glMatrixMat4Multiply(e,r,n){const s=r[0],a=r[1],l=r[2],c=r[3],h=r[4],_=r[5],m=r[6],f=r[7],p=r[8],y=r[9],b=r[10],T=r[11],S=r[12],A=r[13],R=r[14],L=r[15];let V=n[0],M=n[1],H=n[2],g=n[3];return e[0]=V*s+M*h+H*p+g*S,e[1]=V*a+M*_+H*y+g*A,e[2]=V*l+M*m+H*b+g*R,e[3]=V*c+M*f+H*T+g*L,V=n[4],M=n[5],H=n[6],g=n[7],e[4]=V*s+M*h+H*p+g*S,e[5]=V*a+M*_+H*y+g*A,e[6]=V*l+M*m+H*b+g*R,e[7]=V*c+M*f+H*T+g*L,V=n[8],M=n[9],H=n[10],g=n[11],e[8]=V*s+M*h+H*p+g*S,e[9]=V*a+M*_+H*y+g*A,e[10]=V*l+M*m+H*b+g*R,e[11]=V*c+M*f+H*T+g*L,V=n[12],M=n[13],H=n[14],g=n[15],e[12]=V*s+M*h+H*p+g*S,e[13]=V*a+M*_+H*y+g*A,e[14]=V*l+M*m+H*b+g*R,e[15]=V*c+M*f+H*T+g*L,e}}Rr.__initStatic();Rr.__initStatic2();const f1=new Rr;class Jn extends ga{constructor(e,r){super(e,r),Jn.prototype.__init.call(this),Jn.prototype.__init2.call(this),Jn.prototype.__init3.call(this),Jn.prototype.__init4.call(this),Jn.prototype.__init5.call(this),Jn.prototype.__init6.call(this),this.local=new Rr,this.world=new Rr,this.local.cacheInverse=!0,this.world.cacheInverse=!0,this.position._z=0,this.scale._z=1,this.pivot._z=0}__init(){this.cameraMatrix=null}__init2(){this._cameraMode=!1}get cameraMode(){return this._cameraMode}set cameraMode(e){this._cameraMode!==e&&(this._cameraMode=e,this.euler._sign=this._cameraMode?-1:1,this.euler._quatDirtyId++,e&&(this.cameraMatrix=new Rr))}__init3(){this.position=new qu(this.onChange,this,0,0)}__init4(){this.scale=new qu(this.onChange,this,1,1)}__init5(){this.euler=new Wu(this.onChange,this,0,0,0)}__init6(){this.pivot=new qu(this.onChange,this,0,0)}onChange(){this._projID++}clear(){this.cameraMatrix&&this.cameraMatrix.identity(),this.position.set(0,0,0),this.scale.set(1,1,1),this.euler.set(0,0,0),this.pivot.set(0,0,0),super.clear()}updateLocalTransform(e){if(this._projID===0){this.local.copyFrom(e);return}const r=this.local,n=this.euler,s=this.position,a=this.scale,l=this.pivot;if(n.update(),!this.cameraMode){r.setToRotationTranslationScale(n.quaternion,s._x,s._y,s._z,a._x,a._y,a._z),r.translate(-l._x,-l._y,-l._z),r.setToMultLegacy(e,r);return}r.setToMultLegacy(e,this.cameraMatrix),r.translate(l._x,l._y,l._z),r.scale(1/a._x,1/a._y,1/a._z),f1.setToRotationTranslationScale(n.quaternion,0,0,0,1,1,1),r.setToMult(r,f1),r.translate(-s._x,-s._y,-s._z),this.local._dirtyId++}}function eM(){return this.proj.affine?this.transform.worldTransform:this.proj.world}class Ml extends gr{constructor(){super(),this.proj=new Jn(this.transform)}isFrontFace(e=!1){e&&(this._recursivePostUpdateTransform(),this.displayObjectUpdateTransform());const r=this.proj.world.mat4,n=r[0]*r[15]-r[3]*r[12],s=r[1]*r[15]-r[3]*r[13],a=r[4]*r[15]-r[7]*r[12],l=r[5]*r[15]-r[7]*r[13];return n*l-a*s>0}getDepth(e=!1){e&&(this._recursivePostUpdateTransform(),this.displayObjectUpdateTransform());const r=this.proj.world.mat4;return r[14]/r[15]}toLocal(e,r,n,s,a=cn.ALL){return r&&(e=r.toGlobal(e,n,s)),s||this._recursivePostUpdateTransform(),a===cn.ALL?(s||this.displayObjectUpdateTransform(),this.proj.affine?this.transform.worldTransform.applyInverse(e,n):this.proj.world.applyInverse(e,n)):(this.parent?n=this.parent.worldTransform.applyInverse(e,n):(n.x=e.x,n.y=e.y,n.z=e.z),a===cn.NONE||(n=this.transform.localTransform.applyInverse(n,n),a===cn.PROJ&&this.proj.cameraMode&&(n=this.proj.cameraMatrix.applyInverse(n,n))),n)}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}get position3d(){return this.proj.position}set position3d(e){this.proj.position.copyFrom(e)}get scale3d(){return this.proj.scale}set scale3d(e){this.proj.scale.copyFrom(e)}get euler(){return this.proj.euler}set euler(e){this.proj.euler.copyFrom(e)}get pivot3d(){return this.proj.pivot}set pivot3d(e){this.proj.pivot.copyFrom(e)}}const Lm=Ml.prototype.toLocal,Bm=Ml.prototype.getDepth,jm=Ml.prototype.isFrontFace;class ac extends Eo{constructor(e,r,n,s){super(e,r,n,s),ac.prototype.__init.call(this),this.proj=new Jn(this.transform)}__init(){this.vertexData2d=null}calculateVertices(){if(this.proj._affine){this.vertexData2d=null,super.calculateVertices();return}const e=this.geometry,r=e.buffers[0].data,n=this;if(e.vertexDirtyId===n.vertexDirty&&n._transformID===n.transform._worldID)return;n._transformID=n.transform._worldID,n.vertexData.length!==r.length&&(n.vertexData=new Float32Array(r.length)),(!this.vertexData2d||this.vertexData2d.length!==r.length*3/2)&&(this.vertexData2d=new Float32Array(r.length*3));const s=this.proj.world.mat4,a=this.vertexData2d,l=n.vertexData;for(let c=0;c<l.length/2;c++){const h=r[c*2],_=r[c*2+1],m=s[0]*h+s[4]*_+s[12],f=s[1]*h+s[5]*_+s[13],p=s[3]*h+s[7]*_+s[15];a[c*3]=m,a[c*3+1]=f,a[c*3+2]=p,l[c*2]=m/p,l[c*2+1]=f/p}n.vertexDirty=e.vertexDirtyId}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}toLocal(e,r,n,s,a=cn.ALL){return Lm.call(this,e,r,n,s,a)}isFrontFace(e){return jm.call(this,e)}getDepth(e){return Bm.call(this,e)}get position3d(){return this.proj.position}set position3d(e){this.proj.position.copyFrom(e)}get scale3d(){return this.proj.scale}set scale3d(e){this.proj.scale.copyFrom(e)}get euler(){return this.proj.euler}set euler(e){this.proj.euler.copyFrom(e)}get pivot3d(){return this.proj.pivot}set pivot3d(e){this.proj.pivot.copyFrom(e)}}ac.prototype._renderDefault=bi.prototype._renderDefault;class Un extends Mr{constructor(e){super(e),Un.prototype.__init.call(this),Un.prototype.__init2.call(this),Un.prototype.__init3.call(this),this.proj=new Jn(this.transform),this.pluginName="batch2d"}__init(){this.vertexData2d=null}__init2(){this.culledByFrustrum=!1}__init3(){this.trimmedCulledByFrustrum=!1}calculateVertices(){const e=this._texture;if(this.proj._affine){this.vertexData2d=null,super.calculateVertices();return}this.vertexData2d||(this.vertexData2d=new Float32Array(12));const r=this.transform._worldID,n=e._updateID,s=this;if(s._transformID===r&&this._textureID===n)return;this._textureID!==n&&(this.uvs=e._uvs.uvsFloat32),s._transformID=r,this._textureID=n;const a=this.proj.world.mat4,l=this.vertexData2d,c=this.vertexData,h=e.trim,_=e.orig,m=this._anchor;let f,p,y,b;h?(p=h.x-m._x*_.width,f=p+h.width,b=h.y-m._y*_.height,y=b+h.height):(p=-m._x*_.width,f=p+_.width,b=-m._y*_.height,y=b+_.height);let T=!1,S;l[0]=a[0]*p+a[4]*b+a[12],l[1]=a[1]*p+a[5]*b+a[13],S=a[2]*p+a[6]*b+a[14],l[2]=a[3]*p+a[7]*b+a[15],T=T||S<0,l[3]=a[0]*f+a[4]*b+a[12],l[4]=a[1]*f+a[5]*b+a[13],S=a[2]*f+a[6]*b+a[14],l[5]=a[3]*f+a[7]*b+a[15],T=T||S<0,l[6]=a[0]*f+a[4]*y+a[12],l[7]=a[1]*f+a[5]*y+a[13],S=a[2]*f+a[6]*y+a[14],l[8]=a[3]*f+a[7]*y+a[15],T=T||S<0,l[9]=a[0]*p+a[4]*y+a[12],l[10]=a[1]*p+a[5]*y+a[13],S=a[2]*p+a[6]*y+a[14],l[11]=a[3]*p+a[7]*y+a[15],T=T||S<0,this.culledByFrustrum=T,c[0]=l[0]/l[2],c[1]=l[1]/l[2],c[2]=l[3]/l[5],c[3]=l[4]/l[5],c[4]=l[6]/l[8],c[5]=l[7]/l[8],c[6]=l[9]/l[11],c[7]=l[10]/l[11]}calculateTrimmedVertices(){if(this.proj._affine){super.calculateTrimmedVertices();return}const e=this.transform._worldID,r=this._texture._updateID,n=this;if(!n.vertexTrimmedData)n.vertexTrimmedData=new Float32Array(8);else if(n._transformTrimmedID===e&&this._textureTrimmedID===r)return;n._transformTrimmedID=e,this._textureTrimmedID=r;const s=this._texture,a=n.vertexTrimmedData,l=s.orig,c=this._anchor,h=this.proj.world.mat4,_=-c._x*l.width,m=_+l.width,f=-c._y*l.height,p=f+l.height;let y=!1,b,T=1/(h[3]*_+h[7]*f+h[15]);a[0]=T*(h[0]*_+h[4]*f+h[12]),a[1]=T*(h[1]*_+h[5]*f+h[13]),b=h[2]*_+h[6]*f+h[14],y=y||b<0,T=1/(h[3]*m+h[7]*f+h[15]),a[2]=T*(h[0]*m+h[4]*f+h[12]),a[3]=T*(h[1]*m+h[5]*f+h[13]),b=h[2]*m+h[6]*f+h[14],y=y||b<0,T=1/(h[3]*m+h[7]*p+h[15]),a[4]=T*(h[0]*m+h[4]*p+h[12]),a[5]=T*(h[1]*m+h[5]*p+h[13]),b=h[2]*m+h[6]*p+h[14],y=y||b<0,T=1/(h[3]*_+h[7]*p+h[15]),a[6]=T*(h[0]*_+h[4]*p+h[12]),a[7]=T*(h[1]*_+h[5]*p+h[13]),b=h[2]*_+h[6]*p+h[14],y=y||b<0,this.culledByFrustrum=y}_calculateBounds(){if(this.calculateVertices(),this.culledByFrustrum)return;const e=this._texture.trim,r=this._texture.orig;if(!e||e.width===r.width&&e.height===r.height){this._bounds.addQuad(this.vertexData);return}this.calculateTrimmedVertices(),this.trimmedCulledByFrustrum||this._bounds.addQuad(this.vertexTrimmedData)}_render(e){this.calculateVertices(),!this.culledByFrustrum&&(e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}containsPoint(e){return this.culledByFrustrum?!1:super.containsPoint(e)}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}toLocal(e,r,n,s,a=cn.ALL){return Lm.call(this,e,r,n,s,a)}isFrontFace(e){return jm.call(this,e)}getDepth(e){return Bm.call(this,e)}get position3d(){return this.proj.position}set position3d(e){this.proj.position.copyFrom(e)}get scale3d(){return this.proj.scale}set scale3d(e){this.proj.scale.copyFrom(e)}get euler(){return this.proj.euler}set euler(e){this.proj.euler.copyFrom(e)}get pivot3d(){return this.proj.pivot}set pivot3d(e){this.proj.pivot.copyFrom(e)}}const tM={worldTransform:{get:eM,enumerable:!0,configurable:!0},position3d:{get(){return this.proj.position},set(i){this.proj.position.copy(i)}},scale3d:{get(){return this.proj.scale},set(i){this.proj.scale.copy(i)}},pivot3d:{get(){return this.proj.pivot},set(i){this.proj.pivot.copy(i)}},euler:{get(){return this.proj.euler},set(i){this.proj.euler.copy(i)}}};function Um(){this.proj||(this.proj=new Jn(this.transform),this.toLocal=Ml.prototype.toLocal,this.isFrontFace=Ml.prototype.isFrontFace,this.getDepth=Ml.prototype.getDepth,Object.defineProperties(this,tM))}gr.prototype.convertTo3d=Um;Mr.prototype.convertTo3d=function(){this.proj||(this.calculateVertices=Un.prototype.calculateVertices,this.calculateTrimmedVertices=Un.prototype.calculateTrimmedVertices,this._calculateBounds=Un.prototype._calculateBounds,this.containsPoint=Un.prototype.containsPoint,this.pluginName="batch2d",Um.call(this))};gr.prototype.convertSubtreeTo3d=function(){this.convertTo3d();for(let e=0;e<this.children.length;e++)this.children[e].convertSubtreeTo3d()};qb.prototype.convertTo3d=Vb.prototype.convertTo3d=function(){this.proj||(this.calculateVertices=ac.prototype.calculateVertices,this._renderDefault=ac.prototype._renderDefault,this.material.pluginName!=="batch2d"&&(this.material=new Co(this.material.texture,{program:Io.from(bi.defaultVertexShader,bi.defaultFragmentShader),pluginName:"batch2d"})),Um.call(this))};class Ro extends So{constructor(e,r,n){super(e,r,n),Ro.prototype.__init.call(this),this.proj=new Jn(this.transform),this.pluginName="batch2d"}__init(){this.vertexData2d=null}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}toLocal(e,r,n,s,a=cn.ALL){return Lm.call(this,e,r,n,s,a)}isFrontFace(e){return jm.call(this,e)}getDepth(e){return Bm.call(this,e)}get position3d(){return this.proj.position}set position3d(e){this.proj.position.copyFrom(e)}get scale3d(){return this.proj.scale}set scale3d(e){this.proj.scale.copyFrom(e)}get euler(){return this.proj.euler}set euler(e){this.proj.euler.copyFrom(e)}get pivot3d(){return this.proj.pivot}set pivot3d(e){this.proj.pivot.copyFrom(e)}}Ro.prototype.calculateVertices=Un.prototype.calculateVertices;Ro.prototype.calculateTrimmedVertices=Un.prototype.calculateTrimmedVertices;Ro.prototype._calculateBounds=Un.prototype._calculateBounds;Ro.prototype.containsPoint=Un.prototype.containsPoint;Ro.prototype._render=Un.prototype._render;var Ru;const rM=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec3 aTrans1;
attribute vec3 aTrans2;
attribute vec2 aSamplerSize;
attribute vec4 aFrame;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;

varying vec2 vertexPosition;
varying vec3 vTrans1;
varying vec3 vTrans2;
varying vec2 vSamplerSize;
varying vec4 vFrame;
varying vec4 vColor;
varying float vTextureId;

void main(void){
gl_Position.xyw = projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0);
gl_Position.z = 0.0;

vertexPosition = aVertexPosition;
vTrans1 = aTrans1;
vTrans2 = aTrans2;
vTextureId = aTextureId;
vColor = aColor;
vSamplerSize = aSamplerSize;
vFrame = aFrame;
}
`,nM=`precision highp float;
varying vec2 vertexPosition;
varying vec3 vTrans1;
varying vec3 vTrans2;
varying vec2 vSamplerSize;
varying vec4 vFrame;
varying vec4 vColor;
varying float vTextureId;

uniform sampler2D uSamplers[%count%];
uniform vec4 distortion;

void main(void){
vec2 surface;
vec2 surface2;

float vx = vertexPosition.x;
float vy = vertexPosition.y;
float dx = distortion.x;
float dy = distortion.y;
float revx = distortion.z;
float revy = distortion.w;

if (distortion.x == 0.0) {
surface.x = vx;
surface.y = vy / (1.0 + dy * vx);
surface2 = surface;
} else
if (distortion.y == 0.0) {
surface.y = vy;
surface.x = vx / (1.0 + dx * vy);
surface2 = surface;
} else {
float c = vy * dx - vx * dy;
float b = (c + 1.0) * 0.5;
float b2 = (-c + 1.0) * 0.5;
float d = b * b + vx * dy;
if (d < -0.00001) {
    discard;
}
d = sqrt(max(d, 0.0));
surface.x = (- b + d) * revy;
surface2.x = (- b - d) * revy;
surface.y = (- b2 + d) * revx;
surface2.y = (- b2 - d) * revx;
}

vec2 uv;
uv.x = vTrans1.x * surface.x + vTrans1.y * surface.y + vTrans1.z;
uv.y = vTrans2.x * surface.x + vTrans2.y * surface.y + vTrans2.z;

vec2 pixels = uv * vSamplerSize;

if (pixels.x < vFrame.x || pixels.x > vFrame.z ||
pixels.y < vFrame.y || pixels.y > vFrame.w) {
uv.x = vTrans1.x * surface2.x + vTrans1.y * surface2.y + vTrans1.z;
uv.y = vTrans2.x * surface2.x + vTrans2.y * surface2.y + vTrans2.z;
pixels = uv * vSamplerSize;

if (pixels.x < vFrame.x || pixels.x > vFrame.z ||
   pixels.y < vFrame.y || pixels.y > vFrame.w) {
   discard;
}
}

vec4 edge;
edge.xy = clamp(pixels - vFrame.xy + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));
edge.zw = clamp(vFrame.zw - pixels + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));

float alpha = 1.0; //edge.x * edge.y * edge.z * edge.w;
vec4 rColor = vColor * alpha;

float textureId = floor(vTextureId+0.5);
vec2 vTextureCoord = uv;
vec4 color;
%forloop%
gl_FragColor = color * rColor;
}`;class iM extends Po{constructor(e=!1){super(),this._buffer=new or(null,e,!1),this._indexBuffer=new or(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Ze.FLOAT).addAttribute("aTrans1",this._buffer,3,!1,Ze.FLOAT).addAttribute("aTrans2",this._buffer,3,!1,Ze.FLOAT).addAttribute("aSamplerSize",this._buffer,2,!1,Ze.FLOAT).addAttribute("aFrame",this._buffer,4,!1,Ze.FLOAT).addAttribute("aColor",this._buffer,4,!0,Ze.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Ze.FLOAT).addIndex(this._indexBuffer)}}class sM{static create(e){const{vertex:r,fragment:n,vertexSize:s,geometryClass:a}=Object.assign({vertex:rM,fragment:nM,geometryClass:iM,vertexSize:16},e);return Ru=class extends Uf{constructor(c){super(c),Ru.prototype.__init.call(this),Ru.prototype.__init2.call(this),Ru.prototype.__init3.call(this),this.shaderGenerator=new Mm(r,n),this.geometryClass=a,this.vertexSize=s}__init(){this.defUniforms={translationMatrix:new rr,distortion:new Float32Array([0,0,1/0,1/0])}}__init2(){this.size=1e3}__init3(){this.forceMaxTextures=1}getUniforms(c){const{proj:h}=c;return h.surface!==null?h.uniforms:h._activeProjection!==null?h._activeProjection.uniforms:this.defUniforms}packInterleavedGeometry(c,h,_,m,f){const{uint32View:p,float32View:y}=h,b=m/this.vertexSize,T=c.indices,S=c.vertexData,R=c._texture._frame,L=c.aTrans,{_batchLocation:V,realWidth:M,realHeight:H,resolution:g}=c._texture.baseTexture,ne=Math.min(c.worldAlpha,1),B=ne<1&&c._texture.baseTexture.alphaMode?dc(c._tintRGB,ne):c._tintRGB+(ne*255<<24);for(let Y=0;Y<S.length;Y+=2)y[m]=S[Y],y[m+1]=S[Y+1],y[m+2]=L.a,y[m+3]=L.c,y[m+4]=L.tx,y[m+5]=L.b,y[m+6]=L.d,y[m+7]=L.ty,y[m+8]=M,y[m+9]=H,y[m+10]=R.x*g,y[m+11]=R.y*g,y[m+12]=(R.x+R.width)*g,y[m+13]=(R.y+R.height)*g,p[m+14]=B,y[m+15]=V,m+=16;for(let Y=0;Y<T.length;Y++)_[f++]=b+T[Y]}},Ru}}const Qe=[new yt,new yt,new yt,new yt],oo=[0,0,0,0];class Cl{constructor(){Cl.prototype.__init.call(this),Cl.prototype.__init2.call(this),Cl.prototype.__init3.call(this),Cl.prototype.__init4.call(this)}__init(){this.surfaceID="default"}__init2(){this._updateID=0}__init3(){this.vertexSrc=""}__init4(){this.fragmentSrc=""}fillUniforms(e){}clear(){}boundsQuad(e,r,n){let s=r[0],a=r[1],l=r[0],c=r[1];for(let h=2;h<8;h+=2)s>r[h]&&(s=r[h]),l<r[h]&&(l=r[h]),a>r[h+1]&&(a=r[h+1]),c<r[h+1]&&(c=r[h+1]);if(Qe[0].set(s,a),this.apply(Qe[0],Qe[0]),Qe[1].set(l,a),this.apply(Qe[1],Qe[1]),Qe[2].set(l,c),this.apply(Qe[2],Qe[2]),Qe[3].set(s,c),this.apply(Qe[3],Qe[3]),n)n.apply(Qe[0],Qe[0]),n.apply(Qe[1],Qe[1]),n.apply(Qe[2],Qe[2]),n.apply(Qe[3],Qe[3]),r[0]=Qe[0].x,r[1]=Qe[0].y,r[2]=Qe[1].x,r[3]=Qe[1].y,r[4]=Qe[2].x,r[5]=Qe[2].y,r[6]=Qe[3].x,r[7]=Qe[3].y;else{for(let h=1;h<=3;h++)if(Qe[h].y<Qe[0].y||Qe[h].y===Qe[0].y&&Qe[h].x<Qe[0].x){const _=Qe[0];Qe[0]=Qe[h],Qe[h]=_}for(let h=1;h<=3;h++)oo[h]=Math.atan2(Qe[h].y-Qe[0].y,Qe[h].x-Qe[0].x);for(let h=1;h<=3;h++)for(let _=h+1;_<=3;_++)if(oo[h]>oo[_]){const m=Qe[h];Qe[h]=Qe[_],Qe[_]=m;const f=oo[h];oo[h]=oo[_],oo[_]=f}if(r[0]=Qe[0].x,r[1]=Qe[0].y,r[2]=Qe[1].x,r[3]=Qe[1].y,r[4]=Qe[2].x,r[5]=Qe[2].y,r[6]=Qe[3].x,r[7]=Qe[3].y,(Qe[3].x-Qe[2].x)*(Qe[1].y-Qe[2].y)-(Qe[1].x-Qe[2].x)*(Qe[3].y-Qe[2].y)<0){r[4]=Qe[3].x,r[5]=Qe[3].y;return}}}}const aM=new rr,Mu=new mt,ku=new yt;class Hf extends Cl{constructor(...e){super(...e),Hf.prototype.__init.call(this)}__init(){this.distortion=new yt}clear(){this.distortion.set(0,0)}apply(e,r){r=r||new yt;const n=this.distortion,s=e.x*e.y;return r.x=e.x+n.x*s,r.y=e.y+n.y*s,r}applyInverse(e,r){r=r||new yt;const n=e.x,s=e.y,a=this.distortion.x,l=this.distortion.y;if(a===0)r.x=n,r.y=s/(1+l*n);else if(l===0)r.y=s,r.x=n/(1+a*s);else{const c=(s*a-n*l+1)*.5/l,h=c*c+n/l;if(h<=1e-5)return r.set(NaN,NaN),r;l>0?r.x=-c+Math.sqrt(h):r.x=-c-Math.sqrt(h),r.y=(n/r.x-1)/a}return r}mapSprite(e,r,n){const s=e.texture;return Mu.x=-e.anchor.x*s.orig.width,Mu.y=-e.anchor.y*s.orig.height,Mu.width=s.orig.width,Mu.height=s.orig.height,this.mapQuad(Mu,r,n||e.transform)}mapQuad(e,r,n){const s=-e.x/e.width,a=-e.y/e.height,l=(1-e.x)/e.width,c=(1-e.y)/e.height,h=r[0].x*(1-s)+r[1].x*s,_=r[0].y*(1-s)+r[1].y*s,m=r[0].x*(1-l)+r[1].x*l,f=r[0].y*(1-l)+r[1].y*l,p=r[3].x*(1-s)+r[2].x*s,y=r[3].y*(1-s)+r[2].y*s,b=r[3].x*(1-l)+r[2].x*l,T=r[3].y*(1-l)+r[2].y*l,S=h*(1-a)+p*a,A=_*(1-a)+y*a,R=m*(1-a)+b*a,L=f*(1-a)+T*a,V=h*(1-c)+p*c,M=_*(1-c)+y*c,H=m*(1-c)+b*c,g=f*(1-c)+T*c,ne=aM;return ne.tx=S,ne.ty=A,ne.a=R-S,ne.b=L-A,ne.c=V-S,ne.d=M-A,ku.set(H,g),ne.applyInverse(ku,ku),this.distortion.set(ku.x-1,ku.y-1),n.setFromMatrix(ne),this}fillUniforms(e){e.distortion=e.distortion||new Float32Array([0,0,0,0]);const r=Math.abs(this.distortion.x),n=Math.abs(this.distortion.y);e.distortion[0]=r*1e4<=n?0:this.distortion.x,e.distortion[1]=n*1e4<=r?0:this.distortion.y,e.distortion[2]=1/e.distortion[0],e.distortion[3]=1/e.distortion[1]}}const d1=Ul.prototype.updateTransform;function oM(i){const e=this.proj,r=i.proj,n=this;if(!r){d1.call(this,i),e._activeProjection=null;return}if(r._surface){e._activeProjection=r,this.updateLocalTransform(),this.localTransform.copyTo(this.worldTransform),n._parentID<0&&++n._worldID;return}d1.call(this,i),e._activeProjection=r._activeProjection}class Rs extends Yf{constructor(...e){super(...e),Rs.prototype.__init.call(this),Rs.prototype.__init2.call(this),Rs.prototype.__init3.call(this),Rs.prototype.__init4.call(this),Rs.prototype.__init5.call(this)}__init(){this._surface=null}__init2(){this._activeProjection=null}set enabled(e){e!==this._enabled&&(this._enabled=e,e?(this.legacy.updateTransform=oM,this.legacy._parentID=-1):(this.legacy.updateTransform=Ul.prototype.updateTransform,this.legacy._parentID=-1))}get surface(){return this._surface}set surface(e){this._surface!==e&&(this._surface=e||null,this.legacy._parentID=-1)}applyPartial(e,r){return this._activeProjection!==null?(r=this.legacy.worldTransform.apply(e,r),this._activeProjection.surface.apply(r,r)):this._surface!==null?this.surface.apply(e,r):this.legacy.worldTransform.apply(e,r)}apply(e,r){return this._activeProjection!==null?(r=this.legacy.worldTransform.apply(e,r),this._activeProjection.surface.apply(r,r),this._activeProjection.legacy.worldTransform.apply(r,r)):this._surface!==null?(r=this.surface.apply(e,r),this.legacy.worldTransform.apply(r,r)):this.legacy.worldTransform.apply(e,r)}applyInverse(e,r){return this._activeProjection!==null?(r=this._activeProjection.legacy.worldTransform.applyInverse(e,r),this._activeProjection._surface.applyInverse(r,r),this.legacy.worldTransform.applyInverse(r,r)):this._surface!==null?(r=this.legacy.worldTransform.applyInverse(e,r),this._surface.applyInverse(r,r)):this.legacy.worldTransform.applyInverse(e,r)}mapBilinearSprite(e,r){this._surface instanceof Hf||(this.surface=new Hf),this.surface.mapSprite(e,r,this.legacy)}__init3(){this._currentSurfaceID=-1}__init4(){this._currentLegacyID=-1}__init5(){this._lastUniforms=null}clear(){this.surface&&this.surface.clear()}get uniforms(){return this._currentLegacyID===this.legacy._worldID&&this._currentSurfaceID===this.surface._updateID?this._lastUniforms:(this._lastUniforms=this._lastUniforms||{},this._lastUniforms.translationMatrix=this.legacy.worldTransform,this._surface.fillUniforms(this._lastUniforms),this._lastUniforms)}}class Ta extends Mr{constructor(e){super(e),Ta.prototype.__init.call(this),this.proj=new Rs(this.transform),this.pluginName="batch_bilinear"}__init(){this.aTrans=new rr}_calculateBounds(){this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)}calculateVertices(){const e=this.transform._worldID,r=this._texture._updateID,n=this;if(n._transformID===e&&this._textureID===r)return;n._transformID=e,this._textureID=r;const s=this._texture,a=this.vertexData,l=s.trim,c=s.orig,h=this._anchor;let _,m,f,p;if(l?(m=l.x-h._x*c.width,_=m+l.width,p=l.y-h._y*c.height,f=p+l.height):(m=-h._x*c.width,_=m+c.width,p=-h._y*c.height,f=p+c.height),this.proj._surface)a[0]=m,a[1]=p,a[2]=_,a[3]=p,a[4]=_,a[5]=f,a[6]=m,a[7]=f,this.proj._surface.boundsQuad(a,a);else{const b=this.transform.worldTransform,T=b.a,S=b.b,A=b.c,R=b.d,L=b.tx,V=b.ty;a[0]=T*m+A*p+L,a[1]=R*p+S*m+V,a[2]=T*_+A*p+L,a[3]=R*p+S*_+V,a[4]=T*_+A*f+L,a[5]=R*f+S*_+V,a[6]=T*m+A*f+L,a[7]=R*f+S*m+V,this.proj._activeProjection&&this.proj._activeProjection.surface.boundsQuad(a,a)}s.uvMatrix||(s.uvMatrix=new _c(s)),s.uvMatrix.update();const y=this.aTrans;y.set(c.width,0,0,c.height,m,p),this.proj._surface===null&&y.prepend(this.transform.worldTransform),y.invert(),y.prepend(s.uvMatrix.mapCoord)}calculateTrimmedVertices(){const e=this.transform._worldID,r=this._texture._updateID,n=this;if(!n.vertexTrimmedData)n.vertexTrimmedData=new Float32Array(8);else if(n._transformTrimmedID===e&&this._textureTrimmedID===r)return;n._transformTrimmedID=e,this._textureTrimmedID=r;const s=this._texture,a=n.vertexTrimmedData,l=s.orig,c=this._anchor,h=-c._x*l.width,_=h+l.width,m=-c._y*l.height,f=m+l.height;if(this.proj._surface)a[0]=h,a[1]=m,a[2]=_,a[3]=m,a[4]=_,a[5]=f,a[6]=h,a[7]=f,this.proj._surface.boundsQuad(a,a,this.transform.worldTransform);else{const p=this.transform.worldTransform,y=p.a,b=p.b,T=p.c,S=p.d,A=p.tx,R=p.ty;a[0]=y*h+T*m+A,a[1]=S*m+b*h+R,a[2]=y*_+T*m+A,a[3]=S*m+b*_+R,a[4]=y*_+T*f+A,a[5]=S*f+b*_+R,a[6]=y*h+T*f+A,a[7]=S*f+b*h+R,this.proj._activeProjection&&this.proj._activeProjection.surface.boundsQuad(a,a,this.proj._activeProjection.legacy.worldTransform)}}get worldTransform(){return this.proj}}Mr.prototype.convertTo2s=function(){this.proj||(this.pluginName="sprite_bilinear",this.aTrans=new rr,this.calculateVertices=Ta.prototype.calculateVertices,this.calculateTrimmedVertices=Ta.prototype.calculateTrimmedVertices,this._calculateBounds=Ta.prototype._calculateBounds,gr.prototype.convertTo2s.call(this))};gr.prototype.convertTo2s=function(){this.proj||(this.proj=new Rs(this.transform),Object.defineProperty(this,"worldTransform",{get(){return this.proj},enumerable:!0,configurable:!0}))};gr.prototype.convertSubtreeTo2s=function(){this.convertTo2s();for(let e=0;e<this.children.length;e++)this.children[e].convertSubtreeTo2s()};class gc extends So{constructor(e,r,n){super(e,r,n),gc.prototype.__init.call(this),this.proj=new Rs(this.transform),this.pluginName="batch_bilinear"}__init(){this.aTrans=new rr}get worldTransform(){return this.proj}}gc.prototype.calculateVertices=Ta.prototype.calculateVertices;gc.prototype.calculateTrimmedVertices=Ta.prototype.calculateTrimmedVertices;gc.prototype._calculateBounds=Ta.prototype._calculateBounds;mc.registerPlugin("batch_bilinear",sM.create({}));var Ot={},p1;function lM(){if(p1)return Ot;p1=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.linear=i,Ot.easeInSine=e,Ot.easeOutSine=r,Ot.easeInOutSine=n,Ot.easeInQuad=s,Ot.easeOutQuad=a,Ot.easeInOutQuad=l,Ot.easeInCubic=c,Ot.easeOutCubic=h,Ot.easeInOutCubic=_,Ot.easeInQuart=m,Ot.easeOutQuart=f,Ot.easeInOutQuart=p,Ot.easeInQuint=y,Ot.easeOutQuint=b,Ot.easeInOutQuint=T,Ot.easeInExpo=S,Ot.easeOutExpo=A,Ot.easeInOutExpo=R,Ot.easeInCirc=L,Ot.easeOutCirc=V,Ot.easeInOutCirc=M,Ot.easeInBack=H,Ot.easeOutBack=g,Ot.easeInOutBack=ne,Ot.easeInElastic=B,Ot.easeOutElastic=Y,Ot.easeInOutElastic=se,Ot.easeOutBounce=re,Ot.easeInBounce=he,Ot.easeInOutBounce=xe;function i(Z){return Z}function e(Z){return-1*Math.cos(Z*(Math.PI/2))+1}function r(Z){return Math.sin(Z*(Math.PI/2))}function n(Z){return-.5*(Math.cos(Math.PI*Z)-1)}function s(Z){return Z*Z}function a(Z){return Z*(2-Z)}function l(Z){return Z<.5?2*Z*Z:-1+(4-2*Z)*Z}function c(Z){return Z*Z*Z}function h(Z){var U=Z-1;return U*U*U+1}function _(Z){return Z<.5?4*Z*Z*Z:(Z-1)*(2*Z-2)*(2*Z-2)+1}function m(Z){return Z*Z*Z*Z}function f(Z){var U=Z-1;return 1-U*U*U*U}function p(Z){var U=Z-1;return Z<.5?8*Z*Z*Z*Z:1-8*U*U*U*U}function y(Z){return Z*Z*Z*Z*Z}function b(Z){var U=Z-1;return 1+U*U*U*U*U}function T(Z){var U=Z-1;return Z<.5?16*Z*Z*Z*Z*Z:1+16*U*U*U*U*U}function S(Z){return Z===0?0:Math.pow(2,10*(Z-1))}function A(Z){return Z===1?1:-Math.pow(2,-10*Z)+1}function R(Z){if(Z===0||Z===1)return Z;var U=Z*2,W=U-1;return U<1?.5*Math.pow(2,10*W):.5*(-Math.pow(2,-10*W)+2)}function L(Z){var U=Z/1;return-1*(Math.sqrt(1-U*Z)-1)}function V(Z){var U=Z-1;return Math.sqrt(1-U*U)}function M(Z){var U=Z*2,W=U-2;return U<1?-.5*(Math.sqrt(1-U*U)-1):.5*(Math.sqrt(1-W*W)+1)}function H(Z){var U=arguments.length<=1||arguments[1]===void 0?1.70158:arguments[1],W=Z/1;return W*W*((U+1)*W-U)}function g(Z){var U=arguments.length<=1||arguments[1]===void 0?1.70158:arguments[1],W=Z/1-1;return W*W*((U+1)*W+U)+1}function ne(Z){var U=arguments.length<=1||arguments[1]===void 0?1.70158:arguments[1],W=Z*2,z=W-2,Q=U*1.525;return W<1?.5*W*W*((Q+1)*W-Q):.5*(z*z*((Q+1)*z+Q)+2)}function B(Z){var U=arguments.length<=1||arguments[1]===void 0?.7:arguments[1];if(Z===0||Z===1)return Z;var W=Z/1,z=W-1,Q=1-U,$=Q/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*z)*Math.sin((z-$)*(2*Math.PI)/Q))}function Y(Z){var U=arguments.length<=1||arguments[1]===void 0?.7:arguments[1],W=1-U,z=Z*2;if(Z===0||Z===1)return Z;var Q=W/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*z)*Math.sin((z-Q)*(2*Math.PI)/W)+1}function se(Z){var U=arguments.length<=1||arguments[1]===void 0?.65:arguments[1],W=1-U;if(Z===0||Z===1)return Z;var z=Z*2,Q=z-1,$=W/(2*Math.PI)*Math.asin(1);return z<1?-.5*(Math.pow(2,10*Q)*Math.sin((Q-$)*(2*Math.PI)/W)):Math.pow(2,-10*Q)*Math.sin((Q-$)*(2*Math.PI)/W)*.5+1}function re(Z){var U=Z/1;if(U<1/2.75)return 7.5625*U*U;if(U<2/2.75){var W=U-.5454545454545454;return 7.5625*W*W+.75}else if(U<2.5/2.75){var z=U-.8181818181818182;return 7.5625*z*z+.9375}else{var Q=U-.9545454545454546;return 7.5625*Q*Q+.984375}}function he(Z){return 1-re(1-Z)}function xe(Z){return Z<.5?he(Z*2)*.5:re(Z*2-1)*.5+.5}return Ot}var Gm=lM();const uM=Fl(Gm),gl=PT({__proto__:null,default:uM},[Gm]),cM="modulepreload",hM=function(i,e){return new URL(i,e).href},v1={},fM=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){const l=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),h=c?.nonce||c?.getAttribute("nonce");s=Promise.allSettled(r.map(_=>{if(_=hM(_,n),_ in v1)return;v1[_]=!0;const m=_.endsWith(".css"),f=m?'[rel="stylesheet"]':"";if(!!n)for(let b=l.length-1;b>=0;b--){const T=l[b];if(T.href===_&&(!m||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${_}"]${f}`))return;const y=document.createElement("link");if(y.rel=m?"stylesheet":cM,m||(y.as="script"),y.crossOrigin="",y.href=_,h&&y.setAttribute("nonce",h),document.head.appendChild(y),m)return new Promise((b,T)=>{y.addEventListener("load",b),y.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${_}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};async function dM(i,e={}){const r={env:Object.assign(Object.create(globalThis),e.env||{},{abort(B,Y,se,re){B=l(B>>>0),Y=l(Y>>>0),se=se>>>0,re=re>>>0,(()=>{throw Error(`${B} in ${Y}:${se}:${re}`)})()},"console.error"(B){B=l(B>>>0),console.error(B)},seed(){return Date.now()*Math.random()},"console.warn"(B){B=l(B>>>0),console.warn(B)},"console.log"(B){B=l(B>>>0),console.log(B)}})},{exports:n}=await WebAssembly.instantiate(i,r),s=n.memory||e.env.memory,a=Object.setPrototypeOf({Blocks:{valueOf(){return this.value},get value(){return b(n.Blocks.value>>>0)}},add_node(B,Y){Y=_(M,23,2,Y)||R(),n.add_node(B,Y)},add_tex_transforms(B,Y){Y=_(M,23,2,Y)||R(),n.add_tex_transforms(B,Y)},draw_sprites_info:{valueOf(){return this.value},get value(){return h(B=>m(ne,2,g(B)),2,n.draw_sprites_info.value>>>0)},set value(B){n.draw_sprites_info.value=_((Y,se)=>{V(Y,f(M,7,2,se,Float32Array)||R())},12,2,B)||R()}},draw_sprites_uvs:{valueOf(){return this.value},get value(){return h(B=>m(ne,2,g(B)),2,n.draw_sprites_uvs.value>>>0)},set value(B){n.draw_sprites_uvs.value=_((Y,se)=>{V(Y,f(M,7,2,se,Float32Array)||R())},12,2,B)||R()}},request_serialized_draw_queue(){return m(ne,2,n.request_serialized_draw_queue()>>>0)},effect_queue:{valueOf(){return this.value},get value(){return h(B=>m(ne,2,g(B)),2,n.effect_queue.value>>>0)},set value(B){n.effect_queue.value=_((Y,se)=>{V(Y,f(M,7,2,se,Float32Array)||R())},12,2,B)||R()}},update_background:{valueOf(){return this.value},get value(){return n.update_background.value!=0},set value(B){n.update_background.value=B?1:0}},add_entity(B,Y,se){Y=Y?1:0,se=se?1:0,n.add_entity(B,Y,se)},add_archetype(B,Y,se,re,he,xe,Z,U,W,z,Q,$,j,N,q,oe,de){de=de?1:0,n.add_archetype(B,Y,se,re,he,xe,Z,U,W,z,Q,$,j,N,q,oe,de)},particle_queue:{valueOf(){return this.value},get value(){return h(B=>m(ne,2,g(B)),2,n.particle_queue.value>>>0)},set value(B){n.particle_queue.value=_((Y,se)=>{V(Y,f(M,7,2,se,Float32Array)||R())},12,2,B)||R()}},add_ptc_transforms(B,Y){Y=_(M,23,2,Y)||R(),n.add_ptc_transforms(B,Y)},add_changing_BPM(B){B=_(M,23,2,B)||R(),n.add_changing_BPM(B)},add_changing_TIMESCALE(B){B=_(M,23,2,B)||R(),n.add_changing_TIMESCALE(B)},initializeProperties(B,Y,se,re,he,xe,Z){Z=Z?1:0,n.initializeProperties(B,Y,se,re,he,xe,Z)},get_block_vals(B){return h(ne,2,n.get_block_vals(B)>>>0)},get_block_keys(B){return h(H,2,n.get_block_keys(B)>>>0)},set_block_vals(B,Y){Y=_(M,23,2,Y)||R(),n.set_block_vals(B,Y)},init_blocks(B,Y,se){B=S(_(M,23,2,B)||R()),Y=S(_(M,23,2,Y)||R()),se=_(M,23,2,se)||R();try{n.init_blocks(B,Y,se)}finally{A(B),A(Y)}},get_function_names(){return h(B=>l(g(B)),2,n.get_function_names()>>>0)},name2func_id(B){return B=c(B)||R(),n.name2func_id(B)},despawning(){return h(B=>h(ne,2,g(B)),2,n.despawning()>>>0)},run_nodes(B,Y){return B=f(M,7,2,B,Float32Array)||R(),m(ne,2,n.run_nodes(B,Y)>>>0)},Mod(B,Y){return Y=f(M,7,2,Y,Float32Array)||R(),n.Mod(B,Y)}},n);function l(B){if(!B)return null;const Y=B+new Uint32Array(s.buffer)[B-4>>>2]>>>1,se=new Uint16Array(s.buffer);let re=B>>>1,he="";for(;Y-re>1024;)he+=String.fromCharCode(...se.subarray(re,re+=1024));return he+String.fromCharCode(...se.subarray(re,Y))}function c(B){if(B==null)return 0;const Y=B.length,se=n.__new(Y<<1,2)>>>0,re=new Uint16Array(s.buffer);for(let he=0;he<Y;++he)re[(se>>>1)+he]=B.charCodeAt(he);return se}function h(B,Y,se){if(!se)return null;const re=g(se+4),he=L.getUint32(se+12,!0),xe=new Array(he);for(let Z=0;Z<he;++Z)xe[Z]=B(re+(Z<<Y>>>0));return xe}function _(B,Y,se,re){if(re==null)return 0;const he=re.length,xe=n.__pin(n.__new(he<<se,1))>>>0,Z=n.__pin(n.__new(16,Y))>>>0;V(Z+0,xe),L.setUint32(Z+4,xe,!0),L.setUint32(Z+8,he<<se,!0),L.setUint32(Z+12,he,!0);for(let U=0;U<he;++U)B(xe+(U<<se>>>0),re[U]);return n.__unpin(xe),n.__unpin(Z),Z}function m(B,Y,se){if(!se)return null;const re=g(se-4)>>>Y,he=new Array(re);for(let xe=0;xe<re;++xe)he[xe]=B(se+(xe<<Y>>>0));return he}function f(B,Y,se,re,he){if(re==null)return 0;const xe=re.length,Z=n.__pin(n.__new(xe<<se,Y))>>>0;if(he)new he(s.buffer,Z,xe).set(re);else for(let U=0;U<xe;U++)B(Z+(U<<se>>>0),re[U]);return n.__unpin(Z),Z}class p extends Number{}const y=new FinalizationRegistry(A);function b(B){if(!B)return null;const Y=new p(S(B));return y.register(Y,B),Y}const T=new Map;function S(B){if(B){const Y=T.get(B);Y?T.set(B,Y+1):T.set(n.__pin(B),1)}return B}function A(B){if(B){const Y=T.get(B);if(Y===1)n.__unpin(B),T.delete(B);else if(Y)T.set(B,Y-1);else throw Error(`invalid refcount '${Y}' for reference '${B}'`)}}function R(){throw TypeError("value must not be null")}let L=new DataView(s.buffer);function V(B,Y){try{L.setUint32(B,Y,!0)}catch{L=new DataView(s.buffer),L.setUint32(B,Y,!0)}}function M(B,Y){try{L.setFloat32(B,Y,!0)}catch{L=new DataView(s.buffer),L.setFloat32(B,Y,!0)}}function H(B){try{return L.getInt32(B,!0)}catch{return L=new DataView(s.buffer),L.getInt32(B,!0)}}function g(B){try{return L.getUint32(B,!0)}catch{return L=new DataView(s.buffer),L.getUint32(B,!0)}}function ne(B){try{return L.getFloat32(B,!0)}catch{return L=new DataView(s.buffer),L.getFloat32(B,!0)}}return a}const{memory:pM,Blocks:vM,init_nodes:$b,add_node:yf,add_tex_transforms:Yb,draw_sprites_info:_M,draw_sprites_uvs:mM,spawned_entities:om,refresh_draw_queue:Kb,request_serialized_draw_queue:Qb,effect_queue:Zb,refresh_effect_queue:Jb,update_background:lm,add_entity:wl,init_archetypes:ew,add_archetype:tw,particle_queue:rw,add_ptc_transforms:nw,refresh_ptc_queue:iw,add_changing_BPM:sw,add_changing_TIMESCALE:aw,add_tex_id:ow,add_efc_id:lw,add_ptc_id:uw,initializeProperties:cw,get_block_vals:hw,get_block_keys:fw,set_block_vals:gf,get_block_val:dw,set_block_val:tn,init_blocks:pw,reset_vars:vw,get_function_names:_w,name2func_id:mw,execute_cycle_process:yM,preprocess_ordering:yw,preprocess_batch:gw,spawnOrder:xw,shouldSpawn:bw,initialize:ww,updateSequential:Tw,input_callback:Sw,updateParallel:Ew,despawning:Cw,run_node:gM,run_nodes:xM,Mod:bM}=await(async i=>dM(await(async()=>typeof process<"u"&&process.versions!=null&&(process.versions.node!=null||process.versions.bun!=null)?globalThis.WebAssembly.compile(await(await fM(async()=>{const{readFile:r}=await Promise.resolve().then(()=>tb);return{readFile:r}},void 0,import.meta.url)).readFile(i)):await globalThis.WebAssembly.compileStreaming(globalThis.fetch(i)))(),{}))(new URL(""+new URL("node_calc.wasm",import.meta.url).href,import.meta.url)),wM=Object.freeze(Object.defineProperty({__proto__:null,Blocks:vM,Mod:bM,add_archetype:tw,add_changing_BPM:sw,add_changing_TIMESCALE:aw,add_efc_id:lw,add_entity:wl,add_node:yf,add_ptc_id:uw,add_ptc_transforms:nw,add_tex_id:ow,add_tex_transforms:Yb,despawning:Cw,draw_sprites_info:_M,draw_sprites_uvs:mM,effect_queue:Zb,execute_cycle_process:yM,get_block_keys:fw,get_block_val:dw,get_block_vals:hw,get_function_names:_w,init_archetypes:ew,init_blocks:pw,init_nodes:$b,initialize:ww,initializeProperties:cw,input_callback:Sw,memory:pM,name2func_id:mw,particle_queue:rw,preprocess_batch:gw,preprocess_ordering:yw,refresh_draw_queue:Kb,refresh_effect_queue:Jb,refresh_ptc_queue:iw,request_serialized_draw_queue:Qb,reset_vars:vw,run_node:gM,run_nodes:xM,set_block_val:tn,set_block_vals:gf,shouldSpawn:bw,spawnOrder:xw,spawned_entities:om,updateParallel:Ew,updateSequential:Tw,update_background:lm},Symbol.toStringTag,{value:"Module"}));class TM{constructor(e,r,{engine_data:n,engine_config:s,skin_data:a,skin_tex:l,effect_data:c,BGM:h,level_data:_,particle_data:m,particle_tex:f,background_data:p,background_config:y,background_tex:b,level_option:T,system_tex:S},A=null,{debug_mode:R=!1,mesh_vertices:L=3,curv_vertices:V=3,audio_offset:M=0,input_offset:H=0,render_scale:g=1,texture_scale:ne=.5,effect_volume:B=100,bgm_volume:Y=100,start_interval:se=3,unpause_interval:re=3},{leave_callback:he,retry_callback:xe,result_callback:Z}){this.progress_cvs=document.getElementById("progress-window"),this.progress_ctx=this.progress_cvs.getContext("2d"),this.canvas=e.view,"aspect-ratio"in(A||{})?(this.AspectRatio=A["aspect-ratio"],window.innerWidth/window.innerHeight>this.AspectRatio?(this.canvas.height=Math.round(window.innerHeight*g),this.canvas.width=Math.round(window.innerHeight*this.AspectRatio*g)):(this.canvas.width=Math.round(window.innerWidth*g),this.canvas.height=Math.round(window.innerWidth/this.AspectRatio*g)),this.C_width=this.canvas.width,this.C_height=this.canvas.height):(this.canvas.width=Math.round(window.innerWidth*g),this.canvas.height=Math.round(window.innerHeight*g),this.C_width=this.canvas.width,this.C_height=this.canvas.height,this.AspectRatio=this.C_width/this.C_height),this.canvas.style.width=`${Math.round(this.canvas.width/g)}px`,this.canvas.style.height=`${Math.round(this.canvas.height/g)}px`,this.start_interval=se,this.unpause_interval=re,this.BGM=h,this.start_time,this.BGM_ended=!1,this.bgmOffset=_.bgmOffset||0,this.wait_time=1e3,this.BGM.volume(Y/100),this.result_callback=Z,this.system_tex=new Pt(S),this.system_TF={judge_miss:new mt(0,84,230,50),judge_good:new mt(0,34,230,50),judge_great:new mt(230,34,230,50),judge_perfect:new mt(230,84,230,50),KeyAssign:new mt(0,0,286,34),metric:new mt(0,134,300,60),pause_button:new mt(300,134,60,60),skip_button:new mt(360,134,60,60),pause_menu:new mt(0,194,269,140)},this.i18n=r,this.app=e,this.app.renderer.resize(this.C_width,this.C_height),this.app.stage.sortableChildren=!0,this.engine_stage=new gr,this.engine_stage.sortableChildren=!0,this.engine_stage.zIndex=1,this.app.stage.addChild(this.engine_stage),this.UI_stage=new gr,this.UI_stage.sortableChildren=!0,this.UI_stage.zIndex=2,this.app.stage.addChild(this.UI_stage),this.buckets=n.buckets,this.archetypes=n.archetypes,this.arc_name2idx=N=>this.archetypes.findIndex(q=>q.name==N),this.arc_idx2name=N=>this.archetypes[N].name||null,this.efc_name2idx=N=>(n.effect.clips.find(q=>q.name==N)||{id:-1}).id,this.efc_idx2name=N=>(n.effect.clips.find(q=>q.id==N)||{name:null}).name,this.ptc_name2idx=N=>(n.particle.effects.find(q=>q.name==N)||{id:-1}).id,this.ptc_idx2name=N=>(n.particle.effects.find(q=>q.id==N)||{name:null}).name,this.skn_name2idx=N=>(n.skin.sprites.find(q=>q.name==N)||{id:-1}).id,this.skn_idx2name=N=>(n.skin.sprites.find(q=>q.id==N)||{name:null}).name,ew(this.archetypes.length);for(let N of this.archetypes)tw((N.preprocess||{index:-1}).index,(N.preprocess||{}).order||0,(N.spawnOrder||{index:-1}).index,(N.spawnOrder||{}).order||0,(N.shouldSpawn||{index:-1}).index,(N.shouldSpawn||{}).order||0,(N.initialize||{index:-1}).index,(N.initialize||{}).order||0,(N.updateSequential||{index:-1}).index,(N.updateSequential||{}).order||0,(N.touch||{index:-1}).index,(N.touch||{}).order||0,(N.updateParallel||{index:-1}).index,(N.updateParallel||{}).order||0,(N.terminate||{index:-1}).index,(N.terminate||{}).order||0,N.hasInput);this.nodes=n.nodes,$b(this.nodes.length);let U=_w();for(let N of this.nodes)"value"in N?yf(0,[N.value]):U.includes(N.func)?yf(U.findIndex(q=>q==N.func),N.args):(yf(mw("UnknownFunction"),N.args),console.error(`A function named "${N.func}" does not exist.`));this.engine_config=s,this.debug=R,this.vertices=L,this.curv_vertices=V,this.audio_offset=M,this.input_offset=H,this.render_scale=g,this.engine_config.options.forEach((N,q)=>{switch(N.name){case"#SPEED":this.BGM.rate(T[q]);break}}),this.entities=[],this.active_entities=[],this.init_entities=[],this.blocks_names={1e3:"RuntimeEnvironment",1001:"RuntimeUpdate",1002:"RuntimeTouchArray",1003:"RuntimeSkinTransform",1004:"RuntimeParticleTransform",1005:"RuntimeBackground",1006:"RuntimeUI",1007:"RuntimeUIConfiguration",2e3:"LevelMemory",2001:"LevelData",2002:"LevelOption",2003:"LevelBucket",2004:"LevelScore",2005:"LevelLife",3e3:"EngineRom",4e3:"EntityMemory",4001:"EntityData",4002:"EntitySharedMemory",4003:"EntityInfo",4004:"EntityDespawn",4005:"EntityInput",4101:"EntityDataArray",4102:"EntitySharedMemoryArray",4103:"EntityInfoArray",5e3:"ArchetypeLife",1e4:"TemporaryMemory"},pw([this.debug?1:0,this.AspectRatio,M,H],[s.ui.menuVisibility.scale,s.ui.menuVisibility.alpha,s.ui.judgmentVisibility.scale,s.ui.judgmentVisibility.alpha,s.ui.comboVisibility.scale,s.ui.comboVisibility.alpha,s.ui.primaryMetricVisibility.scale,s.ui.primaryMetricVisibility.alpha,s.ui.secondaryMetricVisibility.scale,s.ui.secondaryMetricVisibility.alpha],T),this.can_write={RuntimeEnvironment:!0,RuntimeUpdate:!0,RuntimeTouchArray:!0,RuntimeSkinTransform:!0,RuntimeParticleTransform:!0,RuntimeBackground:!0,RuntimeUI:!0,RuntimeUIConfiguration:!0,LevelMemory:!0,LevelData:!0,LevelOption:!0,LevelBucket:!0,LevelScore:!0,LevelLife:!0,EngineRom:!0,EntityMemory:!0,EntityData:!0,EntitySharedMemory:!0,EntityInfo:!0,EntityDespawn:!0,EntityInput:!0,EntityDataArray:!0,EntitySharedMemoryArray:!0,EntityInfoArray:!0,ArchetypeLife:!0,TemporaryMemory:!0},this.sprites=[],this.now_num=0,this.spawnQ=[],this.spawnFQ=[],this.texture_scale=ne,this.tex_cvs=[],this.textures=[],this.tex_transforms=[];let W=["x1","y1","x2","y2","x3","y3","x4","y4"];for(let N of n.skin.sprites){let q=a.sprites.find(oe=>oe.name==N.name);if(q){let oe=document.createElement("canvas");oe.width=Math.round(q.w*this.texture_scale),oe.height=Math.round(q.h*this.texture_scale),oe.getContext("2d").drawImage(l,q.x,q.y,q.w,q.h,0,0,oe.width,oe.height),this.textures[N.id]=new it.from(oe),this.tex_cvs[N.id]=oe,ow(N.id),this.tex_transforms[N.id]=q.transform;let Te=[];for(let Ae=0;Ae<8;Ae++)for(let Ie=0;Ie<8;Ie++)Te.push(q.transform[W[Ae]][W[Ie]]||0);Yb(N.id,Te)}else console.warn(`A sprite named "${N.name}" does not exist in skin.`)}this.functions=["ExportValue","RemapClamped","Negate","Abs","Add","And","Arccos","Arcsin","Arctan","Arctan2","TimeToScaledTime","TimeToStartingScaledTime","TimeToStartingTime","TimeToTimeScale","BeatToBPM","BeatToStartingBeat","BeatToStartingTime","BeatToTime","Block","Break","DecrementPost","DecrementPostPointed","DecrementPostShifted","DecrementPre","DecrementPrePointed","DecrementPreShifted","IncrementPost","IncrementPostPointed","IncrementPostShifted","IncrementPre","IncrementPrePointed","IncrementPreShifted","Rem","GetPointed","SetPointed","SetAdd","SetAddPointed","SetAddShifted","SetDivide","SetDividePointed","SetDivideShifted","SetMod","SetModPointed","SetModShifted","SetMultiply","SetMultiplyPointed","SetMultiplyShifted","SetPower","SetPowerPointed","SetPowerShifted","SetRem","SetRemPointed","SetRemShifted","SetSubtract","SetSubtractPointed","SetSubtractShifted","Ceil","Clamp","Cos","Cosh","DebugLog","DebugPause","Degree","DestroyParticleEffect","Divide","Draw","Arguments","Return","Remarks","DrawCurvedB","DrawCurvedBT","DrawCurvedL","DrawCurvedLR","DrawCurvedR","DrawCurvedT","Equal","Execute","Floor","Frac","Get","GetShifted","Greater","GreaterOr","HasEffectClip","HasParticleEffect","HasSkinSprite","If","IsDebug","Judge","JudgeSimple","JumpLoop","Lerp","LerpClamped","Less","LessOr","Log","Max","Min","Mod","MoveParticleEffect","Multiply","Not","NotEqual","Or","Play","PlayLooped","PlayLoopedScheduled","PlayScheduled","Power","Radian","Random","RandomInteger","Remap","Round","Set","SetShifted","Sign","Sin","Sinh","Smoothstep","Spawn","SpawnParticleEffect","StopLooped","StopLoopedScheduled","Subtract","Switch","SwitchWithDefault","SwitchInteger","SwitchIntegerWithDefault","Tan","Tanh","Trunc","Unlerp","UnlerpClamped","While"],this.ease_functions=["Sine","Quad","Cubic","Quart","Quint","Expo","Circ","Back","Elastic"],this.functions_without_prerun=["While","DoWhile","Execute","Execute0","If","Switch","SwitchWithDefault","SwitchInteger","SwitchIntegerWithDefault","And","Or"],this.effect_data=c,this.effect_schedule=[],this.effect_loop_end_schedule=[],this.effect_object=[],this.looped_sound_id=[];for(let N of n.effect.clips)N.name in this.effect_data?(this.effect_object[N.id]=this.effect_data[N.name],this.effect_object[N.id].volume(B/100),lw(N.id)):console.warn(`A clip named "${N.name}" does not exist in effect.`);this.level_data=_,this.level_option=T,this.maximum_combo=0;let z=[],Q=[];this.level_data.entities.forEach((N,q)=>{if(N.archetype)if(N.archetype=="#BPM_CHANGE")z.push({timing:N.data.find(oe=>oe.name=="#BEAT").value,target_bpm:N.data.find(oe=>oe.name=="#BPM").value}),wl(-1,!1,!1);else if(N.archetype=="#TIMESCALE_CHANGE")Q.push({timing:N.data.find(oe=>oe.name=="#BEAT").value,target_timescale:N.data.find(oe=>oe.name=="#TIMESCALE").value}),wl(-1,!1,!1);else if(this.arc_name2idx(N.archetype||"")!=-1){tn(q,4005,0,0),tn(q,4005,1,0),tn(q,4005,2,-1),tn(q,4005,3,0),tn(q,4004,0,0),this.sprites[q]=[],tn(q,4003,0,q),tn(q,4003,1,this.arc_name2idx(N.archetype)),tn(q,4003,2,0);let oe=this.archetypes[this.arc_name2idx(N.archetype)];if("data"in N)for(let de of N.data){let Te=oe.imports.find(Ae=>Ae.name==de.name);if(Te!==void 0){if("value"in de)tn(q,4001,Te.index,de.value);else if("ref"in de){let Ae=this.level_data.entities.findIndex(Ie=>(Ie.name||Ie.ref)==de.ref);tn(q,4001,Te.index,Ae)}}}oe.hasInput&&this.maximum_combo++,this.entities[q]={archetype:this.arc_name2idx(N.archetype),from_function:!1},wl(this.arc_name2idx(N.archetype),!1,!0)}else console.warn(`An archetype named "${N.archetype}" of the entity(index:${q}) does not exist.`),wl(-1,!1,!1);else console.warn(`The entity(index:${q}) does not have an archetype.`),wl(-1,!1,!1)}),this.init_BPM=60,z.sort((N,q)=>N.timing-q.timing),this.changing_BPM=[];let $=0,j=0;for(let N=0;N<z.length;N++){let q=z[N].target_bpm/60;$=z[N].timing,N+1<z.length?(this.changing_BPM.push({start_beat:z[N].timing,end_beat:z[N+1].timing,start_time:j,end_time:j+(z[N+1].timing-z[N].timing)/q,BPM:z[N].target_bpm,offset:$-q*j}),j+=(z[N+1].timing-z[N].timing)/q):this.changing_BPM.push({start_beat:z[N].timing,start_time:j,BPM:z[N].target_bpm,offset:$-q*j})}for(let N of this.changing_BPM)sw([N.start_beat,N.end_beat||1e6,N.start_time,N.end_time||1e6,N.BPM,N.offset]);if(this.beat_to_time=function(N){for(let q of this.changing_BPM)if(N>=q.start_beat&&N<=(q.end_beat||1/0))return(N-q.offset)/(q.BPM/60);return(N-0)/(this.init_BPM/60)},Q.sort((N,q)=>N.timing-q.timing),this.changing_TIMESCALE=[],Q.length>0){let N=this.beat_to_time(Q[0].timing);for(let q=0;q<Q.length;q++)if(q+1<Q.length){let oe=this.beat_to_time(Q[q].timing),de=this.beat_to_time(Q[q+1].timing);this.changing_TIMESCALE.push({start_beat:Q[q].timing,end_beat:Q[q+1].timing,start_time:oe,end_time:de,TIMESCALE:Q[q].target_timescale,offset:N-Q[q].target_timescale*oe}),N+=(de-oe)*Q[q].target_timescale}else{let oe=this.beat_to_time(Q[q].timing);this.changing_TIMESCALE.push({start_beat:Q[q].timing,start_time:oe,TIMESCALE:Q[q].target_timescale,offset:N-Q[q].target_timescale*oe})}}for(let N of this.changing_TIMESCALE)aw([N.start_beat,N.end_beat||1e6,N.start_time,N.end_time||1e6,N.TIMESCALE,N.offset]);this.particles=[],this.particle_textures=[];for(let N of m.sprites){let q=document.createElement("canvas");q.width=Math.round(N.w*this.texture_scale),q.height=Math.round(N.h*this.texture_scale),q.getContext("2d").drawImage(f,N.x,N.y,N.w,N.h,0,0,Math.round(N.w*this.texture_scale),Math.round(N.h*this.texture_scale)),this.particle_textures.push(new it.from(q))}this.particle_effects=[],this.particle_transforms=[];for(let N of n.particle.effects){let q=m.effects.find(oe=>oe.name==N.name);if(q){this.particle_effects[N.id]=q.groups,this.particle_transforms[N.id]=q.transform,uw(N.id);let oe=[];for(let de=0;de<8;de++)for(let Te=0;Te<8;Te++)oe.push(q.transform[W[de]][W[Te]]||0);nw(N.id,oe)}else console.warn(`An effect named "${N.name}" does not exist in particle.`)}if(document.body.style.backgroundColor=p.color,this.background_data={data:p,config:y},this.background_sprite=new Ei(new it(new Pt(b))),(y.blur|0)!=0){let N=new MR.BlurFilter;N.blur=y.blur,this.background_sprite.filters=[N]}switch(p.fit){case"width":this.fit_width();break;case"height":this.fit_height();break;case"contain":this.AspectRatio>this.background_data.data.aspectRatio?this.fit_height():this.fit_width();break;case"cover":this.AspectRatio>this.background_data.data.aspectRatio?this.fit_width():this.fit_height();break;default:console.error(`Background fitting called "${p.fit}" does not exist.`);break}if(this.background_sprite.zIndex=0,this.app.stage.addChild(this.background_sprite),this.touch_pool=[],this.touches=[],this.key_assign=A,this.key_assign){this.KA_sprite=new Mr(new it(this.system_tex,this.system_TF.KeyAssign)),this.KA_sprite.anchor.x=1,this.KA_sprite.anchor.y=1,this.KA_sprite.x=this.C_width,this.KA_sprite.y=this.C_height,this.KA_sprite.alpha=.1,this.KA_sprite.zIndex=1e3,this.UI_stage.addChild(this.KA_sprite),this.touch_func={},this.flick_enable=!1,this.flick_key=null;try{for(let N in this.key_assign.keys){let q=this.key_assign.keys[N];if(q.type==2)switch(q.func){case"flick":this.touch_func[N]={func:"flick",press:!1,first_press:null},this.flick_key=N;break;case"pause":this.touch_func[N]={func:"pause"};break;default:this.touch_func[N]={func:"except"},console.warn(`Key function called "${q.func}" does not exist.`);break}else if(q.type==1){let oe=new Mr(it.WHITE);oe.width=5,oe.height=5,oe.anchor.set(.5),oe.alpha=.8,oe.position.set(...this.center2LT(q.x,q.y)),this.UI_stage.addChild(oe);let de=new So(N,{fontFamily:"Arial",fontSize:20,fill:2105376,align:"center"});de.anchor.set(.5),de.position.set(...this.center2LT(q.x,q.y)),de.alpha=.9,this.UI_stage.addChild(de)}else console.warn(`The key type ( ${q.type} ) does not exist.`)}}catch(N){console.error(N),he(),alert(this.i18n.translator("キーアサイン異常停止"));return}this.touch_keys={},this.touch_id=0,document.addEventListener("keydown",this.CB_KD=N=>{if(N.code in this.touch_func)switch(this.touch_func[N.code].func){case"flick":this.touch_func[N.code].press||(this.touch_func[N.code].press=!0,this.touch_func[N.code].first_press=null,this.flick_enable=!0);break;case"pause":this.pause();break}else if(N.code in this.key_assign.keys&&!(N.code in this.touch_keys)){let q=this.center2LT(this.key_assign.keys[N.code].x,this.key_assign.keys[N.code].y);this.touch_pool[this.touch_id]={x:q[0],y:q[1],t:(performance.now()-this.start_time)/1e3,sx:q[0],sy:q[1],st:(performance.now()-this.start_time)/1e3,bx:q[0],by:q[1],start:!0,end:!1},this.touch_keys[N.code]=this.touch_id,this.touch_id++}}),document.addEventListener("keyup",this.CB_KU=N=>{if(N.code in this.touch_func)switch(this.touch_func[N.code].func){case"flick":this.touch_func[N.code].press=!1;break}else N.code in this.key_assign.keys&&(this.touch_pool[this.touch_keys[N.code]].t=(performance.now()-this.start_time)/1e3,this.touch_pool[this.touch_keys[N.code]].end=!0,this.flick_enable&&(this.touch_func[this.flick_key].first_press==null&&(this.touch_func[this.flick_key].first_press=performance.now()),performance.now()-this.touch_func[this.flick_key].first_press<300?this.touch_pool[this.touch_keys[N.code]].y+=this.center2LT(0,.2)[1]:this.flick_enable=!1),delete this.touch_keys[N.code])})}else document.body.addEventListener("touchstart",this.CB_TS=N=>{N.preventDefault();for(let q of N.changedTouches){let oe=q.clientX*this.render_scale,de=q.clientY*this.render_scale;this.touch_pool[q.identifier]={x:oe,y:de,t:(performance.now()-this.start_time)/1e3,sx:oe,sy:de,st:(performance.now()-this.start_time)/1e3,bx:oe,by:de,start:!0,end:!1}}}),document.body.addEventListener("touchmove",this.CB_TM=N=>{N.preventDefault();for(let q of N.changedTouches)this.touch_pool[q.identifier].x=q.clientX*g,this.touch_pool[q.identifier].y=q.clientY*g,this.touch_pool[q.identifier].t=(performance.now()-this.start_time)/1e3}),document.body.addEventListener("touchend",this.CB_TE=N=>{for(let q of N.changedTouches)this.touch_pool[q.identifier].x=q.clientX*g,this.touch_pool[q.identifier].y=q.clientY*g,this.touch_pool[q.identifier].t=(performance.now()-this.start_time)/1e3,this.touch_pool[q.identifier].end=!0}),document.body.addEventListener("touchcancel",this.CB_TC=N=>{for(let q of N.changedTouches)this.touch_pool[q.identifier].x=q.clientX*g,this.touch_pool[q.identifier].y=q.clientY*g,this.touch_pool[q.identifier].t=(performance.now()-this.start_time)/1e3,this.touch_pool[q.identifier].end=!0});this.judge_sprites={good:new Mr(new it(this.system_tex,this.system_TF.judge_good)),great:new Mr(new it(this.system_tex,this.system_TF.judge_great)),miss:new Mr(new it(this.system_tex,this.system_TF.judge_miss)),perfect:new Mr(new it(this.system_tex,this.system_TF.judge_perfect))},this.judge_sprites.good.visible=!1,this.judge_sprites.good.zIndex=2010,this.judge_sprites.great.visible=!1,this.judge_sprites.great.zIndex=2010,this.judge_sprites.perfect.visible=!1,this.judge_sprites.perfect.zIndex=2010,this.judge_sprites.miss.visible=!1,this.judge_sprites.miss.zIndex=2010,this.UI_stage.addChild(this.judge_sprites.good),this.UI_stage.addChild(this.judge_sprites.great),this.UI_stage.addChild(this.judge_sprites.perfect),this.UI_stage.addChild(this.judge_sprites.miss),this.judge_cache={type:null,start_time:null},this.judge_A=this.engine_config.ui.judgmentAnimation,this.judge_options={time_length:Math.max(this.judge_A.scale.duration,this.judge_A.alpha.duration),w:null,h:null},this.combo=0,this.max_combo=0,this.comboVS=new af("",{fontName:"SansFont",fontSize:100,tint:13392844,align:"center"}),this.comboTS=new af("COMBO",{fontName:"SansFont",fontSize:25,tint:13392844,align:"center"}),this.comboTS.visible=this.comboVS.visible=!1,this.UI_stage.addChild(this.comboVS),this.UI_stage.addChild(this.comboTS),this.arcade_score=0,this.accuracy_score=0,this.health=1e3,this.acc_result={perfect:0,great:0,good:0,miss:0},this.metric_pos={primary:{x:null,y:null,w:null,h:null},secondary:{x:null,y:null,w:null,h:null}},new it(this.system_tex,this.system_TF.metric),this.primaryMetric_graphics=new wa,this.primaryMetric_graphics.zIndex=0,this.primaryMetric_graphics.position.set(0,0),this.UI_stage.addChild(this.primaryMetric_graphics),this.primaryMetric_bar=new wa,this.primaryMetric_bar.zIndex=1,this.primaryMetric_bar.position.set(0,0),this.UI_stage.addChild(this.primaryMetric_bar),this.primaryMetric_text=new af("",{fontName:"SansFont",fontSize:20,tint:16777215,align:"center"}),this.primaryMetric_text.position.set(150,30),this.primaryMetric_text.anchor.set(.5,.5),this.primaryMetric_text.zIndex=2,this.UI_stage.addChild(this.primaryMetric_text),this.secondaryMetric_graphics=new wa,this.secondaryMetric_graphics.zIndex=0,this.secondaryMetric_graphics.position.set(0,0),this.UI_stage.addChild(this.secondaryMetric_graphics),this.secondaryMetric_bar=new wa,this.secondaryMetric_bar.zIndex=1,this.secondaryMetric_bar.position.set(0,0),this.UI_stage.addChild(this.secondaryMetric_bar),this.secondaryMetric_text=new af("",{fontName:"SansFont",fontSize:20,tint:16777215,align:"center"}),this.secondaryMetric_text.position.set(150,30),this.secondaryMetric_text.anchor.set(.5,.5),this.secondaryMetric_text.zIndex=2,this.UI_stage.addChild(this.secondaryMetric_text),this.pause_button=new Mr(new it(this.system_tex,this.system_TF.pause_button)),this.pause_button.position.set(this.C_width-70,10),this.pause_button.interactive=!0,this.UI_stage.addChild(this.pause_button),this.pause_menu=new Mr(new it(this.system_tex,this.system_TF.pause_menu)),this.pause_menu.anchor.set(.5,.5),this.pause_menu.position.set(this.C_width/2,this.C_height/2),this.pause_menu.zIndex=2e4,this.pause_menu.visible=!1,this.pause_menu.scale.set(this.render_scale),this.UI_stage.addChild(this.pause_menu),this.unpause_countdown=new So("",{fontName:"SansFont",fontStyle:"italic",fontSize:200*this.render_scale,fill:"0xFFFFFF",align:"center",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:10,dropShadowDistance:10}),this.unpause_countdown.anchor.set(.5,.5),this.unpause_countdown.position.set(this.C_width/2,this.C_height/2),this.unpause_countdown.visible=!1,this.UI_stage.addChild(this.unpause_countdown),this.despawned_sprites=0,this.can_skip=!1,this.skip_button_tex=new it(this.system_tex,this.system_TF.skip_button),this.pause_button.on("touchstart",this.CB_PC=N=>{this.paused||(this.can_skip?(this.BGM.stop(),this.result_callback()):this.pause())}),this.pause_button.on("mousedown",this.CB_PC),this.canvas.addEventListener("touchstart",this.CB_PM=N=>{if(this.paused){let q=this.canvas.getBoundingClientRect();for(let oe of N.changedTouches||[N]){let de=(oe.pageX-q.left)*g,Te=(oe.pageY-q.top)*g;de-=this.C_width/2,Te-=this.C_height/2,-10*this.render_scale<=Te&&50*this.render_scale>=Te&&(-120*this.render_scale<=de&&-65*this.render_scale>=de&&xe(),-20*this.render_scale<=de&&30*this.render_scale>=de&&this.unpause(),64*this.render_scale<=de&&115*this.render_scale>=de&&he())}}}),this.canvas.addEventListener("mousedown",this.CB_PM),this.histgram_bars=50,this.bucket_values=[];for(let N of this.buckets)this.bucket_values.push({perfect:[],great:[],good:[],miss:[]});this.before_time,this.process_completed=!0,this.paused=!1,this.pause_start=0,this.output_result=!1,cw(this.vertices,this.curv_vertices,this.AspectRatio,this.C_height,this.C_width,this.init_BPM,this.debug)}get_block(e){let r=hw(e),n=fw(e),s=[];for(let a=0;a<n.length;a++)s[n[a]]=r[a];return s}fit_width(){gf(1005,[-this.AspectRatio,-this.AspectRatio/this.background_data.data.aspectRatio,-this.AspectRatio,this.AspectRatio/this.background_data.data.aspectRatio,this.AspectRatio,this.AspectRatio/this.background_data.data.aspectRatio,this.AspectRatio,-this.AspectRatio/this.background_data.data.aspectRatio])}fit_height(){gf(1005,[-this.background_data.data.aspectRatio,-1,-this.background_data.data.aspectRatio,1,this.background_data.data.aspectRatio,1,this.background_data.data.aspectRatio,-1])}set_background(){let e=this.get_block(1005);this.background_sprite.proj.mapSprite(this.background_sprite,[new yt((this.C_width+e[2]*this.C_height)/2,(this.C_height-e[3]*this.C_height)/2),new yt((this.C_width+e[4]*this.C_height)/2,(this.C_height-e[5]*this.C_height)/2),new yt((this.C_width+e[6]*this.C_height)/2,(this.C_height-e[7]*this.C_height)/2),new yt((this.C_width+e[0]*this.C_height)/2,(this.C_height-e[1]*this.C_height)/2)])}destroy(){this.pause_button.off("mousedown",this.CB_PC),this.pause_button.off("touchstart",this.CB_PC),this.canvas.removeEventListener("touchstart",this.CB_PM),this.canvas.removeEventListener("mousedown",this.CB_PM),this.key_assign?(document.removeEventListener("keydown",this.CB_KD),document.removeEventListener("keyup",this.CB_KU)):(document.body.removeEventListener("touchstart",this.CB_TS),document.body.removeEventListener("touchmove",this.CB_TM),document.body.removeEventListener("touchend",this.CB_TE),document.body.removeEventListener("touchcancel",this.CB_TC)),this.app.ticker.remove(this.game_tick),this.app.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),vw()}pause(){this.paused=!0,this.pause_start=performance.now(),this.BGM.pause(),this.pause_menu.visible=!0;for(let[e,r]of Object.entries(this.looped_sound_id))this.effect_object[r.effect_id].pause(r.sound_id)}unpause(){if(this.unpause_interval==0){if(this.BGM_played)this.BGM.once("play",()=>{this.paused=!1;let e=performance.now()-this.pause_start;this.start_time+=e,this.before_time+=e}),this.BGM.play();else{this.paused=!1;let e=performance.now()-this.pause_start;this.start_time+=e,this.before_time+=e}this.pause_menu.visible=!1;for(let[e,r]of Object.entries(this.looped_sound_id))this.effect_object[r.effect_id].play(r.sound_id)}else{this.unpause_count=this.unpause_interval,this.unpause_countdown.text=String(this.unpause_interval),this.unpause_countdown.visible=!0,this.pause_menu.visible=!1;let e=setInterval(()=>{if(this.unpause_count--,this.unpause_count<=0){if(this.unpause_countdown.visible=!1,this.BGM_played)this.BGM.once("play",()=>{this.paused=!1;let r=performance.now()-this.pause_start;this.start_time+=r,this.before_time+=r}),this.BGM.play();else{this.paused=!1;let r=performance.now()-this.pause_start;this.start_time+=r,this.before_time+=r}for(let[r,n]of Object.entries(this.looped_sound_id))this.effect_object[n.effect_id].play(n.sound_id);clearInterval(e)}else this.unpause_countdown.text=String(this.unpause_count)},1e3)}}calc_scale(e,r,n,s){return n?s?[n*this.C_height/1.5/e,s*this.C_height/1.5/r]:[n*this.C_height/1.5/e,n*this.C_height/1.5/e]:[s*this.C_height/1.5/r,s*this.C_height/1.5/r]}async preparation(){this.progress_ctx.fillStyle="#FFFFFF",this.progress_ctx.textAlign="center",this.progress_ctx.textBaseline="middle",this.progress_ctx.font="20px Arial",this.progress_ctx.clearRect(0,0,this.progress_cvs.width,this.progress_cvs.height),this.progress_ctx.fillText("Preprocess",260,15),await(async()=>{for(let h=0;h<2;h++)await new Promise(_=>requestAnimationFrame(_))})(),yw();let e=0,r=1e3/10;for(let h=0;h<100;h++)e+r<performance.now()&&(e=performance.now(),this.progress_ctx.clearRect(0,0,this.progress_cvs.width,this.progress_cvs.height),this.progress_ctx.fillStyle="#000000",this.progress_ctx.fillRect(160,0,350,30),this.progress_ctx.fillStyle="#FFFFFF",this.progress_ctx.fillText("Preprocess",80,15),this.progress_ctx.fillRect(160,0,350*(h/100),30),await(async()=>{for(let _=0;_<2;_++)await new Promise(m=>requestAnimationFrame(m))})()),gw();let n=this.get_block(1006);this.pause_button.position.set(...this.center2LT(n[0],n[1])),this.pause_button.anchor.set(n[2],1-n[3]),this.pause_button.width=this.C_height/2*n[4],this.pause_button.height=this.C_height/2*n[5],this.pause_button.rotation=n[6],this.pause_button.alpha=n[7],this.judge_options.w=this.judge_options.h=n[15]*this.C_height/2/50;for(let[h,_]of Object.entries(this.judge_sprites))_.anchor.set(n[12],n[13]),_.position.set(...this.center2LT(n[10],n[11])),_.scale.set(this.judge_options.w,this.judge_options.h);this.comboVS.anchor.set(n[22],1-n[23]),this.comboVS.position.set(...this.center2LT(n[20],n[21])),this.comboVS.fontSize=Math.round(this.C_height/2*n[25]),this.comboVS.alpha=n[27],this.comboTS.anchor.set(n[32],1-n[33]),this.comboTS.position.set(...this.center2LT(n[30],n[31])),this.comboTS.fontSize=Math.round(this.C_height/2*n[35]),this.comboTS.alpha=n[37];var[s,a]=this.center2LT(n[40],n[41]),l=this.C_height/2*n[44],c=this.C_height/2*n[45];s-=n[42]*l,a-=(1-n[43])*c,this.primaryMetric_graphics.beginFill(5242960),this.primaryMetric_graphics.drawRect(s,a,l,c),this.primaryMetric_graphics.beginFill(3145776),this.primaryMetric_graphics.drawRect(s+this.C_height*.02,a+c*.25,l-this.C_height*.04,c*.5),this.primaryMetric_graphics.endFill(),this.primaryMetric_graphics.alpha=n[47],this.metric_pos.primary={x:s+this.C_height*.02,y:a+c*.25,w:l-this.C_height*.04,h:c*.5},this.primaryMetric_text.anchor.set(n[52],1-n[53]),this.primaryMetric_text.position.set(...this.center2LT(n[50],n[51])),this.primaryMetric_text.fontSize=Math.round(this.C_height/2.5*n[55]),this.primaryMetric_text.align=n[58]==-1?"left":n[58]==0?"center":"right",this.primaryMetric_text.alpha=n[57];var[s,a]=this.center2LT(n[60],n[61]),l=this.C_height/2*n[64],c=this.C_height/2*n[65];s-=n[62]*l,a-=(1-n[63])*c,this.secondaryMetric_graphics.beginFill(5242960),this.secondaryMetric_graphics.drawRect(s,a,l,c),this.secondaryMetric_graphics.beginFill(3145776),this.secondaryMetric_graphics.drawRect(s+this.C_height*.02,a+c*.25,l-this.C_height*.04,c*.5),this.secondaryMetric_graphics.endFill(),this.secondaryMetric_graphics.alpha=n[67],this.metric_pos.secondary={x:s+this.C_height*.02,y:a+c*.25,w:l-this.C_height*.04,h:c*.5},this.secondaryMetric_text.anchor.set(n[72],1-n[73]),this.secondaryMetric_text.position.set(...this.center2LT(n[70],n[71])),this.secondaryMetric_text.fontSize=Math.round(this.C_height/2.5*n[75]),this.secondaryMetric_text.align=n[78]==-1?"left":n[78]==0?"center":"right",this.secondaryMetric_text.alpha=n[77],this.set_background(),this.bucket_config=this.get_block(2003),this.progress_ctx.fillStyle="#FFFFFF",this.progress_ctx.clearRect(0,0,this.progress_cvs.width,this.progress_cvs.height),this.progress_ctx.fillText("SpawnOrder",260,15),await(async()=>{for(let h=0;h<2;h++)await new Promise(_=>requestAnimationFrame(_))})(),xw(),Ne("#processing-cover").hide(),Ne("#progress-window").hide(),this.game_start()}async game_tick(){this.frame_count++,this.paused||(!this.BGM_played&&this.start_time-performance.now()<=this.bgmOffset*1e3+this.audio_offset*1e3&&(console.log("try playing BGM"),this.BGM.play(),this.BGM_played=!0),this.play_effect(),this.particle_update(),this.sprite_update(),this.UI_update(),this.update_block(),bw(),ww(),Tw(),this.update_touch(),Sw(),Ew(),this.despawn_process(Cw()))}game_start(){this.BGM.on("end",()=>{this.despawned_sprites>=this.maximum_combo?this.result_callback():this.BGM_ended=!1}),this.frame_count=0,this.fps_interval=setInterval(()=>{this.paused||console.log(`${this.frame_count}fps ${1e3/this.frame_count}ms`),this.frame_count=0},1e3),console.log(`BGM offset:${this.bgmOffset+this.audio_offset} interval:${this.start_interval}`),this.bgmOffset+this.audio_offset<this.start_interval?(this.BGM_played=!1,this.BGM.once("play",()=>{console.log(`play BGM (update start_time ${this.start_time} -> ${performance.now()+this.bgmOffset*1e3+this.audio_offset*1e3}`),this.start_time=performance.now()+this.bgmOffset*1e3+this.audio_offset*1e3}),this.start_time=performance.now()+this.start_interval*1e3,this.before_time=this.start_time,this.app.ticker.add(this.game_tick.bind(this))):(this.BGM_played=!0,this.BGM.once("play",()=>{console.log("play BGM"),this.start_time=performance.now()+this.bgmOffset*1e3+this.audio_offset*1e3,this.before_time=this.start_time,this.app.ticker.add(this.game_tick.bind(this))}),console.log("try playing BGM"),this.BGM.play())}async game_end(){clearInterval(this.fps_interval),this.BGM.stop();for(let[e,r]of Object.entries(this.looped_sound_id))this.effect_object[r.effect_id].stop(r.sound_id);this.progress_ctx.clearRect(0,0,this.progress_cvs.width,this.progress_cvs.height),this.progress_ctx.fillText(this.i18n.translator("前処理中"),260,15),await(async()=>{for(let e=0;e<2;e++)await new Promise(r=>requestAnimationFrame(r))})(),this.bucket_rendering(),this.destroy()}bucket_rendering(){this.rendered_bucket_graph=[];for(let[e,r]of Object.entries(this.buckets)){let n=Math.min(this.bucket_config[e*6],Math.min(this.bucket_config[e*6+2],this.bucket_config[e*6+4])),s=Math.max(this.bucket_config[e*6+1],Math.max(this.bucket_config[e*6+3],this.bucket_config[e*6+5])),a={};for(let l of["all","perfect","great","good","miss"]){let c=document.createElement("canvas");c.width=1e3,c.height=300;let h=c.getContext("2d");h.lineWidth=4,h.strokeStyle="#FFFFFF",h.beginPath(),h.moveTo(28,70),h.lineTo(28,262),h.lineTo(972,262),h.lineTo(972,70),h.stroke(),h.fillStyle="#FFFFFF",h.textAlign="center",h.textBaseline="top";for(let b=0;b<=10;b++){let T=n+(s-n)*(b/10);h.font="15px Arial",h.fillText(String(Math.floor(T*100)/100),30+940*(b/10),273),h.font="10px Arial",this.i18n.is_label_included(r.unit)&&h.fillText(this.i18n.get_label(r.unit),30+940*(b/10),288),h.fillRect(26+944*(b/10),264,4,6)}let _=[],m=1;for(let b=0;b<this.histgram_bars;b++){let T=n+(s-n)*(b/this.histgram_bars),S=n+(s-n)*((b+1)/this.histgram_bars);if(_.push(0),l=="perfect"||l=="all")for(let A of this.bucket_values[e].perfect)A>=T&&A<S&&_[b]++;if(l=="great"||l=="all")for(let A of this.bucket_values[e].great)A>=T&&A<S&&_[b]++;if(l=="good"||l=="all")for(let A of this.bucket_values[e].good)A>=T&&A<S&&_[b]++;if(l=="miss"||l=="all")for(let A of this.bucket_values[e].miss)A>=T&&A<S&&_[b]++;_[b]>m&&(m=_[b])}h.fillStyle="#aaaaaaaa";for(let b=0;b<this.histgram_bars;b++)h.fillRect(30+940*(b/this.histgram_bars),70+190*(1-_[b]/m),940/this.histgram_bars,190*(_[b]/m));let f=0,p=0;for(let b of r.sprites){let T=b.rotation*Math.PI/180,S=Math.sin(T)*(-b.w/2)+Math.cos(T)*b.h/2+b.y;f<S&&(f=S),p>S&&(p=S),S=Math.sin(T)*b.w/2+Math.cos(T)*b.h/2+b.y,f<S&&(f=S),p>S&&(p=S),S=Math.sin(T)*b.w/2+Math.cos(T)*(-b.h/2)+b.y,f<S&&(f=S),p>S&&(p=S),S=Math.sin(T)*(-b.w/2)+Math.cos(T)*(-b.h/2)+b.y,f<S&&(f=S),p>S&&(p=S)}let y=50/(f-p);for(let b of r.sprites)b.id in this.tex_cvs?this.drawRotatedImage(h,this.tex_cvs[b.id],500+b.x*y,50/2-b.y*y,b.w*y,b.h*y,b.rotation):b.fallbackId in this.tex_cvs?this.drawRotatedImage(h,this.tex_cvs[b.fallbackId],500+b.x*y,50/2-b.y*y,b.w*y,b.h*y,b.rotation):console.warn(`A sprite (id:${b.id},fallback_id:${b.fallbackId}) does not exist in skin.`);c.classList.add("bucket-graph"),a[l]=c}this.rendered_bucket_graph.push(a)}}drawRotatedImage(e,r,n,s,a,l,c){e.save(),e.translate(n,s),e.rotate(-c*Math.PI/180),e.drawImage(r,-(a/2),-(l/2),a,l),e.restore()}metric_update(e,r,n){if(e=="primary"){let s=this.metric_pos.primary;this.primaryMetric_text.text=r,this.primaryMetric_bar.clear(),this.primaryMetric_bar.beginFill(9830550),this.primaryMetric_bar.drawRect(s.x,s.y,Math.round(n*s.w),s.h),this.primaryMetric_bar.endFill()}else{let s=this.metric_pos.secondary;this.secondaryMetric_text.text=r,this.secondaryMetric_bar.clear(),this.secondaryMetric_bar.beginFill(9830550),this.secondaryMetric_bar.drawRect(s.x,s.y,Math.round(n*s.w),s.h),this.secondaryMetric_bar.endFill()}}UI_update(){if(this.judge_cache.type&&!dw(0,1006,19)){let e=(performance.now()-this.judge_cache.start_time)/1e3;if(e>this.judge_options.time_length)this.judge_sprites[this.judge_cache.type].visible=!1,this.judge_cache.type=null;else{if(e<this.judge_A.scale.duration){let r=this.judge_A.scale.from+(this.judge_A.scale.to-this.judge_A.scale.from)*this.ease_function(this.judge_A.scale.ease,e/this.judge_A.scale.duration);this.judge_sprites[this.judge_cache.type].scale.set(this.judge_options.w*r,this.judge_options.h*r)}if(e<this.judge_A.alpha.duration){let r=this.judge_A.alpha.from+(this.judge_A.alpha.to-this.judge_A.alpha.from)*this.ease_function(this.judge_A.alpha.ease,e/this.judge_A.alpha.duration);this.judge_sprites[this.judge_cache.type].alpha=r}}}switch(this.engine_config.ui.primaryMetric){case"arcade":this.metric_update("primary",`SCORE: ${Math.round(this.arcade_score/this.maximum_combo*1e6)}`,this.arcade_score/this.maximum_combo);break;case"accuracy":this.metric_update("primary",`ACCURACY: ${Math.round(this.accuracy_score/this.maximum_combo*1e6)}`,this.accuracy_score/this.maximum_combo);break;case"life":this.metric_update("primary",`LIFE: ${this.health}`,this.health/1e3);break;default:this.metric_update("primary",`${this.engine_config.ui.primaryMetric}: unknown`,.5);break}switch(this.engine_config.ui.secondaryMetric){case"arcade":this.metric_update("secondary",`SCORE: ${Math.round(this.arcade_score/this.maximum_combo*1e6)}`,this.arcade_score/this.maximum_combo);break;case"accuracy":this.metric_update("secondary",`ACCURACY: ${Math.round(this.accuracy_score/this.maximum_combo*1e6)}`,this.accuracy_score/this.maximum_combo);break;case"life":this.metric_update("secondary",`LIFE: ${this.health}`,this.health/1e3);break;default:this.metric_update("secondary",`${this.engine_config.ui.secondaryMetric}: unknown`,.5);break}lm.value&&(this.set_background(),lm.value=!1)}update_block(){let e=performance.now(),r=(e-this.start_time)/1e3;tn(0,1001,0,r),tn(0,1001,1,(e-this.before_time)/1e3);let n=!1;for(let s of this.changing_TIMESCALE)if(r>=s.start_time&&r<=(s.end_time||1/0)){tn(0,1001,2,s.TIMESCALE*r+s.offset),n=!0;break}n||tn(0,1001,2,r),this.before_time=e}sprite_update(){let e=om.value;for(let s=0;s<e;s++)this.sprites.push([]),this.entities.push({archetype:0,from_function:!0});om.value=0;let r=Qb(),n=0;for(;n<r.length;){let s=r.slice(n,n+6),a=r[n+6],l=r.slice(n+7,n+7+a);switch(s[5]){case 0:this.draw_process(s[0],s[1],s[2],s[3],l);break;case 1:this.draw_curved_LR_process(s[0],s[1],s[2],s[3],s[4],l);break;case 2:this.draw_curved_TB_process(s[0],s[1],s[2],s[3],s[4],l);break}n+=7+a}Kb();for(let s of this.sprites)for(let a in s)s[a].num!=this.now_num&&(s[a].sprite.destroy(),delete s[a]);this.now_num++}draw_process(e,r,n,s,a){let l;try{for(let c of this.sprites[e])if(c&&c.id==r&&c.num!=this.now_num&&c.type=="quad-mesh"){l=c;break}if(l){let c=l.sprite.geometry.buffers[0].data,h=(this.vertices-1)*2,_=this.vertices*2*(this.vertices-1),m=this.vertices*2*this.vertices-2;a[0]==c[0]&&a[1]==c[1]&&a[h]==c[h]&&a[h+1]==c[h+1]&&a[_]==c[_]&&a[_+1]==c[_+1]&&a[m]==c[m]&&a[m+1]==c[m+1]||(l.sprite.geometry.buffers[0].data=a,l.sprite.geometry.buffers[0].update()),l.sprite.zIndex!=n&&(l.sprite.zIndex=n),l.sprite.alpha!=s&&(l.sprite.alpha=s),l.num=this.now_num}else{let c=new Bu(this.textures[r],this.vertices,this.vertices);c.geometry.buffers[0].data=a,c.geometry.buffers[0].update(),c.zIndex=n,c.alpha=s,this.engine_stage.addChild(c),this.sprites[e].push({id:r,sprite:c,num:this.now_num,n:0,type:"quad-mesh"})}}catch(c){console.warn(c)}}draw_curved_LR_process(e,r,n,s,a,l){let c;for(let h of this.sprites[e])if(h&&h.id==r&&h.num!=this.now_num&&h.type=="curv_LR"&&a==h.n){c=h;break}if(c){let h=c.sprite.geometry.buffers[0].data,_=(this.curv_vertices-1)*2,m=this.curv_vertices*2*(a-1),f=this.curv_vertices*2*a-2;l[0]==h[0]&&l[1]==h[1]&&l[_]==h[_]&&l[_+1]==h[_+1]&&l[m]==h[m]&&l[m+1]==h[m+1]&&l[f]==h[f]&&l[f+1]==h[f+1]||(c.sprite.geometry.buffers[0].data=l,c.sprite.geometry.buffers[0].update()),c.sprite.zIndex!=n&&(c.sprite.zIndex=n),c.sprite.alpha!=s&&(c.sprite.alpha=s),c.num=this.now_num}else{let h=new Bu(this.textures[r],this.curv_vertices,a);h.geometry.buffers[0].data=l,h.geometry.buffers[0].update(),h.zIndex=n,h.alpha=s,this.engine_stage.addChild(h),this.sprites[e].push({id:r,sprite:h,num:this.now_num,n:a,type:"curv_LR"})}}draw_curved_TB_process(e,r,n,s,a,l){let c;for(let h of this.sprites[e])if(h&&h.id==r&&h.num!=this.now_num&&h.type=="curv_TB"&&a==h.n){c=h;break}if(c){let h=c.sprite.geometry.buffers[0].data,_=(a-1)*2,m=a*2*(this.curv_vertices-1),f=this.curv_vertices*2*a-2;l[0]==h[0]&&l[1]==h[1]&&l[_]==h[_]&&l[_+1]==h[_+1]&&l[m]==h[m]&&l[m+1]==h[m+1]&&l[f]==h[f]&&l[f+1]==h[f+1]||(c.sprite.geometry.buffers[0].data=l,c.sprite.geometry.buffers[0].update()),c.sprite.zIndex!=n&&(c.sprite.zIndex=n),c.sprite.alpha!=s&&(c.sprite.alpha=s),c.num=this.now_num}else{let h=new Bu(this.textures[r],a,this.curv_vertices);h.geometry.buffers[0].data=l,h.geometry.buffers[0].update(),h.zIndex=n,h.alpha=s,this.engine_stage.addChild(h),this.sprites[e].push({id:r,sprite:h,num:this.now_num,n:a,type:"curv_TB"})}}play_effect(){Zb.value.forEach((n,s)=>{n[0]==-1?this.effect_loop_end_schedule.push({time:n[1]*1e3,loop_id:n[2]}):n[2]==-1?this.effect_schedule.push({time:n[1]*1e3,effect_id:n[0],loop_id:-1}):this.effect_schedule.push({time:n[1]*1e3,effect_id:n[0],loop_id:n[2]})}),Jb();let r=performance.now()-this.start_time;this.effect_schedule=this.effect_schedule.filter((n,s)=>{if(n.time<=r){if(n.loop_id!=-1){let a=this.effect_object[n.effect_id].play();this.effect_object[n.effect_id].loop(!0,a),this.looped_sound_id[n.loop_id]={sound_id:a,effect_id:n.effect_id}}else{let a=this.effect_object[n.effect_id].play();this.effect_object[n.effect_id].loop(!1,a)}return!1}else return!0}),this.effect_loop_end_schedule=this.effect_loop_end_schedule.filter((n,s)=>{if(n.time<=r){if(n.loop_id in this.looped_sound_id){let a=this.looped_sound_id[n.loop_id];this.effect_object[a.effect_id].stop(a.sound_id),delete this.looped_sound_id[n.loop_id]}else console.warn(`loop_id:${n.loop_id} does not exist in "looped_sound_id".`);return!1}else return!0})}particle_update(){for(let r of rw.value)r[1]==0?this.SpawnParticleEffect(...r.slice(2),r[0]):r[1]==1?this.MoveParticleEffect(r[0],...r.slice(2)):r[1]==2?this.DestroyParticleEffect(r[0]):console.error(`A particle order:${r[1]} does not exist.`);iw();let e=performance.now();for(let[r,n]of Object.entries(this.particles)){let s=e-n.start_time;if(s>=n.duration)if(n.loop)n.start_time=e;else{for(let a of n.sprites)a.sprite.destroy();delete this.particles[r];continue}for(let a of n.sprites){let l=this.particle_effects[n.effect][a.group_index].particles[a.particle_index];if(n.duration*l.start<=s&&s<=n.duration*(l.start+l.duration)){let c=(s-n.duration*l.start)/(n.duration*l.duration),h=this.calc_property_with_ease(c,a.from.x,a.to.x,l.x.ease),_=this.calc_property_with_ease(c,a.from.y,a.to.y,l.y.ease),m=this.calc_property_with_ease(c,a.from.w,a.to.w,l.w.ease),f=this.calc_property_with_ease(c,a.from.h,a.to.h,l.h.ease),p=this.calc_property_with_ease(c,a.from.r,a.to.r,l.r.ease),y=this.calc_property_with_ease(c,a.from.a,a.to.a,l.a.ease);a.sprite.alpha=y;let[b,T,S,A,R,L,V,M]=this.calc_particle_positon(n.anchor.x1,n.anchor.y1,n.anchor.x2,n.anchor.y2,n.anchor.x3,n.anchor.y3,n.anchor.x4,n.anchor.y4,h,_,m,f,p),H=a.sprite.geometry.buffers[0].data;c=0;for(let g=0;g<this.vertices;g++){c=g/(this.vertices-1);let ne=(b-S)*c+S,B=(T-A)*c+A,Y=(V-R)*c+R,se=(M-L)*c+L;for(let re=0;re<this.vertices;re++)c=re/(this.vertices-1),H[g*this.vertices*2+re*2]=(Y-ne)*c+ne,H[g*this.vertices*2+re*2+1]=(se-B)*c+B}a.sprite.geometry.buffers[0].update(),a.sprite.visible=!0}else a.sprite.visible=!1}}}calc_property_with_ease(e,r,n,s){return s?(n-r)*this.ease_function(s,e)+r:(n-r)*e+r}calc_particle_positon(e,r,n,s,a,l,c,h,_,m,f,p,y){let b=_-f,T=m+p,S=_+f,A=m+p,R=_-f,L=m-p,V=_+f,M=m-p,H=Math.sin(y),g=Math.cos(y),ne=(b-_)*g-(T-m)*H+_,B=(S-_)*g-(A-m)*H+_,Y=(R-_)*g-(L-m)*H+_,se=(V-_)*g-(M-m)*H+_;T=(b-_)*H+(T-m)*g+m,A=(S-_)*H+(A-m)*g+m,L=(R-_)*H+(L-m)*g+m,M=(V-_)*H+(M-m)*g+m,b=ne,S=B,R=Y,V=se;let[re,he]=this.bilinear_interpolate(e,r,n,s,a,l,c,h,R,L),[xe,Z]=this.bilinear_interpolate(e,r,n,s,a,l,c,h,b,T),[U,W]=this.bilinear_interpolate(e,r,n,s,a,l,c,h,S,A),[z,Q]=this.bilinear_interpolate(e,r,n,s,a,l,c,h,V,M);return[re,he,xe,Z,U,W,z,Q]}bilinear_interpolate(e,r,n,s,a,l,c,h,_,m){_=(_+1)/2,m=(1-m)/2;let f=(e-n)*m+n,p=(r-s)*m+s,y=(c-a)*m+a,b=(h-l)*m+l;return[(y-f)*_+f,(b-p)*_+p]}sequential_order(e,r,n=!0){let s=[];for(let a of e){let l=this.archetypes[this.entities[a].archetype];r in l?"order"in l[r]?s.push({id:a,order:l[r].order}):s.push({id:a,order:0}):n||s.push({id:a,order:1/0})}return s.sort((a,l)=>a.order-l.order),n?s.map(a=>a.id):s.map(a=>[a.id,a.order!=1/0])}get_node_index_of_archetype(e,r){let n=this.archetypes[this.entities[e].archetype];return r in n?{enable:!0,index:n[r].index}:{enable:!1,index:null}}preprocess(){for(let e of this.sequential_order(Object.keys(this.entities),"preprocess"))e=Number(e),this.run_node(this.get_node_index_of_archetype(e,"preprocess").index,e)}spawnOrder(){this.can_write={RuntimeEnvironment:!1,RuntimeUpdate:!1,RuntimeTouchArray:!1,RuntimeSkinTransform:!1,RuntimeParticleTransform:!1,RuntimeBackground:!1,RuntimeUI:!1,RuntimeUIConfiguration:!1,LevelMemory:!1,LevelData:!1,LevelOption:!1,LevelBucket:!1,LevelScore:!1,LevelLife:!1,EngineRom:!1,EntityMemory:!0,EntityData:!1,EntitySharedMemory:!1,EntityInfo:!1,EntityDespawn:!0,EntityInput:!0,EntityDataArray:!1,EntitySharedMemoryArray:!1,EntityInfoArray:!1,ArchetypeLife:!1,TemporaryMemory:!0};let e=[];for(let[r,n]of this.sequential_order(Object.keys(this.entities),"spawnOrder",!1))r=Number(r),n?e.push({value:this.run_node(this.get_node_index_of_archetype(r,"spawnOrder").index,r),entity_id:r}):e.push({value:0,entity_id:r});e.sort((r,n)=>n.value-r.value),this.spawnQ=e.map(r=>r.entity_id),this.spawnQ_debug=e}shouldSpawn(){for(;this.spawnQ.length;){let e=this.spawnQ[this.spawnQ.length-1],r=this.archetypes[this.entities[e].archetype];if("shouldSpawn"in r)if(this.run_node(r.shouldSpawn.index,e))this.active_entities.push(e),this.init_entities.push(e),this.spawnQ.pop(),this.blocks.EntityInfoArray[3*e+2]=1;else break;else this.active_entities.push(e),this.init_entities.push(e),this.spawnQ.pop(),this.blocks.EntityInfoArray[3*e+2]=1}for(let e of this.spawnFQ)this.active_entities.push(e),this.init_entities.push(e),this.blocks.EntityInfoArray[3*e+2]=1;this.spawnFQ=[],this.blocks.EntityInfoArray[2]=0}async initialize(){let e=[];for(let r of this.init_entities)e.push((async n=>{n=Number(n);let s=this.archetypes[this.entities[n].archetype];s?"initialize"in s&&this.run_node(s.initialize.index,n):console.warn(`An archetype:${this.entities[n].archetype} of the entity(index:${n}) does not exist.`)})(r));await Promise.all(e),this.init_entities=[]}updateSequential(){this.can_write={RuntimeEnvironment:!1,RuntimeUpdate:!1,RuntimeTouchArray:!1,RuntimeSkinTransform:!0,RuntimeParticleTransform:!0,RuntimeBackground:!0,RuntimeUI:!1,RuntimeUIConfiguration:!1,LevelMemory:!0,LevelData:!1,LevelOption:!1,LevelBucket:!1,LevelScore:!1,LevelLife:!1,EngineRom:!1,EntityMemory:!0,EntityData:!1,EntitySharedMemory:!0,EntityInfo:!1,EntityDespawn:!0,EntityInput:!0,EntityDataArray:!1,EntitySharedMemoryArray:!0,EntityInfoArray:!1,ArchetypeLife:!1,TemporaryMemory:!0};for(let e of this.sequential_order(this.active_entities,"updateSequential"))e=Number(e),this.run_node(this.get_node_index_of_archetype(e,"updateSequential").index,e)}input_callback(){if(this.touches.length>0)for(let e of this.sequential_order(this.active_entities,"touch"))e=Number(e),this.run_node(this.get_node_index_of_archetype(e,"touch").index,e)}update_touch(){let e=[],r=(performance.now()-this.before_touch_time)/1e3;tn(0,1001,3,Object.keys(this.touch_pool).length);for(let[n,s]of Object.entries(this.touch_pool)){let a=(s.x-s.bx)/this.C_height*2,l=(s.by-s.y)/this.C_height*2,c=a/r,h=l/r;e=[...e,Number(n),s.start?1:0,s.end?1:0,s.t,s.st,...this.canvaspos2CCS(s.x,s.y),...this.canvaspos2CCS(s.sx,s.sy),a,l,c,h,Math.sqrt(c**2+h**2),Math.atan2(h,c)],s.end?delete this.touch_pool[n]:(s.start=!1,s.bx=s.x,s.by=s.y)}this.before_touch_time=performance.now(),gf(1002,e)}canvaspos2CCS(e,r){return[e/this.C_height*2-this.AspectRatio,1-r/this.C_height*2]}async updateParallel(){this.can_write={RuntimeEnvironment:!1,RuntimeUpdate:!1,RuntimeTouchArray:!1,RuntimeSkinTransform:!1,RuntimeParticleTransform:!1,RuntimeBackground:!1,RuntimeUI:!1,RuntimeUIConfiguration:!1,LevelMemory:!1,LevelData:!1,LevelOption:!1,LevelBucket:!1,LevelScore:!1,LevelLife:!1,EngineRom:!1,EntityMemory:!0,EntityData:!1,EntitySharedMemory:!1,EntityInfo:!1,EntityDespawn:!0,EntityInput:!0,EntityDataArray:!1,EntitySharedMemoryArray:!1,EntityInfoArray:!1,ArchetypeLife:!1,TemporaryMemory:!0};let e=[];for(let r of this.active_entities)e.push((async n=>{n=Number(n);let s=this.archetypes[this.entities[n].archetype];"updateParallel"in s&&this.run_node(s.updateParallel.index,n)})(r));await Promise.all(e)}async despawning(){let e=[],r=[];for(let n of this.active_entities)this.blocks.EntityDespawn[n][0]!=0&&r.push(n);for(let n of r)e.push((async s=>{s=Number(s);let a=this.archetypes[this.entities[s].archetype];if("terminate"in a&&this.run_node(a.terminate.index,s),this.active_entities=this.active_entities.filter(l=>l!=s),this.entities[s].from_function||(this.blocks.EntityInfoArray[3*s+2]=2),a.hasInput&&!this.entities[s].from_function){let l=this.entities[s].archetype;switch(this.blocks.EntityInput[s][0]){case 0:this.judge_cache.type="miss",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!0,this.judge_sprites.good.visible=!1,this.judge_sprites.great.visible=!1,this.judge_sprites.perfect.visible=!1,this.combo=0,this.combo_update(),this.health+=this.blocks.ArchetypeLife[l*4+3]||0,this.acc_result.miss++;break;case 1:this.judge_cache.type="perfect",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!1,this.judge_sprites.good.visible=!1,this.judge_sprites.great.visible=!1,this.judge_sprites.perfect.visible=!0,this.combo++,this.max_combo<this.combo&&(this.max_combo=this.combo),this.combo_update(),this.arcade_score+=1,this.health+=this.blocks.ArchetypeLife[l*4]||0,this.accuracy_score+=Math.max(1-Math.abs(this.blocks.EntityInput[s][1]),0),this.acc_result.perfect++;break;case 2:this.judge_cache.type="great",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!1,this.judge_sprites.good.visible=!1,this.judge_sprites.great.visible=!0,this.judge_sprites.perfect.visible=!1,this.combo++,this.max_combo<this.combo&&(this.max_combo=this.combo),this.combo_update(),this.arcade_score+=this.blocks.LevelScore[1]/this.blocks.LevelScore[0],this.health+=this.blocks.ArchetypeLife[l*4+1]||0,this.accuracy_score+=Math.max(1-Math.abs(this.blocks.EntityInput[s][1]),0),this.acc_result.great++;break;case 3:this.judge_cache.type="good",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!1,this.judge_sprites.good.visible=!0,this.judge_sprites.great.visible=!1,this.judge_sprites.perfect.visible=!1,this.combo=0,this.combo_update(),this.arcade_score+=this.blocks.LevelScore[2]/this.blocks.LevelScore[0],this.health+=this.blocks.ArchetypeLife[l*4+2]||0,this.accuracy_score+=Math.max(1-Math.abs(this.blocks.EntityInput[s][1]),0),this.acc_result.good++;break}this.health<0&&(this.health=0),this.despawned_sprites++}})(n));await Promise.all(e),this.despawned_sprites>=this.maximum_combo&&(this.BGM_ended?this.result_callback():(this.pause_button.texture=this.skip_button_tex,this.can_skip=!0))}despawn_process(e){for(let r of e){switch(this.health+=r[1],this.accuracy_score+=r[2],this.arcade_score+=r[3],r[0]){case 0:this.judge_cache.type="miss",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!0,this.judge_sprites.good.visible=!1,this.judge_sprites.great.visible=!1,this.judge_sprites.perfect.visible=!1,this.combo=0,this.combo_update(),this.acc_result.miss++,this.bucket_values.length>r[4]&&r[4]>=0?this.bucket_values[r[4]].miss.push(r[5]):r[4]!=-1&&console.warn(`Bucket_id:${r[4]} does not exist.`);break;case 1:this.judge_cache.type="perfect",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!1,this.judge_sprites.good.visible=!1,this.judge_sprites.great.visible=!1,this.judge_sprites.perfect.visible=!0,this.combo++,this.max_combo<this.combo&&(this.max_combo=this.combo),this.combo_update(),this.acc_result.perfect++,this.bucket_values.length>r[4]&&r[4]>=0?this.bucket_values[r[4]].perfect.push(r[5]):r[4]!=-1&&console.warn(`Bucket_id:${r[4]} does not exist.`);break;case 2:this.judge_cache.type="great",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!1,this.judge_sprites.good.visible=!1,this.judge_sprites.great.visible=!0,this.judge_sprites.perfect.visible=!1,this.combo++,this.max_combo<this.combo&&(this.max_combo=this.combo),this.combo_update(),this.acc_result.great++,this.bucket_values.length>r[4]&&r[4]>=0?this.bucket_values[r[4]].great.push(r[5]):r[4]!=-1&&console.warn(`Bucket_id:${r[4]} does not exist.`);break;case 3:this.judge_cache.type="good",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!1,this.judge_sprites.good.visible=!0,this.judge_sprites.great.visible=!1,this.judge_sprites.perfect.visible=!1,this.combo=0,this.combo_update(),this.acc_result.good++,this.bucket_values.length>r[4]&&r[4]>=0?this.bucket_values[r[4]].good.push(r[5]):r[4]!=-1&&console.warn(`Bucket_id:${r[4]} does not exist.`);break;default:console.error(`Judge_id:${r[0]} does not exist.`);break}this.health<0&&(this.health=0),this.despawned_sprites++}this.despawned_sprites>=this.maximum_combo&&(this.BGM_ended?this.result_callback():(this.pause_button.texture=this.skip_button_tex,this.can_skip=!0))}combo_update(){this.combo>0?(this.comboVS.visible=this.comboTS.visible=!0,this.comboVS.text=String(this.combo)):(this.comboVS.visible=this.comboTS.visible=!1,this.comboVS.text="0")}ease_function(e,r){return e=="linear"||e=="Linear"?Gm.linear(r):e=="none"||e=="None"?0:e.substr(0,5)=="InOut"||e.substr(0,3)=="inOut"?(e=e.substr(5),this.ease_functions.includes(e)?r<.5?gl[`easeIn${e}`](r*2)*.5:gl[`easeOut${e}`](r*2-1)*.5+.5:(console.error(`An easing function named "InOut${e}" does not exist.`),0)):e.substr(0,5)=="OutIn"||e.substr(0,5)=="outIn"?(e=e.substr(5),this.ease_functions.includes(e)?r<.5?gl[`easeOut${e}`](r*2)*.5:gl[`easeIn${e}`](r*2-1)*.5+.5:(console.error(`An easing function named "OutIn${e}" does not exist.`),0)):e.substr(0,2)=="In"||e.substr(0,2)=="in"?(e=e.substr(2),this.ease_functions.includes(e)?gl[`easeIn${e}`](r):(console.error(`An easing function named "In${e}" does not exist.`),0)):e.substr(0,3)=="Out"||e.substr(0,3)=="out"?(e=e.substr(3),this.ease_functions.includes(e)?gl[`easeOut${e}`](r):(console.error(`An easing function named "Out${e}" does not exist.`),0)):(console.error(`An easing function named "${e}" does not exist.`),0)}hex_to_tint(e){return e.length==7?parseInt(e.slice(1),16):e.length==4?parseInt(e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)+e.charAt(3)+e.charAt(3),16):(console.error(`${e} is not valit hex color.`),0)}center2LT(e,r){return[Math.round((e+this.AspectRatio)/2*this.C_height),Math.round((1-r)/2*this.C_height)]}generate_random(){return[Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Math.random()]}calc_property(e,r,n){if(e){let s=0;"c"in e&&(s+=e.c);for(let a=0;a<8;a++)`r${a+1}`in e&&(s+=e[`r${a+1}`]*r[a]),`sinr${a+1}`in e&&(s+=e[`sinr${a+1}`]*Math.sin(2*Math.PI*r[a])),`cosr${a+1}`in e&&(s+=e[`cosr${a+1}`]*Math.cos(2*Math.PI*r[a]));return s}else return n}SpawnParticleEffect(e,r,n,s,a,l,c,h,_,m,f,p){if(e in this.particle_effects){let y=performance.now(),b={effect:e,duration:m*1e3,loop:!!f,start_time:y,anchor:{x1:r,x2:s,x3:l,x4:h,y1:n,y2:a,y3:c,y4:_},sprites:[]};return this.particle_effects[e].forEach((T,S)=>{for(let A=0;A<T.count;A++){let R=this.generate_random();T.particles.forEach((L,V)=>{let M=new Bu(this.particle_textures[L.sprite],this.vertices,this.vertices);M.tint=this.hex_to_tint(L.color),M.visible=!1,M.zIndex=2e3,this.engine_stage.addChild(M),b.sprites.push({sprite:M,group_index:S,particle_index:V,from:{x:this.calc_property(L.x.from,R,0),y:this.calc_property(L.y.from,R,0),w:this.calc_property(L.w.from,R,0),h:this.calc_property(L.h.from,R,0),r:this.calc_property(L.r.from,R,0),a:this.calc_property(L.a.from,R,0)},to:{x:this.calc_property(L.x.to,R,0),y:this.calc_property(L.y.to,R,0),w:this.calc_property(L.w.to,R,0),h:this.calc_property(L.h.to,R,0),r:this.calc_property(L.r.to,R,0),a:this.calc_property(L.a.to,R,0)},random:R})})}}),this.particles[p]=b,p}else console.warn(`A particle:${e} does not exist.`)}MoveParticleEffect(e,r,n,s,a,l,c,h,_){if(e in this.particles){let m=this.particles[e];m.anchor={x1:r,x2:s,x3:l,x4:h,y1:n,y2:a,y3:c,y4:_}}else console.warn(`particle_unique_id:${e} does not exist.`)}DestroyParticleEffect(e){if(e in this.particles){for(let r of this.particles[e].sprites)r.sprite.destroy();delete this.particles[e]}else console.warn(`particle_unique_id:${e} does not exist.`)}}const Wr=[];for(let i=0;i<256;++i)Wr.push((i+256).toString(16).slice(1));function SM(i,e=0){return(Wr[i[e+0]]+Wr[i[e+1]]+Wr[i[e+2]]+Wr[i[e+3]]+"-"+Wr[i[e+4]]+Wr[i[e+5]]+"-"+Wr[i[e+6]]+Wr[i[e+7]]+"-"+Wr[i[e+8]]+Wr[i[e+9]]+"-"+Wr[i[e+10]]+Wr[i[e+11]]+Wr[i[e+12]]+Wr[i[e+13]]+Wr[i[e+14]]+Wr[i[e+15]]).toLowerCase()}let e_;const EM=new Uint8Array(16);function CM(){if(!e_){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");e_=crypto.getRandomValues.bind(crypto)}return e_(EM)}const AM=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_1={randomUUID:AM};function PM(i,e,r){if(_1.randomUUID&&!i)return _1.randomUUID();i=i||{};const n=i.random??i.rng?.()??CM();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,SM(n)}const IM=window.Zlib.Gunzip,OM=window.Zlib.Unzip;window.node_calc=wM;function RM(i){return{authentications:"authentication",multiplayers:"multiplayer",posts:"post",playlists:"playlist",levels:"level",skins:"skin",backgrounds:"background",effects:"effect",particles:"particle",engines:"engine",replays:"replay",rooms:"room",configurations:"configuration"}[i]}function MM(i){return{authentication:"authentications",multiplayer:"multiplayers",post:"posts",playlist:"playlists",level:"levels",skin:"skins",background:"backgrounds",effect:"effects",particle:"particles",engine:"engines",replay:"replays",room:"rooms",configuration:"configurations"}[i]}class kM extends Ut.Component{constructor(e){super(e),this.state={menu_scene:"LoadingLocalization",visible:!0,increment:0},this.menu_route=["LoadingLocalization"]}render(){if(this.state.visible)switch(this.state.menu_scene){case"LoadingLocalization":return F.jsx("h1",{children:"Loading Localization File..."});case"Title":return F.jsx(DM,{C:this});case"TOS":return F.jsx(NM,{C:this});case"ServerMenu":return F.jsx(LM,{C:this});case"AddServerMenu":return F.jsx(zM,{C:this});case"AddCollectionMenu":return F.jsx(VM,{C:this});case"EditServerMenu":return F.jsx(WM,{C:this});case"EditCollectionMenu":return F.jsx(KM,{C:this});case"ServerInfo":return F.jsx(tk,{C:this});case"ServerMore":return F.jsx(ik,{C:this});case"LevelInfo":return F.jsx(ok,{C:this});case"LevelInfoOffline":return F.jsx(lk,{C:this});case"LevelOption":return F.jsx(ck,{C:this});case"ResultMenu":return F.jsx(vk,{C:this});case"ItemInfo":return F.jsx(hk,{C:this});case"PostInfo":return F.jsx(fk,{C:this});case"PlayListInfo":return F.jsx(ak,{C:this});case"SourceLoad":return F.jsx(dk,{C:this});case"OfflineMenu":return F.jsx(pk,{C:this});case"BucketMenu":return F.jsx(_k,{C:this});default:return this.Unknown_menu()}else return F.jsx(F.Fragment,{})}componentDidMount(){_t.load_file().then(()=>{this.change_menu("Title","write")}).catch(()=>{alert("ERROR: CANNOT LOAD LOCALIZATION FILE. PLEASE REFRESH THIS PAGE.")})}change_menu(e,r="next"){switch(this.setState({menu_scene:e}),r){case"next":this.menu_route[this.menu_route.length-2]==e?this.menu_route.pop():this.menu_route.push(e);break;case"add":this.menu_route.push(e);break;case"write":this.menu_route=[e];break}console.log(this.menu_route)}back_menu(e=1){let r=this.menu_route[this.menu_route.length-e-1];return this.setState({menu_scene:r}),this.menu_route=this.menu_route.slice(0,e*-1),console.log(this.menu_route),r}render_menu(){this.setState({increment:new Date().getTime()})}Unknown_menu(){return F.jsx("h1",{children:_t.translator("不明なメニュー")})}change_visible(e){this.setState({visible:e})}}class DM extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C}render(){const e=this.Menu_Controller,r=_t.get_translator();return F.jsxs("div",{id:"title-div",children:[F.jsx("h1",{className:"title",children:"Sonolus Web Player"}),F.jsx("div",{id:"start-trig",onClick:async()=>{Ne("#loading-cover").show(),await FM(),e.change_menu("ServerMenu"),Ne("#loading-cover").hide()},children:r("スタート")}),F.jsxs("div",{className:"TOStext",children:[r("スタートすると"),F.jsx("a",{className:"TOStag",onClick:()=>{e.change_menu("TOS")},children:r("利用規約")}),r("に同意したものとみなします。")]}),F.jsxs("div",{className:"feedback",children:[r("質問はDiscordへ"),": ",F.jsx("a",{href:"https://discordapp.com/users/951455786423439400",children:"ponz8264"})]}),F.jsxs("div",{id:"version",children:["System Version: beta-0.2.1",F.jsx("br",{}),"Sonolus Version: beta-0.8.11"]})]})}}const NM=i=>F.jsxs("div",{id:"rule",children:[F.jsx("h2",{children:_t.translator("利用規約")}),F.jsxs("div",{className:"content",children:["===用語の定義===",F.jsx("br",{}),"・「または」はすべて成り立つとは限らないことを指す語で、すべて成り立つ場合も含み、「および」の意も含む。",F.jsx("br",{}),"・「このウェブシステム」とは、https://1217pond.github.io/sonolus-web-player/ 以下の利用者がアクセス可能なファイルによって構築された、HTMLレンダリングエンジン上で実行されるシステムのこと。",F.jsx("br",{}),"・「スタートする」とは、このウェブシステムを実行して表示されるタイトルのプレイボタンを押すことを指す。",F.jsx("br",{}),"・管理者とは、このウェブシステムに対し、開発、運営、管理、またはそのほかの行為を行う、または行っていた者を指す。",F.jsx("br",{}),"・利用者とは、管理者を除き、このウェブシステムにアクセスしなんらかの電子計算機上で実行している者を指す。",F.jsx("br",{}),"・「外部サーバー」とは、サーバーアドレスと名前を入力することでこのウェブシステム上に登録できるSonolus custom serversを指す。",F.jsx("br",{}),"・「外部サービス」とは、このウェブシステムが利用しているこのウェブシステム以外のインターネット上のサービスを指す。",F.jsx("br",{}),"・「ソースデータ」とは、サーバー、楽曲、譜面(レベル)、スキン、背景、エフェクト、エンジン、パーティクルの内容・概要を指す。",F.jsx("br",{}),F.jsx("br",{}),"===利用者が承諾しなればならない規約===",F.jsx("br",{}),"1. 利用者がこのウェブシステムで、管理者の意図していない行為(*1)をすることを禁止する。",F.jsx("br",{}),"2. このウェブシステムにより発生した直接損害・間接損害の責任の一切を管理者は負わないものとする。",F.jsx("br",{}),"3. 外部サーバーから提供されるソースデータとは管理者は一切関与せず、利用者の自己責任としてデータが取得される。",F.jsx("br",{}),"4. このウェブシステムは、フリーズ、クラッシュ、意図しない挙動、またはこれらによる利用者やこのウェブシステムが実行されているデバイスへの影響が発生する可能性があり、すべて利用者の自己責任となる。",F.jsx("br",{}),"5. 外部サービスが、このウェブシステムによるインターネットの通信内容を傍受、記録、解析、利用、そのほかの行為をすることを利用者は承諾する。",F.jsx("br",{}),"6. ある特定の利用者に対する、管理者の明確かつ具体的な許可により、上記の禁止されている行為のうち管理者によって許可された行為のみ、管理者はその特定の利用者が履行することを許す。",F.jsx("br",{}),"7. 管理者はこのウェブシステム上で管理者の在住している国の法律および管理者の在住している国が批准している国際法の範囲内で可能なすべての行為を実行でき、それを利用者は許可する。",F.jsx("br",{}),"8. 管理者はこの利用規約を利用者への通知なしに変更する可能性があり、利用規約の変更後に利用者がスタートした時点でその利用者は新たな利用規約に同意したものとみなされる。",F.jsx("br",{}),F.jsx("br",{}),"*1 以下の行為を指す。",F.jsx("br",{}),"a. このウェブシステムの、ビューポート内の操作可能なオブジェクトの操作または、ビューポート内でのタッチパネルやマウス、キーボードなどの入力装置の操作(以下「管理者の意図した操作」と呼称する)以外を利用して、故意に、このウェブシステムの構造や変数などの状態の一部または全部が変更、削除、追加されるような操作をする行為(例：デバッカーツールなどを使いDOM要素を操作する行為、コンソールで変数を書き換える行為)",F.jsx("br",{}),"b. 管理者の意図した操作以外を利用して、故意に、このウェブシステムが実行する処理、通信、その他の動作が、阻害、停止・中止、そのほかの管理者が意図するものではないと判断された挙動をするように操作する行為(例：コンソールの操作によりインターネット通信を改竄する行為)",F.jsx("br",{}),"c. 管理者の意図した操作を利用しているかどうかに関係なく、故意に、管理者が正常ではないと判断した、または判断する動作を実行する行為(例：管理者がバグが発生すると判断した行為を故意に行う行為)",F.jsx("br",{}),"d. 管理者の意図した操作を利用しているかどうかに関係なく、故意であるかどうかに関係なく、外部サービス、外部サーバーに対する、必要以上の負荷を与える行為、損害を与える行為、そのほかの悪意をもった行為(例：外部サーバーに通信を行うボタンを必要以上に押し、外部サーバーに必要以上の負荷を与える行為)",F.jsx("br",{}),"e. 上記以外でも、管理者が、正常ではない、意図するものではない、または悪意のあるものであると、判断するまたは判断した行為"]}),F.jsx("a",{onClick:()=>{i.C.back_menu()},className:"text-trigger leave-TOS-trg",children:_t.translator("戻る")})]});async function FM(){let e=(await Rt.servers.get("#master")||{option:{system_option:{}}}).option.system_option,r={};for(let c of Fw)r[c.id]=e[c.id]===0?0:e[c.id]||c.def_val;console.log(r),await Rt.servers.put({name:"#master",address:null,option:{system_option:r},display_name:null,version:lc});let n=await Rt.collections.toArray(),s=[];n.forEach(c=>{(c.version||1)<Qf&&s.push(c.name)}),console.log("should delete colls:",s),await Rt.collections.bulkDelete(s);let a=await Rt.servers.toArray(),l=[];a.forEach(c=>{(c.version||1)<lc&&l.push(c.name)}),console.log("should delete servs:",l),await Rt.servers.bulkDelete(l)}class LM extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.state={Server_list:[],Collection_list:[]},ce.collection_list={}}render(){const e=this.Menu_Controller,r=_t.get_translator();return F.jsxs("div",{id:"menu",children:[F.jsx("h3",{className:"Menu-title",children:r("サーバー")}),F.jsx("h4",{id:"decache-trg",onClick:jM,children:r("キャッシュ削除")}),F.jsxs("div",{id:"serv",className:"selector-window",children:[this.state.Server_list.map(n=>F.jsx(UM,{serv:n,C:e},n.name)),F.jsxs("a",{id:"serv-adder",className:"text-trigger",onClick:()=>e.change_menu("AddServerMenu"),children:["+ ",r("サーバーを追加"),"..."]})]}),F.jsx("h3",{className:"Menu-title",children:r("コレクション")}),F.jsxs("div",{id:"colec",className:"selector-window",children:[this.state.Collection_list.map(n=>F.jsx(HM,{name:n,C:e},n)),F.jsxs("a",{id:"colec-adder",className:"text-trigger",onClick:()=>e.change_menu("AddCollectionMenu"),children:["+ ",r("コレクションを追加"),"..."]}),F.jsx("br",{}),F.jsx("span",{children:r("オフラインプレイ")})]})]})}async componentDidMount(){let[e,r]=await BM();this.setState({Server_list:e,Collection_list:Object.keys(r)}),ce.collection_list=r}}async function BM(){let i=await Rt.servers.toArray();i=i.filter(n=>n.name!="#master");let e=await Rt.collections.toArray(),r={};return e.forEach(n=>{r[n.name]=n.data}),[i,r]}async function jM(){if(confirm("本当にキャッシュを削除しますか？")){let e=(await Rt.cache.toArray()).map(r=>r.hash);await Rt.cache.bulkDelete(e),alert("すべてのキャッシュが削除されました。")}}const UM=i=>{const e=i.C,r=i.serv;return console.log(r),_t.get_translator(),F.jsxs("div",{className:"menu-selector",onClick:async()=>{if(e.menu_route[e.menu_route.length-1]!="EditServerMenu"){Ne("#loading-cover").show(),jt=r.address,ei=r.name,ce.serv_display_name=r.display_name;try{ce.server_info_data=await GM(jt),console.log(ce.server_info_data),e.change_menu("ServerInfo")}catch(n){console.error(n),alert(`${n.name}: ${n.message}`)}Ne("#loading-cover").hide()}},children:[F.jsx("span",{children:r.display_name}),F.jsx("span",{className:"src-label",children:r.address}),F.jsx("img",{src:"textures/edit.svg",className:"item_editor",width:"20",onClick:()=>{e.change_menu("EditServerMenu"),ce.server=r}})]})};async function GM(i){return JSON.parse(await oc(i,"/sonolus/info",{localization:wi}))}const HM=i=>{const e=i.C;return _t.get_translator(),F.jsx("div",{className:"menu-selector",onClick:()=>{e.change_menu("EditCollectionMenu"),ce.name=i.name},children:F.jsx("span",{children:i.name})})},zM=i=>{const e=i.C,r=_t.get_translator();return F.jsxs("div",{id:"serv-add-menu",children:[F.jsx("h1",{className:"Menu-title",children:r("サーバーを追加")}),F.jsx("h3",{className:"Item-name",children:r("名前")}),F.jsx("input",{type:"text",style:{width:"300px",fontSize:"20px"},id:"name"}),F.jsx("h3",{className:"Item-name",children:r("サーバーアドレス")}),F.jsx("input",{type:"text",style:{width:"300px",fontSize:"20px"},id:"address"}),F.jsx("br",{}),F.jsx("br",{}),F.jsx("button",{id:"cancel-trig",className:"btn",onClick:()=>{e.back_menu(),Ne("#serv-add-menu #name").val(""),Ne("#serv-add-menu #address").val("")},children:r("キャンセル")}),F.jsx("button",{id:"add-trig",className:"btn",onClick:()=>{let n=Ne("#serv-add-menu #name").val(),s=Ne("#serv-add-menu #address").val();n&&s?(s.slice(-1)=="/"&&(s=s.slice(0,-1)),s=s.replaceAll(" ","").replaceAll("　",""),XM(n,s),e.back_menu(),Ne("#serv-add-menu #name").val(""),Ne("#serv-add-menu #address").val("")):alert(r("名称アドレス必須"))},children:r("追加")})]})};async function XM(i,e){await Rt.servers.put({name:PM(),display_name:i,address:e,option:{},version:lc})}const VM=i=>{const e=i.C,r=_t.get_translator();return F.jsxs("div",{id:"colec-add-menu",children:[F.jsx("h1",{className:"Menu-title",children:r("コレクションを追加")}),F.jsx("h3",{className:"Item-name",children:r("名前")}),F.jsx("input",{type:"text",style:{width:"300px",fontSize:"20px"},id:"name"}),F.jsx("br",{}),F.jsx("br",{}),F.jsx("button",{id:"cancel-trig",className:"btn",onClick:()=>{e.back_menu(),Ne("#colec-add-menu #name").val("")},children:r("キャンセル")}),F.jsx("button",{id:"add-trig",className:"btn",onClick:async()=>{let n=Ne("#colec-add-menu #name").val();if(n){let s=[];e.menu_route[e.menu_route.length-2]=="ServerMenu"?s=Object.keys(ce.collection_list):(e.menu_route[e.menu_route.length-2]=="ItemInfo"||e.menu_route[e.menu_route.length-2]=="LevelInfo")&&(s=ce.collection_names),s.includes(n)?alert(r("名称既存")):(Ne("#loading-cover").show(),await qM(n),(e.menu_route[e.menu_route.length-2]=="ItemInfo"||e.menu_route[e.menu_route.length-2]=="LevelInfo")&&ce.collection_names.push(n),Ne("#loading-cover").hide(),e.back_menu(),Ne("#colec-add-menu #name").val(""))}else alert(r("名称必須"))},children:r("追加")})]})};async function qM(i){await Rt.collections.put({name:i,data:{},version:Qf})}const WM=i=>{const e=i.C,r=_t.get_translator();return F.jsxs("div",{id:"serv-editor",children:[F.jsx("h1",{className:"Menu-title",children:r("サーバーを編集")}),F.jsx("h3",{className:"Item-name",children:r("名前")}),F.jsx("input",{type:"text",style:{width:"500px",fontSize:"20px"},id:"name",defaultValue:ce.server.display_name}),F.jsx("h3",{className:"Item-name",children:r("サーバーアドレス")}),F.jsx("input",{type:"text",style:{width:"500px",fontSize:"20px"},id:"address",defaultValue:ce.server.address}),F.jsx("br",{}),F.jsx("br",{}),F.jsx("button",{id:"cancel-trig",className:"btn",onClick:()=>{delete ce.server,e.back_menu()},children:r("キャンセル")}),F.jsx("button",{id:"delete-trig",className:"btn red-btn",onClick:async()=>{confirm(r("削除するか"))&&(await YM(ce.server.name),delete ce.server,e.back_menu())},children:r("削除")}),F.jsx("button",{id:"edit-trig",className:"btn",onClick:async()=>{Ne("#serv-editor #name").val(),Ne("#serv-editor #address").val()?(Ne("#serv-editor #address").val().slice(-1)=="/"&&Ne("#serv-editor #address").val(Ne("#serv-editor #address").val().slice(0,-1)),await $M(Ne("#serv-editor #name").val(),Ne("#serv-editor #address").val()),delete ce.server,e.back_menu()):alert(r("名称アドレス必須"))},children:r("保存")})]})};async function $M(i,e){await Rt.servers.put({name:ce.server.name,display_name:i,address:e,option:ce.server.option,version:lc})}async function YM(i){await Rt.servers.delete(i)}class KM extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.name=ce.name,ce.edited_collection={};let r=ce.collection_list[this.name];for(let n in r)ce.edited_collection[n]=!1}render(){const e=this.Menu_Controller,r=_t.get_translator();let n=ce.collection_list[this.name];return F.jsxs("div",{id:"colec-editor",children:[F.jsx("h1",{className:"Menu-title",children:r("コレクションを編集")}),F.jsx("h3",{className:"Item-name",children:r("名前")}),F.jsx("input",{type:"text",style:{width:"300px",fontSize:"20px"},id:"name",defaultValue:this.name}),F.jsx("div",{id:"window",className:"selector-window",children:Object.keys(n).map(s=>{let a=n[s];return a.type=="levels"?F.jsx(ZM,{C:e,item:a,name:s},s):F.jsx(QM,{C:e,title:a.title,type:a.type,thumbnail:a.thumbnail,name:s},s)})}),F.jsx("button",{id:"cancel-trig",className:"btn",onClick:()=>{e.back_menu(),delete ce.edited_collection},children:r("キャンセル")}),F.jsx("button",{id:"delete-trig",className:"btn red-btn",onClick:()=>{confirm(r("削除するか"))&&(ek(this.name),e.back_menu(),delete ce.edited_collection)},children:r("コレクションを削除")}),F.jsx("button",{id:"edit-trig",className:"btn",onClick:async()=>{if(confirm(r("決定するか")))if(Ne("#colec-editor #name").val()){for(let a in ce.edited_collection)ce.edited_collection[a]&&delete n[a];await JM(this.name,n),e.back_menu(),delete ce.edited_collection}else alert(r("名称入力必須"))},children:r("決定")})]})}}class QM extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.title=e.title,this.type=e.type,this.thumbnail=URL.createObjectURL(e.thumbnail),this.name=e.name,this.state={removed:!1}}render(){this.Menu_Controller;const e=_t.get_translator();return F.jsxs("div",{style:{height:"70px",backgroundColor:this.state.removed?"red":"#20203c"},className:"menu-selector disable_pointer",children:[F.jsx("img",{src:this.thumbnail,style:{width:"70px",height:"70px"}}),F.jsx("div",{className:"ItemSelector-title",children:this.title}),F.jsx("div",{className:"ItemSelector-author",children:e(this.type)}),F.jsx("img",{src:this.state.removed?"textures/cancel.svg":"textures/delete.svg",className:"colec-delete-trg",width:"20",onClick:()=>{ce.edited_collection[this.name]=!this.state.removed,this.setState({removed:!this.state.removed})}})]})}}class ZM extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.item=e.item,this.title=e.item.title,this.level=e.item.level_info_data,this.name=e.name,this.thumbnail=URL.createObjectURL(e.item.thumbnail),this.state={removed:!1}}render(){const e=this.Menu_Controller,r=_t.get_translator();return F.jsxs("div",{className:"menu-selector disable_pointer",style:{height:"100px",backgroundColor:this.state.removed?"red":"#20203c"},children:[F.jsx("span",{className:"colec-play-trg",onClick:async()=>{Ne("#loading-cover").show(),ce.coll_level=this.item,ce.collection_names=(await Rt.collections.toArray()||[]).map(n=>n.name),e.change_menu("LevelInfoOffline"),Ne("#loading-cover").hide()},children:r("詳細")}),F.jsx("img",{src:this.thumbnail,style:{width:"100px",height:"100px"}}),F.jsx("span",{className:"selector-title",children:this.title}),F.jsx("br",{}),F.jsxs("span",{className:"level-author",children:[r("作者"),": ",this.level.author,F.jsx("br",{}),r("アーティスト"),": ",this.level.artists]}),F.jsx("br",{}),F.jsx("span",{className:"level-rating",children:this.level.rating}),F.jsx("img",{src:this.state.removed?"textures/cancel.svg":"textures/delete.svg",className:"colec-delete-trg",width:"20",onClick:()=>{ce.edited_collection[this.name]=!this.state.removed,this.setState({removed:!this.state.removed})}})]})}}async function JM(i,e){await Rt.collections.delete(i),await Rt.collections.put({name:Ne("#colec-editor #name").val(),data:e,version:Qf})}async function ek(i){await Rt.collections.delete(i)}class Pa extends Ut.Component{constructor(e){super(e),this.src=e.src,this.className=e.className||"",this.style=e.style||{},this.requestable=!1,this.className+=" enable_pointer",this.src in r_?this.state={src:r_[this.src]}:this.state={src:this.src}}render(){return F.jsx("img",{src:this.state.src,className:this.className,style:this.style,onClick:()=>{this.requestable&&(this.requestable=!1,this.setState({src:"./textures/loading.svg"}),fetch(zf,{method:"POST",body:JSON.stringify({type:"content",url:this.src})}).then(e=>{e?e.ok?cm(e).then(r=>{this.obj_url=URL.createObjectURL(r),this.setState({src:this.obj_url}),r_[this.src]=this.obj_url}):(this.setState({src:"./textures/cloud_download.png"}),this.requestable=!0,console.log(`thumbnail res: ${e.status},${e.statusText}`)):(this.setState({src:"./textures/cloud_download.png"}),this.requestable=!0,console.log("thumbnail res: レスポンスは無効です"))}).catch(e=>{e?(this.setState({src:"./textures/cloud_download.png"}),this.requestable=!0,console.error("thumbnail res:",e)):(this.setState({src:"./textures/cloud_download.png"}),this.requestable=!0,console.log("thumbnail res: レスポンスは無効です"))}))},onError:()=>{this.setState({src:"./textures/cloud_download.png"}),this.requestable=!0}})}}class tk extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C}render(){const e=this.Menu_Controller,r=_t.get_translator(),n=ce.server_info_data;return F.jsxs("div",{id:"serv_info",children:["banner"in n?F.jsx(Pa,{src:Zi(jt,n.banner.url),className:"banner"}):F.jsx(F.Fragment,{}),F.jsx("button",{id:"back-trg",className:"btn",onClick:()=>{e.back_menu()},children:r("戻る")}),F.jsx("h1",{className:"Menu-title",children:n.title}),F.jsx("h3",{className:"Menu-title",children:n.description}),n.buttons.map((s,a)=>{switch(s.type){case"authentication":case"multiplayer":case"replay":case"configuration":return F.jsx(F.Fragment,{});default:return F.jsx(rk,{type:MM(s.type),C:e},a)}})]})}}class rk extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.item_type=e.type,this.data_loaded=!1,this.info_data={},this.state={opened:!1}}render(){const e=this.Menu_Controller,r=_t.get_translator(),n=_t.get_label_getter();return this.state.opened?F.jsxs("div",{className:"selector-window",children:[F.jsx("h3",{className:"Menu-title",children:r(this.item_type)}),F.jsx("img",{src:"./textures/close.svg",width:"40",className:"info-close-trg",onClick:()=>{this.setState({opened:!1})}}),F.jsx("div",{className:"selector-window",children:this.info_data.sections.map((s,a)=>F.jsx(nk,{title:n(s.title),children:s.items.map((l,c)=>s.itemType=="level"?F.jsx(Hm,{C:e,level:l},c):s.itemType=="post"?F.jsx(Aw,{C:e,post:l},c):s.itemType=="playlist"?F.jsx(Pw,{C:e,playlist:l},c):F.jsx(Iw,{C:e,item:l,type:this.item_type},c))},a))}),F.jsxs("button",{id:"more",className:"text-trigger btn","data-type":"particles",onClick:async()=>{Ne("#loading-cover").show(),ce.item_type=this.item_type;try{ce.server_more_data=await fo(jt,this.item_type,0),console.log(ce.server_more_data),e.change_menu("ServerMore")}catch(s){console.error(s),alert(`${s.name}: ${s.message}`)}Ne("#loading-cover").hide()},children:["+ ",r(this.item_type+"をもっと表示"),"..."]})]}):F.jsx("div",{className:"info-selector",onClick:()=>{this.open_info()},children:r(this.item_type)})}async open_info(){if(this.data_loaded)this.setState({opened:!0});else{Ne("#loading-cover").show();try{this.info_data=JSON.parse(await oc(jt,`/sonolus/${this.item_type}/info`,{localization:wi})),console.log(this.info_data),this.data_loaded=!0,this.setState({opened:!0})}catch(e){console.error(e),alert(`${e.name}: ${e.message}`)}Ne("#loading-cover").hide()}}}const nk=function(i){return F.jsxs("div",{children:[F.jsx("div",{className:"section-title",children:i.title}),i.children]})};async function fo(i,e,r,n={},s=!1){if(s){console.log({localization:wi,cursor:r,...n});let a=await oc(i,`/sonolus/${e}/list`,{localization:wi,cursor:r,...n});return JSON.parse(a)}else{console.log({localization:wi,page:r,...n});let a=await oc(i,`/sonolus/${e}/list`,{localization:wi,page:r,...n});return JSON.parse(a)}}async function oc(i,e,r){let n=await fetch(zf,{method:"POST",body:JSON.stringify({type:"info",domain:i,endpoint:e,params:JSON.stringify(r)})});if(n){if(n.ok)return await n.text();throw new Error(`${n.status} : ${n.statusText}`)}else throw new Error("empty respose")}class Aw extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C;let r=this.post=e.post;this.thumbnail=(r.thumbnail||{url:"./textures/noimage.png"}).url||"./textures/noimage.png",this.title=r.title,this.author=r.author,this.time=r.time}render(){const e=this.Menu_Controller,r=_t.get_translator();let n=this.post.source||jt;return F.jsxs("div",{className:"menu-selector disable_pointer",style:{height:"100px"},children:[F.jsx("span",{className:"selector-play-trg",onClick:async()=>{Ne("#loading-cover").show();try{[ce.post_info_data,ce.collection_names]=await Hl(n,"posts",this.post.name),e.change_menu("PostInfo")}catch(s){console.error(s),alert(`${s.name}: ${s.message}`)}Ne("#loading-cover").hide()},children:r("詳細")}),F.jsx(Pa,{src:Zi(n,this.thumbnail),style:{width:"100px",height:"100px"}}),F.jsx("span",{className:"selector-title",children:this.title}),F.jsx("br",{}),F.jsxs("span",{className:"level-author",children:[r("投稿者"),": ",this.author,F.jsx("br",{}),r("時刻"),": ",new Date(this.time).toLocaleString()]})]})}}class Pw extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C;let r=this.item=e.playlist;this.thumbnail=(r.thumbnail||{url:"./textures/noimage.png"}).url||"./textures/noimage.png",this.title=r.title,this.subtitle=r.subtitle,this.author=r.author}render(){const e=this.Menu_Controller,r=_t.get_translator();let n=this.item.source||jt;return F.jsxs("div",{className:"menu-selector disable_pointer",style:{height:"100px"},children:[F.jsx("span",{className:"selector-play-trg",onClick:async()=>{Ne("#loading-cover").show();try{[ce.item_info_data,ce.collection_names]=await Hl(n,"playlists",this.item.name),e.change_menu("PlayListInfo")}catch(s){console.error(s),alert(`${s.name}: ${s.message}`)}Ne("#loading-cover").hide()},children:r("詳細")}),F.jsx(Pa,{src:Zi(n,this.thumbnail),style:{width:"100px",height:"100px"}}),F.jsx("span",{className:"selector-title",children:this.title}),F.jsx("br",{}),F.jsxs("span",{className:"selector-author",children:[this.subtitle,F.jsx("br",{}),r("作者"),": ",this.author]})]})}}class Hm extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C;let r=this.level=e.level;this.thumbnail=(r.cover||{url:"./textures/noimage.png"}).url||"./textures/noimage.png",this.title=r.title,this.author=r.author,this.artists=r.artists,this.rating=r.rating,this.do_request="do_request"in e?e.do_request:!0}render(){const e=this.Menu_Controller,r=_t.get_translator();let n=this.level.source||jt;return F.jsxs("div",{className:"menu-selector disable_pointer",style:{height:"100px"},children:[F.jsx("span",{className:"selector-play-trg",onClick:async()=>{if(Ne("#loading-cover").show(),this.do_request)try{[ce.level_info_data,ce.collection_names]=await Hl(n,"levels",this.level.name),e.change_menu("LevelInfo")}catch(s){console.error(s),alert(`${s.name}: ${s.message}`)}else e.change_menu("LevelInfo");Ne("#loading-cover").hide()},children:r("詳細")}),F.jsx(Pa,{src:Zi(n,this.thumbnail),style:{width:"100px",height:"100px"}}),F.jsx("span",{className:"selector-title",children:this.title}),F.jsx("br",{}),F.jsxs("span",{className:"level-author",children:[r("作者"),": ",this.author,F.jsx("br",{}),r("アーティスト"),": ",this.artists]}),F.jsx("br",{}),F.jsx("span",{className:"level-rating",children:this.rating})]})}}class Iw extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C;let r=this.item=e.item;this.thumbnail=(r.thumbnail||{url:"./textures/noimage.png"}).url||"./textures/noimage.png",this.title=r.title,this.subtitle=r.subtitle,this.author=r.author,this.type=e.type}render(){const e=this.Menu_Controller,r=_t.get_translator();let n=this.item.source||jt;return F.jsxs("div",{className:"menu-selector disable_pointer",style:{height:"100px"},children:[F.jsx("span",{className:"selector-play-trg",onClick:async()=>{Ne("#loading-cover").show(),ce.item_type=this.type||ce.item_type;try{[ce.item_info_data,ce.collection_names]=await Hl(n,ce.item_type,this.item.name),e.change_menu("ItemInfo")}catch(s){console.error(s),alert(`${s.name}: ${s.message}`)}Ne("#loading-cover").hide()},children:r("詳細")}),F.jsx(Pa,{src:Zi(n,this.thumbnail),style:{width:"100px",height:"100px"}}),F.jsx("span",{className:"selector-title",children:this.title}),F.jsx("br",{}),F.jsxs("span",{className:"selector-author",children:[this.subtitle,F.jsx("br",{}),r("作者"),": ",this.author]})]})}}function Zi(i,e){return~e.indexOf("http")||~e.indexOf("./")?e:(i.slice(-1)=="/"&&(i=i.slice(0,-1)),e.slice(0,1)=="/"&&(e=e.slice(1)),i+"/"+e)}async function Hl(i,e,r){let n=(await Rt.collections.toArray()||[]).map(a=>a.name),s=JSON.parse(await oc(i,`/sonolus/${e}/${r}`,{localization:wi}));return console.log(s),[s,n]}class ik extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.searches=ce.server_more_data.searches||[],this.pageCount=ce.server_more_data.pageCount==-1?1/0:ce.server_more_data.pageCount,console.log(ce.server_more_data),this.search_queries=[],this.queries={},this.cursors=[""],this.searches.length>0?(this.searches.forEach((r,n)=>{this.search_queries.push({});for(let s of r.options)this.search_queries[n][s.query]=s.def}),this.state={search_type:0,page_index:ce.SM_page_index||0}):this.state={search_type:-1,page_index:ce.SM_page_index||0}}render(){const e=this.Menu_Controller,r=_t.get_translator(),n=_t.get_label_getter();return F.jsxs("div",{id:"serv-more",children:[F.jsx("h3",{id:"title",className:"page-title",children:r(ce.item_type)}),F.jsxs("div",{className:"selector-window",id:"filter",children:[F.jsx("h3",{className:"Menu-title",children:"検索"}),F.jsx("br",{}),F.jsx("select",{className:"search-option",onChange:s=>{this.setState({search_type:s.target.value})},children:this.searches.map((s,a)=>F.jsx("option",{value:a,children:n(s.title)},a))}),F.jsx("div",{children:this.state.search_type==-1?F.jsx("span",{children:r("検索機能はありません")}):this.searches[this.state.search_type].options.map((s,a)=>F.jsx(sk,{option:s,search_queries:this.search_queries[this.state.search_type]},a))}),F.jsx("button",{id:"search",className:"btn",onClick:async()=>{Ne("#loading-cover").show();let s={},a=!0;for(let l of this.searches[this.state.search_type].options)switch(l.type){case"toggle":s[l.query]=this.search_queries[this.state.search_type][l.query]?1:0,l.def==this.search_queries[l.query]&&l.required&&(a=!1);break;case"text":case"slider":case"select":s[l.query]=this.search_queries[this.state.search_type][l.query],l.def==this.search_queries[l.query]&&l.required&&(a=!1);break;default:console.warn(`type=${l.type}の検索タイプは未実装です。`);break}if(a)try{ce.server_more_data=await fo(jt,ce.item_type,0,s),console.log(ce.server_more_data),this.queries=s,this.setState({search_type:this.state.search_type,page_index:0}),ce.SM_page_index=0}catch(l){console.error(l),alert(`${l.name}: ${l.message}`)}else alert(r("required設定必須"));Ne("#loading-cover").hide()},children:r("検索")}),F.jsx("button",{id:"cancel",className:"btn red-btn",onClick:async()=>{Ne("#loading-cover").show();try{ce.server_more_data=await fo(jt,ce.item_type,0),console.log(ce.server_more_data),this.queries={},this.setState({search_type:this.state.search_type,page_index:0}),ce.SM_page_index=0}catch(s){console.error(s),alert(`${s.name}: ${s.message}`)}Ne("#loading-cover").hide()},children:r("検索取消")})]}),F.jsxs("div",{className:"selector-window",id:"window",children:[F.jsxs("p",{id:"page-number",children:[this.state.page_index+1,"/",this.pageCount]}),this.prev_button(),this.next_button(),this.back_button(),ce.server_more_data.items.map((s,a)=>ce.item_type=="levels"?F.jsx(Hm,{C:e,level:s},s.name):ce.item_type=="posts"?F.jsx(Aw,{C:e,post:s},s.name):ce.item_type=="playlists"?F.jsx(Pw,{C:e,playlist:s},s.name):F.jsx(Iw,{C:e,item:s},s.name)),this.prev_button(),this.next_button(),this.back_button(),F.jsxs("p",{id:"page-number",children:[this.state.page_index+1,"/",this.pageCount]})]})]})}prev_button(){return this.Menu_Controller,F.jsx("button",{id:"prev",disabled:this.state.page_index<=0,className:"btn",onClick:async()=>{Ne("#loading-cover").show();let e=this.state.page_index-1;try{ce.server_more_data.pageCount==-1?ce.server_more_data=await fo(jt,ce.item_type,this.cursors[e],this.queries,!0):ce.server_more_data=await fo(jt,ce.item_type,e,this.queries),console.log(ce.server_more_data),this.setState({search_type:this.state.search_type,page_index:e}),ce.SM_page_index=e}catch(r){console.error(r),alert(`${r.name}: ${r.message}`)}Ne("#loading-cover").hide()},children:"前 ←"})}next_button(){return this.Menu_Controller,F.jsx("button",{id:"next",disabled:ce.server_more_data.pageCount==-1?!("cursor"in ce.server_more_data):this.state.page_index+1>=this.pageCount,className:"btn",onClick:async()=>{Ne("#loading-cover").show();let e=this.state.page_index+1;try{ce.server_more_data.pageCount==-1?(this.cursors[e]=ce.server_more_data.cursor,ce.server_more_data=await fo(jt,ce.item_type,this.cursors[e],this.queries,!0)):ce.server_more_data=await fo(jt,ce.item_type,e,this.queries),console.log(ce.server_more_data),this.setState({search_type:this.state.search_type,page_index:e}),ce.SM_page_index=e}catch(r){console.error(r),alert(`${r.name}: ${r.message}`)}Ne("#loading-cover").hide()},children:"→ 次"})}back_button(){const e=this.Menu_Controller;return F.jsx("button",{id:"back",className:"btn",onClick:()=>{e.back_menu(),ce.item_type="",delete ce.SM_page_index,delete ce.server_more_data},children:"戻る"})}}class sk extends Ut.Component{constructor(e){super(e),this.option=e.option,this.search_queries=e.search_queries,this.option.type=="slider"&&(this.state={val:this.search_queries[this.option.query]})}render(){_t.get_translator();const e=_t.get_label_getter();switch(this.option.type){case"text":return F.jsxs("div",{children:[F.jsx("span",{children:e(this.option.name)}),this.option.required?F.jsx("img",{src:"./textures/caution_orange.svg",height:"30"}):F.jsx(F.Fragment,{})," ",F.jsx("input",{type:"text",className:"search-option",placeholder:this.option.placeholder,defaultValue:this.search_queries[this.option.query],onChange:r=>{this.search_queries[this.option.query]=r.target.value}}),this.option.description?F.jsx("div",{style:{fontSize:"10px",color:"lightgray"},children:this.option.description}):F.jsx(F.Fragment,{})]});case"slider":return F.jsxs("div",{children:[F.jsx("span",{children:e(this.option.name)})," ",F.jsx("input",{type:"range",className:"search-option",max:this.option.max,min:this.option.min,step:this.option.step,defaultValue:this.search_queries[this.option.query],onChange:r=>{this.search_queries[this.option.query]=r.target.value,this.setState({val:r.target.value})}}),F.jsx("span",{children:this.state.val}),F.jsx("span",{children:this.option.unit||""}),this.option.description?F.jsx("div",{style:{fontSize:"10px",color:"lightgray"},children:this.option.description}):F.jsx(F.Fragment,{})]});case"toggle":return F.jsxs("div",{children:[F.jsx("span",{children:e(this.option.name)})," ",F.jsx("input",{type:"checkbox",defaultChecked:this.search_queries[this.option.query],onChange:r=>{this.search_queries[this.option.query]=r.target.checked}}),this.option.description?F.jsx("div",{style:{fontSize:"10px",color:"lightgray"},children:this.option.description}):F.jsx(F.Fragment,{})]});case"select":return F.jsxs("div",{children:[F.jsx("span",{children:e(this.option.name)})," ",F.jsx("select",{className:"search-option",defaultValue:this.search_queries[this.option.query],onChange:r=>{this.search_queries[this.option.query]=r.target.value},children:this.option.values.map((r,n)=>F.jsx("option",{value:r.name,children:r.title},n))})]});default:return console.warn(`type=${this.option.type}の検索タイプは未実装です。`),F.jsx(F.Fragment,{})}}}class ak extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.state={data:ce.item_info_data}}render(){const e=this.Menu_Controller,r=_t.get_translator();return F.jsxs("div",{id:"item-info",children:[F.jsx("h2",{id:"title",className:"Menu-title",children:this.state.data.item.title}),F.jsx("h3",{id:"subtitle",style:{color:"gray"},className:"Menu-title",children:this.state.data.item.subtitle}),F.jsx("div",{className:"selector-window",id:"info",children:F.jsxs("div",{children:[r("作者"),": ",this.state.data.item.author,F.jsx("br",{}),F.jsx("br",{}),r("説明"),": ",this.state.data.description,F.jsx("br",{}),F.jsx("br",{}),r("タグ"),": ",(this.state.data.item.tags||[]).map(n=>n.title).join(", ")]})}),F.jsx("div",{className:"Info-controller",children:F.jsx("div",{className:"Info-back-trig",id:"back",onClick:()=>{delete ce.item_info_data,e.back_menu()},children:r("戻る")})}),F.jsx("div",{className:"selector-window",id:"list",children:this.state.data.item.levels.map((n,s)=>F.jsx(Hm,{C:e,level:n},s))})]})}}function um(i,e=!1){return e?{data:i,ref_items:[],source_items:{skin:{item:{unselected:!0}},background:{item:{unselected:!0}},effect:{item:{unselected:!0}},particle:{item:{unselected:!0}},engine:{item:{unselected:!0}}}}:{data:i,ref_items:[{default:!0,type:"skins",item:i.item.useSkin.useDefault?i.item.engine.skin:i.item.useSkin.item},{default:!0,type:"backgrounds",item:i.item.useBackground.useDefault?i.item.engine.background:i.item.useBackground.item},{default:!0,type:"effects",item:i.item.useEffect.useDefault?i.item.engine.effect:i.item.useEffect.item},{default:!0,type:"particles",item:i.item.useParticle.useDefault?i.item.engine.particle:i.item.useParticle.item},{default:!0,type:"engines",item:i.item.engine}],source_items:{skin:{default:!0,type:"skins",item:i.item.useSkin.useDefault?i.item.engine.skin:i.item.useSkin.item},background:{default:!0,type:"backgrounds",item:i.item.useBackground.useDefault?i.item.engine.background:i.item.useBackground.item},effect:{default:!0,type:"effects",item:i.item.useEffect.useDefault?i.item.engine.effect:i.item.useEffect.item},particle:{default:!0,type:"particles",item:i.item.useParticle.useDefault?i.item.engine.particle:i.item.useParticle.item},engine:{default:!0,type:"engines",item:i.item.engine}}}}class ok extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.state=um(ce.level_info_data)}render(){const e=this.Menu_Controller,r=_t.get_translator(),n=this.state.data.item;let s=Zi(jt,(n.cover||{url:"./textures/noimage.png"}).url||"./textures/noimage.png");return F.jsxs("div",{id:"level-info",children:[F.jsx("h1",{id:"title",className:"page-title",children:n.title}),F.jsxs("div",{className:"selector-window",id:"info",style:{display:"flex"},children:[F.jsx("figure",{className:"level-cover",children:F.jsx(Pa,{src:s,style:{width:"300px",height:"300px"}})}),F.jsxs("div",{style:{marginLeft:"20px"},children:[r("作者"),": ",n.author,F.jsx("br",{}),r("アーティスト"),": ",n.artists,F.jsx("br",{}),F.jsx("br",{}),r("説明"),": ",this.state.data.description,F.jsx("br",{}),F.jsx("br",{}),r("おすすめ"),":",(this.state.data.recommended||[]).map(a=>F.jsx("div",{className:"text-trigger",onClick:async()=>{Ne("#loading-cover").show();try{[ce.level_info_data,ce.collection_names]=await Hl(jt,"levels",a.name),this.setState(um(ce.level_info_data))}catch(l){console.error(l),alert(`${l.name}: ${l.message}`)}Ne("#loading-cover").hide()},children:a.title},a.name)),F.jsx("br",{}),F.jsx("br",{}),r("タグ"),": ",(n.tags||[]).map(a=>a.title).join(", ")]})]}),F.jsxs("div",{className:"Info-controller",children:[F.jsx("div",{className:"Info-back-trig",id:"back",onClick:()=>{delete ce.level_info_data,e.back_menu()},children:r("戻る")}),F.jsx("div",{className:"Info-opt-trig",id:"option",onClick:async()=>{if(Ne("#loading-cover").show(),[ce.engine_option,ce.system_option]=await Ow(ei),this.state.source_items.engine.default){let a=this.state.source_items.engine.item.configuration;try{let l=await uk(jt,a.url,a.hash);ce.engine_option_data=l.options,e.change_menu("LevelOption")}catch(l){console.error(l),alert(`${l.name}: ${l.message}`)}}else ce.engine_option_data=this.state.source_items.engine.item.engine_config.options,e.change_menu("LevelOption");Ne("#loading-cover").hide()},children:r("設定")}),F.jsxs("div",{className:"LevelInfo-selector",children:[F.jsx("button",{id:"add-coll",className:"btn",onClick:async()=>{let a=Ne(".LevelInfo-selector #coll_selector").val();if(a){if(Ne("#loading-cover").show(),(await Rw(a)).includes(this.state.data.item.name+"(level)"))alert(r("追加重複"));else try{await Mw(jt,a,this.state.data.item,"levels"),alert(r("追加完了"))}catch(c){console.error(c),alert(`${c.name}: ${c.message}`)}Ne("#loading-cover").hide()}else alert(r("追加先忘れ"))},children:r("追加")})," ",r("追加先"),":",F.jsxs("select",{id:"coll_selector",onChange:()=>{let a=Ne(".LevelInfo-selector #coll_selector");a.val()=="#add"&&(a.val(""),e.change_menu("AddCollectionMenu"))},children:[F.jsx("option",{value:"",id:"init",children:r("コレクションを選択")}),ce.collection_names.map(a=>F.jsx("option",{children:a},a)),F.jsxs("option",{value:"#add",children:[r("コレクションを追加"),"..."]})]})]}),F.jsx("div",{className:"LevelInfo-run-trig",id:"next",onClick:()=>{ce.source_items=this.state.source_items,ce.is_offline_level=!1,e.change_menu("SourceLoad")},children:r("プレイ")})]}),F.jsx("h3",{className:"Item-name",children:r("現在のソース")}),F.jsxs("div",{className:"selector-window",id:"source-selector",children:[F.jsx(qi,{C:e,type:"skins",item:this.state.source_items.skin.item}),F.jsx(qi,{C:e,type:"backgrounds",item:this.state.source_items.background.item}),F.jsx(qi,{C:e,type:"effects",item:this.state.source_items.effect.item}),F.jsx(qi,{C:e,type:"particles",item:this.state.source_items.particle.item}),F.jsx(qi,{C:e,type:"engines",item:this.state.source_items.engine.item})]}),F.jsx("h3",{className:"Item-name",children:r("コレクション")}),F.jsxs("div",{className:"selector-window",id:"item-selector",children:[r("参照"),"：",F.jsxs("select",{className:"select-ref",onChange:async()=>{Ne("#loading-cover").show();let a=Ne("#level-info #item-selector select").val();if(a=="default"){let l=ce.level_info_data;this.setState({ref_items:[{default:!0,type:"skins",item:l.item.useSkin.useDefault?l.item.engine.skin:l.item.useSkin.item},{default:!0,type:"backgrounds",item:l.item.useBackground.useDefault?l.item.engine.background:l.item.useBackground.item},{default:!0,type:"effects",item:l.item.useEffect.useDefault?l.item.engine.effect:l.item.useEffect.item},{default:!0,type:"particles",item:l.item.useParticle.useDefault?l.item.engine.particle:l.item.useParticle.item},{default:!0,type:"engines",item:l.item.engine}]})}else{let l=await Xm(a),c=[];for(let[h,_]of Object.entries(l))_.name=h,_.type!="levels"&&c.push({default:!1,type:_.type,item:_});this.setState({ref_items:c})}Ne("#loading-cover").hide()},children:[F.jsx("option",{value:"default",children:r("デフォルト")}),ce.collection_names.map(a=>F.jsx("option",{children:a},a))]}),F.jsx("br",{}),F.jsx("div",{id:"window",children:this.state.ref_items.map(a=>F.jsx(zm,{C:e,onClick:()=>{let l=this.state.source_items;l[a.type.slice(0,-1)]=a,this.setState({source_items:l})},type:a.type,item:a},`${a.item.name||"default"}(${a.type})`))})]})]})}}class lk extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.state=um(ce.level_info_data,!0)}render(){const e=this.Menu_Controller,r=_t.get_translator(),n=ce.coll_level;ei=n.server_name;const s=n.level_info_data;return ce.level_info_data={item:s},F.jsxs("div",{id:"level-info",children:[F.jsx("h1",{id:"title",className:"page-title",children:s.title}),F.jsxs("div",{className:"selector-window",id:"info",style:{display:"flex"},children:[F.jsx("figure",{className:"level-cover",children:F.jsx("img",{src:URL.createObjectURL(n.thumbnail),style:{width:"300px",height:"300px"}})}),F.jsxs("div",{style:{marginLeft:"20px"},children:[r("作者"),": ",s.author,F.jsx("br",{}),r("アーティスト"),": ",s.artists,F.jsx("br",{}),F.jsx("br",{}),r("説明"),": ",s.description,F.jsx("br",{}),F.jsx("br",{}),r("おすすめ"),":",(s.recommended||[]).map(a=>F.jsx("div",{className:"text-trigger",children:a.title},a.name))]})]}),F.jsxs("div",{className:"Info-controller",children:[F.jsx("div",{className:"Info-back-trig",id:"back",onClick:()=>{delete ce.coll_level,delete ce.level_info_data,e.back_menu()},children:r("戻る")}),F.jsx("div",{className:"Info-opt-trig",id:"option",onClick:async()=>{this.state.source_items.engine.item.unselected?alert(r("エンジン選択必須")):(ce.engine_option_data=this.state.source_items.engine.item.engine_config.options,[ce.engine_option,ce.system_option]=await Ow(n.server_name),e.change_menu("LevelOption"))},children:r("設定")}),F.jsx("div",{className:"LevelInfo-run-trig",id:"next",onClick:()=>{this.state.source_items.skin.item.unselected||this.state.source_items.background.item.unselected||this.state.source_items.effect.item.unselected||this.state.source_items.particle.item.unselected||this.state.source_items.engine.item.unselected?alert(r("ソース選択必須")):(ce.source_items=this.state.source_items,ce.is_offline_level=!0,e.change_menu("SourceLoad"))},children:r("プレイ")})]}),F.jsx("h3",{className:"Item-name",children:r("現在のソース")}),F.jsxs("div",{className:"selector-window",id:"source-selector",children:[F.jsx(qi,{C:e,type:"skins",item:this.state.source_items.skin.item}),F.jsx(qi,{C:e,type:"backgrounds",item:this.state.source_items.background.item}),F.jsx(qi,{C:e,type:"effects",item:this.state.source_items.effect.item}),F.jsx(qi,{C:e,type:"particles",item:this.state.source_items.particle.item}),F.jsx(qi,{C:e,type:"engines",item:this.state.source_items.engine.item})]}),F.jsx("h3",{className:"Item-name",children:r("コレクション")}),F.jsxs("div",{className:"selector-window",id:"item-selector",children:[r("参照"),"：",F.jsxs("select",{className:"select-ref",onChange:async()=>{Ne("#loading-cover").show();let a=Ne("#level-info #item-selector select").val();if(a){let l=await Xm(a),c=[];for(let[h,_]of Object.entries(l))_.name=h,_.type!="levels"&&c.push({default:!1,type:_.type,item:_});this.setState({ref_items:c})}else this.setState({ref_items:[]});Ne("#loading-cover").hide()},children:[F.jsx("option",{value:"",children:r("コレクションを選択")}),ce.collection_names.map(a=>F.jsx("option",{children:a},a))]}),F.jsx("br",{}),F.jsx("div",{id:"window",children:this.state.ref_items.map(a=>F.jsx(zm,{C:e,onClick:()=>{let l=this.state.source_items;l[a.type.slice(0,-1)]=a,this.setState({source_items:l})},type:a.type,item:a},`${a.item.name||"default"}(${a.type})`))})]})]})}}const qi=i=>{const e=_t.get_translator();if(i.item.unselected)return F.jsxs("div",{style:{height:"70px"},className:"menu-selector",children:[F.jsx("img",{src:"./textures/caution.svg",style:{width:"70px",height:"70px"}}),F.jsx("div",{className:"ItemSelector-title",children:"下のコレクション欄から選択してください。"}),F.jsx("div",{className:"ItemSelector-author",children:e(i.type)})]});{let r=i.item,n,s=r.title;return"type"in r?n=URL.createObjectURL(r.thumbnail):n=(r.thumbnail||{url:"./textures/noimage.png"}).url,F.jsxs("div",{style:{height:"70px"},className:"menu-selector",children:[F.jsx(Pa,{src:Zi(jt,n),style:{width:"70px",height:"70px"}},n),F.jsx("div",{className:"ItemSelector-title",children:s}),F.jsx("div",{className:"ItemSelector-author",children:e(i.type)})]})}};class zm extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.item=e.item.item,e.item.default?(this.thumbnail=(this.item.thumbnail||{url:"./textures/noimage.png"}).url,this.title=this.item.title):(this.thumbnail=URL.createObjectURL(this.item.thumbnail),this.title=this.item.title),this.type=e.type,this.onClick=e.onClick}render(){this.Menu_Controller;const e=_t.get_translator();return F.jsxs("div",{style:{height:"70px"},className:"menu-selector disable_pointer",children:[F.jsx(Pa,{src:Zi(jt,this.thumbnail),style:{width:"70px",height:"70px"}}),F.jsx("div",{className:"ItemSelector-title",children:this.title}),F.jsx("div",{className:"ItemSelector-author",children:e(this.type)}),F.jsx("span",{className:"selector-coll-trg",onClick:this.onClick,children:e("適用")})]})}}async function uk(i,e,r){let n=await mr(i,e,r);return JSON.parse(await Zn(n))}async function Ow(i){let e=(await Rt.servers.get(i)).option,r=(await Rt.servers.get("#master")).option.system_option;return console.log(r),[e,r]}async function Xm(i){return(await Rt.collections.get(i)).data}class ck extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.state={data:ce.item_info_data},ce.tmp_system_option=Object.assign({},ce.system_option),ce.tmp_engine_option={}}render(){const e=this.Menu_Controller,r=_t.get_translator(),n=_t.get_label_getter(),s=ce.system_option,a=(l,c=1)=>h=>{switch(h.target.type){case"range":ce.tmp_system_option[l]=Number(h.target.value)*c;break;case"checkbox":ce.tmp_system_option[l]=h.target.checked;break;case"select":ce.tmp_system_option[l]=Number(h.target.value);break;default:console.error(`"${h.target.type}"というoption typeは存在しません。`);break}};return F.jsxs("div",{id:"level-option",children:[F.jsx("h2",{className:"Menu-title",children:"設定"}),F.jsx("h3",{className:"Item-name",children:"レベル設定"}),F.jsx("div",{className:"selector-window",id:"level-op",children:ce.engine_option_data.map(l=>{let c;if("scope"in l)l.scope in ce.engine_option&&l.name in ce.engine_option[l.scope]?c=ce.engine_option[l.scope][l.name]:c=l.def;else{const h="level:"+ce.level_info_data.item.name;h in ce.engine_option&&l.name in ce.engine_option[h]?c=ce.engine_option[h][l.name]:c=l.def}switch(ce.tmp_engine_option[l.name]=c,l.type){case"slider":return F.jsx(Du,{C:e,type:"slider",min:l.min,max:l.max,step:l.step,def:c,standard:l.standard||!1,onChange:h=>ce.tmp_engine_option[l.name]=Number(h.target.value),unit:"",children:n(l.name)},l.name);case"toggle":return F.jsx(Du,{C:e,type:"toggle",def:c==1,onChange:h=>ce.tmp_engine_option[l.name]=h.target.checked?1:0,children:n(l.name)},l.name)}})}),F.jsx("h3",{className:"Item-name",children:"システム設定"}),F.jsx("div",{className:"selector-window",id:"system-op",children:Fw.map((l,c)=>{switch(l.op_type){case"slider":return F.jsx(Du,{C:e,type:"slider",min:l.min,max:l.max,step:l.step,def:s[l.id]||l.def_val,onChange:a(l.id,l.ratio),unit:l.unit,children:r(l.id)},c);case"toggle":return F.jsx(Du,{C:e,type:"toggle",def:s[l.id]||l.def_val,onChange:a(l.id),children:r(l.id)},c);default:console.warn(`op_type:${l.op_type} does not exist.`);break}})}),F.jsxs("div",{className:"selector-window",children:[F.jsx(Du,{C:e,type:"toggle",def:ce.key_assign_enabled,onChange:l=>{ce.key_assign_enabled=l.target.checked},children:"キーアサイン"}),ce.key_assign_enabled?r("キーアサインファイルロード済"):r("キーアサインファイルロードなし"),F.jsx("input",{type:"file",id:"key_assign_file_selector"})]}),F.jsx("button",{id:"LevelOption-back",className:"btn",onClick:()=>{e.back_menu()},children:"キャンセル"}),F.jsx("button",{id:"LevelOption-save",className:"btn",onClick:async()=>{ce.system_option=ce.tmp_system_option;for(let h of ce.engine_option_data)if("scope"in h)h.scope in ce.engine_option||(ce.engine_option[h.scope]={}),ce.engine_option[h.scope][h.name]=ce.tmp_engine_option[h.name];else{const _="level:"+ce.level_info_data.item.name;_ in ce.engine_option||(ce.engine_option[_]={}),ce.engine_option[_][h.name]=ce.tmp_engine_option[h.name]}delete ce.engine_option["level:undefined"];let l=await Rt.servers.get(ei);await Rt.servers.put({address:l.address,name:ei,option:ce.engine_option,display_name:l.display_name,version:lc});let c=await Rt.servers.get("#master");if(c.option.system_option=ce.system_option,await Rt.servers.put(c),ce.key_assign_enabled&&Ne("#key_assign_file_selector").val())try{ce.key_assign_data=await new Promise(h=>{let _=Ne("#key_assign_file_selector").prop("files")[0],m=new FileReader;m.onload=()=>{h(JSON.parse(m.result))},m.readAsText(_)}),console.log("keyassign:",ce.key_assign_data)}catch(h){console.warn(h),alert(r("キーアサインファイル無効"));return}e.back_menu()},children:"保存"})]})}}class Du extends Ut.Component{constructor(e){switch(super(e),this.Menu_Controller=e.C,this.type=e.type,this.label=e.children,this.standard=e.standard,this.type){case"slider":this.min=e.min,this.max=e.max,this.step=e.step,this.unit=e.unit,this.def=e.def,this.state={value:e.def};break;case"toggle":this.def=e.def;break;case"select":this.def=e.def,this.values=e.values;break;default:console.warn(`Option type "${this.type}" does not exist.`);break}this.onChange=e.onChange}render(){_t.get_translator();let e=this.standard?F.jsx("img",{src:"./textures/caution.svg",style:{height:"1em",width:"1em"}}):F.jsx(F.Fragment,{});switch(this.type){case"slider":return F.jsxs("div",{children:[this.label,e,": ",F.jsx("input",{type:"range",min:this.min,max:this.max,step:this.step,defaultValue:this.def,onChange:r=>{this.onChange&&this.onChange(r),this.setState({value:r.target.value})}})," ",this.state.value,this.unit]});case"toggle":return F.jsxs("div",{children:[this.label,e,": ",F.jsx("input",{type:"checkbox",defaultChecked:this.def,onChange:r=>{this.onChange&&this.onChange(r)}})]});case"select":return F.jsxs("div",{children:[this.label,e,": ",F.jsx("select",{onChange:r=>{this.onChange&&this.onChange(r)},children:Object.entries(this.values).map((r,n)=>F.jsx("option",{value:r,selected:r==this.def,children:n},n))})]});default:return F.jsxs("div",{children:[this.label,": Error Option"]})}}}class hk extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.state={data:ce.item_info_data},this.type=ce.item_type}render(){const e=this.Menu_Controller,r=_t.get_translator();return F.jsxs("div",{id:"item-info",children:[F.jsx("h2",{id:"title",className:"Menu-title",children:this.state.data.item.title}),F.jsx("h3",{id:"subtitle",style:{color:"gray"},className:"Menu-title",children:this.state.data.item.subtitle}),F.jsx("div",{className:"selector-window",id:"info",children:F.jsxs("div",{children:[r("作者"),": ",this.state.data.item.author,F.jsx("br",{}),F.jsx("br",{}),r("説明"),": ",this.state.data.description,F.jsx("br",{}),F.jsx("br",{}),r("おすすめ"),":",(this.state.data.recommended||[]).map(n=>F.jsx("div",{className:"text-trigger",onClick:async()=>{Ne("#loading-cover").show();try{[ce.item_info_data,ce.collection_names]=await Hl(jt,ce.item_type,n.name),this.setState({data:ce.item_info_data})}catch(s){console.error(s),alert(`${s.name}: ${s.message}`)}Ne("#loading-cover").hide()},children:n.title},n.name)),F.jsx("br",{}),F.jsx("br",{}),r("タグ"),": ",(this.state.data.item.tags||[]).map(n=>n.title).join(", ")]})}),F.jsxs("div",{className:"Info-controller",children:[F.jsx("div",{className:"Info-back-trig",id:"back",onClick:()=>{delete ce.item_info_data,e.back_menu()},children:r("戻る")}),F.jsxs("div",{className:"ItemInfo-selector",children:[F.jsx("button",{id:"next",className:"btn",onClick:async()=>{let n=Ne("#item-info .ItemInfo-selector #selector").val();if(n){if(Ne("#loading-cover").show(),(await Rw(n)).includes(`${this.state.data.item.name}(${RM(this.type)})`))alert(r("追加重複"));else try{await Mw(jt,n,this.state.data.item,this.type),alert(r("追加完了"))}catch(a){console.error(a),alert(`${a.name}: ${a.message}`)}Ne("#loading-cover").hide()}else alert(r("追加先忘れ"))},children:r("追加")})," ",r("追加先"),":",F.jsxs("select",{id:"selector",onChange:()=>{let n=Ne("#item-info .ItemInfo-selector #selector");n.val()=="#add"&&(n.val(""),e.change_menu("AddCollectionMenu"))},children:[F.jsx("option",{value:"",id:"init",children:r("コレクションを選択")}),ce.collection_names.map(n=>F.jsx("option",{children:n},n)),F.jsxs("option",{value:"#add",children:[r("コレクションを追加"),"..."]})]})]})]})]})}}function Rw(i){return new Promise((e,r)=>{Rt.collections.get(i).then(n=>{e(Object.keys(n.data))})})}async function Mw(i,e,r,n){let s=await Rt.collections.get(e);n=="levels"&&(r.thumbnail=r.cover);let a=await mr(i,r.thumbnail.url,r.thumbnail.hash);switch(n){case"levels":let l=await mr(i,r.data.url,r.data.hash);l=JSON.parse(await Zn(l));let c=await mr(i,r.bgm.url,r.bgm.hash);s.data[r.name+"(level)"]={type:"levels",title:r.title,level_data:l,level_info_data:r,level_BGM:c,thumbnail:a,server_name:ei};break;case"skins":let h=await mr(i,r.data.url,r.data.hash);h=JSON.parse(await Zn(h));let _=await mr(i,r.texture.url,r.texture.hash);s.data[r.name+"(skin)"]={type:"skins",title:r.title,texture_data:h,texture_img:_,thumbnail:a,server_name:ei};break;case"backgrounds":let m=await mr(i,r.data.url,r.data.hash);m=JSON.parse(await Zn(m));let f=await mr(i,r.configuration.url,r.configuration.hash);f=JSON.parse(await Zn(f));let p=await mr(i,r.image.url,r.image.hash);s.data[r.name+"(background)"]={type:"backgrounds",title:r.title,background_data:m,background_config:f,background_img:p,thumbnail:a,server_name:ei};break;case"effects":let y=await mr(i,r.data.url,r.data.hash);y=JSON.parse(await Zn(y));let b=await mr(i,r.audio.url,r.audio.hash);b=await kw(b),s.data[r.name+"(effect)"]={type:"effects",title:r.title,effect_data:y,effect_audio:b,thumbnail:a,server_name:ei};break;case"particles":let T=await mr(i,r.data.url,r.data.hash);T=JSON.parse(await Zn(T));let S=await mr(i,r.texture.url,r.texture.hash);s.data[r.name+"(particle)"]={type:"particles",title:r.title,particle_data:T,particle_tex:S,thumbnail:a,server_name:ei};break;case"engines":let A=await mr(i,(r.playData||r.data).url,(r.playData||r.data).hash);A=JSON.parse(await Zn(A));let R=await mr(i,r.configuration.url,r.configuration.hash);R=JSON.parse(await Zn(R)),s.data[r.name+"(engine)"]={type:"engines",title:r.title,engine_data:A,engine_config:R,thumbnail:a,server_name:ei};break;default:console.error(`"${n}" is not found.`);break}await Rt.collections.put({name:e,data:s.data,version:Qf})}class fk extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.state={data:ce.post_info_data}}render(){const e=this.Menu_Controller,r=_t.get_translator();return F.jsxs("div",{id:"item-info",children:[F.jsx("h2",{id:"title",children:this.state.data.item.title}),F.jsx("h3",{id:"time",style:{color:"gray"},children:new Date(this.state.data.item.time).toLocaleString()}),F.jsx("div",{className:"selector-window",id:"info",children:F.jsxs("div",{children:[r("投稿者"),": ",this.state.data.item.author,F.jsx("br",{}),F.jsx("br",{}),r("本文"),":",F.jsx("br",{})]})}),F.jsx("div",{className:"Info-back-trig",id:"back",onClick:()=>{delete ce.post_info_data,e.back_menu()},children:r("戻る")})]})}}const m1=i=>i.successful?F.jsx("div",{className:"log-text-successful",children:i.children}):F.jsx("div",{className:"log-text",children:i.children});class dk extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.log_texts=[],this.sources={},this.state={log:[],can_start:!1},this.canceled=!1,this.error=!1}componentDidMount(){this.load_sources()}render(){this.Menu_Controller;const e=_t.get_translator();return F.jsxs("div",{children:[F.jsx("h1",{children:e("ソースロード")}),F.jsx("div",{className:"loading-log",children:this.state.log}),F.jsxs("div",{className:"start-play-trg-container",children:[F.jsx("div",{className:"start-cancel-trg",onClick:()=>{this.state.can_start||this.error?(Ne("#processing-cover").show(),this.cancel()):(Ne("#processing-cover").show(),this.canceled=!0)},children:e("キャンセル")}),F.jsx("div",{className:"start-play-trg",disabled:!this.state.can_start,onClick:async()=>{if(this.state.can_start){console.log(this.sources),Ne("#processing-cover").show(),Ne("#progress-window").show();let n=document.getElementById("progress-window").getContext("2d");n.fillStyle="#FFFFFF",n.textAlign="center",n.textBaseline="middle",n.font="20px Arial",n.fillText(_t.translator("前処理中"),260,15),await(async()=>{for(let s=0;s<2;s++)await new Promise(a=>requestAnimationFrame(a))})(),this.play()}},children:e("スタート")})]})]})}add(e,r=!0){const n=_t.get_translator();let s=this.state.log;s.length>0&&r&&(s[s.length-1]=F.jsxs(m1,{successful:!0,children:[this.log_texts[this.log_texts.length-1]," ... ",n("完了")]},s.length-1)),s.push(F.jsx(m1,{successful:!1,children:e},s.length)),this.setState({log:s}),this.log_texts.push(e)}async load_sources(){const e=_t.get_translator();let r=ce.level_info_data.item,n=ce.source_items;console.log(r);try{if(this.add(e("エンジンデータロード")),this.sources.engine_data=await xl("engine","engine_data",["playData","data"]),this.canceled)return this.cancel();this.add(e("エンジンコンフィグロード"));let s=await xl("engine","engine_config",["configuration"]),a=(await Rt.servers.get(ei)).option,l=[];for(let m of s.options){let f=m.scope||`level:${r.name}`;f in a&&m.name in a[f]?l.push(a[f][m.name]):l.push(m.def)}if(this.sources.engine_config=s,this.sources.level_option=l,this.canceled)return this.cancel();if(this.add(e("スキンデータロード")),this.sources.texture_data=await xl("skin","texture_data",["data"]),this.canceled)return this.cancel();this.add(e("レベルデータロード"));let c;if(ce.is_offline_level?(c=ce.coll_level.level_data,this.sources.level_data=c):(c=await mr(jt,r.data.url,r.data.hash),c=JSON.parse(await Zn(c)),this.sources.level_data=c),this.canceled)return this.cancel();if(this.add(e("パーティクルデータロード")),this.sources.particle_data=await xl("particle","particle_data",["data"]),this.canceled)return this.cancel();if(this.add(e("背景データロード")),this.sources.background_data=await xl("background","background_data",["data"]),this.canceled)return this.cancel();if(this.add(e("背景コンフィグロード")),this.sources.background_config=await xl("background","background_config",["configuration"]),this.canceled)return this.cancel();if(this.add(e("システム設定ロード")),this.sources.system_options=(await Rt.servers.get("#master")).option.system_option,this.canceled)return this.cancel();this.add(e("エフェクトロード"));let h=[];try{if(n.effect.default){let m=await mr(jt,n.effect.item.data.url,n.effect.item.data.hash);m=JSON.parse(await Zn(m));let f=await mr(jt,n.effect.item.audio.url,n.effect.item.audio.hash);f=await kw(f);for(let p of m.clips)h[p.name]=f[p.filename]}else for(let m of n.effect.item.effect_data.clips)h[m.name]=n.effect.item.effect_audio[m.filename];for(let[m,f]of Object.entries(h)){let p=URL.createObjectURL(f);h[m]=new o1.Howl({src:p,format:"mp3"}),h[m].state()=="unloaded"&&await xf(h[m],"load"),URL.revokeObjectURL(p)}}catch(m){console.warn(m.message)}if(this.sources.effect_data=h,this.canceled)return this.cancel();if(this.add(e("スキンテクスチャロード")),this.sources.texture_img=await t_("skin","texture_img","texture"),this.canceled)return this.cancel();if(this.add(e("パーティクルテクスチャロード")),this.sources.particle_img=await t_("particle","particle_tex","texture"),this.canceled)return this.cancel();if(this.add(e("背景画像ロード")),this.sources.background_img=await t_("background","background_img","image"),this.canceled)return this.cancel();if(this.add(e("システムテクスチャロード")),this.sources.system_tex=new Image,this.sources.system_tex.src="./textures/system_tex.webp",await xf(this.sources.system_tex),this.canceled)return this.cancel();this.add(e("楽曲ダウンロード"));let _;if(ce.is_offline_level?_=URL.createObjectURL(ce.coll_level.level_BGM):_=URL.createObjectURL(await mr(jt,r.bgm.url,r.bgm.hash)),this.sources.BGM=new o1.Howl({src:_,format:"mp3"}),this.canceled)return this.cancel();if(this.add(e("楽曲ロード")),this.sources.BGM.state()=="unloaded"&&await xf(this.sources.BGM,"load"),URL.revokeObjectURL(_),this.canceled)return this.cancel();if(ce.key_assign_enabled?(this.add(e("キーアサインロード")),this.sources.key_assign_data=ce.key_assign_data):this.sources.key_assign_data=null,this.canceled)return this.cancel();this.add(e("ロード完了")),this.setState({can_start:!0})}catch(s){this.add(`ロード中にエラーが発生しました。(${s.name}: ${s.message})`,!1),console.error(s),this.error=!0}}cancel(){Ne("#processing-cover").hide(),this.Menu_Controller.back_menu()}play(){let e;try{const r=_t.get_translator(),n=_t.get_label_getter(),s=this.Menu_Controller;let a=this.sources,l=this.sources.system_options;this.add(r("ビットマップフォント構築中"),!1),Vi.from("SansFont",{fontFamily:"sans-serif",fill:"#FFFFFF",fontSize:50},{chars:Vi.ASCII}),this.add(r("ビットマップフォント構築完了")),s.change_visible(!1),Ne("#player-window").show();let c=async()=>{let h=Ne('<canvas id="main-canvas"></canvas>')[0];Ne("#player-window").append(h);let _=new Xb({antialias:l.antialias,view:h});console.log("fps",l.max_fps),_.ticker.maxFPS=l.max_fps||320,window.app=e=new TM(_,_t,{skin_data:a.texture_data,skin_tex:a.texture_img,engine_data:a.engine_data,engine_config:a.engine_config,effect_data:a.effect_data,BGM:a.BGM,level_data:a.level_data,particle_data:a.particle_data,particle_tex:a.particle_img,background_data:a.background_data,background_config:a.background_config,background_tex:a.background_img,level_option:a.level_option,system_tex:a.system_tex},a.key_assign_data,l,{leave_callback:async()=>{await e.game_end(),document.body.style.backgroundColor="#000020",ce.game_result={arcade_score:Math.round(e.arcade_score/e.maximum_combo*1e6),accuracy_score:Math.round(e.accuracy_score/e.maximum_combo*1e6),max_combo:e.max_combo,possible_combo:e.maximum_combo,acc_result:e.acc_result,game_completed:!1,bucket_graphs:e.rendered_bucket_graph},s.change_visible(!0),Ne("#player-window").hide(),s.change_menu("ResultMenu"),window.app=e=null,c=null},retry_callback:async()=>{await e.game_end(),window.app=e=null,Ne("#processing-cover").show(),Ne("#progress-window").show(),setTimeout(async()=>{await c()},100)},result_callback:async()=>{await e.game_end(),document.body.style.backgroundColor="#000020",ce.game_result={arcade_score:Math.round(e.arcade_score/e.maximum_combo*1e6),accuracy_score:Math.round(e.accuracy_score/e.maximum_combo*1e6),max_combo:e.max_combo,possible_combo:e.maximum_combo,acc_result:e.acc_result,game_completed:!0,bucket_graphs:e.rendered_bucket_graph},console.log(e.rendered_bucket_graph),s.change_visible(!0),Ne("#player-window").hide(),s.change_menu("ResultMenu"),window.app=e=null,c=null},log_callback:(m,f)=>{this.add(r(m),f)}}),e.preparation()};c()}catch(r){if(console.error(r),alert(`${t("異常停止")}(${r.name}: ${r.message}) ${t("再読み込み推奨")}`),e){if(e.fps_interval&&clearInterval(e.fps_interval),e.looped_sound_id)for(let[n,s]of Object.entries(e.looped_sound_id))e.effect_object[s.effect_id].stop(s.sound_id);e.BGM&&e.BGM.stop(),e.app&&e.app.destroy(!0,{children:!0,texture:!0,baseTexture:!0})}window.app=e=null,document.body.style.backgroundColor="#000020",C.change_visible(!0),Ne("#player-window").hide(),C.back_menu()}}}class pk extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C}render(){const e=this.Menu_Controller,r=_t.get_translator();return F.jsxs("div",{className:"selector-window",id:"item-selector",children:[r("参照"),"：",F.jsxs("select",{onChange:async()=>{Ne("#loading-cover").show();let n=Ne("#level-info #item-selector select").val();if(n!="default"){let s=await Xm(n),a=[];for(let[l,c]of Object.entries(s))c.name=l,a.push({default:!1,type:c.type,item:c});this.setState({ref_items:a})}Ne("#loading-cover").hide()},children:[F.jsx("option",{value:"default",children:r("コレクションを選択")}),ce.collection_names.map(n=>F.jsx("option",{children:n},n))]}),F.jsx("br",{}),F.jsx("div",{id:"window",children:this.state.ref_items.map(n=>F.jsx(zm,{C:e,onClick:()=>{let s=this.state.source_items;s[n.type.slice(0,-1)]=n,this.setState({source_items:s})},type:n.type,item:n},`${n.item.name||"default"}(${n.type})`))})]})}}async function xl(i,e,r){let n,s=ce.source_items[i];if(s.default){for(let a of r)if(a in s.item)return n=await mr(jt,s.item[a].url,s.item[a].hash),n=JSON.parse(await Zn(n)),n;throw new Error(`ERROR: The data of ${i} is not found in  item.`)}else{if(e in s.item)return n=s.item[e],n;throw new Error(`ERROR: The data of ${i} is not found in collection.`)}}async function t_(i,e,r){let n=new Image,s=ce.source_items[i];if(s.default)n.src=URL.createObjectURL(await mr(jt,s.item[r].url,s.item[r].hash));else{let a=s.item[e];n.src=URL.createObjectURL(a)}return await xf(n),URL.revokeObjectURL(n.src),n}function xf(i,e="#onload"){return new Promise((r,n)=>{switch(e){case"#onload":i.onload=r;break;case"#meta":i.onloadedmetadata=r;break;default:i.on(e,r);break}})}async function Zn(i,e=!0){let n=new IM(await Dw(i)).decompress();return e?new TextDecoder().decode(n):Nw(n)}async function kw(i){let e=new OM(await Dw(i)),r={};for(let n of e.getFilenames())r[n]=e.decompress(n),r[n]=Nw(r[n]);return r}async function Dw(i){return new Uint8Array(await i.arrayBuffer())}function Nw(i){return new Blob([i.buffer],{type:"application/octet-stream"})}async function mr(i,e,r){if(r){let n=await Rt.cache.get(r);if(n)return n.file;{let s=await fetch(zf,{method:"POST",body:JSON.stringify({type:"content",url:Zi(i,e)})});if(s)if(s.ok){let a=await cm(s);return Rt.cache.put({hash:r,file:a}),a}else throw new Error(`${s.status} : ${s.statusText}`);else throw new Error("empty response")}}else{let n=await fetch(zf,{method:"POST",body:JSON.stringify({type:"content",url:Zi(i,e)})});if(n){if(n.ok)return await cm(n);throw new Error(`${n.status} : ${n.statusText}`)}else throw new Error("empty response")}}class vk extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C}render(){const e=this.Menu_Controller,r=_t.get_translator();return F.jsxs("div",{id:"result",children:[F.jsx("h3",{className:"Menu-title",children:r("リザルト")}),F.jsxs("div",{id:"window",className:"selector-window",children:[F.jsx("h3",{id:"title",children:ce.level_info_data.item.title}),F.jsxs("p",{id:"arcade",children:[r("アーケードスコア"),":",ce.game_result.arcade_score,"/1000000"]}),F.jsxs("p",{id:"accuracy",children:[r("精度スコア"),":",ce.game_result.accuracy_score,"/1000000"]}),F.jsxs("p",{id:"max_combo",children:[r("最大コンボ"),":",ce.game_result.max_combo,"/",ce.game_result.possible_combo]}),F.jsxs("p",{id:"acc_result",children:["PERFECT:",ce.game_result.acc_result.perfect,F.jsx("br",{}),"GREAT:",ce.game_result.acc_result.great,F.jsx("br",{}),"GOOD:",ce.game_result.acc_result.good,F.jsx("br",{}),"MISS:",ce.game_result.acc_result.miss]})]}),F.jsx("button",{id:"back",className:"btn",onClick:()=>{e.back_menu(2)},children:r("戻る")}),F.jsx("button",{id:"back",className:"btn",onClick:()=>{e.change_menu("BucketMenu")},children:r("バケットグラフを見る")})]})}}class _k extends Ut.Component{constructor(e){super(e),this.Menu_Controller=e.C}render(){const e=this.Menu_Controller,r=_t.get_translator();return F.jsxs("div",{id:"result",children:[F.jsx("h3",{className:"Menu-title",children:r("バケットグラフ")}),F.jsx("div",{id:"window",className:"selector-window",children:ce.game_result.bucket_graphs.map((n,s)=>F.jsx(mk,{graphs:n},s))}),F.jsx("button",{id:"back",className:"btn",onClick:()=>{e.back_menu()},children:r("戻る")})]})}}class mk extends Ut.Component{constructor(e){super(e),this.graphs=e.graphs,this.state={graph:"all"},this.frame_ref=Ut.createRef()}render(){const e=_t.get_translator();return F.jsxs("div",{children:[F.jsx("div",{ref:this.frame_ref}),F.jsxs("select",{className:"select-ref",onChange:r=>{this.setState({graph:r.target.value})},children:[F.jsx("option",{value:"all",children:e("全部")}),F.jsx("option",{value:"perfect",children:"PERFECT"}),F.jsx("option",{value:"great",children:"GREAT"}),F.jsx("option",{value:"good",children:"GOOD"}),F.jsx("option",{value:"miss",children:"MISS"})]})]})}componentDidMount(){this.frame_ref.current.innerHTML="",this.frame_ref.current.appendChild(this.graphs[this.state.graph])}componentDidUpdate(){this.frame_ref.current.innerHTML="",this.frame_ref.current.appendChild(this.graphs[this.state.graph])}}const y1=new URL(window.location.href).searchParams;let wi=y1.has("lang")?y1.get("lang"):window.navigator.language;console.log("user language:",wi);const _t=new LR(wi,{ja:"./localization/ja-localization-react.json",en:"./localization/en-localization-react.json"});wi=_t.language;console.log("system language:",wi);const yk=jT.createRoot(document.getElementById("root"));yk.render(F.jsx(kM,{}));const Rt=new mo("contents_data");Rt.version(3).stores({servers:"name,address,option,display_name,version",collections:"name,data,version",cache:"hash,file"});document.readyState==="complete"?Ne("#loading-cover").hide():window.addEventListener("load",function(){Ne("#loading-cover").hide()});"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js");class Ln{constructor(e,r,n){switch(this.op_type=e,this.id=r,e){case"slider":this.def_val=n.def_val,this.min=n.min,this.max=n.max,this.step=n.step,this.unit=n.unit||"",this.ratio=n.ratio||1;break;case"toggle":this.def_val=n.def_val;break;default:console.warn(`op_type:${e} does not exist.`);break}}}const Fw=[new Ln("slider","bgm_volume",{def_val:100,min:0,max:100,step:.1,unit:"%"}),new Ln("slider","effect_volume",{def_val:100,min:0,max:100,step:.1,unit:"%"}),new Ln("slider","audio_offset",{def_val:0,min:-500,max:500,step:5,unit:"ms",ratio:1/1e3}),new Ln("slider","input_offset",{def_val:0,min:-500,max:500,step:5,unit:"ms",ratio:1/1e3}),new Ln("slider","mesh_vertexes",{def_val:3,min:2,max:10,step:1}),new Ln("slider","curv_vertexes",{def_val:3,min:2,max:10,step:1}),new Ln("slider","max_fps",{def_val:0,min:0,max:120,step:1,unit:"fps"}),new Ln("slider","texture_scale",{def_val:.5,min:.1,max:1,step:.05,unit:"x"}),new Ln("slider","render_scale",{def_val:1,min:.1,max:2,step:.05,unit:"x"}),new Ln("slider","start_interval",{def_val:3,min:0,max:5,step:1,unit:"s"}),new Ln("slider","unpause_interval",{def_val:3,min:0,max:5,step:1,unit:"s"}),new Ln("toggle","debug_mode",{def_val:!1}),new Ln("toggle","antialias",{def_val:!1})];let ce=window.TEMP={},jt="",ei="";const zf="https://script.google.com/macros/s/AKfycbxMYDHCiwTiQnmdv7UsKO0jKEpyX_ZFC171atQY1Ae1FqA7JIHD7eOY-xtmOw4Nl_ngYA/exec",cm=i=>new Promise((e,r)=>{i.text().then(n=>{let s=atob(n),a=new Uint8Array(s.length).map((l,c)=>s.charCodeAt(c));e(new Blob([a.buffer],{type:"application/octet-stream"}))})});let r_={};const Qf=4,lc=2;
